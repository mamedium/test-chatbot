"use client";(function(st,v,U,au){"use strict";function cu(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const O=cu(U),lu=cu(au);var uu={};function Xg(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}var ev=Object.defineProperty,tv=(e,t,n)=>t in e?ev(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,du=(e,t,n)=>tv(e,typeof t!="symbol"?t+"":t,n);let pt=class{constructor(){du(this,"_locking"),du(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let t;const n=new Promise(r=>t=()=>{this._locks-=1,r()}),i=this._locking.then(()=>t);return this._locking=this._locking.then(()=>n),i}};function Ve(e,t){if(!e)throw new Error(t)}const nv=34028234663852886e22,iv=-34028234663852886e22,rv=4294967295,ov=2147483647,sv=-2147483648;function Kr(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>ov||e<sv)throw new Error("invalid int 32: "+e)}function Bs(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>rv||e<0)throw new Error("invalid uint 32: "+e)}function hu(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>nv||e<iv))throw new Error("invalid float 32: "+e)}const fu=Symbol("@bufbuild/protobuf/enum-type");function av(e){const t=e[fu];return Ve(t,"missing enum type on enum object"),t}function pu(e,t,n,i){e[fu]=mu(t,n.map(r=>({no:r.no,name:r.name,localName:e[r.no]})))}function mu(e,t,n){const i=Object.create(null),r=Object.create(null),o=[];for(const s of t){const a=gu(s);o.push(a),i[s.name]=a,r[s.no]=a}return{typeName:e,values:o,findName(s){return i[s]},findNumber(s){return r[s]}}}function cv(e,t,n){const i={};for(const r of t){const o=gu(r);i[o.localName]=o.no,i[o.no]=o.localName}return pu(i,e,t),i}function gu(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class Vs{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,n){const i=this.getType(),r=i.runtime.bin,o=r.makeReadOptions(n);return r.readMessage(this,o.readerFactory(t),t.byteLength,o),this}fromJson(t,n){const i=this.getType(),r=i.runtime.json,o=r.makeReadOptions(n);return r.readMessage(i,t,o,this),this}fromJsonString(t,n){let i;try{i=JSON.parse(t)}catch(r){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(r instanceof Error?r.message:String(r)))}return this.fromJson(i,n)}toBinary(t){const n=this.getType(),i=n.runtime.bin,r=i.makeWriteOptions(t),o=r.writerFactory();return i.writeMessage(this,o,r),o.finish()}toJson(t){const n=this.getType(),i=n.runtime.json,r=i.makeWriteOptions(t);return i.writeMessage(this,r)}toJsonString(t){var n;const i=this.toJson(t);return JSON.stringify(i,null,(n=t?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function lv(e,t,n,i){var r;const o=(r=i?.localName)!==null&&r!==void 0?r:t.substring(t.lastIndexOf(".")+1),s={[o]:function(a){e.util.initFields(this),e.util.initPartial(a,this)}}[o];return Object.setPrototypeOf(s.prototype,new Vs),Object.assign(s,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary(a,c){return new s().fromBinary(a,c)},fromJson(a,c){return new s().fromJson(a,c)},fromJsonString(a,c){return new s().fromJsonString(a,c)},equals(a,c){return e.util.equals(s,a,c)}}),s}function uv(){let e=0,t=0;for(let i=0;i<28;i+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,(n&128)==0)return this.assertBounds(),[e,t];for(let i=3;i<=31;i+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function qs(e,t,n){for(let o=0;o<28;o=o+7){const s=e>>>o,a=!(!(s>>>7)&&t==0),c=(a?s|128:s)&255;if(n.push(c),!a)return}const i=e>>>28&15|(t&7)<<4,r=t>>3!=0;if(n.push((r?i|128:i)&255),!!r){for(let o=3;o<31;o=o+7){const s=t>>>o,a=!!(s>>>7),c=(a?s|128:s)&255;if(n.push(c),!a)return}n.push(t>>>31&1)}}const Yr=4294967296;function vu(e){const t=e[0]==="-";t&&(e=e.slice(1));const n=1e6;let i=0,r=0;function o(s,a){const c=Number(e.slice(s,a));r*=n,i=i*n+c,i>=Yr&&(r=r+(i/Yr|0),i=i%Yr)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),t?bu(i,r):Hs(i,r)}function dv(e,t){let n=Hs(e,t);const i=n.hi&2147483648;i&&(n=bu(n.lo,n.hi));const r=yu(n.lo,n.hi);return i?"-"+r:r}function yu(e,t){if({lo:e,hi:t}=hv(e,t),t<=2097151)return String(Yr*t+e);const n=e&16777215,i=(e>>>24|t<<8)&16777215,r=t>>16&65535;let o=n+i*6777216+r*6710656,s=i+r*8147497,a=r*2;const c=1e7;return o>=c&&(s+=Math.floor(o/c),o%=c),s>=c&&(a+=Math.floor(s/c),s%=c),a.toString()+ku(s)+ku(o)}function hv(e,t){return{lo:e>>>0,hi:t>>>0}}function Hs(e,t){return{lo:e|0,hi:t|0}}function bu(e,t){return t=~t,e?e=~e+1:t+=1,Hs(e,t)}const ku=e=>{const t=String(e);return"0000000".slice(t.length)+t};function Cu(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function fv(){let e=this.buf[this.pos++],t=e&127;if((e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,(e&128)==0)return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;(e&128)!==0&&n<10;n++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function pv(){const e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof uu!="object"||uu.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),s=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>o||l<r)throw new Error("int64 invalid: ".concat(c));return l},uParse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>a||l<s)throw new Error("uint64 invalid: ".concat(c));return l},enc(c){return e.setBigInt64(0,this.parse(c),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(c){return e.setBigInt64(0,this.uParse(c),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(c,l){return e.setInt32(0,c,!0),e.setInt32(4,l,!0),e.getBigInt64(0,!0)},uDec(c,l){return e.setInt32(0,c,!0),e.setInt32(4,l,!0),e.getBigUint64(0,!0)}}}const n=r=>Ve(/^-?[0-9]+$/.test(r),"int64 invalid: ".concat(r)),i=r=>Ve(/^[0-9]+$/.test(r),"uint64 invalid: ".concat(r));return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),i(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),n(r),vu(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),i(r),vu(r)},dec(r,o){return dv(r,o)},uDec(r,o){return yu(r,o)}}}const Fe=pv();var G;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(G||(G={}));var On;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(On||(On={}));function Nn(e,t,n){if(t===n)return!0;if(e==G.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array)||t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0}switch(e){case G.UINT64:case G.FIXED64:case G.INT64:case G.SFIXED64:case G.SINT64:return t==n}return!1}function Si(e,t){switch(e){case G.BOOL:return!1;case G.UINT64:case G.FIXED64:case G.INT64:case G.SFIXED64:case G.SINT64:return t==0?Fe.zero:"0";case G.DOUBLE:case G.FLOAT:return 0;case G.BYTES:return new Uint8Array(0);case G.STRING:return"";default:return 0}}function wu(e,t){switch(e){case G.BOOL:return t===!1;case G.STRING:return t==="";case G.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var We;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(We||(We={}));class mv{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let r=0;r<this.chunks.length;r++)t+=this.chunks[r].length;let n=new Uint8Array(t),i=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],i),i+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Bs(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Kr(t),Cu(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.textEncoder.encode(t);return this.uint32(n.byteLength),this.raw(n)}float(t){hu(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){Bs(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){Kr(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return Kr(t),t=(t<<1^t>>31)>>>0,Cu(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),i=new DataView(n.buffer),r=Fe.enc(t);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),i=new DataView(n.buffer),r=Fe.uEnc(t);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}int64(t){let n=Fe.enc(t);return qs(n.lo,n.hi,this.buf),this}sint64(t){let n=Fe.enc(t),i=n.hi>>31,r=n.lo<<1^i,o=(n.hi<<1|n.lo>>>31)^i;return qs(r,o,this.buf),this}uint64(t){let n=Fe.uEnc(t);return qs(n.lo,n.hi,this.buf),this}}class gv{constructor(t,n){this.varint64=uv,this.uint32=fv,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=n??new TextDecoder}tag(){let t=this.uint32(),n=t>>>3,i=t&7;if(n<=0||i<0||i>5)throw new Error("illegal tag: field no "+n+" wire type "+i);return[n,i]}skip(t,n){let i=this.pos;switch(t){case We.Varint:for(;this.buf[this.pos++]&128;);break;case We.Bit64:this.pos+=4;case We.Bit32:this.pos+=4;break;case We.LengthDelimited:let r=this.uint32();this.pos+=r;break;case We.StartGroup:for(;;){const[o,s]=this.tag();if(s===We.EndGroup){if(n!==void 0&&o!==n)throw new Error("invalid end group tag");break}this.skip(s,o)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return Fe.dec(...this.varint64())}uint64(){return Fe.uDec(...this.varint64())}sint64(){let[t,n]=this.varint64(),i=-(t&1);return t=(t>>>1|(n&1)<<31)^i,n=n>>>1^i,Fe.dec(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Fe.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Fe.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.textDecoder.decode(this.bytes())}}function vv(e,t,n,i){let r;return{typeName:t,extendee:n,get field(){if(!r){const o=typeof i=="function"?i():i;o.name=t.split(".").pop(),o.jsonName="[".concat(t,"]"),r=e.util.newFieldList([o]).list()[0]}return r},runtime:e}}function Su(e){const t=e.field.localName,n=Object.create(null);return n[t]=yv(e),[n,()=>n[t]]}function yv(e){const t=e.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return Si(t.T,t.L);case"message":const n=t.T,i=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function bv(e,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter(n=>n.no===t.no)}let dn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Qr=[];for(let e=0;e<dn.length;e++)Qr[dn[e].charCodeAt(0)]=e;Qr[45]=dn.indexOf("+"),Qr[95]=dn.indexOf("/");const Tu={dec(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),i=0,r=0,o,s=0;for(let a=0;a<e.length;a++){if(o=Qr[e.charCodeAt(a)],o===void 0)switch(e[a]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:s=o,r=1;break;case 1:n[i++]=s<<2|(o&48)>>4,s=o,r=2;break;case 2:n[i++]=(s&15)<<4|(o&60)>>2,s=o,r=3;break;case 3:n[i++]=(s&3)<<6|o,r=0;break}}if(r==1)throw Error("invalid base64 string.");return n.subarray(0,i)},enc(e){let t="",n=0,i,r=0;for(let o=0;o<e.length;o++)switch(i=e[o],n){case 0:t+=dn[i>>2],r=(i&3)<<4,n=1;break;case 1:t+=dn[r|i>>4],r=(i&15)<<2,n=2;break;case 2:t+=dn[r|i>>6],t+=dn[i&63],n=0;break}return n&&(t+=dn[r],t+="=",n==1&&(t+="=")),t}};function kv(e,t,n){_u(t,e);const i=t.runtime.bin.makeReadOptions(n),r=bv(e.getType().runtime.bin.listUnknownFields(e),t.field),[o,s]=Su(t);for(const a of r)t.runtime.bin.readField(o,i.readerFactory(a.data),t.field,a.wireType,i);return s()}function Cv(e,t,n,i){_u(t,e);const r=t.runtime.bin.makeReadOptions(i),o=t.runtime.bin.makeWriteOptions(i);if(xu(e,t)){const l=e.getType().runtime.bin.listUnknownFields(e).filter(u=>u.no!=t.field.no);e.getType().runtime.bin.discardUnknownFields(e);for(const u of l)e.getType().runtime.bin.onUnknownField(e,u.no,u.wireType,u.data)}const s=o.writerFactory();let a=t.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(a,n,s,o);const c=r.readerFactory(s.finish());for(;c.pos<c.len;){const[l,u]=c.tag(),d=c.skip(u,l);e.getType().runtime.bin.onUnknownField(e,l,u,d)}}function xu(e,t){const n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find(i=>i.no==t.field.no)}function _u(e,t){Ve(e.extendee.typeName==t.getType().typeName,"extension ".concat(e.typeName," can only be applied to message ").concat(e.extendee.typeName))}function Eu(e,t){const n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?t[n]!==void 0:e.kind=="enum"?t[n]!==e.T.values[0].no:!wu(e.T,t[n]);case"message":return t[n]!==void 0;case"map":return Object.keys(t[n]).length>0}}function Pu(e,t){const n=e.localName,i=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=i?e.T.values[0].no:void 0;break;case"scalar":t[n]=i?Si(e.T,e.L):void 0;break;case"message":t[n]=void 0;break}}function hn(e,t){if(e===null||typeof e!="object"||!Object.getOwnPropertyNames(Vs.prototype).every(i=>i in e&&typeof e[i]=="function"))return!1;const n=e.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:t===void 0?!0:n.typeName==t.typeName}function Mu(e,t){return hn(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}G.DOUBLE,G.FLOAT,G.INT64,G.UINT64,G.INT32,G.UINT32,G.BOOL,G.STRING,G.BYTES;const Iu={ignoreUnknownFields:!1},Ou={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function wv(e){return e?Object.assign(Object.assign({},Iu),e):Iu}function Sv(e){return e?Object.assign(Object.assign({},Ou),e):Ou}const Jr=Symbol(),Xr=Symbol();function Tv(){return{makeReadOptions:wv,makeWriteOptions:Sv,readMessage(e,t,n,i){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error("cannot decode message ".concat(e.typeName," from JSON: ").concat(Gt(t)));i=i??new e;const r=new Map,o=n.typeRegistry;for(const[s,a]of Object.entries(t)){const c=e.fields.findJsonName(s);if(c){if(c.oneof){if(a===null&&c.kind=="scalar")continue;const l=r.get(c.oneof);if(l!==void 0)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: multiple keys for oneof "').concat(c.oneof.name,'" present: "').concat(l,'", "').concat(s,'"'));r.set(c.oneof,s)}Nu(i,a,c,n,e)}else{let l=!1;if(o?.findExtension&&s.startsWith("[")&&s.endsWith("]")){const u=o.findExtension(s.substring(1,s.length-1));if(u&&u.extendee.typeName==e.typeName){l=!0;const[d,f]=Su(u);Nu(d,a,u.field,n,u),Cv(i,u,f(),n)}}if(!l&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: key "').concat(s,'" is unknown'))}}return i},writeMessage(e,t){const n=e.getType(),i={};let r;try{for(r of n.fields.byNumber()){if(!Eu(r,e)){if(r.req)throw"required field not set";if(!t.emitDefaultValues||!_v(r))continue}const s=r.oneof?e[r.oneof.localName].value:e[r.localName],a=Au(r,s,t);a!==void 0&&(i[t.useProtoFieldName?r.name:r.jsonName]=a)}const o=t.typeRegistry;if(o?.findExtensionFor)for(const s of n.runtime.bin.listUnknownFields(e)){const a=o.findExtensionFor(n.typeName,s.no);if(a&&xu(e,a)){const c=kv(e,a,t),l=Au(a.field,c,t);l!==void 0&&(i[a.field.jsonName]=l)}}}catch(o){const s=r?"cannot encode field ".concat(n.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),a=o instanceof Error?o.message:String(o);throw new Error(s+(a.length>0?": ".concat(a):""))}return i},readScalar(e,t,n){return ar(e,t,n??On.BIGINT,!0)},writeScalar(e,t,n){if(t!==void 0&&(n||wu(e,t)))return eo(e,t)},debug:Gt}}function Gt(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function Nu(e,t,n,i,r){let o=n.localName;if(n.repeated){if(Ve(n.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Gt(t)));const s=e[o];for(const a of t){if(a===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Gt(a)));switch(n.kind){case"message":s.push(n.T.fromJson(a,i));break;case"enum":const c=Ws(n.T,a,i.ignoreUnknownFields,!0);c!==Xr&&s.push(c);break;case"scalar":try{s.push(ar(n.T,a,n.L,!0))}catch(l){let u="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Gt(a));throw l instanceof Error&&l.message.length>0&&(u+=": ".concat(l.message)),new Error(u)}break}}}else if(n.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Gt(t)));const s=e[o];for(const[a,c]of Object.entries(t)){if(c===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: map value null"));let l;try{l=xv(n.K,a)}catch(u){let d="cannot decode map key for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Gt(t));throw u instanceof Error&&u.message.length>0&&(d+=": ".concat(u.message)),new Error(d)}switch(n.V.kind){case"message":s[l]=n.V.T.fromJson(c,i);break;case"enum":const u=Ws(n.V.T,c,i.ignoreUnknownFields,!0);u!==Xr&&(s[l]=u);break;case"scalar":try{s[l]=ar(n.V.T,c,On.BIGINT,!0)}catch(d){let f="cannot decode map value for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Gt(t));throw d instanceof Error&&d.message.length>0&&(f+=": ".concat(d.message)),new Error(f)}break}}}else switch(n.oneof&&(e=e[n.oneof.localName]={case:o},o="value"),n.kind){case"message":const s=n.T;if(t===null&&s.typeName!="google.protobuf.Value")return;let a=e[o];hn(a)?a.fromJson(t,i):(e[o]=a=s.fromJson(t,i),s.fieldWrapper&&!n.oneof&&(e[o]=s.fieldWrapper.unwrapField(a)));break;case"enum":const c=Ws(n.T,t,i.ignoreUnknownFields,!1);switch(c){case Jr:Pu(n,e);break;case Xr:break;default:e[o]=c;break}break;case"scalar":try{const l=ar(n.T,t,n.L,!1);switch(l){case Jr:Pu(n,e);break;default:e[o]=l;break}}catch(l){let u="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Gt(t));throw l instanceof Error&&l.message.length>0&&(u+=": ".concat(l.message)),new Error(u)}break}}function xv(e,t){if(e===G.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return ar(e,t,On.BIGINT,!0).toString()}function ar(e,t,n,i){if(t===null)return i?Si(e,n):Jr;switch(e){case G.DOUBLE:case G.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const r=Number(t);if(Number.isNaN(r)||!Number.isFinite(r))break;return e==G.FLOAT&&hu(r),r;case G.INT32:case G.FIXED32:case G.SFIXED32:case G.SINT32:case G.UINT32:let o;if(typeof t=="number"?o=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(o=Number(t)),o===void 0)break;return e==G.UINT32||e==G.FIXED32?Bs(o):Kr(o),o;case G.INT64:case G.SFIXED64:case G.SINT64:if(typeof t!="number"&&typeof t!="string")break;const s=Fe.parse(t);return n?s.toString():s;case G.FIXED64:case G.UINT64:if(typeof t!="number"&&typeof t!="string")break;const a=Fe.uParse(t);return n?a.toString():a;case G.BOOL:if(typeof t!="boolean")break;return t;case G.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case G.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return Tu.dec(t)}throw new Error}function Ws(e,t,n,i){if(t===null)return e.typeName=="google.protobuf.NullValue"?0:i?e.values[0].no:Jr;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const r=e.findName(t);if(r!==void 0)return r.no;if(n)return Xr;break}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(Gt(t)))}function _v(e){return e.repeated||e.kind=="map"?!0:!(e.oneof||e.kind=="message"||e.opt||e.req)}function Au(e,t,n){if(e.kind=="map"){Ve(typeof t=="object"&&t!=null);const i={},r=Object.entries(t);switch(e.V.kind){case"scalar":for(const[s,a]of r)i[s.toString()]=eo(e.V.T,a);break;case"message":for(const[s,a]of r)i[s.toString()]=a.toJson(n);break;case"enum":const o=e.V.T;for(const[s,a]of r)i[s.toString()]=Zs(o,a,n.enumAsInteger);break}return n.emitDefaultValues||r.length>0?i:void 0}if(e.repeated){Ve(Array.isArray(t));const i=[];switch(e.kind){case"scalar":for(let r=0;r<t.length;r++)i.push(eo(e.T,t[r]));break;case"enum":for(let r=0;r<t.length;r++)i.push(Zs(e.T,t[r],n.enumAsInteger));break;case"message":for(let r=0;r<t.length;r++)i.push(t[r].toJson(n));break}return n.emitDefaultValues||i.length>0?i:void 0}switch(e.kind){case"scalar":return eo(e.T,t);case"enum":return Zs(e.T,t,n.enumAsInteger);case"message":return Mu(e.T,t).toJson(n)}}function Zs(e,t,n){var i;if(Ve(typeof t=="number"),e.typeName=="google.protobuf.NullValue")return null;if(n)return t;const r=e.findNumber(t);return(i=r?.name)!==null&&i!==void 0?i:t}function eo(e,t){switch(e){case G.INT32:case G.SFIXED32:case G.SINT32:case G.FIXED32:case G.UINT32:return Ve(typeof t=="number"),t;case G.FLOAT:case G.DOUBLE:return Ve(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case G.STRING:return Ve(typeof t=="string"),t;case G.BOOL:return Ve(typeof t=="boolean"),t;case G.UINT64:case G.FIXED64:case G.INT64:case G.SFIXED64:case G.SINT64:return Ve(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case G.BYTES:return Ve(t instanceof Uint8Array),Tu.enc(t)}}const Ti=Symbol("@bufbuild/protobuf/unknown-fields"),Ru={readUnknownFields:!0,readerFactory:e=>new gv(e)},Du={writeUnknownFields:!0,writerFactory:()=>new mv};function Ev(e){return e?Object.assign(Object.assign({},Ru),e):Ru}function Pv(e){return e?Object.assign(Object.assign({},Du),e):Du}function Mv(){return{makeReadOptions:Ev,makeWriteOptions:Pv,listUnknownFields(e){var t;return(t=e[Ti])!==null&&t!==void 0?t:[]},discardUnknownFields(e){delete e[Ti]},writeUnknownFields(e,t){const i=e[Ti];if(i)for(const r of i)t.tag(r.no,r.wireType).raw(r.data)},onUnknownField(e,t,n,i){const r=e;Array.isArray(r[Ti])||(r[Ti]=[]),r[Ti].push({no:t,wireType:n,data:i})},readMessage(e,t,n,i,r){const o=e.getType(),s=r?t.len:t.pos+n;let a,c;for(;t.pos<s&&([a,c]=t.tag(),!(r===!0&&c==We.EndGroup));){const l=o.fields.find(a);if(!l){const u=t.skip(c,a);i.readUnknownFields&&this.onUnknownField(e,a,c,u);continue}Lu(e,t,l,c,i)}if(r&&(c!=We.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:Lu,writeMessage(e,t,n){const i=e.getType();for(const r of i.fields.byNumber()){if(!Eu(r,e)){if(r.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(r.name," to binary: required field not set"));continue}const o=r.oneof?e[r.oneof.localName].value:e[r.localName];Fu(r,o,t,n)}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,i){t!==void 0&&Fu(e,t,n,i)}}}function Lu(e,t,n,i,r){let{repeated:o,localName:s}=n;switch(n.oneof&&(e=e[n.oneof.localName],e.case!=s&&delete e.value,e.case=s,s="value"),n.kind){case"scalar":case"enum":const a=n.kind=="enum"?G.INT32:n.T;let c=no;if(n.kind=="scalar"&&n.L>0&&(c=Ov),o){let f=e[s];if(i==We.LengthDelimited&&a!=G.STRING&&a!=G.BYTES){let m=t.uint32()+t.pos;for(;t.pos<m;)f.push(c(t,a))}else f.push(c(t,a))}else e[s]=c(t,a);break;case"message":const l=n.T;o?e[s].push(to(t,new l,r,n)):hn(e[s])?to(t,e[s],r,n):(e[s]=to(t,new l,r,n),l.fieldWrapper&&!n.oneof&&!n.repeated&&(e[s]=l.fieldWrapper.unwrapField(e[s])));break;case"map":let[u,d]=Iv(n,t,r);e[s][u]=d;break}}function to(e,t,n,i){const r=t.getType().runtime.bin,o=i?.delimited;return r.readMessage(t,e,o?i.no:e.uint32(),n,o),t}function Iv(e,t,n){const i=t.uint32(),r=t.pos+i;let o,s;for(;t.pos<r;){const[a]=t.tag();switch(a){case 1:o=no(t,e.K);break;case 2:switch(e.V.kind){case"scalar":s=no(t,e.V.T);break;case"enum":s=t.int32();break;case"message":s=to(t,new e.V.T,n,void 0);break}break}}if(o===void 0&&(o=Si(e.K,On.BIGINT)),typeof o!="string"&&typeof o!="number"&&(o=o.toString()),s===void 0)switch(e.V.kind){case"scalar":s=Si(e.V.T,On.BIGINT);break;case"enum":s=e.V.T.values[0].no;break;case"message":s=new e.V.T;break}return[o,s]}function Ov(e,t){const n=no(e,t);return typeof n=="bigint"?n.toString():n}function no(e,t){switch(t){case G.STRING:return e.string();case G.BOOL:return e.bool();case G.DOUBLE:return e.double();case G.FLOAT:return e.float();case G.INT32:return e.int32();case G.INT64:return e.int64();case G.UINT64:return e.uint64();case G.FIXED64:return e.fixed64();case G.BYTES:return e.bytes();case G.FIXED32:return e.fixed32();case G.SFIXED32:return e.sfixed32();case G.SFIXED64:return e.sfixed64();case G.SINT64:return e.sint64();case G.UINT32:return e.uint32();case G.SINT32:return e.sint32()}}function Fu(e,t,n,i){Ve(t!==void 0);const r=e.repeated;switch(e.kind){case"scalar":case"enum":let o=e.kind=="enum"?G.INT32:e.T;if(r)if(Ve(Array.isArray(t)),e.packed)Av(n,o,e.no,t);else for(const s of t)cr(n,o,e.no,s);else cr(n,o,e.no,t);break;case"message":if(r){Ve(Array.isArray(t));for(const s of t)zu(n,i,e,s)}else zu(n,i,e,t);break;case"map":Ve(typeof t=="object"&&t!=null);for(const[s,a]of Object.entries(t))Nv(n,i,e,s,a);break}}function Nv(e,t,n,i,r){e.tag(n.no,We.LengthDelimited),e.fork();let o=i;switch(n.K){case G.INT32:case G.FIXED32:case G.UINT32:case G.SFIXED32:case G.SINT32:o=Number.parseInt(i);break;case G.BOOL:Ve(i=="true"||i=="false"),o=i=="true";break}switch(cr(e,n.K,1,o),n.V.kind){case"scalar":cr(e,n.V.T,2,r);break;case"enum":cr(e,G.INT32,2,r);break;case"message":Ve(r!==void 0),e.tag(2,We.LengthDelimited).bytes(r.toBinary(t));break}e.join()}function zu(e,t,n,i){const r=Mu(n.T,i);n.delimited?e.tag(n.no,We.StartGroup).raw(r.toBinary(t)).tag(n.no,We.EndGroup):e.tag(n.no,We.LengthDelimited).bytes(r.toBinary(t))}function cr(e,t,n,i){Ve(i!==void 0);let[r,o]=Uu(t);e.tag(n,r)[o](i)}function Av(e,t,n,i){if(!i.length)return;e.tag(n,We.LengthDelimited).fork();let[,r]=Uu(t);for(let o=0;o<i.length;o++)e[r](i[o]);e.join()}function Uu(e){let t=We.Varint;switch(e){case G.BYTES:case G.STRING:t=We.LengthDelimited;break;case G.DOUBLE:case G.FIXED64:case G.SFIXED64:t=We.Bit64;break;case G.FIXED32:case G.SFIXED32:case G.FLOAT:t=We.Bit32;break}const n=G[e].toLowerCase();return[t,n]}function Rv(){return{setEnumType:pu,initPartial(e,t){if(e===void 0)return;const n=t.getType();for(const i of n.fields.byMember()){const r=i.localName,o=t,s=e;if(s[r]!=null)switch(i.kind){case"oneof":const a=s[r].case;if(a===void 0)continue;const c=i.findField(a);let l=s[r].value;c&&c.kind=="message"&&!hn(l,c.T)?l=new c.T(l):c&&c.kind==="scalar"&&c.T===G.BYTES&&(l=lr(l)),o[r]={case:a,value:l};break;case"scalar":case"enum":let u=s[r];i.T===G.BYTES&&(u=i.repeated?u.map(lr):lr(u)),o[r]=u;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===G.BYTES)for(const[h,m]of Object.entries(s[r]))o[r][h]=lr(m);else Object.assign(o[r],s[r]);break;case"message":const f=i.V.T;for(const h of Object.keys(s[r])){let m=s[r][h];f.fieldWrapper||(m=new f(m)),o[r][h]=m}break}break;case"message":const d=i.T;if(i.repeated)o[r]=s[r].map(f=>hn(f,d)?f:new d(f));else{const f=s[r];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?o[r]=lr(f):o[r]=f:o[r]=hn(f,d)?f:new d(f)}break}}},equals(e,t,n){return t===n?!0:!t||!n?!1:e.fields.byMember().every(i=>{const r=t[i.localName],o=n[i.localName];if(i.repeated){if(r.length!==o.length)return!1;switch(i.kind){case"message":return r.every((s,a)=>i.T.equals(s,o[a]));case"scalar":return r.every((s,a)=>Nn(i.T,s,o[a]));case"enum":return r.every((s,a)=>Nn(G.INT32,s,o[a]))}throw new Error("repeated cannot contain ".concat(i.kind))}switch(i.kind){case"message":let s=r,a=o;return i.T.fieldWrapper&&(s!==void 0&&!hn(s)&&(s=i.T.fieldWrapper.wrapField(s)),a!==void 0&&!hn(a)&&(a=i.T.fieldWrapper.wrapField(a))),i.T.equals(s,a);case"enum":return Nn(G.INT32,r,o);case"scalar":return Nn(i.T,r,o);case"oneof":if(r.case!==o.case)return!1;const c=i.findField(r.case);if(c===void 0)return!0;switch(c.kind){case"message":return c.T.equals(r.value,o.value);case"enum":return Nn(G.INT32,r.value,o.value);case"scalar":return Nn(c.T,r.value,o.value)}throw new Error("oneof cannot contain ".concat(c.kind));case"map":const l=Object.keys(r).concat(Object.keys(o));switch(i.V.kind){case"message":const u=i.V.T;return l.every(f=>u.equals(r[f],o[f]));case"enum":return l.every(f=>Nn(G.INT32,r[f],o[f]));case"scalar":const d=i.V.T;return l.every(f=>Nn(d,r[f],o[f]))}break}})},clone(e){const t=e.getType(),n=new t,i=n;for(const r of t.fields.byMember()){const o=e[r.localName];let s;if(r.repeated)s=o.map(io);else if(r.kind=="map"){s=i[r.localName];for(const[a,c]of Object.entries(o))s[a]=io(c)}else r.kind=="oneof"?s=r.findField(o.case)?{case:o.case,value:io(o.value)}:{case:void 0}:s=io(o);i[r.localName]=s}for(const r of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(i,r.no,r.wireType,r.data);return n}}}function io(e){if(e===void 0)return e;if(hn(e))return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function lr(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function Dv(e,t,n){return{syntax:e,json:Tv(),bin:Mv(),util:Object.assign(Object.assign({},Rv()),{newFieldList:t,initFields:n}),makeMessageType(i,r,o){return lv(this,i,r,o)},makeEnum:cv,makeEnumType:mu,getEnumType:av,makeExtension(i,r,o){return vv(this,i,r,o)}}}class Lv{constructor(t,n){this._fields=t,this._normalizer=n}findJsonName(t){if(!this.jsonNames){const n={};for(const i of this.list())n[i.jsonName]=n[i.name]=i;this.jsonNames=n}return this.jsonNames[t]}find(t){if(!this.numbers){const n={};for(const i of this.list())n[i.no]=i;this.numbers=n}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,n)=>t.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let n;for(const i of this.list())i.oneof?i.oneof!==n&&(n=i.oneof,t.push(n)):t.push(i)}return this.members}}function $u(e,t){const n=ju(e);return t?n:Bv(jv(n))}function Fv(e){return $u(e,!1)}const zv=ju;function ju(e){let t=!1;const n=[];for(let i=0;i<e.length;i++){let r=e.charAt(i);switch(r){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),t=!1;break;default:t&&(t=!1,r=r.toUpperCase()),n.push(r);break}}return n.join("")}const Uv=new Set(["constructor","toString","toJSON","valueOf"]),$v=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Bu=e=>"".concat(e,"$"),jv=e=>$v.has(e)?Bu(e):e,Bv=e=>Uv.has(e)?Bu(e):e;class Vv{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=Fv(t)}addField(t){Ve(t.oneof===this,"field ".concat(t.name," not one of ").concat(this.name)),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[t]}}function qv(e,t){var n,i,r,o,s,a;const c=[];let l;for(const u of typeof e=="function"?e():e){const d=u;if(d.localName=$u(u.name,u.oneof!==void 0),d.jsonName=(n=u.jsonName)!==null&&n!==void 0?n:zv(u.name),d.repeated=(i=u.repeated)!==null&&i!==void 0?i:!1,u.kind=="scalar"&&(d.L=(r=u.L)!==null&&r!==void 0?r:On.BIGINT),d.delimited=(o=u.delimited)!==null&&o!==void 0?o:!1,d.req=(s=u.req)!==null&&s!==void 0?s:!1,d.opt=(a=u.opt)!==null&&a!==void 0?a:!1,u.packed===void 0&&(d.packed=u.kind=="enum"||u.kind=="scalar"&&u.T!=G.BYTES&&u.T!=G.STRING),u.oneof!==void 0){const f=typeof u.oneof=="string"?u.oneof:u.oneof.name;(!l||l.name!=f)&&(l=new Vv(f)),d.oneof=l,l.addField(d)}c.push(d)}return c}const j=Dv("proto3",e=>new Lv(e,t=>qv(t)),e=>{for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,i=e;if(t.repeated){i[n]=[];continue}switch(t.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=Si(t.T,t.L);break}}});class mt extends Vs{constructor(t){super(),this.seconds=Fe.zero,this.nanos=0,j.util.initPartial(t,this)}fromJson(t,n){if(typeof t!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(j.json.debug(t)));const i=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Fe.parse(r/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(t){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?i="."+r.substring(0,3)+"Z":r.substring(6)==="000"?i="."+r.substring(0,6)+"Z":i="."+r+"Z"}return new Date(n).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return mt.fromDate(new Date)}static fromDate(t){const n=t.getTime();return new mt({seconds:Fe.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(t,n){return new mt().fromBinary(t,n)}static fromJson(t,n){return new mt().fromJson(t,n)}static fromJsonString(t,n){return new mt().fromJsonString(t,n)}static equals(t,n){return j.util.equals(mt,t,n)}}mt.runtime=j,mt.typeName="google.protobuf.Timestamp",mt.fields=j.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const Hv=j.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:mt},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:Wv,repeated:!0},{no:5,name:"events",kind:"message",T:Gv,repeated:!0}]),Wv=j.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:Zv,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),Zv=j.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:mt},{no:3,name:"value",kind:"scalar",T:2}]),Gv=j.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:mt},{no:7,name:"normalized_end_timestamp",kind:"message",T:mt,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),Vu=j.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Lt=j.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),Ge=j.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),Gs=j.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),ur=j.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),dr=j.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Ft=j.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),xi=j.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),Kv=j.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),it=j.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),ro=j.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:oo,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:id}]),oo=j.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),Yv=j.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:j.getEnumType(Ge),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),ti=j.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:j.getEnumType(_i)},{no:4,name:"tracks",kind:"message",T:Ei,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:Yv},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:j.getEnumType(ni)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:j.getEnumType(Ft)},{no:18,name:"kind_details",kind:"enum",T:j.getEnumType(Qv),repeated:!0}]),_i=j.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),ni=j.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),Qv=j.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Tt=j.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),Jv=j.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:ii,repeated:!0}]),Ei=j.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:j.getEnumType(Lt)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:j.getEnumType(Ge)},{no:10,name:"layers",kind:"message",T:ii,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:Jv,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:j.getEnumType(Tt)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:id},{no:19,name:"audio_features",kind:"enum",T:j.getEnumType(it),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:j.getEnumType(Vu)}]),ii=j.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:j.getEnumType(Gs)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),gt=j.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:j.getEnumType(me)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:Hu,oneof:"value"},{no:3,name:"speaker",kind:"message",T:Xv,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:Wu,oneof:"value"},{no:7,name:"transcription",kind:"message",T:ey,oneof:"value"},{no:8,name:"metrics",kind:"message",T:Hv,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Ks,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:Zu,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:Gu,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:Ku,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Qs,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:Js,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:Xs,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),me=j.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),Xv=j.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:qu,repeated:!0}]),qu=j.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),Hu=j.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),Wu=j.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),ey=j.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:ty,repeated:!0}]),ty=j.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Ks=j.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),Zu=j.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),Gu=j.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),Ku=j.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:Yu,oneof:"value"}]),Yu=j.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),Qu=j.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),Ju=j.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:j.getEnumType(Xu)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),Xu=j.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),ny=j.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:j.getEnumType(ed)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),ed=j.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),td=j.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:nd},{no:2,name:"screen",kind:"message",T:nd},{no:3,name:"resume_connection",kind:"enum",T:j.getEnumType(dr)},{no:4,name:"disabled_codecs",kind:"message",T:iy},{no:5,name:"force_relay",kind:"enum",T:j.getEnumType(dr)}]),nd=j.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:j.getEnumType(dr)}]),iy=j.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:oo,repeated:!0},{no:2,name:"publish",kind:"message",T:oo,repeated:!0}]),id=j.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),Ys=j.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),rd=j.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:j.getEnumType(Ys)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),od=j.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Qs=j.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:j.getEnumType(Tt)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:rd,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:od,oneof:"content_header"}],{localName:"DataStream_Header"}),Js=j.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),Xs=j.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),zt=j.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),ea=j.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),ry=j.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),oy=j.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:ri,oneof:"message"},{no:2,name:"answer",kind:"message",T:ri,oneof:"message"},{no:3,name:"trickle",kind:"message",T:ia,oneof:"message"},{no:4,name:"add_track",kind:"message",T:na,oneof:"message"},{no:5,name:"mute",kind:"message",T:ra,oneof:"message"},{no:6,name:"subscription",kind:"message",T:so,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:ad,oneof:"message"},{no:8,name:"leave",kind:"message",T:ao,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:ld,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:fd,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:pd,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Kt,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:ud,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:vd,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:cd,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:uy,oneof:"message"}]),sd=j.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:sy,oneof:"message"},{no:2,name:"answer",kind:"message",T:ri,oneof:"message"},{no:3,name:"offer",kind:"message",T:ri,oneof:"message"},{no:4,name:"trickle",kind:"message",T:ia,oneof:"message"},{no:5,name:"update",kind:"message",T:ly,oneof:"message"},{no:6,name:"track_published",kind:"message",T:oa,oneof:"message"},{no:8,name:"leave",kind:"message",T:ao,oneof:"message"},{no:9,name:"mute",kind:"message",T:ra,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:dy,oneof:"message"},{no:11,name:"room_update",kind:"message",T:hy,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:py,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:gy,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:yy,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:by,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:cy,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:ay,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:Cy,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:Ty,oneof:"message"},{no:22,name:"request_response",kind:"message",T:xy,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:_y,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:ky,oneof:"message"}]),ta=j.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),na=j.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:j.getEnumType(Lt)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:j.getEnumType(Ge)},{no:9,name:"layers",kind:"message",T:ii,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:ta,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:j.getEnumType(Tt)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:j.getEnumType(Vu)},{no:17,name:"audio_features",kind:"enum",T:j.getEnumType(it),repeated:!0}]),ia=j.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:j.getEnumType(zt)},{no:3,name:"final",kind:"scalar",T:8}]),ra=j.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),sy=j.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:ro},{no:2,name:"participant",kind:"message",T:ti},{no:3,name:"other_participants",kind:"message",T:ti,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:dd,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:td},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:Ju},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:oo,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),ay=j.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:dd,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:td},{no:3,name:"server_info",kind:"message",T:Ju},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),oa=j.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Ei}]),cy=j.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),ri=j.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13}]),ly=j.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:ti,repeated:!0}]),so=j.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:Qu,repeated:!0}]),ad=j.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:j.getEnumType(Gs)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),cd=j.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:j.getEnumType(it),repeated:!0}]),uy=j.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),ao=j.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:j.getEnumType(Ft)},{no:3,name:"action",kind:"enum",T:j.getEnumType(Pi)},{no:4,name:"regions",kind:"message",T:wy}]),Pi=j.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),ld=j.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:ii,repeated:!0}]),ud=j.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),dd=j.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),dy=j.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:qu,repeated:!0}]),hy=j.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:ro}]),fy=j.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:j.getEnumType(ur)},{no:3,name:"score",kind:"scalar",T:2}]),py=j.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:fy,repeated:!0}]),my=j.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:j.getEnumType(ea)}]),gy=j.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:my,repeated:!0}]),sa=j.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:j.getEnumType(Gs)},{no:2,name:"enabled",kind:"scalar",T:8}]),vy=j.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:sa,repeated:!0}]),yy=j.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:sa,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:vy,repeated:!0}]),hd=j.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),fd=j.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:hd,repeated:!0}]),by=j.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),ky=j.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:ro},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:ti},{no:4,name:"other_participants",kind:"message",T:ti,repeated:!0}]),pd=j.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:ri},{no:2,name:"subscription",kind:"message",T:so},{no:3,name:"publish_tracks",kind:"message",T:oa,repeated:!0},{no:4,name:"data_channels",kind:"message",T:gd,repeated:!0},{no:5,name:"offer",kind:"message",T:ri},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:md,repeated:!0}]),md=j.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),gd=j.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:j.getEnumType(zt)}]),Kt=j.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:j.getEnumType(ry),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),vd=j.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),Cy=j.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),wy=j.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:Sy,repeated:!0}]),Sy=j.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),Ty=j.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:j.getEnumType(Kv)}]),xy=j.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:j.getEnumType(aa)},{no:3,name:"message",kind:"scalar",T:9}]),aa=j.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),_y=j.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function Ey(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var co={exports:{}},Py=co.exports,yd;function My(){return yd||(yd=1,(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(Py,function(){var t=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},s=null;function a(p,y){var g=p[y];if(typeof g.bind=="function")return g.bind(p);try{return Function.prototype.bind.call(g,p)}catch{return function(){return Function.prototype.apply.apply(g,[p,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(p){return p==="debug"&&(p="log"),typeof console===n?!1:p==="trace"&&i?c:console[p]!==void 0?a(console,p):console.log!==void 0?a(console,"log"):t}function u(){for(var p=this.getLevel(),y=0;y<r.length;y++){var g=r[y];this[g]=y<p?t:this.methodFactory(g,p,this.name)}if(this.log=this.debug,typeof console===n&&p<this.levels.SILENT)return"No console available for logging"}function d(p){return function(){typeof console!==n&&(u.call(this),this[p].apply(this,arguments))}}function f(p,y,g){return l(p)||d.apply(this,arguments)}function h(p,y){var g=this,S,C,w,k="loglevel";typeof p=="string"?k+=":"+p:typeof p=="symbol"&&(k=void 0);function b(M){var R=(r[M]||"silent").toUpperCase();if(!(typeof window===n||!k)){try{window.localStorage[k]=R;return}catch{}try{window.document.cookie=encodeURIComponent(k)+"="+R+";"}catch{}}}function x(){var M;if(!(typeof window===n||!k)){try{M=window.localStorage[k]}catch{}if(typeof M===n)try{var R=window.document.cookie,z=encodeURIComponent(k),D=R.indexOf(z+"=");D!==-1&&(M=/^([^;]+)/.exec(R.slice(D+z.length+1))[1])}catch{}return g.levels[M]===void 0&&(M=void 0),M}}function T(){if(!(typeof window===n||!k)){try{window.localStorage.removeItem(k)}catch{}try{window.document.cookie=encodeURIComponent(k)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function P(M){var R=M;if(typeof R=="string"&&g.levels[R.toUpperCase()]!==void 0&&(R=g.levels[R.toUpperCase()]),typeof R=="number"&&R>=0&&R<=g.levels.SILENT)return R;throw new TypeError("log.setLevel() called with invalid level: "+M)}g.name=p,g.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},g.methodFactory=y||f,g.getLevel=function(){return w??C??S},g.setLevel=function(M,R){return w=P(M),R!==!1&&b(w),u.call(g)},g.setDefaultLevel=function(M){C=P(M),x()||g.setLevel(M,!1)},g.resetLevel=function(){w=null,T(),u.call(g)},g.enableAll=function(M){g.setLevel(g.levels.TRACE,M)},g.disableAll=function(M){g.setLevel(g.levels.SILENT,M)},g.rebuild=function(){if(s!==g&&(S=P(s.getLevel())),u.call(g),s===g)for(var M in o)o[M].rebuild()},S=P(s?s.getLevel():"WARN");var A=x();A!=null&&(w=P(A)),u.call(g)}s=new h,s.getLogger=function(y){if(typeof y!="symbol"&&typeof y!="string"||y==="")throw new TypeError("You must supply a name when creating a logger.");var g=o[y];return g||(g=o[y]=new h(y,s.methodFactory)),g};var m=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=m),s},s.getLoggers=function(){return o},s.default=s,s})})(co)),co.exports}var lo=My(),ca;(function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"})(ca||(ca={}));var Ut;(function(e){e.Default="livekit",e.Room="livekit-room",e.Participant="livekit-participant",e.Track="livekit-track",e.Publication="livekit-track-publication",e.Engine="livekit-engine",e.Signal="livekit-signal",e.PCManager="livekit-pc-manager",e.PCTransport="livekit-pc-transport",e.E2EE="lk-e2ee"})(Ut||(Ut={}));let be=lo.getLogger("livekit");Object.values(Ut).map(e=>lo.getLogger(e)),be.setDefaultLevel(ca.info);function fn(e){const t=lo.getLogger(e);return t.setDefaultLevel(be.getLevel()),t}const Iy=lo.getLogger("lk-e2ee"),hr=7e3,Oy=[0,300,4*300,9*300,16*300,hr,hr,hr,hr,hr];class Ny{constructor(t){this._retryDelays=t!==void 0?[...t]:Oy}nextRetryDelayInMs(t){if(t.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[t.retryCount];return t.retryCount<=1?n:n+Math.random()*1e3}}function Ay(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function I(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(d){s(d)}}function c(u){try{l(i.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})}function bd(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function pn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof bd=="function"?bd(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}typeof SuppressedError=="function"&&SuppressedError;var uo={exports:{}},kd;function Ry(){if(kd)return uo.exports;kd=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,b,x){return Function.prototype.apply.call(k,b,x)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function i(w){console&&console.warn&&console.warn(w)}var r=Number.isNaN||function(k){return k!==k};function o(){o.init.call(this)}uo.exports=o,uo.exports.once=g,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(w){if(typeof w!="number"||w<0||r(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");s=w}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||r(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function c(w){return w._maxListeners===void 0?o.defaultMaxListeners:w._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(k){for(var b=[],x=1;x<arguments.length;x++)b.push(arguments[x]);var T=k==="error",P=this._events;if(P!==void 0)T=T&&P.error===void 0;else if(!T)return!1;if(T){var A;if(b.length>0&&(A=b[0]),A instanceof Error)throw A;var M=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw M.context=A,M}var R=P[k];if(R===void 0)return!1;if(typeof R=="function")t(R,this,b);else for(var z=R.length,D=m(R,z),x=0;x<z;++x)t(D[x],this,b);return!0};function l(w,k,b,x){var T,P,A;if(a(b),P=w._events,P===void 0?(P=w._events=Object.create(null),w._eventsCount=0):(P.newListener!==void 0&&(w.emit("newListener",k,b.listener?b.listener:b),P=w._events),A=P[k]),A===void 0)A=P[k]=b,++w._eventsCount;else if(typeof A=="function"?A=P[k]=x?[b,A]:[A,b]:x?A.unshift(b):A.push(b),T=c(w),T>0&&A.length>T&&!A.warned){A.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=w,M.type=k,M.count=A.length,i(M)}return w}o.prototype.addListener=function(k,b){return l(this,k,b,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(k,b){return l(this,k,b,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(w,k,b){var x={fired:!1,wrapFn:void 0,target:w,type:k,listener:b},T=u.bind(x);return T.listener=b,x.wrapFn=T,T}o.prototype.once=function(k,b){return a(b),this.on(k,d(this,k,b)),this},o.prototype.prependOnceListener=function(k,b){return a(b),this.prependListener(k,d(this,k,b)),this},o.prototype.removeListener=function(k,b){var x,T,P,A,M;if(a(b),T=this._events,T===void 0)return this;if(x=T[k],x===void 0)return this;if(x===b||x.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete T[k],T.removeListener&&this.emit("removeListener",k,x.listener||b));else if(typeof x!="function"){for(P=-1,A=x.length-1;A>=0;A--)if(x[A]===b||x[A].listener===b){M=x[A].listener,P=A;break}if(P<0)return this;P===0?x.shift():p(x,P),x.length===1&&(T[k]=x[0]),T.removeListener!==void 0&&this.emit("removeListener",k,M||b)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(k){var b,x,T;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[k]),this;if(arguments.length===0){var P=Object.keys(x),A;for(T=0;T<P.length;++T)A=P[T],A!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=x[k],typeof b=="function")this.removeListener(k,b);else if(b!==void 0)for(T=b.length-1;T>=0;T--)this.removeListener(k,b[T]);return this};function f(w,k,b){var x=w._events;if(x===void 0)return[];var T=x[k];return T===void 0?[]:typeof T=="function"?b?[T.listener||T]:[T]:b?y(T):m(T,T.length)}o.prototype.listeners=function(k){return f(this,k,!0)},o.prototype.rawListeners=function(k){return f(this,k,!1)},o.listenerCount=function(w,k){return typeof w.listenerCount=="function"?w.listenerCount(k):h.call(w,k)},o.prototype.listenerCount=h;function h(w){var k=this._events;if(k!==void 0){var b=k[w];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function m(w,k){for(var b=new Array(k),x=0;x<k;++x)b[x]=w[x];return b}function p(w,k){for(;k+1<w.length;k++)w[k]=w[k+1];w.pop()}function y(w){for(var k=new Array(w.length),b=0;b<k.length;++b)k[b]=w[b].listener||w[b];return k}function g(w,k){return new Promise(function(b,x){function T(A){w.removeListener(k,P),x(A)}function P(){typeof w.removeListener=="function"&&w.removeListener("error",T),b([].slice.call(arguments))}C(w,k,P,{once:!0}),k!=="error"&&S(w,T,{once:!0})})}function S(w,k,b){typeof w.on=="function"&&C(w,"error",k,b)}function C(w,k,b,x){if(typeof w.on=="function")x.once?w.once(k,b):w.on(k,b);else if(typeof w.addEventListener=="function")w.addEventListener(k,function T(P){x.once&&w.removeEventListener(k,T),b(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return uo.exports}var Yt=Ry();let Cd=!0,wd=!0;function fr(e,t,n){const i=e.match(t);return i&&i.length>=n&&parseFloat(i[n],10)}function oi(e,t,n){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(s,a){if(s!==t)return r.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,c),r.apply(this,[s,c])};const o=i.removeEventListener;i.removeEventListener=function(s,a){if(s!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(a))return o.apply(this,arguments);const c=this._eventMap[t].get(a);return this._eventMap[t].delete(a),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,c])},Object.defineProperty(i,"on"+t,{get(){return this["_on"+t]},set(s){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),s&&this.addEventListener(t,this["_on"+t]=s)},enumerable:!0,configurable:!0})}function Dy(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Cd=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Ly(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(wd=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Sd(){if(typeof window=="object"){if(Cd)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function la(e,t){wd&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Fy(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(r=>r.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(fr(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(fr(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(fr(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=fr(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function Td(e){return Object.prototype.toString.call(e)==="[object Object]"}function xd(e){return Td(e)?Object.keys(e).reduce(function(t,n){const i=Td(e[n]),r=i?xd(e[n]):e[n],o=i&&!Object.keys(r).length;return r===void 0||o?t:Object.assign(t,{[n]:r})},{}):e}function ua(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(i=>{i.endsWith("Id")?ua(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach(r=>{ua(e,e.get(r),n)})}))}function _d(e,t,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(t===null)return r;const o=[];return e.forEach(s=>{s.type==="track"&&s.trackIdentifier===t.id&&o.push(s)}),o.forEach(s=>{e.forEach(a=>{a.type===i&&a.trackId===s.id&&ua(e,a,r)})}),r}const Ed=Sd;function Pd(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const i=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){c.optional=c.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},r=function(a,c){if(t.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=i(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=t.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(m=>m.kind==="videoinput");let h=f.find(m=>d.some(p=>m.label.toLowerCase().includes(p)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=i(a.video),Ed("chrome: "+JSON.stringify(a)),c(a)})}a.video=i(a.video)}return Ed("chrome: "+JSON.stringify(a)),c(a)},o=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(a,c,l){r(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(o(d))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return r(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(o(u))))}}}function Md(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Id(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",r=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===r.track.id):o={track:r.track};const s=new Event("track");s.track=r.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[i.stream],this.dispatchEvent(s)}),i.stream.getTracks().forEach(r=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===r.id):o={track:r};const s=new Event("track");s.track=r,s.receiver=o,s.transceiver={receiver:o},s.streams=[i.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else oi(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Od(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(r,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=r.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:r}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,c){let l=r.apply(this,arguments);return l||(l=t(this,a),this._senders.push(l)),l};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(t(this,s))})};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],i.apply(this,[o]),o.getTracks().forEach(s=>{const a=this._senders.find(c=>c.track===s);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(r=>r._pc=this),i},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Nd(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=i.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>_d(s,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=n.apply(this,[]);return r.forEach(o=>o._pc=this),r}),oi(e,"track",i=>(i.receiver._pc=i.srcElement,i)),e.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(o=>_d(o,r.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const i=arguments[0];let r,o,s;return this.getSenders().forEach(a=>{a.track===i&&(r?s=!0:r=a)}),this.getReceivers().forEach(a=>(a.track===i&&(o?s=!0:o=a),a.track===i)),s||r&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Ad(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(s,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[s.id]=[s].concat(c)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],i.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(s);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),r.apply(this,arguments)}}function Rd(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Ad(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new e.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}i.apply(this,[u])};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(p=>p===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(p=>p.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const m=this._streams[d.id];if(m)m.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const p=new e.MediaStream([u]);this._streams[d.id]=p,this._reverseStreams[p.id]=d,this.addStream(p)}return this.getSenders().find(p=>p.track===u)};function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],m=l._streams[h.id];d=d.replace(new RegExp(m.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],m=l._streams[h.id];d=d.replace(new RegExp(h.id,"g"),m.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=e.RTCPeerConnection.prototype[l],d={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[m=>{const p=o(this,m);f[0].apply(null,[p])},m=>{f[1]&&f[1].apply(null,m)},arguments[2]]):u.apply(this,arguments).then(m=>o(this,m))}};e.RTCPeerConnection.prototype[l]=d[l]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=s(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:o(this,l)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(p=>u.track===p)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function da(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=e.RTCPeerConnection.prototype[n],r={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=r[n]})}function Dd(e,t){oi(e,"negotiationneeded",n=>{const i=n.target;if(!((t.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}var Ld=Object.freeze({__proto__:null,fixNegotiationNeeded:Dd,shimAddTrackRemoveTrack:Rd,shimAddTrackRemoveTrackWithNative:Ad,shimGetSendersWithDtmf:Od,shimGetUserMedia:Pd,shimMediaStream:Md,shimOnTrack:Id,shimPeerConnection:da,shimSenderReceiverGetStats:Nd});function Fd(e,t){const n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(r,o,s){la("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(r).then(o,s)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const r=function(s,a,c){a in s&&!(c in s)&&(s[c]=s[a],delete s[a])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),r(s.audio,"autoGainControl","mozAutoGainControl"),r(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},i&&i.prototype.getSettings){const s=i.prototype.getSettings;i.prototype.getSettings=function(){const a=s.apply(this,arguments);return r(a,"mozAutoGainControl","autoGainControl"),r(a,"mozNoiseSuppression","noiseSuppression"),a}}if(i&&i.prototype.applyConstraints){const s=i.prototype.applyConstraints;i.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),r(a,"autoGainControl","mozAutoGainControl"),r(a,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[a])}}}}function zy(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return i.video===!0?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})}function zd(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ha(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const o=e.RTCPeerConnection.prototype[r],s={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=s[r]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,s,a]=arguments;return i.apply(this,[o||null]).then(c=>{if(t.version<53&&!s)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(s,a)}}function Ud(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(o=>o._pc=this),r});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function $d(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(r=>r._pc=this),i}),oi(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function jd(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){la("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function Bd(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Vd(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const r=i.length>0;r&&i.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(r){const{sender:s}=o,a=s.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=i,s.sendEncodings=i,this.setParametersPromises.push(s.setParameters(a).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function qd(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const i=t.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function Hd(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Wd(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var Zd=Object.freeze({__proto__:null,shimAddTransceiver:Vd,shimCreateAnswer:Wd,shimCreateOffer:Hd,shimGetDisplayMedia:zy,shimGetParameters:qd,shimGetUserMedia:Fd,shimOnTrack:zd,shimPeerConnection:ha,shimRTCDataChannel:Bd,shimReceiverGetStats:$d,shimRemoveStream:jd,shimSenderGetStats:Ud});function Gd(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(r=>t.call(this,r,i)),i.getVideoTracks().forEach(r=>t.call(this,r,i))},e.RTCPeerConnection.prototype.addTrack=function(i){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o&&o.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const r=n.getTracks();this.getSenders().forEach(o=>{r.includes(o.track)&&this.removeTrack(o)})})}}function Kd(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const o=new Event("addstream");o.stream=r,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(o=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(o)>=0)return;i._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,i.dispatchEvent(s)})}),t.apply(i,arguments)}}}function Yd(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},t.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=i.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let a=function(c,l,u){const d=r.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};t.setLocalDescription=a,a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.setRemoteDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.addIceCandidate=a}function Qd(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,i=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=r=>i(Jd(r))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(i,r,o){t.mediaDevices.getUserMedia(i).then(r,o)}).bind(t))}function Jd(e){return e&&e.video!==void 0?Object.assign({},e,{video:xd(e.video)}):e}function Xd(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(i,r){if(i&&i.iceServers){const o=[];for(let s=0;s<i.iceServers.length;s++){let a=i.iceServers[s];a.urls===void 0&&a.url?(la("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,o.push(a)):o.push(i.iceServers[s])}i.iceServers=o}return new t(i,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function eh(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function th(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const r=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):i.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):i.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function nh(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var ih=Object.freeze({__proto__:null,shimAudioContext:nh,shimCallbacksAPI:Yd,shimConstraints:Jd,shimCreateOfferLegacy:th,shimGetUserMedia:Qd,shimLocalStreamsAPI:Gd,shimRTCIceServerUrls:Xd,shimRemoteStreamsAPI:Kd,shimTrackEventTransceiver:eh}),fa={exports:{}},rh;function Uy(){return rh||(rh=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(i=>i.trim())},t.splitSections=function(n){return n.split(`
m=`).map((r,o)=>(o>0?"m="+r:r).trim()+`\r
`)},t.getDescription=function(n){const i=t.splitSections(n);return i&&i[0]},t.getMediaSections=function(n){const i=t.splitSections(n);return i.shift(),i},t.matchPrefix=function(n,i){return t.splitLines(n).filter(r=>r.indexOf(i)===0)},t.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const r={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let o=8;o<i.length;o+=2)switch(i[o]){case"raddr":r.relatedAddress=i[o+1];break;case"rport":r.relatedPort=parseInt(i[o+1],10);break;case"tcptype":r.tcpType=i[o+1];break;case"ufrag":r.ufrag=i[o+1],r.usernameFragment=i[o+1];break;default:r[i[o]]===void 0&&(r[i[o]]=i[o+1]);break}return r},t.writeCandidate=function(n){const i=[];i.push(n.foundation);const r=n.component;r==="rtp"?i.push(1):r==="rtcp"?i.push(2):i.push(r),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const o=n.type;return i.push("typ"),i.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let i=n.substring(9).split(" ");const r={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),r.name=i[0],r.clockRate=parseInt(i[1],10),r.channels=i.length===3?parseInt(i[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const r=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(r!==1?"/"+r:"")+`\r
`},t.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const i={};let r;const o=n.substring(n.indexOf(" ")+1).split(";");for(let s=0;s<o.length;s++)r=o[s].trim().split("="),i[r[0].trim()]=r[1];return i},t.writeFmtp=function(n){let i="",r=n.payloadType;if(n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(s=>{n.parameters[s]!==void 0?o.push(s+"="+n.parameters[s]):o.push(s)}),i+="a=fmtp:"+r+" "+o.join(";")+`\r
`}return i},t.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},t.writeRtcpFb=function(n){let i="",r=n.payloadType;return n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{i+="a=rtcp-fb:"+r+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),i},t.parseSsrcMedia=function(n){const i=n.indexOf(" "),r={ssrc:parseInt(n.substring(7,i),10)},o=n.indexOf(":",i);return o>-1?(r.attribute=n.substring(i+1,o),r.value=n.substring(o+1)):r.attribute=n.substring(i+1),r},t.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(r=>parseInt(r,10))}},t.getMid=function(n){const i=t.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},t.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},t.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:t.matchPrefix(n+i,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,i){let r="a=setup:"+i+`\r
`;return n.fingerprints.forEach(o=>{r+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),r},t.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,i){return t.matchPrefix(n+i,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,i){const r=t.matchPrefix(n+i,"a=ice-ufrag:")[0],o=t.matchPrefix(n+i,"a=ice-pwd:")[0];return r&&o?{usernameFragment:r.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(i+=`a=ice-lite\r
`),i},t.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=t.splitLines(n)[0].split(" ");i.profile=o[2];for(let a=3;a<o.length;a++){const c=o[a],l=t.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=t.parseRtpMap(l),d=t.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?t.parseFmtp(d[0]):{},u.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(t.parseRtcpFb),i.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(u.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(a=>{i.headerExtensions.push(t.parseExtmap(a))});const s=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return i.codecs.forEach(a=>{s.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),i},t.writeRtpDescription=function(n,i){let r="";r+="m="+n+" ",r+=i.codecs.length>0?"9":"0",r+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=i.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(s=>{r+=t.writeRtpMap(s),r+=t.writeFmtp(s),r+=t.writeRtcpFb(s)});let o=0;return i.codecs.forEach(s=>{s.maxptime>o&&(o=s.maxptime)}),o>0&&(r+="a=maxptime:"+o+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(s=>{r+=t.writeExtmap(s)}),r},t.parseRtpEncodingParameters=function(n){const i=[],r=t.parseRtpParameters(n),o=r.fecMechanisms.indexOf("RED")!==-1,s=r.fecMechanisms.indexOf("ULPFEC")!==-1,a=t.matchPrefix(n,"a=ssrc:").map(f=>t.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=t.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(m=>parseInt(m,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),r.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let h={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(h.rtx={ssrc:l}),i.push(h),o&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},i.push(h))}}),i.length===0&&c&&i.push({ssrc:c});let d=t.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-2e3*8:d=void 0,i.forEach(f=>{f.maxBitrate=d})),i},t.parseRtcpParameters=function(n){const i={},r=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];r&&(i.cname=r.value,i.ssrc=r.ssrc);const o=t.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=o.length>0,i.compound=o.length===0;const s=t.matchPrefix(n,"a=rtcp-mux");return i.mux=s.length>0,i},t.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+=`a=rtcp-rsize\r
`),n.mux&&(i+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),i},t.parseMsid=function(n){let i;const r=t.matchPrefix(n,"a=msid:");if(r.length===1)return i=r[0].substring(7).split(" "),{stream:i[0],track:i[1]};const o=t.matchPrefix(n,"a=ssrc:").map(s=>t.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(o.length>0)return i=o[0].value.split(" "),{stream:i[0],track:i[1]}},t.parseSctpDescription=function(n){const i=t.parseMLine(n),r=t.matchPrefix(n,"a=max-message-size:");let o;r.length>0&&(o=parseInt(r[0].substring(19),10)),isNaN(o)&&(o=65536);const s=t.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:i.fmt,maxMessageSize:o};const a=t.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:o}}},t.writeSctpDescription=function(n,i){let r=[];return n.protocol!=="DTLS/SCTP"?r=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:r=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&r.push("a=max-message-size:"+i.maxMessageSize+`\r
`),r.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,i,r){let o;const s=i!==void 0?i:2;return n?o=n:o=t.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,i){const r=t.splitLines(n);for(let o=0;o<r.length;o++)switch(r[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[o].substring(2)}return i?t.getDirection(i):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const r=t.splitLines(n)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},t.parseOLine=function(n){const r=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=t.splitLines(n);for(let r=0;r<i.length;r++)if(i[r].length<2||i[r].charAt(1)!=="=")return!1;return!0},e.exports=t})(fa)),fa.exports}var oh=Uy(),Mi=Ey(oh),$y=Xg({__proto__:null,default:Mi},[oh]);function ho(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const r=new t(i),o=Mi.parseCandidate(i.candidate);for(const s in o)s in r||Object.defineProperty(r,s,{value:o[s]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(i)},e.RTCIceCandidate.prototype=t.prototype,oi(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function pa(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||oi(e,"icecandidate",t=>{if(t.candidate){const n=Mi.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function fo(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=Mi.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=Mi.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},i=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},r=function(a){let c=65536;return t.browser==="firefox"&&(t.version<57?a===-1?c=16384:c=2147483637:t.version<60?c=t.version===57?65535:65536:c=2147483637),c},o=function(a,c){let l=65536;t.browser==="firefox"&&t.version===57&&(l=65535);const u=Mi.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):t.browser==="firefox"&&c!==-1&&(l=2147483637),l},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=i(arguments[0]),l=r(c),u=o(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return s.apply(this,arguments)}}function po(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(i,r){const o=i.send;i.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(i.readyState==="open"&&r.sctp&&c>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return o.apply(i,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const r=n.apply(this,arguments);return t(r,this),r},oi(e,"datachannel",i=>(t(i.channel,i.target),i))}function ma(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const o=r.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",r);o.dispatchEvent(s)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function ga(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=r.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&r instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:r.type,sdp:o}):r.sdp=o}return n.apply(this,arguments)}}function mo(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function go(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return n.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?n.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>n.apply(this,[s]))})}var jy=Object.freeze({__proto__:null,removeExtmapAllowMixed:ga,shimAddIceCandidateNullOrEmpty:mo,shimConnectionState:ma,shimMaxMessageSize:fo,shimParameterlessSetLocalDescription:go,shimRTCIceCandidate:ho,shimRTCIceCandidateRelayProtocol:pa,shimSendThrowTypeError:po});function By(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=Sd,i=Fy(e),r={browserDetails:i,commonShim:jy,extractVersion:fr,disableLog:Dy,disableWarnings:Ly,sdp:$y};switch(i.browser){case"chrome":if(!Ld||!da||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=Ld,mo(e,i),go(e),Pd(e,i),Md(e),da(e,i),Id(e),Rd(e,i),Od(e),Nd(e),Dd(e,i),ho(e),pa(e),ma(e),fo(e,i),po(e),ga(e,i);break;case"firefox":if(!Zd||!ha||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=Zd,mo(e,i),go(e),Fd(e,i),ha(e,i),zd(e),jd(e),Ud(e),$d(e),Bd(e),Vd(e),qd(e),Hd(e),Wd(e),ho(e),ma(e),fo(e,i),po(e);break;case"safari":if(!ih||!t.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=ih,mo(e,i),go(e),Xd(e),th(e),Yd(e),Gd(e),Kd(e),eh(e),Qd(e),nh(e),ho(e),pa(e),fo(e,i),po(e),ga(e,i);break;default:n("Unsupported browser!");break}return r}By({window:typeof window>"u"?void 0:window});const Vy=10,pr="lk_e2ee",qy={sharedKey:!1,ratchetSalt:"LKFrameEncryptionKey",ratchetWindowSize:8,failureTolerance:Vy,keyringSize:16};var An;(function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"})(An||(An={}));var sh;(function(e){e.KeyRatcheted="keyRatcheted"})(sh||(sh={}));var Rn;(function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"})(Rn||(Rn={}));var ah;(function(e){e.Error="cryptorError"})(ah||(ah={}));function Hy(){return Wy()||va()}function va(){return typeof window.RTCRtpScriptTransform<"u"}function Wy(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class ON extends Yt.EventEmitter{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,i,r)=>{be.debug("key ratcheted event received",{ratchetResult:n,participantId:i,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},qy),t),this.on(An.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(t,n,i){const r={key:t,participantIdentity:n,keyIndex:i};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(i??0),r),this.emit(An.SetKey,r)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(t,n){this.emit(An.RatchetRequest,t,n)}}class mn extends Error{constructor(t,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=t}}var Se;(function(e){e[e.NotAllowed=0]="NotAllowed",e[e.ServerUnreachable=1]="ServerUnreachable",e[e.InternalError=2]="InternalError",e[e.Cancelled=3]="Cancelled",e[e.LeaveRequest=4]="LeaveRequest",e[e.Timeout=5]="Timeout"})(Se||(Se={}));class Ie extends mn{constructor(t,n,i,r){super(1,t),this.name="ConnectionError",this.status=i,this.reason=n,this.context=r,this.reasonName=Se[n]}}class ya extends mn{constructor(t){super(21,t??"device is unsupported"),this.name="DeviceUnsupportedError"}}class gn extends mn{constructor(t){super(20,t??"track is invalid"),this.name="TrackInvalidError"}}class Zy extends mn{constructor(t){super(10,t??"unsupported server"),this.name="UnsupportedServer"}}class Qe extends mn{constructor(t){super(12,t??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class ba extends mn{constructor(t){super(13,t??"unable to negotiate"),this.name="NegotiationError"}}class ch extends mn{constructor(t,n){super(15,t),this.name="PublishTrackError",this.status=n}}class lh extends mn{constructor(t,n){super(15,t),this.reason=n,this.reasonName=typeof n=="string"?n:aa[n]}}var $t;(function(e){e[e.AlreadyOpened=0]="AlreadyOpened",e[e.AbnormalEnd=1]="AbnormalEnd",e[e.DecodeFailed=2]="DecodeFailed",e[e.LengthExceeded=3]="LengthExceeded",e[e.Incomplete=4]="Incomplete",e[e.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered"})($t||($t={}));class Dn extends mn{constructor(t,n){super(16,t),this.name="DataStreamError",this.reason=n,this.reasonName=$t[n]}}var vo;(function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"})(vo||(vo={})),(function(e){function t(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?e.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?e.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?e.DeviceInUse:e.Other}e.getFailure=t})(vo||(vo={}));var uh;(function(e){e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError"})(uh||(uh={}));var q;(function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.Moved="moved",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.ParticipantAttributesChanged="participantAttributesChanged",e.ParticipantActive="participantActive",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.VideoPlaybackStatusChanged="videoPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ActiveDeviceChanged="activeDeviceChanged",e.ChatMessage="chatMessage",e.LocalTrackSubscribed="localTrackSubscribed",e.MetricsReceived="metricsReceived"})(q||(q={}));var W;(function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackCpuConstrained="localTrackCpuConstrained",e.LocalSenderCreated="localSenderCreated",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.TrackCpuConstrained="trackCpuConstrained",e.MediaDevicesError="mediaDevicesError",e.AudioStreamAcquired="audioStreamAcquired",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.PCTrackAdded="pcTrackAdded",e.AttributesChanged="attributesChanged",e.LocalTrackSubscribed="localTrackSubscribed",e.ChatMessage="chatMessage",e.Active="active"})(W||(W={}));var X;(function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.RTPVideoMapUpdate="rtpVideoMapUpdate",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ParticipantUpdate="participantUpdate",e.RoomUpdate="roomUpdate",e.SpeakersChanged="speakersChanged",e.StreamStateChanged="streamStateChanged",e.ConnectionQualityUpdate="connectionQualityUpdate",e.SubscriptionError="subscriptionError",e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",e.RemoteMute="remoteMute",e.SubscribedQualityUpdate="subscribedQualityUpdate",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackSubscribed="localTrackSubscribed",e.Offline="offline",e.SignalRequestResponse="signalRequestResponse",e.SignalConnected="signalConnected",e.RoomMoved="roomMoved"})(X||(X={}));var K;(function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.CpuConstrained="cpuConstrained",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.VideoPlaybackStarted="videoPlaybackStarted",e.VideoPlaybackFailed="videoPlaybackFailed",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged",e.SubscriptionFailed="subscriptionFailed",e.TrackProcessorUpdate="trackProcessorUpdate",e.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",e.TranscriptionReceived="transcriptionReceived",e.TimeSyncUpdate="timeSyncUpdate",e.PreConnectBufferFlushed="preConnectBufferFlushed"})(K||(K={}));function Gy(e){return typeof e>"u"?e:typeof structuredClone=="function"?typeof e=="object"&&e!==null?structuredClone(Object.assign({},e)):structuredClone(e):JSON.parse(JSON.stringify(e))}const Ky=/version\/(\d+(\.?_?\d+)+)/i;let ka;function xt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(ka===void 0||t){const i=Yy.find(r=>{let{test:o}=r;return o.test(n)});ka=i?.describe(n)}return ka}const Yy=[{test:/firefox|iceweasel|fxios/i,describe(e){return{name:"Firefox",version:yo(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:Ca(e)}}},{test:/chrom|crios|crmo/i,describe(e){return{name:"Chrome",version:yo(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("crios")?"iOS":void 0,osVersion:Ca(e)}}},{test:/safari|applewebkit/i,describe(e){return{name:"Safari",version:yo(Ky,e),os:e.includes("mobile/")?"iOS":"macOS",osVersion:Ca(e)}}}];function yo(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=t.match(e);return i&&i.length>=n&&i[n]||""}function Ca(e){return e.includes("mac os")?yo(/\(.+?(\d+_\d+(:?_\d+)?)/,e,1).replace(/_/g,"."):void 0}var Qy="2.15.7";const Jy=Qy,Xy=16;class at{}at.setTimeout=function(){return setTimeout(...arguments)},at.setInterval=function(){return setInterval(...arguments)},at.clearTimeout=function(){return clearTimeout(...arguments)},at.clearInterval=function(){return clearInterval(...arguments)};const e2=5e3,mr=[];var _t;(function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH"})(_t||(_t={}));class B extends Yt.EventEmitter{get streamState(){return this._streamState}setStreamState(t){this._streamState=t}constructor(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var r;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=B.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=be,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),e2):this.handleAppVisibilityChanged()},this.log=fn((r=i.loggerName)!==null&&r!==void 0?r:Ut.Track),this.loggerContextCb=i.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=t,this._mediaStreamID=t.id,this.source=B.Source.Unknown}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),ye(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(t){let n="audio";this.kind===B.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===B.Kind.Video&&this.addAppVisibilityListener(),t||(n==="audio"&&(mr.forEach(o=>{o.parentElement===null&&!t&&(t=o)}),t&&mr.splice(mr.indexOf(t),1)),t||(t=document.createElement(n))),this.attachedElements.includes(t)||this.attachedElements.push(t),Ii(this.mediaStreamTrack,t);const i=t.srcObject.getTracks(),r=i.some(o=>o.kind==="audio");return t.play().then(()=>{this.emit(r?K.AudioPlaybackStarted:K.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(r?K.AudioPlaybackFailed:K.VideoPlaybackFailed,o):o.name==="AbortError"?be.debug("".concat(r?"audio":"video"," playback aborted, likely due to new play request")):be.warn("could not playback ".concat(r?"audio":"video"),o),r&&t&&i.some(s=>s.kind==="video")&&o.name==="NotAllowedError"&&(t.muted=!0,t.play().catch(()=>{}))}),this.emit(K.ElementAttached,t),t}detach(t){try{if(t){Oi(this.mediaStreamTrack,t);const i=this.attachedElements.indexOf(t);return i>=0&&(this.attachedElements.splice(i,1),this.recycleElement(t),this.emit(K.ElementDetached,t)),t}const n=[];return this.attachedElements.forEach(i=>{Oi(this.mediaStreamTrack,i),n.push(i),this.recycleElement(i),this.emit(K.ElementDetached,i)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(t){t.loggerName&&(this.log=fn(t.loggerName)),t.loggerContextCb&&(this.loggerContextCb=t.loggerContextCb)}recycleElement(t){if(t instanceof HTMLAudioElement){let n=!0;t.pause(),mr.forEach(i=>{i.parentElement||(n=!1)}),n&&mr.push(t)}}handleAppVisibilityChanged(){return I(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===B.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(t=>t.play().catch(()=>{})),0)})}addAppVisibilityListener(){yt()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){yt()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Ii(e,t){let n;t.srcObject instanceof MediaStream?n=t.srcObject:n=new MediaStream;let i;e.kind==="audio"?i=n.getAudioTracks():i=n.getVideoTracks(),i.includes(e)||(i.forEach(r=>{n.removeTrack(r)}),n.addTrack(e)),(!ai()||!(t instanceof HTMLVideoElement))&&(t.autoplay=!0),t.muted=n.getAudioTracks().length===0,t instanceof HTMLVideoElement&&(t.playsInline=!0),t.srcObject!==n&&(t.srcObject=n,(ai()||si())&&t instanceof HTMLVideoElement&&setTimeout(()=>{t.srcObject=n,t.play().catch(()=>{})},0))}function Oi(e,t){if(t.srcObject instanceof MediaStream){const n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}(function(e){let t;(function(l){l.Audio="audio",l.Video="video",l.Unknown="unknown"})(t=e.Kind||(e.Kind={}));let n;(function(l){l.Camera="camera",l.Microphone="microphone",l.ScreenShare="screen_share",l.ScreenShareAudio="screen_share_audio",l.Unknown="unknown"})(n=e.Source||(e.Source={}));let i;(function(l){l.Active="active",l.Paused="paused",l.Unknown="unknown"})(i=e.StreamState||(e.StreamState={}));function r(l){switch(l){case t.Audio:return Lt.AUDIO;case t.Video:return Lt.VIDEO;default:return Lt.DATA}}e.kindToProto=r;function o(l){switch(l){case Lt.AUDIO:return t.Audio;case Lt.VIDEO:return t.Video;default:return t.Unknown}}e.kindFromProto=o;function s(l){switch(l){case n.Camera:return Ge.CAMERA;case n.Microphone:return Ge.MICROPHONE;case n.ScreenShare:return Ge.SCREEN_SHARE;case n.ScreenShareAudio:return Ge.SCREEN_SHARE_AUDIO;default:return Ge.UNKNOWN}}e.sourceToProto=s;function a(l){switch(l){case Ge.CAMERA:return n.Camera;case Ge.MICROPHONE:return n.Microphone;case Ge.SCREEN_SHARE:return n.ScreenShare;case Ge.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}e.sourceFromProto=a;function c(l){switch(l){case ea.ACTIVE:return i.Active;case ea.PAUSED:return i.Paused;default:return i.Unknown}}e.streamStateFromProto=c})(B||(B={}));class Me{constructor(t,n,i,r,o){if(typeof t=="object")this.width=t.width,this.height=t.height,this.aspectRatio=t.aspectRatio,this.encoding={maxBitrate:t.maxBitrate,maxFramerate:t.maxFramerate,priority:t.priority};else if(n!==void 0&&i!==void 0)this.width=t,this.height=n,this.aspectRatio=t/n,this.encoding={maxBitrate:i,maxFramerate:r,priority:o};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const t2=["vp8","h264"],n2=["vp8","h264","vp9","av1","h265"];function i2(e){return!!t2.find(t=>t===e)}var dh;(function(e){e[e.PREFER_REGRESSION=0]="PREFER_REGRESSION",e[e.SIMULCAST=1]="SIMULCAST",e[e.REGRESSION=2]="REGRESSION"})(dh||(dh={}));var wa;(function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:24e3},e.music={maxBitrate:48e3},e.musicStereo={maxBitrate:64e3},e.musicHighQuality={maxBitrate:96e3},e.musicHighQualityStereo={maxBitrate:128e3}})(wa||(wa={}));const gr={h90:new Me(160,90,9e4,20),h180:new Me(320,180,16e4,20),h216:new Me(384,216,18e4,20),h360:new Me(640,360,45e4,20),h540:new Me(960,540,8e5,25),h720:new Me(1280,720,17e5,30),h1080:new Me(1920,1080,3e6,30),h1440:new Me(2560,1440,5e6,30),h2160:new Me(3840,2160,8e6,30)},Sa={h120:new Me(160,120,7e4,20),h180:new Me(240,180,125e3,20),h240:new Me(320,240,14e4,20),h360:new Me(480,360,33e4,20),h480:new Me(640,480,5e5,20),h540:new Me(720,540,6e5,25),h720:new Me(960,720,13e5,30),h1080:new Me(1440,1080,23e5,30),h1440:new Me(1920,1440,38e5,30)},Ta={h360fps3:new Me(640,360,2e5,3,"medium"),h360fps15:new Me(640,360,4e5,15,"medium"),h720fps5:new Me(1280,720,8e5,5,"medium"),h720fps15:new Me(1280,720,15e5,15,"medium"),h720fps30:new Me(1280,720,2e6,30,"medium"),h1080fps15:new Me(1920,1080,25e5,15,"medium"),h1080fps30:new Me(1920,1080,5e6,30,"medium"),original:new Me(0,0,7e6,30,"medium")},r2="|",hh="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function o2(e){const t=e.split(r2);return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}function vt(e){return I(this,void 0,void 0,function*(){return new Promise(t=>at.setTimeout(t,e))})}function xa(){return"addTransceiver"in RTCPeerConnection.prototype}function _a(){return"addTrack"in RTCPeerConnection.prototype}function s2(){if(!("getCapabilities"in RTCRtpSender)||ai()||si())return!1;const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType==="video/AV1"){t=!0;break}}return t}function a2(){if(!("getCapabilities"in RTCRtpSender)||si())return!1;if(ai()){const n=xt();if(n?.version&&jt(n.version,"16")<0||n?.os==="iOS"&&n?.osVersion&&jt(n.osVersion,"16")<0)return!1}const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType==="video/VP9"){t=!0;break}}return t}function Qt(e){return e==="av1"||e==="vp9"}function Ea(e){return!document||vr()?!1:(e||(e=document.createElement("audio")),"setSinkId"in e)}function c2(){return typeof RTCPeerConnection>"u"?!1:xa()||_a()}function si(){var e;return((e=xt())===null||e===void 0?void 0:e.name)==="Firefox"}function ai(){var e;return((e=xt())===null||e===void 0?void 0:e.name)==="Safari"}function vr(){const e=xt();return e?.name==="Safari"||e?.os==="iOS"}function l2(){const e=xt();return e?.name==="Safari"&&e.version.startsWith("17.")||e?.os==="iOS"&&!!e?.osVersion&&jt(e.osVersion,"17")>=0}function u2(e){return e||(e=xt()),e?.name==="Safari"&&jt(e.version,"18.3")>0||e?.os==="iOS"&&!!e?.osVersion&&jt(e.osVersion,"18.3")>0}function fh(){var e,t;return yt()?(t=(e=navigator.userAgentData)===null||e===void 0?void 0:e.mobile)!==null&&t!==void 0?t:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function d2(){const e=xt(),t="17.2";if(e)return e.name!=="Safari"&&e.os!=="iOS"||e.os==="iOS"&&e.osVersion&&jt(e.osVersion,t)>=0?!0:e.name==="Safari"&&jt(e.version,t)>=0}function yt(){return typeof document<"u"}function Jt(){return navigator.product=="ReactNative"}function Pa(e){return e.hostname.endsWith(".livekit.cloud")||e.hostname.endsWith(".livekit.run")}function ph(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function mh(){if(!Jt())return;let e=ph();if(e)return e.platform}function gh(){if(yt())return window.devicePixelRatio;if(Jt()){let e=ph();if(e)return e.devicePixelRatio}return 1}function jt(e,t){const n=e.split("."),i=t.split("."),r=Math.min(n.length,i.length);for(let o=0;o<r;++o){const s=parseInt(n[o],10),a=parseInt(i[o],10);if(s>a)return 1;if(s<a)return-1;if(o===r-1&&s===a)return 0}return e===""&&t!==""?-1:t===""?1:n.length==i.length?0:n.length<i.length?-1:1}function h2(e){for(const t of e)t.target.handleResize(t)}function f2(e){for(const t of e)t.target.handleVisibilityChanged(t)}let Ma=null;const vh=()=>(Ma||(Ma=new ResizeObserver(h2)),Ma);let Ia=null;const yh=()=>(Ia||(Ia=new IntersectionObserver(f2,{root:null,rootMargin:"0px"})),Ia);function p2(){var e;const t=new ny({sdk:ed.JS,protocol:Xy,version:Jy});return Jt()&&(t.os=(e=mh())!==null&&e!==void 0?e:""),t}function bh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const r=document.createElement("canvas");r.width=e,r.height=t;const o=r.getContext("2d");o?.fillRect(0,0,r.width,r.height),i&&o&&(o.beginPath(),o.arc(e/2,t/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const s=r.captureStream(),[a]=s.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let yr;function Oa(){if(!yr){const e=new AudioContext,t=e.createOscillator(),n=e.createGain();n.gain.setValueAtTime(0,0);const i=e.createMediaStreamDestination();if(t.connect(n),n.connect(i),t.start(),[yr]=i.stream.getAudioTracks(),!yr)throw Error("Could not get empty media stream audio track");yr.enabled=!1}return yr.clone()}class Xt{get isResolved(){return this._isResolved}constructor(t,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((i,r)=>I(this,void 0,void 0,function*(){this.resolve=i,this.reject=r,t&&(yield t(i,r))})).finally(()=>{var i;this._isResolved=!0,(i=this.onFinally)===null||i===void 0||i.call(this)})}}function m2(e){return n2.includes(e)}function Ln(e){if(typeof e=="string"||typeof e=="number")return e;if(Array.isArray(e))return e[0];if(e.exact!==void 0)return Array.isArray(e.exact)?e.exact[0]:e.exact;if(e.ideal!==void 0)return Array.isArray(e.ideal)?e.ideal[0]:e.ideal;throw Error("could not unwrap constraint")}function g2(e){return e.startsWith("http")?e.replace(/^(http)/,"ws"):e}function Na(e){return e.startsWith("ws")?e.replace(/^(ws)/,"http"):e}function v2(e,t){return e.segments.map(n=>{let{id:i,text:r,language:o,startTime:s,endTime:a,final:c}=n;var l;const u=(l=t.get(i))!==null&&l!==void 0?l:Date.now(),d=Date.now();return c?t.delete(i):t.set(i,u),{id:i,text:r,startTime:Number.parseInt(s.toString()),endTime:Number.parseInt(a.toString()),final:c,language:o,firstReceivedTime:u,lastReceivedTime:d}})}function y2(e){const{id:t,timestamp:n,message:i,editTimestamp:r}=e;return{id:t,timestamp:Number.parseInt(n.toString()),editTimestamp:r?Number.parseInt(r.toString()):void 0,message:i}}function kh(e){switch(e.reason){case Se.LeaveRequest:return e.context;case Se.Cancelled:return Ft.CLIENT_INITIATED;case Se.NotAllowed:return Ft.USER_REJECTED;case Se.ServerUnreachable:return Ft.JOIN_FAILURE;default:return Ft.UNKNOWN_REASON}}function bo(e){return e!==void 0?Number(e):void 0}function ci(e){return e!==void 0?BigInt(e):void 0}function Ni(e){return!!e&&!(e instanceof MediaStreamTrack)&&e.isLocal}function en(e){return!!e&&e.kind==B.Kind.Audio}function Fn(e){return!!e&&e.kind==B.Kind.Video}function zn(e){return Ni(e)&&Fn(e)}function vn(e){return Ni(e)&&en(e)}function Aa(e){return!!e&&!e.isLocal}function b2(e){return!!e&&!e.isLocal}function Ra(e){return Aa(e)&&Fn(e)}function k2(e){return e.isLocal}function C2(e,t){const n=[];let i=new TextEncoder().encode(e);for(;i.length>t;){let r=t;for(;r>0;){const o=i[r];if(o!==void 0&&(o&192)!==128)break;r--}n.push(i.slice(0,r)),i=i.slice(r)}return i.length>0&&n.push(i),n}function Ch(e,t,n){var i,r,o,s;const{optionsWithoutProcessor:a,audioProcessor:c,videoProcessor:l}=Th(e??{}),u=t?.processor,d=n?.processor,f=a??{};return f.audio===!0&&(f.audio={}),f.video===!0&&(f.video={}),f.audio&&(Da(f.audio,t),(i=(o=f.audio).deviceId)!==null&&i!==void 0||(o.deviceId={ideal:"default"}),(c||u)&&(f.audio.processor=c??u)),f.video&&(Da(f.video,n),(r=(s=f.video).deviceId)!==null&&r!==void 0||(s.deviceId={ideal:"default"}),(l||d)&&(f.video.processor=l??d)),f}function Da(e,t){return Object.keys(t).forEach(n=>{e[n]===void 0&&(e[n]=t[n])}),e}function La(e){var t,n,i,r;const o={};if(e.video)if(typeof e.video=="object"){const s={},a=s,c=e.video;Object.keys(c).forEach(l=>{switch(l){case"resolution":Da(a,c.resolution);break;default:a[l]=c[l]}}),o.video=s,(t=(i=o.video).deviceId)!==null&&t!==void 0||(i.deviceId={ideal:"default"})}else o.video=e.video?{deviceId:{ideal:"default"}}:!1;else o.video=!1;return e.audio?typeof e.audio=="object"?(o.audio=e.audio,(n=(r=o.audio).deviceId)!==null&&n!==void 0||(r.deviceId={ideal:"default"})):o.audio={deviceId:{ideal:"default"}}:o.audio=!1,o}function wh(e){return I(this,arguments,void 0,function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return(function*(){const i=Sh();if(i){const r=i.createAnalyser();r.fftSize=2048;const o=r.frequencyBinCount,s=new Uint8Array(o);i.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(r),yield vt(n),r.getByteTimeDomainData(s);const c=s.some(l=>l!==128&&l!==0);return i.close(),!c}return!1})()})}function Sh(){var e;const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t){const n=new t({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((e=window.document)===null||e===void 0)&&e.body)){const i=()=>I(this,void 0,void 0,function*(){var r;try{n.state==="suspended"&&(yield n.resume())}catch(o){console.warn("Error trying to auto-resume audio context",o)}(r=window.document.body)===null||r===void 0||r.removeEventListener("click",i)});window.document.body.addEventListener("click",i)}return n}}function w2(e){return e==="audioinput"?B.Source.Microphone:e==="videoinput"?B.Source.Camera:B.Source.Unknown}function Fa(e){return e===B.Source.Microphone?"audioinput":e===B.Source.Camera?"videoinput":void 0}function S2(e){var t,n;let i=(t=e.video)!==null&&t!==void 0?t:!0;return e.resolution&&e.resolution.width>0&&e.resolution.height>0&&(i=typeof i=="boolean"?{}:i,ai()?i=Object.assign(Object.assign({},i),{width:{max:e.resolution.width},height:{max:e.resolution.height},frameRate:e.resolution.frameRate}):i=Object.assign(Object.assign({},i),{width:{ideal:e.resolution.width},height:{ideal:e.resolution.height},frameRate:e.resolution.frameRate})),{audio:(n=e.audio)!==null&&n!==void 0?n:!1,video:i,controller:e.controller,selfBrowserSurface:e.selfBrowserSurface,surfaceSwitching:e.surfaceSwitching,systemAudio:e.systemAudio,preferCurrentTab:e.preferCurrentTab}}function br(e){return e.split("/")[1].toLowerCase()}function T2(e){const t=[];return e.forEach(n=>{n.track!==void 0&&t.push(new oa({cid:n.track.mediaStreamID,track:n.trackInfo}))}),t}function ye(e){return"mediaStreamTrack"in e?{trackID:e.sid,source:e.source,muted:e.isMuted,enabled:e.mediaStreamTrack.enabled,kind:e.kind,streamID:e.mediaStreamID,streamTrackID:e.mediaStreamTrack.id}:{trackID:e.trackSid,enabled:e.isEnabled,muted:e.isMuted,trackInfo:Object.assign({mimeType:e.mimeType,name:e.trackName,encrypted:e.isEncrypted,kind:e.kind,source:e.source},e.track?ye(e.track):{})}}function x2(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function _2(e,t){var n;e===void 0&&(e={}),t===void 0&&(t={});const i=[...Object.keys(t),...Object.keys(e)],r={};for(const o of i)e[o]!==t[o]&&(r[o]=(n=t[o])!==null&&n!==void 0?n:"");return r}function Th(e){const t=Object.assign({},e);let n,i;return typeof t.audio=="object"&&t.audio.processor&&(n=t.audio.processor,t.audio=Object.assign(Object.assign({},t.audio),{processor:void 0})),typeof t.video=="object"&&t.video.processor&&(i=t.video.processor,t.video=Object.assign(Object.assign({},t.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:Gy(t)}}function E2(e){switch(e){case Ge.CAMERA:return B.Source.Camera;case Ge.MICROPHONE:return B.Source.Microphone;case Ge.SCREEN_SHARE:return B.Source.ScreenShare;case Ge.SCREEN_SHARE_AUDIO:return B.Source.ScreenShareAudio;default:return B.Source.Unknown}}function xh(e,t){return e.width*e.height<t.width*t.height}function P2(e,t){var n;return(n=e.layers)===null||n===void 0?void 0:n.find(i=>i.quality===t)}class M2 extends Yt.EventEmitter{constructor(t){super(),this.onWorkerMessage=n=>{var i,r;const{kind:o,data:s}=n.data;switch(o){case"error":be.error(s.error.message),this.emit(Rn.EncryptionError,s.error);break;case"initAck":s.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"enable":if(s.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)}),this.encryptionEnabled!==s.enabled&&s.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(Rn.ParticipantEncryptionStatusChanged,s.enabled,this.room.localParticipant),this.encryptionEnabled=s.enabled;else if(s.participantIdentity){const a=(r=this.room)===null||r===void 0?void 0:r.getParticipantByIdentity(s.participantIdentity);if(!a)throw TypeError("couldn't set encryption status, participant not found".concat(s.participantIdentity));this.emit(Rn.ParticipantEncryptionStatusChanged,s.enabled,a)}break;case"ratchetKey":this.keyProvider.emit(An.KeyRatcheted,s.ratchetResult,s.participantIdentity,s.keyIndex);break}},this.onWorkerError=n=>{be.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Rn.EncryptionError,n.error)},this.keyProvider=t.keyProvider,this.worker=t.worker,this.encryptionEnabled=!1}setup(t){if(!Hy())throw new ya("tried to setup end-to-end encryption on an unsupported browser");if(be.info("setting up e2ee"),t!==this.room){this.room=t,this.setupEventListeners(t,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:Iy.getLevel()}};this.worker&&(be.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(t,n){be.debug("set e2ee to ".concat(t," for participant ").concat(n)),this.postEnable(t,n)}setSifTrailer(t){!t||t.length===0?be.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(t)}setupEngine(t){t.on(X.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(t,n){t.on(q.TrackPublished,(i,r)=>this.setParticipantCryptorEnabled(i.trackInfo.encryption!==Tt.NONE,r.identity)),t.on(q.ConnectionStateChanged,i=>{i===he.Connected&&t.remoteParticipants.forEach(r=>{r.trackPublications.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==Tt.NONE,r.identity)})})}).on(q.TrackUnsubscribed,(i,r,o)=>{var s;const a={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:i.mediaStreamID}};(s=this.worker)===null||s===void 0||s.postMessage(a)}).on(q.TrackSubscribed,(i,r,o)=>{this.setupE2EEReceiver(i,o.identity,r.trackInfo)}).on(q.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(i=>{this.postKey(i)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),t.localParticipant.on(W.LocalSenderCreated,(i,r)=>I(this,void 0,void 0,function*(){this.setupE2EESender(r,i)})),t.localParticipant.on(W.LocalTrackPublished,i=>{if(!Fn(i.track)||!vr())return;const r={kind:"updateCodec",data:{trackId:i.track.mediaStreamID,codec:br(i.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}),n.on(An.SetKey,i=>this.postKey(i)).on(An.RatchetRequest,(i,r)=>this.postRatchetRequest(i,r))}postRatchetRequest(t,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const i={kind:"ratchetRequest",data:{participantIdentity:t,keyIndex:n}};this.worker.postMessage(i)}postKey(t){let{key:n,participantIdentity:i,keyIndex:r}=t;var o;if(!this.worker)throw Error("could not set key, worker is missing");const s={kind:"setKey",data:{participantIdentity:i,isPublisher:i===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:r}};this.worker.postMessage(s)}postEnable(t,n){if(this.worker){const i={kind:"enable",data:{enabled:t,participantIdentity:n}};this.worker.postMessage(i)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(t){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const i={kind:"setRTPMap",data:{map:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}postSifTrailer(t){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:t}};this.worker.postMessage(n)}setupE2EEReceiver(t,n,i){if(t.receiver){if(!i?.mimeType||i.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(t.receiver,t.mediaStreamID,n,t.kind==="video"?br(i.mimeType):void 0)}}setupE2EESender(t,n){if(!Ni(t)||!n){n||be.warn("early return because sender is not ready");return}this.handleSender(n,t.mediaStreamID,void 0)}handleReceiver(t,n,i,r){return I(this,void 0,void 0,function*(){if(this.worker){if(va()){const o={kind:"decode",participantIdentity:i,trackId:n,codec:r};t.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(pr in t&&r){const c={kind:"updateCodec",data:{trackId:n,codec:r,participantIdentity:i}};this.worker.postMessage(c);return}let o=t.writableStream,s=t.readableStream;if(!o||!s){const c=t.createEncodedStreams();t.writableStream=c.writable,o=c.writable,t.readableStream=c.readable,s=c.readable}const a={kind:"decode",data:{readableStream:s,writableStream:o,trackId:n,codec:r,participantIdentity:i,isReuse:pr in t}};this.worker.postMessage(a,[s,o])}t[pr]=!0}})}handleSender(t,n,i){var r;if(!(pr in t||!this.worker)){if(!(!((r=this.room)===null||r===void 0)&&r.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(va()){be.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:i};t.transform=new RTCRtpScriptTransform(this.worker,o)}else{be.info("initialize encoded streams");const o=t.createEncodedStreams(),s={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:i,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(s,[o.readable,o.writable])}t[pr]=!0}}}const za="default";class rt{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new rt),this.instance}get previousDevices(){return this._previousDevices}getDevices(t){return I(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var o;if(((o=rt.userMediaPromiseMap)===null||o===void 0?void 0:o.size)>0){be.debug("awaiting getUserMedia promise");try{n?yield rt.userMediaPromiseMap.get(n):yield Promise.all(rt.userMediaPromiseMap.values())}catch{be.warn("error waiting for media permissons")}}let s=yield navigator.mediaDevices.enumerateDevices();if(r&&!(ai()&&i.hasDeviceInUse(n))&&(s.filter(c=>c.kind===n).length===0||s.some(c=>{const l=c.label==="",u=n?c.kind===n:!0;return l&&u}))){const c={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},l=yield navigator.mediaDevices.getUserMedia(c);s=yield navigator.mediaDevices.enumerateDevices(),l.getTracks().forEach(u=>{u.stop()})}return i._previousDevices=s,n&&(s=s.filter(a=>a.kind===n)),s})()})}normalizeDeviceId(t,n,i){return I(this,void 0,void 0,function*(){if(n!==za)return n;const r=yield this.getDevices(t),o=r.find(a=>a.deviceId===za);if(!o){be.warn("could not reliably determine default device");return}const s=r.find(a=>a.deviceId!==za&&a.groupId===(i??o.groupId));if(!s){be.warn("could not reliably determine default device");return}return s?.deviceId})}hasDeviceInUse(t){return t?rt.userMediaPromiseMap.has(t):rt.userMediaPromiseMap.size>0}}rt.mediaDeviceKinds=["audioinput","audiooutput","videoinput"],rt.userMediaPromiseMap=new Map;var kr;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"})(kr||(kr={}));class I2{constructor(){this.pendingTasks=new Map,this.taskMutex=new pt,this.nextTaskIndex=0}run(t){return I(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:kr.WAITING};this.pendingTasks.set(n.id,n);const i=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=kr.RUNNING,yield t()}finally{n.status=kr.COMPLETED,this.pendingTasks.delete(n.id),i()}})}flush(){return I(this,void 0,void 0,function*(){return this.run(()=>I(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function O2(e,t){const n=new URL(g2(e));return t.forEach((i,r)=>{n.searchParams.set(r,i)}),_h(n,"rtc")}function N2(e){const t=new URL(Na(e));return _h(t,"validate")}function A2(e){return e.endsWith("/")?e:"".concat(e,"/")}function _h(e,t){return e.pathname="".concat(A2(e.pathname)).concat(t),e.toString()}const R2=["syncState","trickle","offer","answer","simulate","leave"];function D2(e){const t=R2.indexOf(e.case)>=0;return be.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}var De;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e[e.DISCONNECTING=3]="DISCONNECTING",e[e.DISCONNECTED=4]="DISCONNECTED"})(De||(De={}));class Ua{get currentState(){return this.state}get isDisconnected(){return this.state===De.DISCONNECTING||this.state===De.DISCONNECTED}get isEstablishingConnection(){return this.state===De.CONNECTING||this.state===De.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;this.rtt=0,this.state=De.DISCONNECTED,this.log=be,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=fn((i=n.loggerName)!==null&&i!==void 0?i:Ut.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=t,this.requestQueue=new I2,this.queuedRequests=[],this.closingLock=new pt,this.connectionLock=new pt,this.state=De.DISCONNECTED}get logContext(){var t,n;return(n=(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this))!==null&&n!==void 0?n:{}}join(t,n,i,r){return I(this,void 0,void 0,function*(){return this.state=De.CONNECTING,this.options=i,yield this.connect(t,n,i,r)})}reconnect(t,n,i,r){return I(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=De.RECONNECTING,this.clearPingInterval(),yield this.connect(t,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:i,reconnectReason:r}))})}connect(t,n,i,r){this.connectOptions=i;const o=p2(),s=L2(n,o,i),a=O2(t,s),c=N2(a);return new Promise((l,u)=>I(this,void 0,void 0,function*(){const d=yield this.connectionLock.lock();try{const f=()=>I(this,void 0,void 0,function*(){this.close(),clearTimeout(h),u(new Ie("room connection has been cancelled (signal)",Se.Cancelled))}),h=setTimeout(()=>{this.close(),u(new Ie("room connection has timed out (signal)",Se.ServerUnreachable))},i.websocketTimeout);r?.aborted&&f(),r?.addEventListener("abort",f);const m=new URL(a);m.searchParams.has("access_token")&&m.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(m),Object.assign({reconnect:i.reconnect,reconnectReason:i.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(a),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(h)},this.ws.onerror=p=>I(this,void 0,void 0,function*(){if(this.state!==De.CONNECTED){this.state=De.DISCONNECTED,clearTimeout(h);try{const y=yield fetch(c);if(y.status.toFixed(0).startsWith("4")){const g=yield y.text();u(new Ie(g,Se.NotAllowed,y.status))}else u(new Ie("Encountered unknown websocket error during connection: ".concat(p.toString()),Se.InternalError,y.status))}catch(y){u(new Ie(y instanceof Error?y.message:"server was not reachable",Se.ServerUnreachable))}return}this.handleWSError(p)}),this.ws.onmessage=p=>I(this,void 0,void 0,function*(){var y,g,S;let C;if(typeof p.data=="string"){const w=JSON.parse(p.data);C=sd.fromJson(w,{ignoreUnknownFields:!0})}else if(p.data instanceof ArrayBuffer)C=sd.fromBinary(new Uint8Array(p.data));else{this.log.error("could not decode websocket message: ".concat(typeof p.data),this.logContext);return}if(this.state!==De.CONNECTED){let w=!1;if(((y=C.message)===null||y===void 0?void 0:y.case)==="join"?(this.state=De.CONNECTED,r?.removeEventListener("abort",f),this.pingTimeoutDuration=C.message.value.pingTimeout,this.pingIntervalDuration=C.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),l(C.message.value)):this.state===De.RECONNECTING&&C.message.case!=="leave"?(this.state=De.CONNECTED,r?.removeEventListener("abort",f),this.startPingInterval(),((g=C.message)===null||g===void 0?void 0:g.case)==="reconnect"?l(C.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),l(void 0),w=!0)):this.isEstablishingConnection&&C.message.case==="leave"?u(new Ie("Received leave request while trying to (re)connect",Se.LeaveRequest,void 0,C.message.value.reason)):i.reconnect||u(new Ie("did not receive join response, got ".concat((S=C.message)===null||S===void 0?void 0:S.case," instead"),Se.InternalError)),!w)return}this.signalLatency&&(yield vt(this.signalLatency)),this.handleSignalResponse(C)}),this.ws.onclose=p=>{this.isEstablishingConnection&&u(new Ie("Websocket got closed during a (re)connection attempt",Se.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:p.reason,code:p.code,wasClean:p.wasClean,state:this.state})),this.handleOnClose(p.reason)}}finally{d()}}))}close(){return I(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){const i=yield t.closingLock.lock();try{if(t.clearPingInterval(),n&&(t.state=De.DISCONNECTING),t.ws){t.ws.onmessage=null,t.ws.onopen=null,t.ws.onclose=null;const r=new Promise(o=>{t.ws?t.ws.onclose=()=>{o()}:o()});t.ws.readyState<t.ws.CLOSING&&(t.ws.close(),yield Promise.race([r,vt(250)])),t.ws=void 0}}finally{n&&(t.state=De.DISCONNECTED),i()}})()})}sendOffer(t,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:t.sdp})),this.sendRequest({case:"offer",value:ko(t,n)})}sendAnswer(t,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:t.sdp})),this.sendRequest({case:"answer",value:ko(t,n)})}sendIceCandidate(t,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:t})),this.sendRequest({case:"trickle",value:new ia({candidateInit:JSON.stringify(t),target:n})})}sendMuteTrack(t,n){return this.sendRequest({case:"mute",value:new ra({sid:t,muted:n})})}sendAddTrack(t){return this.sendRequest({case:"addTrack",value:t})}sendUpdateLocalMetadata(t,n){return I(this,arguments,void 0,function(i,r){var o=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){const a=o.getNextRequestId();return yield o.sendRequest({case:"updateMetadata",value:new ud({requestId:a,metadata:i,name:r,attributes:s})}),a})()})}sendUpdateTrackSettings(t){this.sendRequest({case:"trackSetting",value:t})}sendUpdateSubscription(t){return this.sendRequest({case:"subscription",value:t})}sendSyncState(t){return this.sendRequest({case:"syncState",value:t})}sendUpdateVideoLayers(t,n){return this.sendRequest({case:"updateLayers",value:new ld({trackSid:t,layers:n})})}sendUpdateSubscriptionPermissions(t,n){return this.sendRequest({case:"subscriptionPermission",value:new fd({allParticipants:t,trackPermissions:n})})}sendSimulateScenario(t){return this.sendRequest({case:"simulate",value:t})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Fe.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new vd({timestamp:Fe.parse(Date.now()),rtt:Fe.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(t,n){return this.sendRequest({case:"updateAudioTrack",value:new cd({trackSid:t,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new ao({reason:Ft.CLIENT_INITIATED,action:Pi.DISCONNECT})})}sendRequest(t){return I(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(function*(){if(!r&&!D2(n)&&i.state===De.RECONNECTING){i.queuedRequests.push(()=>I(i,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(r||(yield i.requestQueue.flush()),i.signalLatency&&(yield vt(i.signalLatency)),i.isDisconnected){i.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!i.ws||i.ws.readyState!==i.ws.OPEN){i.log.error("cannot send signal request before connected, type: ".concat(n?.case),i.logContext);return}const s=new oy({message:n});try{i.useJSON?i.ws.send(s.toJsonString()):i.ws.send(s.toBinary())}catch(a){i.log.error("error sending signal message",Object.assign(Object.assign({},i.logContext),{error:a}))}})()})}handleSignalResponse(t){var n,i;const r=t.message;if(r==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(r.case==="answer"){const s=Eh(r.value);this.onAnswer&&this.onAnswer(s,r.value.id)}else if(r.case==="offer"){const s=Eh(r.value);this.onOffer&&this.onOffer(s,r.value.id)}else if(r.case==="trickle"){const s=JSON.parse(r.value.candidateInit);this.onTrickle&&this.onTrickle(s,r.value.target)}else r.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=r.value.participants)!==null&&n!==void 0?n:[]):r.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(r.value):r.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((i=r.value.speakers)!==null&&i!==void 0?i:[]):r.case==="leave"?this.onLeave&&this.onLeave(r.value):r.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(r.value.sid,r.value.muted):r.case==="roomUpdate"?this.onRoomUpdate&&r.value.room&&this.onRoomUpdate(r.value.room):r.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(r.value):r.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(r.value):r.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(r.value):r.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(r.value):r.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(r.value):r.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(r.value):r.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(r.value):r.case==="pong"||(r.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(r.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):r.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(r.value):r.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(r.value.trackSid):r.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(r.value.token),this.onRoomMoved&&this.onRoomMoved(r.value)):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:r.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const t=this.queuedRequests.shift();t&&this.requestQueue.run(t)}}handleOnClose(t){return I(this,void 0,void 0,function*(){if(this.state===De.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(t),Object.assign(Object.assign({},this.logContext),{reason:t})),n&&n(t)})}handleWSError(t){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:t}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=at.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&at.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=at.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&at.clearInterval(this.pingInterval)}}function Eh(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type;break}return t}function ko(e,t){return new ri({sdp:e.sdp,type:e.type,id:t})}function L2(e,t,n){var i;const r=new URLSearchParams;return r.set("access_token",e),n.reconnect&&(r.set("reconnect","1"),n.sid&&r.set("sid",n.sid)),r.set("auto_subscribe",n.autoSubscribe?"1":"0"),r.set("sdk",Jt()?"reactnative":"js"),r.set("version",t.version),r.set("protocol",t.protocol.toString()),t.deviceModel&&r.set("device_model",t.deviceModel),t.os&&r.set("os",t.os),t.osVersion&&r.set("os_version",t.osVersion),t.browser&&r.set("browser",t.browser),t.browserVersion&&r.set("browser_version",t.browserVersion),n.adaptiveStream&&r.set("adaptive_stream","1"),n.reconnectReason&&r.set("reconnect_reason",n.reconnectReason.toString()),!((i=navigator.connection)===null||i===void 0)&&i.type&&r.set("network",navigator.connection.type),r}class Ph{constructor(){this.buffer=[],this._totalSize=0}push(t){this.buffer.push(t),this._totalSize+=t.data.byteLength}pop(){const t=this.buffer.shift();return t&&(this._totalSize-=t.data.byteLength),t}getAll(){return this.buffer.slice()}popToSequence(t){for(;this.buffer.length>0&&this.buffer[0].sequence<=t;)this.pop()}alignBufferedAmount(t){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=t)break;this.pop()}}get length(){return this.buffer.length}}class F2{constructor(t){this._map=new Map,this._lastCleanup=0,this.ttl=t}set(t,n){const i=Date.now();i-this._lastCleanup>this.ttl/2&&this.cleanup();const r=i+this.ttl;return this._map.set(t,{value:n,expiresAt:r}),this}get(t){const n=this._map.get(t);if(n){if(n.expiresAt<Date.now()){this._map.delete(t);return}return n.value}}has(t){const n=this._map.get(t);return n?n.expiresAt<Date.now()?(this._map.delete(t),!1):!0:!1}delete(t){return this._map.delete(t)}clear(){this._map.clear()}cleanup(){const t=Date.now();for(const[n,i]of this._map.entries())i.expiresAt<t&&this._map.delete(n);this._lastCleanup=t}get size(){return this.cleanup(),this._map.size}forEach(t){this.cleanup();for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&t(i.value,n,this.asValueMap())}map(t){this.cleanup();const n=[],i=this.asValueMap();for(const[r,o]of i.entries())n.push(t(o,r,i));return n}asValueMap(){const t=new Map;for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&t.set(n,i.value);return t}}var Bt={},$a={},ja={exports:{}},Mh;function Ba(){if(Mh)return ja.exports;Mh=1;var e=ja.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var n="candidate:%s %d %s %d %s %d typ %s";return n+=t.raddr!=null?" raddr %s rport %d":"%v%v",n+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(n+=" generation %d"),n+=t["network-id"]!=null?" network-id %d":"%v",n+=t["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var n="ssrc:%d";return t.attribute!=null&&(n+=" %s",t.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var n="mediaclk:";return n+=t.id!=null?"id=%s %s":"%v%s",n+=t.mediaClockValue!=null?"=%s":"",n+=t.rateNumerator!=null?" rate=%s":"",n+=t.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(e).forEach(function(t){var n=e[t];n.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})}),ja.exports}var Ih;function z2(){return Ih||(Ih=1,(function(e){var t=function(a){return String(Number(a))===a?Number(a):a},n=function(a,c,l,u){if(u&&!l)c[u]=t(a[1]);else for(var d=0;d<l.length;d+=1)a[d+1]!=null&&(c[l[d]]=t(a[d+1]))},i=function(a,c,l){var u=a.name&&a.names;a.push&&!c[a.push]?c[a.push]=[]:u&&!c[a.name]&&(c[a.name]={});var d=a.push?{}:u?c[a.name]:c;n(l.match(a.reg),d,a.names,a.name),a.push&&c[a.push].push(d)},r=Ba(),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(a){var c={},l=[],u=c;return a.split(/(\r\n|\r|\n)/).filter(o).forEach(function(d){var f=d[0],h=d.slice(2);f==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var m=0;m<(r[f]||[]).length;m+=1){var p=r[f][m];if(p.reg.test(h))return i(p,u,h)}}),c.media=l,c};var s=function(a,c){var l=c.split(/=(.+)/,2);return l.length===2?a[l[0]]=t(l[1]):l.length===1&&c.length>1&&(a[l[0]]=void 0),a};e.parseParams=function(a){return a.split(/;\s?/).reduce(s,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(a){return a.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(a){for(var c=[],l=a.split(" ").map(t),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},e.parseImageAttributes=function(a){return a.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(s,{})})},e.parseSimulcastStreamList=function(a){return a.split(";").map(function(c){return c.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=t(l):(u=t(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}})($a)),$a}var Va,Oh;function U2(){if(Oh)return Va;Oh=1;var e=Ba(),t=/%[sdv%]/g,n=function(s){var a=1,c=arguments,l=c.length;return s.replace(t,function(u){if(a>=l)return u;var d=c[a];switch(a+=1,u){case"%%":return"%";case"%s":return String(d);case"%d":return Number(d);case"%v":return""}})},i=function(s,a,c){var l=a.format instanceof Function?a.format(a.push?c:c[a.name]):a.format,u=[s+"="+l];if(a.names)for(var d=0;d<a.names.length;d+=1){var f=a.names[d];a.name?u.push(c[a.name][f]):u.push(c[a.names[d]])}else u.push(c[a.name]);return n.apply(null,u)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return Va=function(s,a){a=a||{},s.version==null&&(s.version=0),s.name==null&&(s.name=" "),s.media.forEach(function(d){d.payloads==null&&(d.payloads="")});var c=a.outerOrder||r,l=a.innerOrder||o,u=[];return c.forEach(function(d){e[d].forEach(function(f){f.name in s&&s[f.name]!=null?u.push(i(d,f,s)):f.push in s&&s[f.push]!=null&&s[f.push].forEach(function(h){u.push(i(d,f,h))})})}),s.media.forEach(function(d){u.push(i("m",e.m[0],d)),l.forEach(function(f){e[f].forEach(function(h){h.name in d&&d[h.name]!=null?u.push(i(f,h,d)):h.push in d&&d[h.push]!=null&&d[h.push].forEach(function(m){u.push(i(f,h,m))})})})}),u.join(`\r
`)+`\r
`},Va}var Nh;function $2(){if(Nh)return Bt;Nh=1;var e=z2(),t=U2(),n=Ba();return Bt.grammar=n,Bt.write=t,Bt.parse=e.parse,Bt.parseParams=e.parseParams,Bt.parseFmtpConfig=e.parseFmtpConfig,Bt.parsePayloads=e.parsePayloads,Bt.parseRemoteCandidates=e.parseRemoteCandidates,Bt.parseImageAttributes=e.parseImageAttributes,Bt.parseSimulcastStreamList=e.parseSimulcastStreamList,Bt}var Un=$2();function qa(e,t,n){var i,r,o;t===void 0&&(t=50),n===void 0&&(n={});var s=(i=n.isImmediate)!=null&&i,a=(r=n.callback)!=null&&r,c=n.maxWait,l=Date.now(),u=[];function d(){if(c!==void 0){var h=Date.now()-l;if(h+t>=c)return c-h}return t}var f=function(){var h=[].slice.call(arguments),m=this;return new Promise(function(p,y){var g=s&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,l=Date.now(),!s){var C=e.apply(m,h);a&&a(C),u.forEach(function(w){return(0,w.resolve)(C)}),u=[]}},d()),g){var S=e.apply(m,h);return a&&a(S),p(S)}u.push({resolve:p,reject:y})})};return f.cancel=function(h){o!==void 0&&clearTimeout(o),u.forEach(function(m){return(0,m.reject)(h)}),u=[]},f}const j2=.7,B2=20,Ai={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class Ah extends Yt.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;super(),this.log=be,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=qa(r=>I(this,void 0,void 0,function*(){this.emit(Ai.NegotiationStarted);try{yield this.createAndSendOffer()}catch(o){if(r)r(o);else throw o}}),B2),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=fn((i=n.loggerName)!==null&&i!==void 0?i:Ut.PCTransport),this.loggerOptions=n,this.config=t,this._pc=this.createPC(),this.offerLock=new pt}createPC(){const t=new RTCPeerConnection(this.config);return t.onicecandidate=n=>{var i;n.candidate&&((i=this.onIceCandidate)===null||i===void 0||i.call(this,n.candidate))},t.onicecandidateerror=n=>{var i;(i=this.onIceCandidateError)===null||i===void 0||i.call(this,n)},t.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,t.iceConnectionState)},t.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,t.signalingState)},t.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,t.connectionState)},t.ondatachannel=n=>{var i;(i=this.onDataChannel)===null||i===void 0||i.call(this,n)},t.ontrack=n=>{var i;(i=this.onTrack)===null||i===void 0||i.call(this,n)},t}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(t){return I(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(t);this.pendingCandidates.push(t)})}setRemoteDescription(t,n){return I(this,void 0,void 0,function*(){var i;if(t.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let r;if(t.type==="offer"){let{stereoMids:o,nackMids:s}=V2(t);this.remoteStereoMids=o,this.remoteNackMids=s}else if(t.type==="answer"){const o=Un.parse((i=t.sdp)!==null&&i!==void 0?i:"");o.media.forEach(s=>{const a=Ha(s.mid);s.type==="audio"&&this.trackBitrates.some(c=>{if(!c.transceiver||a!=c.transceiver.mid)return!1;let l=0;if(s.rtp.some(d=>d.codec.toUpperCase()===c.codec.toUpperCase()?(l=d.payload,!0):!1),l===0)return!0;let u=!1;for(const d of s.fmtp)if(d.payload===l){d.config=d.config.split(";").filter(f=>!f.includes("maxaveragebitrate")).join(";"),c.maxbr>0&&(d.config+=";maxaveragebitrate=".concat(c.maxbr*1e3)),u=!0;break}return u||c.maxbr>0&&s.fmtp.push({payload:l,config:"maxaveragebitrate=".concat(c.maxbr*1e3)}),!0})}),r=Un.write(o)}return yield this.setMungedSDP(t,r,!0),this.pendingCandidates.forEach(o=>{this.pc.addIceCandidate(o)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):t.type==="answer"&&(this.emit(Ai.NegotiationComplete),t.sdp&&Un.parse(t.sdp).media.forEach(s=>{s.type==="video"&&this.emit(Ai.RTPVideoPayloadTypes,s.rtp)})),!0})}createAndSendOffer(t){return I(this,void 0,void 0,function*(){var n;const i=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(t?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const a=this._pc.remoteDescription;if(t?.iceRestart&&a)yield this._pc.setRemoteDescription(a);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=this.latestOfferId+1;this.latestOfferId=r;const o=yield this.pc.createOffer(t);this.log.debug("original offer",Object.assign({sdp:o.sdp},this.logContext));const s=Un.parse((n=o.sdp)!==null&&n!==void 0?n:"");if(s.media.forEach(a=>{Dh(a),a.type==="audio"?Rh(a,[],[]):a.type==="video"&&this.trackBitrates.some(c=>{if(!a.msid||!c.cid||!a.msid.includes(c.cid))return!1;let l=0;if(a.rtp.some(d=>d.codec.toUpperCase()===c.codec.toUpperCase()?(l=d.payload,!0):!1),l===0||(Qt(c.codec)&&!ai()&&this.ensureVideoDDExtensionForSVC(a,s),c.codec!=="av1"))return!0;const u=Math.round(c.maxbr*j2);for(const d of a.fmtp)if(d.payload===l){d.config.includes("x-google-start-bitrate")||(d.config+=";x-google-start-bitrate=".concat(u));break}return!0})}),this.latestOfferId>r){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:r}));return}yield this.setMungedSDP(o,Un.write(s)),this.onOffer(o,this.latestOfferId)}finally{i()}})}createAndSetAnswer(){return I(this,void 0,void 0,function*(){var t;const n=yield this.pc.createAnswer(),i=Un.parse((t=n.sdp)!==null&&t!==void 0?t:"");return i.media.forEach(r=>{Dh(r),r.type==="audio"&&Rh(r,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Un.write(i)),n})}createDataChannel(t,n){return this.pc.createDataChannel(t,n)}addTransceiver(t,n){return this.pc.addTransceiver(t,n)}addTrack(t){if(!this._pc)throw new Qe("PC closed, cannot add track");return this._pc.addTrack(t)}setTrackCodecBitrate(t){this.trackBitrates.push(t)}setConfiguration(t){var n;if(!this._pc)throw new Qe("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(t)}canRemoveTrack(){var t;return!!(!((t=this._pc)===null||t===void 0)&&t.removeTrack)}removeTrack(t){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(t)}getConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var t;return(t=this._pc)===null||t===void 0?void 0:t.localDescription}getRemoteDescription(){var t;return(t=this.pc)===null||t===void 0?void 0:t.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return I(this,void 0,void 0,function*(){var t;if(!this._pc)return;let n="";const i=new Map,r=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),i.set(a.id,a);break;case"remote-candidate":r.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const s=(t=i.get(n))===null||t===void 0?void 0:t.remoteCandidateId;if(s!==void 0)return r.get(s)})}setMungedSDP(t,n,i){return I(this,void 0,void 0,function*(){if(n){const r=t.sdp;t.sdp=n;try{this.log.debug("setting munged ".concat(i?"remote":"local"," description"),this.logContext),i?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t);return}catch(o){this.log.warn("not able to set ".concat(t.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),t.sdp=r}}try{i?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t)}catch(r){let o="unknown error";r instanceof Error?o=r.message:typeof r=="string"&&(o=r);const s={error:o,sdp:t.sdp};throw!i&&this.pc.remoteDescription&&(s.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(t.type),Object.assign(Object.assign({},this.logContext),{fields:s})),new ba(o)}})}ensureVideoDDExtensionForSVC(t,n){var i,r;if(!((i=t.ext)===null||i===void 0?void 0:i.some(s=>s.uri===hh))){if(this.ddExtID===0){let s=0;n.media.forEach(a=>{var c;a.type==="video"&&((c=a.ext)===null||c===void 0||c.forEach(l=>{l.value>s&&(s=l.value)}))}),this.ddExtID=s+1}(r=t.ext)===null||r===void 0||r.push({value:this.ddExtID,uri:hh})}}}function Rh(e,t,n){const i=Ha(e.mid);let r=0;e.rtp.some(o=>o.codec==="opus"?(r=o.payload,!0):!1),r>0&&(e.rtcpFb||(e.rtcpFb=[]),n.includes(i)&&!e.rtcpFb.some(o=>o.payload===r&&o.type==="nack")&&e.rtcpFb.push({payload:r,type:"nack"}),t.includes(i)&&e.fmtp.some(o=>o.payload===r?(o.config.includes("stereo=1")||(o.config+=";stereo=1"),!0):!1))}function V2(e){var t;const n=[],i=[],r=Un.parse((t=e.sdp)!==null&&t!==void 0?t:"");let o=0;return r.media.forEach(s=>{var a;const c=Ha(s.mid);s.type==="audio"&&(s.rtp.some(l=>l.codec==="opus"?(o=l.payload,!0):!1),!((a=s.rtcpFb)===null||a===void 0)&&a.some(l=>l.payload===o&&l.type==="nack")&&i.push(c),s.fmtp.some(l=>l.payload===o?(l.config.includes("sprop-stereo=1")&&n.push(c),!0):!1))}),{stereoMids:n,nackMids:i}}function Dh(e){if(e.connection){const t=e.connection.ip.indexOf(":")>=0;(e.connection.version===4&&t||e.connection.version===6&&!t)&&(e.connection.ip="0.0.0.0",e.connection.version=4)}}function Ha(e){return typeof e=="number"?e.toFixed(0):e}const Wa="vp8",q2={audioPreset:wa.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:Ta.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:Wa,backupCodec:!0,preConnectBuffer:!1},Lh={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},Fh={deviceId:{ideal:"default"},resolution:gr.h720.resolution},H2={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new Ny,disconnectOnPageLeave:!0,webAudioMix:!1},Za={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var qe;(function(e){e[e.NEW=0]="NEW",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.FAILED=3]="FAILED",e[e.CLOSING=4]="CLOSING",e[e.CLOSED=5]="CLOSED"})(qe||(qe={}));class W2{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(t,n,i){var r;this.peerConnectionTimeout=Za.peerConnectionTimeout,this.log=be,this.updateState=()=>{var o;const s=this.state,a=this.requiredTransports.map(c=>c.getConnectionState());a.every(c=>c==="connected")?this.state=qe.CONNECTED:a.some(c=>c==="failed")?this.state=qe.FAILED:a.some(c=>c==="connecting")?this.state=qe.CONNECTING:a.every(c=>c==="closed")?this.state=qe.CLOSED:a.some(c=>c==="closed")?this.state=qe.CLOSING:a.every(c=>c==="new")&&(this.state=qe.NEW),s!==this.state&&(this.log.debug("pc state change: from ".concat(qe[s]," to ").concat(qe[this.state]),this.logContext),(o=this.onStateChange)===null||o===void 0||o.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=fn((r=i.loggerName)!==null&&r!==void 0?r:Ut.PCManager),this.loggerOptions=i,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new Ah(t,i),this.subscriber=new Ah(t,i),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=o=>{var s;(s=this.onIceCandidate)===null||s===void 0||s.call(this,o,zt.PUBLISHER)},this.subscriber.onIceCandidate=o=>{var s;(s=this.onIceCandidate)===null||s===void 0||s.call(this,o,zt.SUBSCRIBER)},this.subscriber.onDataChannel=o=>{var s;(s=this.onDataChannel)===null||s===void 0||s.call(this,o)},this.subscriber.onTrack=o=>{var s;(s=this.onTrack)===null||s===void 0||s.call(this,o)},this.publisher.onOffer=(o,s)=>{var a;(a=this.onPublisherOffer)===null||a===void 0||a.call(this,o,s)},this.state=qe.NEW,this.connectionLock=new pt,this.remoteOfferLock=new pt}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}requirePublisher(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=t,this.updateState()}requireSubscriber(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=t,this.updateState()}createAndSendPublisherOffer(t){return this.publisher.createAndSendOffer(t)}setPublisherAnswer(t,n){return this.publisher.setRemoteDescription(t,n)}removeTrack(t){return this.publisher.removeTrack(t)}close(){return I(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const t=this.publisher;for(const n of t.getSenders())try{t.canRemoveTrack()&&t.removeTrack(n)}catch(i){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:i}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return I(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(t,n){return I(this,void 0,void 0,function*(){n===zt.PUBLISHER?yield this.publisher.addIceCandidate(t):yield this.subscriber.addIceCandidate(t)})}createSubscriberAnswerFromOffer(t,n){return I(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type,sdp:t.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const i=yield this.remoteOfferLock.lock();try{return(yield this.subscriber.setRemoteDescription(t,n))?yield this.subscriber.createAndSetAnswer():void 0}finally{i()}})}updateConfiguration(t,n){this.publisher.setConfiguration(t),this.subscriber.setConfiguration(t),n&&this.triggerIceRestart()}ensurePCTransportConnection(t,n){return I(this,void 0,void 0,function*(){var i;const r=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((i=this.requiredTransports)===null||i===void 0?void 0:i.map(o=>this.ensureTransportConnected(o,t,n)))}finally{r()}})}negotiate(t){return I(this,void 0,void 0,function*(){return new Promise((n,i)=>I(this,void 0,void 0,function*(){const r=setTimeout(()=>{i("negotiation timed out")},this.peerConnectionTimeout),o=()=>{clearTimeout(r),i("negotiation aborted")};t.signal.addEventListener("abort",o),this.publisher.once(Ai.NegotiationStarted,()=>{t.signal.aborted||this.publisher.once(Ai.NegotiationComplete,()=>{clearTimeout(r),n()})}),yield this.publisher.negotiate(s=>{clearTimeout(r),i(s)})}))})}addPublisherTransceiver(t,n){return this.publisher.addTransceiver(t,n)}addPublisherTrack(t){return this.publisher.addTrack(t)}createPublisherDataChannel(t,n){return this.publisher.createDataChannel(t,n)}getConnectedAddress(t){return t===zt.PUBLISHER?this.publisher.getConnectedAddress():t===zt.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const t=[];return this.isPublisherConnectionRequired&&t.push(this.publisher),this.isSubscriberConnectionRequired&&t.push(this.subscriber),t}ensureTransportConnected(t,n){return I(this,arguments,void 0,function(i,r){var o=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return(function*(){if(i.getConnectionState()!=="connected")return new Promise((c,l)=>I(o,void 0,void 0,function*(){const u=()=>{this.log.warn("abort transport connection",this.logContext),at.clearTimeout(d),l(new Ie("room connection has been cancelled",Se.Cancelled))};r?.signal.aborted&&u(),r?.signal.addEventListener("abort",u);const d=at.setTimeout(()=>{r?.signal.removeEventListener("abort",u),l(new Ie("could not establish pc connection",Se.InternalError))},s);for(;this.state!==qe.CONNECTED;)if(yield vt(50),r?.signal.aborted){l(new Ie("room connection has been cancelled",Se.Cancelled));return}at.clearTimeout(d),r?.signal.removeEventListener("abort",u),c()}))})()})}}class He extends Error{constructor(t,n,i){super(n),this.code=t,this.message=Uh(n,He.MAX_MESSAGE_BYTES),this.data=i?Uh(i,He.MAX_DATA_BYTES):void 0}static fromProto(t){return new He(t.code,t.message,t.data)}toProto(){return new Yu({code:this.code,message:this.message,data:this.data})}static builtIn(t,n){return new He(He.ErrorCode[t],He.ErrorMessage[t],n)}}He.MAX_MESSAGE_BYTES=256,He.MAX_DATA_BYTES=15360,He.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404},He.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const zh=15360;function Ga(e){return new TextEncoder().encode(e).length}function Uh(e,t){if(Ga(e)<=t)return e;let n=0,i=e.length;const r=new TextEncoder;for(;n<i;){const o=Math.floor((n+i+1)/2);r.encode(e.slice(0,o)).length<=t?n=o:i=o-1}return e.slice(0,n)}const Ka=2e3;function Co(e,t){if(!t)return 0;let n,i;return"bytesReceived"in e?(n=e.bytesReceived,i=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,i=t.bytesSent),n===void 0||i===void 0||e.timestamp===void 0||t.timestamp===void 0?0:(n-i)*8*1e3/(e.timestamp-t.timestamp)}const Ya=typeof MediaRecorder<"u";class Z2{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const G2=Ya?MediaRecorder:Z2;class K2 extends G2{constructor(t,n){if(!Ya)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([t.mediaStreamTrack]),n);let i,r;const o=()=>r===void 0,s=()=>{this.removeEventListener("dataavailable",i),this.removeEventListener("stop",s),this.removeEventListener("error",a),r?.close(),r=void 0},a=c=>{r?.error(c),this.removeEventListener("dataavailable",i),this.removeEventListener("stop",s),this.removeEventListener("error",a),r=void 0};this.byteStream=new ReadableStream({start:c=>{r=c,i=l=>I(this,void 0,void 0,function*(){let u;if(l.data.arrayBuffer){const d=yield l.data.arrayBuffer();u=new Uint8Array(d)}else if(l.data.byteArray)u=l.data.byteArray;else throw new Error("no data available!");o()||c.enqueue(u)}),this.addEventListener("dataavailable",i)},cancel:()=>{s()}}),this.addEventListener("stop",s),this.addEventListener("error",a)}}function Y2(){return Ya}const Q2=1e3,J2=1e4;class $h extends B{get sender(){return this._sender}set sender(t){this._sender=t}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(t,n,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(t,n,o),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=qa(()=>I(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>I(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(K.Ended,this)},this.reacquireTrack=!1,this.providedByUser=r,this.muteLock=new pt,this.pauseUpstreamLock=new pt,this.trackChangeLock=new pt,this.trackChangeLock.lock().then(s=>I(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(t,!0)}finally{s()}})),this._constraints=t.getConstraints(),i&&(this._constraints=i)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==B.Kind.Video)return;const{width:t,height:n}=this._mediaStreamTrack.getSettings();if(t&&n)return{width:t,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var t,n;return(n=(t=this.processor)===null||t===void 0?void 0:t.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(t,n){return I(this,void 0,void 0,function*(){var i;if(t===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(o=>{Oi(this._mediaStreamTrack,o)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([t]),t&&(t.addEventListener("ended",this.handleEnded),t.addEventListener("mute",this.handleTrackMuteEvent),t.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=t.getConstraints());let r;if(this.processor&&t){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(Ii(t,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:t,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}this.sender&&((i=this.sender.transport)===null||i===void 0?void 0:i.state)!=="closed"&&(yield this.sender.replaceTrack(r??t)),!this.providedByUser&&this._mediaStreamTrack!==t&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=t,t&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(o=>{Ii(r??t,o)}))})}waitForDimensions(){return I(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q2;return(function*(){var i;if(t.kind===B.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((i=xt())===null||i===void 0?void 0:i.os)==="iOS"&&(yield vt(10));const r=Date.now();for(;Date.now()-r<n;){const o=t.dimensions;if(o)return o;yield vt(50)}throw new gn("unable to get track dimensions after timeout")})()})}setDeviceId(t){return I(this,void 0,void 0,function*(){return this._constraints.deviceId===t&&this._mediaStreamTrack.getSettings().deviceId===Ln(t)||(this._constraints.deviceId=t,this.isMuted)?!0:(yield this.restartTrack(),Ln(t)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return I(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){if(t.source===B.Source.ScreenShare)return;const{deviceId:i,groupId:r}=t._mediaStreamTrack.getSettings(),o=t.kind===B.Kind.Audio?"audioinput":"videoinput";return n?rt.getInstance().normalizeDeviceId(o,i,r):i})()})}mute(){return I(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return I(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(t,n){return I(this,void 0,void 0,function*(){const i=yield this.trackChangeLock.lock();try{if(!this.sender)throw new gn("unable to replace an unpublished track");let r,o;return typeof n=="boolean"?r=n:n!==void 0&&(r=n.userProvidedTrack,o=n.stopProcessor),this.providedByUser=r??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(t),o&&this.processor&&(yield this.internalStopProcessor()),this}finally{i()}})}restart(t){return I(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{t||(t=this._constraints);const{deviceId:i,facingMode:r}=t,o=Ay(t,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:t}));const s={audio:!1,video:!1};this.kind===B.Kind.Video?s.video=i||r?{deviceId:i,facingMode:r}:!0:s.audio=i?Object.assign({deviceId:i},o):!0,this.attachedElements.forEach(l=>{Oi(this.mediaStreamTrack,l)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const c=(yield navigator.mediaDevices.getUserMedia(s)).getTracks()[0];return this.kind===B.Kind.Video&&(yield c.applyConstraints(o)),c.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(c),this._constraints=t,this.emit(K.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(t){this.log.debug("setting ".concat(this.kind," track ").concat(t?"muted":"unmuted"),this.logContext),!(this.isMuted===t&&this._mediaStreamTrack.enabled!==t)&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?K.Muted:K.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return I(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),fh()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var t;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(t=this.processor)===null||t===void 0||t.destroy(),this.processor=void 0}pauseUpstream(){return I(this,void 0,void 0,function*(){var t;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(K.UpstreamPaused,this);const i=xt();if(i?.name==="Safari"&&jt(i.version,"12.0")<0)throw new ya("pauseUpstream is not supported on Safari < 12.");((t=this.sender.transport)===null||t===void 0?void 0:t.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return I(this,void 0,void 0,function*(){var t;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(K.UpstreamResumed,this),((t=this.sender.transport)===null||t===void 0?void 0:t.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return I(this,void 0,void 0,function*(){var t;return!((t=this.sender)===null||t===void 0)&&t.getStats?yield this.sender.getStats():void 0})}setProcessor(t){return I(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var o;const s=yield i.trackChangeLock.lock();try{i.log.debug("setting up processor",i.logContext);const a=document.createElement(i.kind),c={kind:i.kind,track:i._mediaStreamTrack,element:a,audioContext:i.audioContext};if(yield n.init(c),i.log.debug("processor initialized",i.logContext),i.processor&&(yield i.internalStopProcessor()),i.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(Ii(i._mediaStreamTrack,a),a.muted=!0,a.play().catch(l=>{l instanceof DOMException&&l.name==="AbortError"?(i.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},i.logContext),{error:l})),setTimeout(()=>{a.play().catch(u=>{i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{err:u}))})},100)):i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{error:l}))}),i.processor=n,i.processorElement=a,i.processor.processedTrack){for(const l of i.attachedElements)l!==i.processorElement&&r&&(Oi(i._mediaStreamTrack,l),Ii(i.processor.processedTrack,l));yield(o=i.sender)===null||o===void 0?void 0:o.replaceTrack(i.processor.processedTrack)}i.emit(K.TrackProcessorUpdate,i.processor)}finally{s()}})()})}getProcessor(){return this.processor}stopProcessor(){return I(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){const i=yield t.trackChangeLock.lock();try{yield t.internalStopProcessor(n)}finally{i()}})()})}internalStopProcessor(){return I(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var i,r;t.processor&&(t.log.debug("stopping processor",t.logContext),(i=t.processor.processedTrack)===null||i===void 0||i.stop(),yield t.processor.destroy(),t.processor=void 0,n||((r=t.processorElement)===null||r===void 0||r.remove(),t.processorElement=void 0),yield t._mediaStreamTrack.applyConstraints(t._constraints),yield t.setMediaStreamTrack(t._mediaStreamTrack,!0),t.emit(K.TrackProcessorUpdate))})()})}startPreConnectBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!Y2()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new K2(this,{mimeType:n})}this.localTrackRecorder.start(t),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},J2)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var t;return(t=this.localTrackRecorder)===null||t===void 0?void 0:t.byteStream}getPreConnectBufferMimeType(){var t;return(t=this.localTrackRecorder)===null||t===void 0?void 0:t.mimeType}}class wo extends $h{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(t,B.Kind.Audio,n,i,o),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>I(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}s&&this.prevStats&&(this._currentBitrate=Co(s,this.prevStats)),this.prevStats=s}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(K.AudioTrackFeatureUpdate,this,it.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(K.AudioTrackFeatureUpdate,this,it.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=r,this.checkForSilence()}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===B.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const i=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Ln(this._constraints.deviceId);return this.source===B.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||i)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this}finally{n()}})}restartTrack(t){return I(this,void 0,void 0,function*(){let n;if(t){const i=La({audio:t});typeof i.audio!="boolean"&&(n=i.audio)}yield this.restart(n)})}restart(t){const n=Object.create(null,{restart:{get:()=>super.restart}});return I(this,void 0,void 0,function*(){const i=yield n.restart.call(this,t);return this.checkForSilence(),i})}startMonitor(){yt()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Ka)))}setProcessor(t){return I(this,void 0,void 0,function*(){var n;const i=yield this.trackChangeLock.lock();try{if(!Jt()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const r={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(t.name),this.logContext),yield t.init(r),this.processor=t,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(K.TrackProcessorUpdate,this.processor)}finally{i()}})}setAudioContext(t){this.audioContext=t}getSenderStats(){return I(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return;const n=yield this.sender.getStats();let i;return n.forEach(r=>{r.type==="outbound-rtp"&&(i={type:"audio",streamId:r.id,packetsSent:r.packetsSent,packetsLost:r.packetsLost,bytesSent:r.bytesSent,timestamp:r.timestamp,roundTripTime:r.roundTripTime,jitter:r.jitter})}),i})}checkForSilence(){return I(this,void 0,void 0,function*(){const t=yield wh(this);return t&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(K.AudioSilenceDetected)),t})}}function X2(e,t,n){switch(e.kind){case"audio":return new wo(e,t,!1,void 0,n);case"video":return new So(e,t,!1,n);default:throw new gn("unsupported track type: ".concat(e.kind))}}const eb=Object.values(gr),tb=Object.values(Sa),nb=Object.values(Ta),ib=[gr.h180,gr.h360],rb=[Sa.h180,Sa.h360],ob=e=>[{scaleResolutionDownBy:2,fps:e.encoding.maxFramerate}].map(n=>{var i,r;return new Me(Math.floor(e.width/n.scaleResolutionDownBy),Math.floor(e.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((i=e.encoding.maxFramerate)!==null&&i!==void 0?i:30)/((r=n.fps)!==null&&r!==void 0?r:30))))),n.fps,e.encoding.priority)}),Qa=["q","h","f"];function Ja(e,t,n,i){var r,o;let s=i?.videoEncoding;e&&(s=i?.screenShareEncoding);const a=i?.simulcast,c=i?.scalabilityMode,l=i?.videoCodec;if(!s&&!a&&!c||!t||!n)return[{}];s||(s=ab(e,t,n,l),be.debug("using video encoding",s));const u=s.maxFramerate,d=new Me(t,n,s.maxBitrate,s.maxFramerate,s.priority);if(c&&Qt(l)){const m=new Vh(c),p=[];if(m.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));const y=xt();if(vr()||Jt()||y?.name==="Chrome"&&jt(y?.version,"113")<0){const g=m.suffix=="h"?2:3,S=u2(y);for(let C=0;C<m.spatial;C+=1)p.push({rid:Qa[2-C],maxBitrate:s.maxBitrate/Math.pow(g,C),maxFramerate:d.encoding.maxFramerate,scaleResolutionDownBy:S?Math.pow(2,C):void 0});p[0].scalabilityMode=c}else p.push({maxBitrate:s.maxBitrate,maxFramerate:d.encoding.maxFramerate,scalabilityMode:c});return d.encoding.priority&&(p[0].priority=d.encoding.priority,p[0].networkPriority=d.encoding.priority),be.debug("using svc encoding",{encodings:p}),p}if(!a)return[s];let f=[];e?f=(r=Bh(i?.screenShareSimulcastLayers))!==null&&r!==void 0?r:jh(e,d):f=(o=Bh(i?.videoSimulcastLayers))!==null&&o!==void 0?o:jh(e,d);let h;if(f.length>0){const m=f[0];f.length>1&&([,h]=f);const p=Math.max(t,n);if(p>=960&&h)return Xa(t,n,[m,h,d],u);if(p>=480)return Xa(t,n,[m,d],u)}return Xa(t,n,[d])}function sb(e,t,n){var i,r,o,s;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;t!==n.backupCodec.codec&&be.warn("requested a different codec than specified as backup",{serverRequested:t,backup:n.backupCodec.codec}),n.videoCodec=t,n.videoEncoding=n.backupCodec.encoding;const a=e.mediaStreamTrack.getSettings(),c=(i=a.width)!==null&&i!==void 0?i:(r=e.dimensions)===null||r===void 0?void 0:r.width,l=(o=a.height)!==null&&o!==void 0?o:(s=e.dimensions)===null||s===void 0?void 0:s.height;return e.source===B.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),Ja(e.source===B.Source.ScreenShare,c,l,n)}function ab(e,t,n,i){const r=cb(e,t,n);let{encoding:o}=r[0];const s=Math.max(t,n);for(let a=0;a<r.length;a+=1){const c=r[a];if(o=c.encoding,c.width>=s)break}if(i)switch(i){case"av1":case"h265":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function cb(e,t,n){if(e)return nb;const i=t>n?t/n:n/t;return Math.abs(i-16/9)<Math.abs(i-4/3)?eb:tb}function jh(e,t){if(e)return ob(t);const{width:n,height:i}=t,r=n>i?n/i:i/n;return Math.abs(r-16/9)<Math.abs(r-4/3)?ib:rb}function Xa(e,t,n,i){const r=[];if(n.forEach((o,s)=>{if(s>=Qa.length)return;const a=Math.min(e,t),l={rid:Qa[s],scaleResolutionDownBy:Math.max(1,a/Math.min(o.width,o.height)),maxBitrate:o.encoding.maxBitrate},u=i&&o.encoding.maxFramerate?Math.min(i,o.encoding.maxFramerate):o.encoding.maxFramerate;u&&(l.maxFramerate=u);const d=si()||s===0;o.encoding.priority&&d&&(l.priority=o.encoding.priority,l.networkPriority=o.encoding.priority),r.push(l)}),Jt()&&mh()==="ios"){let o;r.forEach(a=>{o?a.maxFramerate&&a.maxFramerate>o&&(o=a.maxFramerate):o=a.maxFramerate});let s=!0;r.forEach(a=>{var c;a.maxFramerate!=o&&(s&&(s=!1,be.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),be.info('Setting framerate of encoding "'.concat((c=a.rid)!==null&&c!==void 0?c:"",'" to ').concat(o)),a.maxFramerate=o)})}return r}function Bh(e){if(e)return e.sort((t,n)=>{const{encoding:i}=t,{encoding:r}=n;return i.maxBitrate>r.maxBitrate?1:i.maxBitrate<r.maxBitrate?-1:i.maxBitrate===r.maxBitrate&&i.maxFramerate&&r.maxFramerate?i.maxFramerate>r.maxFramerate?1:-1:0})}class Vh{constructor(t){const n=t.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var t;return"L".concat(this.spatial,"T").concat(this.temporal).concat((t=this.suffix)!==null&&t!==void 0?t:"")}}function lb(e){return e.source===B.Source.ScreenShare||e.constraints.height&&Ln(e.constraints.height)>=1080?"maintain-resolution":"balanced"}const ub=5e3;class So extends $h{get sender(){return this._sender}set sender(t){this._sender=t,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0;super(t,B.Kind.Video,n,i,r),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>I(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(c){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:c}));return}const s=new Map(o.map(c=>[c.rid,c])),a=o.some(c=>c.qualityLimitationReason==="cpu");if(a!==this.isCpuConstrained&&(this.isCpuConstrained=a,this.isCpuConstrained&&this.emit(K.CpuConstrained)),this.prevStats){let c=0;s.forEach((l,u)=>{var d;const f=(d=this.prevStats)===null||d===void 0?void 0:d.get(u);c+=Co(l,f)}),this._currentBitrate=c}this.prevStats=s}),this.senderLock=new pt}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(t){var n;if(this.signalClient=t,!yt())return;const i=(n=this.sender)===null||n===void 0?void 0:n.getParameters();i&&(this.encodings=i.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Ka))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(t=>{t.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const t=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return I(this,void 0,void 0,function*(){var n,i,r,o,s;yield t.pauseUpstream.call(this);try{for(var a=!0,c=pn(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0)o=l.value,a=!1,yield(s=o.sender)===null||s===void 0?void 0:s.replaceTrack(null)}catch(u){i={error:u}}finally{try{!a&&!n&&(r=c.return)&&(yield r.call(c))}finally{if(i)throw i.error}}})}resumeUpstream(){const t=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return I(this,void 0,void 0,function*(){var n,i,r,o,s;yield t.resumeUpstream.call(this);try{for(var a=!0,c=pn(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){o=l.value,a=!1;const u=o;yield(s=u.sender)===null||s===void 0?void 0:s.replaceTrack(u.mediaStreamTrack)}}catch(u){i={error:u}}finally{try{!a&&!n&&(r=c.return)&&(yield r.call(c))}finally{if(i)throw i.error}}})}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===B.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===B.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(t){super.setTrackMuted(t);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!t}getSenderStats(){return I(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return[];const n=[],i=yield this.sender.getStats();return i.forEach(r=>{var o;if(r.type==="outbound-rtp"){const s={type:"video",streamId:r.id,frameHeight:r.frameHeight,frameWidth:r.frameWidth,framesPerSecond:r.framesPerSecond,framesSent:r.framesSent,firCount:r.firCount,pliCount:r.pliCount,nackCount:r.nackCount,packetsSent:r.packetsSent,bytesSent:r.bytesSent,qualityLimitationReason:r.qualityLimitationReason,qualityLimitationDurations:r.qualityLimitationDurations,qualityLimitationResolutionChanges:r.qualityLimitationResolutionChanges,rid:(o=r.rid)!==null&&o!==void 0?o:r.id,retransmittedPacketsSent:r.retransmittedPacketsSent,targetBitrate:r.targetBitrate,timestamp:r.timestamp},a=i.get(r.remoteId);a&&(s.jitter=a.jitter,s.packetsLost=a.packetsLost,s.roundTripTime=a.roundTripTime),n.push(s)}}),n.sort((r,o)=>{var s,a;return((s=o.frameWidth)!==null&&s!==void 0?s:0)-((a=r.frameWidth)!==null&&a!==void 0?a:0)}),n})}setPublishingQuality(t){const n=[];for(let i=_t.LOW;i<=_t.HIGH;i+=1)n.push(new sa({quality:i,enabled:i<=t}));this.log.debug("setting publishing quality. max quality ".concat(t),this.logContext),this.setPublishingLayers(Qt(this.codec),n)}restartTrack(t){return I(this,void 0,void 0,function*(){var n,i,r,o,s;let a;if(t){const d=La({video:t});typeof d.video!="boolean"&&(a=d.video)}yield this.restart(a),this.isCpuConstrained=!1;try{for(var c=!0,l=pn(this.simulcastCodecs.values()),u;u=yield l.next(),n=u.done,!n;c=!0){o=u.value,c=!1;const d=o;d.sender&&((s=d.sender.transport)===null||s===void 0?void 0:s.state)!=="closed"&&(d.mediaStreamTrack=this.mediaStreamTrack.clone(),yield d.sender.replaceTrack(d.mediaStreamTrack))}}catch(d){i={error:d}}finally{try{!c&&!n&&(r=l.return)&&(yield r.call(l))}finally{if(i)throw i.error}}})}setProcessor(t){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return I(this,arguments,void 0,function(i){var r=this;let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var s,a,c,l,u,d;if(yield n.setProcessor.call(r,i,o),!((u=r.processor)===null||u===void 0)&&u.processedTrack)try{for(var f=!0,h=pn(r.simulcastCodecs.values()),m;m=yield h.next(),s=m.done,!s;f=!0)l=m.value,f=!1,yield(d=l.sender)===null||d===void 0?void 0:d.replaceTrack(r.processor.processedTrack)}catch(p){a={error:p}}finally{try{!f&&!s&&(c=h.return)&&(yield c.call(h))}finally{if(a)throw a.error}}})()})}setDegradationPreference(t){return I(this,void 0,void 0,function*(){if(this.degradationPreference=t,this.sender)try{this.log.debug("setting degradationPreference to ".concat(t),this.logContext);const n=this.sender.getParameters();n.degradationPreference=t,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(t,n){if(this.simulcastCodecs.has(t)){this.log.error("".concat(t," already added, skipping adding simulcast codec"),this.logContext);return}const i={codec:t,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(t,i),i}setSimulcastTrackSender(t,n){const i=this.simulcastCodecs.get(t);i&&(i.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},ub))}setPublishingCodecs(t){return I(this,void 0,void 0,function*(){var n,i,r,o,s,a,c;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:t,currentCodec:this.codec})),!this.codec&&t.length>0)return yield this.setPublishingLayers(Qt(t[0].codec),t[0].qualities),[];this.subscribedCodecs=t;const l=[];try{for(n=!0,i=pn(t);r=yield i.next(),o=r.done,!o;n=!0){c=r.value,n=!1;const u=c;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(Qt(u.codec),u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const f of u.qualities)if(f.enabled){l.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield qh(d.sender,d.encodings,u.qualities,this.senderLock,Qt(u.codec),this.log,this.logContext))}}}catch(u){s={error:u}}finally{try{!n&&!o&&(a=i.return)&&(yield a.call(i))}finally{if(s)throw s.error}}return l})}setPublishingLayers(t,n){return I(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield qh(this.sender,this.encodings,n,this.senderLock,t,this.log,this.logContext))})}prioritizePerformance(){return I(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const t=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((i,r)=>{var o;return Object.assign(Object.assign({},i),{active:r===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((o=this.mediaStreamTrack.getSettings().height)!==null&&o!==void 0?o:360)/360)),scalabilityMode:r===0&&Qt(this.codec)?"L1T3":void 0,maxFramerate:r===0?15:0,maxBitrate:r===0?i.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{t()}})}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return I(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),fh()&&this.isInBackground&&this.source===B.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function qh(e,t,n,i,r,o,s){return I(this,void 0,void 0,function*(){const a=yield i.lock();o.debug("setPublishingLayersForSender",Object.assign(Object.assign({},s),{sender:e,qualities:n,senderEncodings:t}));try{const c=e.getParameters(),{encodings:l}=c;if(!l)return;if(l.length!==t.length){o.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},s),{encodings:l,senderEncodings:t}));return}let u=!1;!1&&l[0].scalabilityMode||(r&&n.some(h=>h.enabled)&&n.forEach(h=>h.enabled=!0),l.forEach((f,h)=>{var m;let p=(m=f.rid)!==null&&m!==void 0?m:"";p===""&&(p="q");const y=Hh(p),g=n.find(S=>S.quality===y);g&&f.active!==g.enabled&&(u=!0,f.active=g.enabled,o.debug("setting layer ".concat(g.quality," to ").concat(f.active?"enabled":"disabled"),s),si()&&(g.enabled?(f.scaleResolutionDownBy=t[h].scaleResolutionDownBy,f.maxBitrate=t[h].maxBitrate,f.maxFrameRate=t[h].maxFrameRate):(f.scaleResolutionDownBy=4,f.maxBitrate=10,f.maxFrameRate=2)))})),u&&(c.encodings=l,o.debug("setting encodings",Object.assign(Object.assign({},s),{encodings:c.encodings})),yield e.setParameters(c))}finally{a()}})}function Hh(e){switch(e){case"f":return _t.HIGH;case"h":return _t.MEDIUM;case"q":return _t.LOW;default:return _t.HIGH}}function Wh(e,t,n,i){if(!n)return[new ii({quality:_t.HIGH,width:e,height:t,bitrate:0,ssrc:0})];if(i){const r=n[0].scalabilityMode,o=new Vh(r),s=[],a=o.suffix=="h"?1.5:2,c=o.suffix=="h"?2:3;for(let l=0;l<o.spatial;l+=1)s.push(new ii({quality:Math.min(_t.HIGH,o.spatial-1)-l,width:Math.ceil(e/Math.pow(a,l)),height:Math.ceil(t/Math.pow(a,l)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(c,l)):0,ssrc:0}));return s}return n.map(r=>{var o,s,a;const c=(o=r.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let l=Hh((s=r.rid)!==null&&s!==void 0?s:"");return new ii({quality:l,width:Math.ceil(e/c),height:Math.ceil(t/c),bitrate:(a=r.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}const Zh="_lossy",Gh="_reliable",db=2*1e3,ec="leave-reconnect",hb=3e4;var Vt;(function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"})(Vt||(Vt={}));class fb extends Yt.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(t){var n;super(),this.options=t,this.rtcConfig={},this.peerConnectionTimeout=Za.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=Vt.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=be,this.reliableDataSequence=1,this.reliableMessageBuffer=new Ph,this.reliableReceivedState=new F2(hb),this.handleDataChannel=i=>I(this,[i],void 0,function(r){var o=this;let{channel:s}=r;return(function*(){if(s){if(s.label===Gh)o.reliableDCSub=s;else if(s.label===Zh)o.lossyDCSub=s;else return;o.log.debug("on data channel ".concat(s.id,", ").concat(s.label),o.logContext),s.onmessage=o.handleDataMessage}})()}),this.handleDataMessage=i=>I(this,void 0,void 0,function*(){var r,o;const s=yield this.dataProcessLock.lock();try{let a;if(i.data instanceof ArrayBuffer)a=i.data;else if(i.data instanceof Blob)a=yield i.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:i.data}));return}const c=gt.fromBinary(new Uint8Array(a));if(c.sequence>0&&c.participantSid!==""){const l=this.reliableReceivedState.get(c.participantSid);if(l&&c.sequence<=l)return;this.reliableReceivedState.set(c.participantSid,c.sequence)}((r=c.value)===null||r===void 0?void 0:r.case)==="speaker"?this.emit(X.ActiveSpeakersUpdate,c.value.value.speakers):(((o=c.value)===null||o===void 0?void 0:o.case)==="user"&&mb(c,c.value.value),this.emit(X.DataPacketReceived,c))}finally{s()}}),this.handleDataError=i=>{const o=i.currentTarget.maxRetransmits===0?"lossy":"reliable";if(i instanceof ErrorEvent&&i.error){const{error:s}=i.error;this.log.error("DataChannel error on ".concat(o,": ").concat(i.message),Object.assign(Object.assign({},this.logContext),{error:s}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:i}))},this.handleBufferedAmountLow=i=>{const o=i.currentTarget.maxRetransmits===0?me.LOSSY:me.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(i,r)=>{if(this._isClosed)return;this.log.warn("".concat(i," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=c=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(c,"ms. giving up"),this.logContext),this.emit(X.Disconnected),this.close()},s=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:s,retryCount:this.reconnectAttempts});if(a===null){o(s);return}i===ec&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=at.setTimeout(()=>this.attemptReconnect(r).finally(()=>this.reconnectTimeout=void 0),a)},this.waitForRestarted=()=>new Promise((i,r)=>{this.pcState===Vt.Connected&&i();const o=()=>{this.off(X.Disconnected,s),i()},s=()=>{this.off(X.Restarted,o),r()};this.once(X.Restarted,o),this.once(X.Disconnected,s)}),this.updateAndEmitDCBufferStatus=i=>{const r=this.isBufferStatusLow(i);typeof r<"u"&&r!==this.dcBufferStatus.get(i)&&(this.dcBufferStatus.set(i,r),this.emit(X.DCBufferStatusChanged,r,i))},this.isBufferStatusLow=i=>{const r=this.dataChannelForKind(i);if(r)return i===me.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(r.bufferedAmount),r.bufferedAmount<=r.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===De.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(xi.RR_SIGNAL_DISCONNECTED))},this.log=fn((n=t.loggerName)!==null&&n!==void 0?n:Ut.Engine),this.loggerOptions={loggerName:t.loggerName,loggerContextCb:()=>this.logContext},this.client=new Ua(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new pt,this.dataProcessLock=new pt,this.dcBufferStatus=new Map([[me.LOSSY,!0],[me.RELIABLE,!0]]),this.client.onParticipantUpdate=i=>this.emit(X.ParticipantUpdate,i),this.client.onConnectionQuality=i=>this.emit(X.ConnectionQualityUpdate,i),this.client.onRoomUpdate=i=>this.emit(X.RoomUpdate,i),this.client.onSubscriptionError=i=>this.emit(X.SubscriptionError,i),this.client.onSubscriptionPermissionUpdate=i=>this.emit(X.SubscriptionPermissionUpdate,i),this.client.onSpeakersChanged=i=>this.emit(X.SpeakersChanged,i),this.client.onStreamStateUpdate=i=>this.emit(X.StreamStateChanged,i),this.client.onRequestResponse=i=>this.emit(X.SignalRequestResponse,i)}get logContext(){var t,n,i,r,o,s;return{room:(n=(t=this.latestJoinResponse)===null||t===void 0?void 0:t.room)===null||n===void 0?void 0:n.name,roomID:(r=(i=this.latestJoinResponse)===null||i===void 0?void 0:i.room)===null||r===void 0?void 0:r.sid,participant:(s=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||s===void 0?void 0:s.identity,pID:this.participantSid}}join(t,n,i,r){return I(this,void 0,void 0,function*(){this.url=t,this.token=n,this.signalOpts=i,this.maxJoinAttempts=i.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const o=yield this.client.join(t,n,i,r);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.pcManager||(yield this.configure(o)),(!this.subscriberPrimary||o.fastPublish)&&this.negotiate(),this.clientConfiguration=o.clientConfiguration,this.emit(X.SignalConnected,o),o}catch(o){if(o instanceof Ie&&o.reason===Se.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(t,n,i,r);throw o}})}close(){return I(this,void 0,void 0,function*(){const t=yield this.closingLock.lock();if(this.isClosed){t();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(X.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{t()}})}cleanupPeerConnections(){return I(this,void 0,void 0,function*(){var t;yield(t=this.pcManager)===null||t===void 0?void 0:t.close(),this.pcManager=void 0;const n=i=>{i&&(i.close(),i.onbufferedamountlow=null,i.onclose=null,i.onclosing=null,i.onerror=null,i.onmessage=null,i.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new Ph,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return I(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(t){if(this.pendingTrackResolvers[t.cid])throw new gn("a track with the same ID has already been published");return new Promise((n,i)=>{const r=setTimeout(()=>{delete this.pendingTrackResolvers[t.cid],i(new Ie("publication of local track timed out, no response from server",Se.Timeout))},1e4);this.pendingTrackResolvers[t.cid]={resolve:o=>{clearTimeout(r),n(o)},reject:()=>{clearTimeout(r),i(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(t)})}removeTrack(t){if(t.track&&this.pendingTrackResolvers[t.track.id]){const{reject:n}=this.pendingTrackResolvers[t.track.id];n&&n(),delete this.pendingTrackResolvers[t.track.id]}try{return this.pcManager.removeTrack(t),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(t,n){this.client.sendMuteTrack(t,n)}get dataSubscriberReadyState(){var t;return(t=this.reliableDCSub)===null||t===void 0?void 0:t.readyState}getConnectedServerAddress(){return I(this,void 0,void 0,function*(){var t;return(t=this.pcManager)===null||t===void 0?void 0:t.getConnectedAddress()})}setRegionUrlProvider(t){this.regionUrlProvider=t}configure(t){return I(this,void 0,void 0,function*(){var n,i;if(this.pcManager&&this.pcManager.currentState!==qe.NEW)return;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(t);this.pcManager=new W2(r,t.subscriberPrimary,this.loggerOptions),this.emit(X.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(o,s)=>{this.client.sendIceCandidate(o,s)},this.pcManager.onPublisherOffer=(o,s)=>{this.client.sendOffer(o,s)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(o,s,a)=>I(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(o),this.logContext),["closed","disconnected","failed"].includes(s)&&(this.publisherConnectionPromise=void 0),o===qe.CONNECTED){const u=this.pcState===Vt.New;this.pcState=Vt.Connected,u&&this.emit(X.Connected,t)}else o===qe.FAILED&&this.pcState===Vt.Connected&&(this.pcState=Vt.Disconnected,this.handleDisconnect("peerconnection failed",a==="failed"?xi.RR_SUBSCRIBER_FAILED:xi.RR_PUBLISHER_FAILED));const c=this.client.isDisconnected||this.client.currentState===De.RECONNECTING,l=[qe.FAILED,qe.CLOSING,qe.CLOSED].includes(o);c&&l&&!this._isClosed&&this.emit(X.Offline)}),this.pcManager.onTrack=o=>{this.emit(X.MediaTrackAdded,o.track,o.streams[0],o.receiver)},pb((i=t.serverInfo)===null||i===void 0?void 0:i.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(t,n)=>I(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type})),yield this.pcManager.setPublisherAnswer(t,n))}),this.client.onTrickle=(t,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:t,target:n})),this.pcManager.addIceCandidate(t,n))},this.client.onOffer=(t,n)=>I(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;const i=yield this.pcManager.createSubscriberAnswerFromOffer(t,n);i&&this.client.sendAnswer(i,n)}),this.client.onLocalTrackPublished=t=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:t.cid,track:(n=t.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[t.cid]){this.log.error("missing track resolver for ".concat(t.cid),Object.assign(Object.assign({},this.logContext),{cid:t.cid}));return}const{resolve:i}=this.pendingTrackResolvers[t.cid];delete this.pendingTrackResolvers[t.cid],i(t.track)},this.client.onLocalTrackUnpublished=t=>{this.emit(X.LocalTrackUnpublished,t)},this.client.onLocalTrackSubscribed=t=>{this.emit(X.LocalTrackSubscribed,t)},this.client.onTokenRefresh=t=>{this.token=t},this.client.onRemoteMuteChanged=(t,n)=>{this.emit(X.RemoteMute,t,n)},this.client.onSubscribedQualityUpdate=t=>{this.emit(X.SubscribedQualityUpdate,t)},this.client.onRoomMoved=t=>{var n;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=t.room),this.emit(X.RoomMoved,t)},this.client.onClose=()=>{this.handleDisconnect("signal",xi.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=t=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:t?.reason})),t.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(t.regions)),t.action){case Pi.DISCONNECT:this.emit(X.Disconnected,t?.reason),this.close();break;case Pi.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(ec);break;case Pi.RESUME:this.handleDisconnect(ec)}}}makeRTCConfiguration(t){var n;const i=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),i.encodedInsertableStreams=!0),t.iceServers&&!i.iceServers){const r=[];t.iceServers.forEach(o=>{const s={urls:o.urls};o.username&&(s.username=o.username),o.credential&&(s.credential=o.credential),r.push(s)}),i.iceServers=r}return t.clientConfiguration&&t.clientConfiguration.forceRelay===dr.ENABLED&&(i.iceTransportPolicy="relay"),i.sdpSemantics="unified-plan",i.continualGatheringPolicy="gather_continually",i}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(Zh,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(Gh,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(t,n,i){return I(this,void 0,void 0,function*(){if(xa())return yield this.createTransceiverRTCRtpSender(t,n,i);if(_a())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(t.mediaStreamTrack);throw new Qe("Required webRTC APIs not supported on this device")})}createSimulcastSender(t,n,i,r){return I(this,void 0,void 0,function*(){if(xa())return this.createSimulcastTransceiverSender(t,n,i,r);if(_a())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(t.mediaStreamTrack);throw new Qe("Cannot stream on this device")})}createTransceiverRTCRtpSender(t,n,i){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Qe("publisher is closed");const r=[];t.mediaStream&&r.push(t.mediaStream),Fn(t)&&(t.codec=n.videoCodec);const o={direction:"sendonly",streams:r};return i&&(o.sendEncodings=i),(yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,o)).sender})}createSimulcastTransceiverSender(t,n,i,r){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Qe("publisher is closed");const o={direction:"sendonly"};r&&(o.sendEncodings=r);const s=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(i.videoCodec)return t.setSimulcastTrackSender(i.videoCodec,s.sender),s.sender})}createRTCRtpSender(t){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Qe("publisher is closed");return this.pcManager.addPublisherTrack(t)})}attemptReconnect(t){return I(this,void 0,void 0,function*(){var n,i,r;if(!this._isClosed){if(this.attemptingReconnect){be.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===dr.DISABLED||((r=(i=this.pcManager)===null||i===void 0?void 0:i.currentState)!==null&&r!==void 0?r:qe.NEW)===qe.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(t),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let s=!0;o instanceof Qe?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),s=!1):o instanceof Ri||(this.fullReconnectOnNext=!0),s?this.handleDisconnect("reconnect",xi.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(X.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(t){try{return this.reconnectPolicy.nextRetryDelayInMs(t)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(t){return I(this,void 0,void 0,function*(){var n,i,r;try{if(!this.url||!this.token)throw new Qe("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(X.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Ri;o=yield this.join(t??this.url,this.token,this.signalOpts)}catch(s){throw s instanceof Ie&&s.reason===Se.NotAllowed?new Qe("could not reconnect, token might be expired"):new Ri}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(X.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==De.CONNECTED)throw new Ri("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(X.Restarted)}catch(o){const s=yield(i=this.regionUrlProvider)===null||i===void 0?void 0:i.getNextBestRegionUrl();if(s){yield this.restartConnection(s);return}else throw(r=this.regionUrlProvider)===null||r===void 0||r.resetAttempts(),o}})}resumeConnection(t){return I(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new Qe("could not reconnect, url or token not saved");if(!this.pcManager)throw new Qe("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(X.Resuming);let i;try{this.setupSignalClientCallbacks(),i=yield this.client.reconnect(this.url,this.token,this.participantSid,t)}catch(r){let o="";throw r instanceof Error&&(o=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof Ie&&r.reason===Se.NotAllowed?new Qe("could not reconnect, token might be expired"):r instanceof Ie&&r.reason===Se.LeaveRequest?r:new Ri(o)}if(this.emit(X.SignalResumed),i){const r=this.makeRTCConfiguration(i);this.pcManager.updateConfiguration(r),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=i.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==De.CONNECTED)throw new Ri("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),i?.lastMessageSeq&&this.resendReliableMessagesForResume(i.lastMessageSeq),this.emit(X.Resumed)})}waitForPCInitialConnection(t,n){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Qe("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,t)})}waitForPCReconnected(){return I(this,void 0,void 0,function*(){this.pcState=Vt.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield vt(db),!this.pcManager)throw new Qe("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Vt.Connected}catch(t){throw this.pcState=Vt.Disconnected,new Ie("could not establish PC connection, ".concat(t.message),Se.InternalError)}})}publishRpcResponse(t,n,i,r){return I(this,void 0,void 0,function*(){const o=new gt({destinationIdentities:[t],kind:me.RELIABLE,value:{case:"rpcResponse",value:new Ku({requestId:n,value:r?{case:"error",value:r.toProto()}:{case:"payload",value:i??""}})}});yield this.sendDataPacket(o,me.RELIABLE)})}publishRpcAck(t,n){return I(this,void 0,void 0,function*(){const i=new gt({destinationIdentities:[t],kind:me.RELIABLE,value:{case:"rpcAck",value:new Gu({requestId:n})}});yield this.sendDataPacket(i,me.RELIABLE)})}sendDataPacket(t,n){return I(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(n),n===me.RELIABLE&&(t.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const i=t.toBinary(),r=this.dataChannelForKind(n);if(r){if(n===me.RELIABLE&&this.reliableMessageBuffer.push({data:i,sequence:t.sequence}),this.attemptingReconnect)return;r.send(i)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(t){return I(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(me.RELIABLE);const n=this.dataChannelForKind(me.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(t),this.reliableMessageBuffer.getAll().forEach(i=>{n.send(i.data)})),this.updateAndEmitDCBufferStatus(me.RELIABLE)})}waitForBufferStatusLow(t){return new Promise((n,i)=>I(this,void 0,void 0,function*(){if(this.isBufferStatusLow(t))n();else{const r=()=>i("Engine closed");for(this.once(X.Closing,r);!this.dcBufferStatus.get(t);)yield vt(10);this.off(X.Closing,r),n()}}))}ensureDataTransportConnected(t){return I(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return(function*(){var o;if(!i.pcManager)throw new Qe("PC manager is closed");const s=r?i.pcManager.subscriber:i.pcManager.publisher,a=r?"Subscriber":"Publisher";if(!s)throw new Ie("".concat(a," connection not set"),Se.InternalError);let c=!1;!r&&!i.dataChannelForKind(n,r)&&(i.createDataChannels(),c=!0),!c&&!r&&!i.pcManager.publisher.isICEConnected&&i.pcManager.publisher.getICEConnectionState()!=="checking"&&(c=!0),c&&i.negotiate();const l=i.dataChannelForKind(n,r);if(l?.readyState==="open")return;const u=new Date().getTime()+i.peerConnectionTimeout;for(;new Date().getTime()<u;){if(s.isICEConnected&&((o=i.dataChannelForKind(n,r))===null||o===void 0?void 0:o.readyState)==="open")return;yield vt(50)}throw new Ie("could not establish ".concat(a," connection, state: ").concat(s.getICEConnectionState()),Se.InternalError)})()})}ensurePublisherConnected(t){return I(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(t,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==qe.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return I(this,void 0,void 0,function*(){return new Promise((t,n)=>I(this,void 0,void 0,function*(){if(!this.pcManager){n(new ba("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const i=new AbortController,r=()=>{i.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),t()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(X.Closing,r),this.pcManager.publisher.once(Ai.RTPVideoPayloadTypes,o=>{const s=new Map;o.forEach(a=>{const c=a.codec.toLowerCase();m2(c)&&s.set(a.payload,c)}),this.emit(X.RTPVideoMapUpdate,s)});try{yield this.pcManager.negotiate(i),t()}catch(o){o instanceof ba&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",xi.RR_UNKNOWN),n(o)}finally{this.off(X.Closing,r)}}))})}dataChannelForKind(t,n){if(n){if(t===me.LOSSY)return this.lossyDCSub;if(t===me.RELIABLE)return this.reliableDCSub}else{if(t===me.LOSSY)return this.lossyDC;if(t===me.RELIABLE)return this.reliableDC}}sendSyncState(t,n){var i,r;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const o=this.pcManager.subscriber.getLocalDescription(),s=this.pcManager.subscriber.getRemoteDescription(),a=(r=(i=this.signalOpts)===null||i===void 0?void 0:i.autoSubscribe)!==null&&r!==void 0?r:!0,c=new Array,l=new Array;t.forEach(u=>{u.isDesired!==a&&c.push(u.trackSid),u.isEnabled||l.push(u.trackSid)}),this.client.sendSyncState(new pd({answer:o?ko({sdp:o.sdp,type:o.type}):void 0,offer:s?ko({sdp:s.sdp,type:s.type}):void 0,subscription:new so({trackSids:c,subscribe:!a,participantTracks:[]}),publishTracks:T2(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:l,datachannelReceiveStates:this.reliableReceivedState.map((u,d)=>new md({publisherSid:d,lastSeq:u}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const t=[],n=(i,r)=>{i?.id!==void 0&&i.id!==null&&t.push(new gd({label:i.label,id:i.id,target:r}))};return n(this.dataChannelForKind(me.LOSSY),zt.PUBLISHER),n(this.dataChannelForKind(me.RELIABLE),zt.PUBLISHER),n(this.dataChannelForKind(me.LOSSY,!0),zt.SUBSCRIBER),n(this.dataChannelForKind(me.RELIABLE,!0),zt.SUBSCRIBER),t}clearReconnectTimeout(){this.reconnectTimeout&&at.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){yt()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){yt()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class Ri extends Error{}function pb(e){return e!==void 0&&e>13}function mb(e,t){const n=e.participantIdentity?e.participantIdentity:t.participantIdentity;e.participantIdentity=n,t.participantIdentity=n;const i=e.destinationIdentities.length!==0?e.destinationIdentities:t.destinationIdentities;e.destinationIdentities=i,t.destinationIdentities=i}class tc{constructor(t,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(t),this.token=n}updateToken(t){this.token=t}isCloud(){return Pa(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(t){return I(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(t));const n=this.regionSettings.regions.filter(i=>!this.attemptedRegions.find(r=>r.url===i.url));if(n.length>0){const i=n[0];return this.attemptedRegions.push(i),be.debug("next region: ".concat(i.region)),i.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(t){return I(this,void 0,void 0,function*(){const n=yield fetch("".concat(gb(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:t});if(n.ok){const i=yield n.json();return this.lastUpdateAt=Date.now(),i}else throw new Ie("Could not fetch region settings: ".concat(n.statusText),n.status===401?Se.NotAllowed:Se.InternalError,n.status)})}setServerReportedRegions(t){this.regionSettings=t,this.lastUpdateAt=Date.now()}}function gb(e){return"".concat(e.protocol.replace("ws","http"),"//").concat(e.host,"/settings")}class Kh{get info(){return this._info}validateBytesReceived(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(t&&this.bytesReceived<this.totalByteSize)throw new Dn("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),$t.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new Dn("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),$t.LengthExceeded)}}constructor(t,n,i,r){this.reader=n,this.totalByteSize=i,this._info=t,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=r}}class vb extends Kh{handleChunkReceived(t){var n;this.bytesReceived+=t.content.byteLength,this.validateBytesReceived();const i=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,i)}[Symbol.asyncIterator](){const t=this.reader.getReader();let n=new Xt,i=null,r=null;if(this.signal){const s=this.signal;r=()=>{var a;(a=n.reject)===null||a===void 0||a.call(n,s.reason)},s.addEventListener("abort",r),i=s}const o=()=>{t.releaseLock(),i&&r&&i.removeEventListener("abort",r),this.signal=void 0};return{next:()=>I(this,void 0,void 0,function*(){var s,a;try{const{done:c,value:l}=yield Promise.race([t.read(),n.promise,(a=(s=this.outOfBandFailureRejectingFuture)===null||s===void 0?void 0:s.promise)!==null&&a!==void 0?a:new Promise(()=>{})]);return c?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(l),{done:!1,value:l.content})}catch(c){throw o(),c}}),return(){return I(this,void 0,void 0,function*(){return o(),{done:!0,value:void 0}})}}}withAbortSignal(t){return this.signal=t,this}readAll(){return I(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var i,r,o,s;let a=new Set;const c=n.signal?t.withAbortSignal(n.signal):t;try{for(var l=!0,u=pn(c),d;d=yield u.next(),i=d.done,!i;l=!0){s=d.value,l=!1;const f=s;a.add(f)}}catch(f){r={error:f}}finally{try{!l&&!i&&(o=u.return)&&(yield o.call(u))}finally{if(r)throw r.error}}return Array.from(a)})()})}}class yb extends Kh{constructor(t,n,i,r){super(t,n,i,r),this.receivedChunks=new Map}handleChunkReceived(t){var n;const i=bo(t.chunkIndex),r=this.receivedChunks.get(i);if(r&&r.version>t.version)return;this.receivedChunks.set(i,t),this.bytesReceived+=t.content.byteLength,this.validateBytesReceived();const o=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,o)}[Symbol.asyncIterator](){const t=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let i=new Xt,r=null,o=null;if(this.signal){const a=this.signal;o=()=>{var c;(c=i.reject)===null||c===void 0||c.call(i,a.reason)},a.addEventListener("abort",o),r=a}const s=()=>{t.releaseLock(),r&&o&&r.removeEventListener("abort",o),this.signal=void 0};return{next:()=>I(this,void 0,void 0,function*(){var a,c;try{const{done:l,value:u}=yield Promise.race([t.read(),i.promise,(c=(a=this.outOfBandFailureRejectingFuture)===null||a===void 0?void 0:a.promise)!==null&&c!==void 0?c:new Promise(()=>{})]);if(l)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(u);let d;try{d=n.decode(u.content)}catch(f){throw new Dn("Cannot decode datastream chunk ".concat(u.chunkIndex," as text: ").concat(f),$t.DecodeFailed)}return{done:!1,value:d}}}catch(l){throw s(),l}}),return(){return I(this,void 0,void 0,function*(){return s(),{done:!0,value:void 0}})}}}withAbortSignal(t){return this.signal=t,this}readAll(){return I(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var i,r,o,s;let a="";const c=n.signal?t.withAbortSignal(n.signal):t;try{for(var l=!0,u=pn(c),d;d=yield u.next(),i=d.done,!i;l=!0)s=d.value,l=!1,a+=s}catch(f){r={error:f}}finally{try{!l&&!i&&(o=u.return)&&(yield o.call(u))}finally{if(r)throw r.error}}return a})()})}}class bb{constructor(){this.log=be,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(t,n){if(this.textStreamHandlers.has(t))throw new Dn('A text stream handler for topic "'.concat(t,'" has already been set.'),$t.HandlerAlreadyRegistered);this.textStreamHandlers.set(t,n)}unregisterTextStreamHandler(t){this.textStreamHandlers.delete(t)}registerByteStreamHandler(t,n){if(this.byteStreamHandlers.has(t))throw new Dn('A byte stream handler for topic "'.concat(t,'" has already been set.'),$t.HandlerAlreadyRegistered);this.byteStreamHandlers.set(t,n)}unregisterByteStreamHandler(t){this.byteStreamHandlers.delete(t)}clearHandlersAndControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear(),this.byteStreamHandlers.clear(),this.textStreamHandlers.clear()}validateParticipantHasNoActiveDataStreams(t){var n,i,r,o;const s=Array.from(this.textStreamControllers.entries()).filter(c=>c[1].sendingParticipantIdentity===t),a=Array.from(this.byteStreamControllers.entries()).filter(c=>c[1].sendingParticipantIdentity===t);if(s.length>0||a.length>0){const c=new Dn("Participant ".concat(t," unexpectedly disconnected in the middle of sending data"),$t.AbnormalEnd);for(const[l,u]of a)(i=(n=u.outOfBandFailureRejectingFuture).reject)===null||i===void 0||i.call(n,c),this.byteStreamControllers.delete(l);for(const[l,u]of s)(o=(r=u.outOfBandFailureRejectingFuture).reject)===null||o===void 0||o.call(r,c),this.textStreamControllers.delete(l)}}handleDataStreamPacket(t){return I(this,void 0,void 0,function*(){switch(t.value.case){case"streamHeader":return this.handleStreamHeader(t.value.value,t.participantIdentity);case"streamChunk":return this.handleStreamChunk(t.value.value);case"streamTrailer":return this.handleStreamTrailer(t.value.value);default:throw new Error('DataPacket of value "'.concat(t.value.case,'" is not data stream related!'))}})}handleStreamHeader(t,n){return I(this,void 0,void 0,function*(){var i;if(t.contentHeader.case==="byteHeader"){const r=this.byteStreamHandlers.get(t.topic);if(!r){this.log.debug("ignoring incoming byte stream due to no handler for topic",t.topic);return}let o;const s=new Xt,a={id:t.streamId,name:(i=t.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:t.mimeType,size:t.totalLength?Number(t.totalLength):void 0,topic:t.topic,timestamp:bo(t.timestamp),attributes:t.attributes},c=new ReadableStream({start:l=>{if(o=l,this.textStreamControllers.has(t.streamId))throw new Dn("A data stream read is already in progress for a stream with id ".concat(t.streamId,"."),$t.AlreadyOpened);this.byteStreamControllers.set(t.streamId,{info:a,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:s})}});r(new vb(a,c,bo(t.totalLength),s),{identity:n})}else if(t.contentHeader.case==="textHeader"){const r=this.textStreamHandlers.get(t.topic);if(!r){this.log.debug("ignoring incoming text stream due to no handler for topic",t.topic);return}let o;const s=new Xt,a={id:t.streamId,mimeType:t.mimeType,size:t.totalLength?Number(t.totalLength):void 0,topic:t.topic,timestamp:Number(t.timestamp),attributes:t.attributes},c=new ReadableStream({start:l=>{if(o=l,this.textStreamControllers.has(t.streamId))throw new Dn("A data stream read is already in progress for a stream with id ".concat(t.streamId,"."),$t.AlreadyOpened);this.textStreamControllers.set(t.streamId,{info:a,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:s})}});r(new yb(a,c,bo(t.totalLength),s),{identity:n})}})}handleStreamChunk(t){const n=this.byteStreamControllers.get(t.streamId);n&&t.content.length>0&&n.controller.enqueue(t);const i=this.textStreamControllers.get(t.streamId);i&&t.content.length>0&&i.controller.enqueue(t)}handleStreamTrailer(t){const n=this.textStreamControllers.get(t.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),t.attributes),n.controller.close(),this.textStreamControllers.delete(t.streamId));const i=this.byteStreamControllers.get(t.streamId);i&&(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),t.attributes),i.controller.close(),this.byteStreamControllers.delete(t.streamId))}}class Yh{constructor(t,n,i){this.writableStream=t,this.defaultWriter=t.getWriter(),this.onClose=i,this.info=n}write(t){return this.defaultWriter.write(t)}close(){return I(this,void 0,void 0,function*(){var t;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(t=this.onClose)===null||t===void 0||t.call(this)})}}class kb extends Yh{}class Cb extends Yh{}const Qh=15e3;class wb{constructor(t,n){this.engine=t,this.log=n}setupEngine(t){this.engine=t}sendText(t,n){return I(this,void 0,void 0,function*(){var i;const r=crypto.randomUUID(),s=new TextEncoder().encode(t).byteLength,a=(i=n?.attachments)===null||i===void 0?void 0:i.map(()=>crypto.randomUUID()),c=new Array(a?a.length+1:1).fill(0),l=(d,f)=>{var h;c[f]=d;const m=c.reduce((p,y)=>p+y,0);(h=n?.onProgress)===null||h===void 0||h.call(n,m)},u=yield this.streamText({streamId:r,totalSize:s,destinationIdentities:n?.destinationIdentities,topic:n?.topic,attachedStreamIds:a,attributes:n?.attributes});return yield u.write(t),l(1,0),yield u.close(),n?.attachments&&a&&(yield Promise.all(n.attachments.map((d,f)=>I(this,void 0,void 0,function*(){return this._sendFile(a[f],d,{topic:n.topic,mimeType:d.type,onProgress:h=>{l(h,f+1)}})})))),u.info})}streamText(t){return I(this,void 0,void 0,function*(){var n,i;const r=(n=t?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),o={id:r,mimeType:"text/plain",timestamp:Date.now(),topic:(i=t?.topic)!==null&&i!==void 0?i:"",size:t?.totalSize,attributes:t?.attributes},s=new Qs({streamId:r,mimeType:o.mimeType,topic:o.topic,timestamp:ci(o.timestamp),totalLength:ci(t?.totalSize),attributes:o.attributes,contentHeader:{case:"textHeader",value:new rd({version:t?.version,attachedStreamIds:t?.attachedStreamIds,replyToStreamId:t?.replyToStreamId,operationType:t?.type==="update"?Ys.UPDATE:Ys.CREATE})}}),a=t?.destinationIdentities,c=new gt({destinationIdentities:a,value:{case:"streamHeader",value:s}});yield this.engine.sendDataPacket(c,me.RELIABLE);let l=0;const u=this.engine,d=new WritableStream({write(m){return I(this,void 0,void 0,function*(){for(const p of C2(m,Qh)){yield u.waitForBufferStatusLow(me.RELIABLE);const y=new Js({content:p,streamId:r,chunkIndex:ci(l)}),g=new gt({destinationIdentities:a,value:{case:"streamChunk",value:y}});yield u.sendDataPacket(g,me.RELIABLE),l+=1}})},close(){return I(this,void 0,void 0,function*(){const m=new Xs({streamId:r}),p=new gt({destinationIdentities:a,value:{case:"streamTrailer",value:m}});yield u.sendDataPacket(p,me.RELIABLE)})},abort(m){console.log("Sink error:",m)}});let f=()=>I(this,void 0,void 0,function*(){yield h.close()});u.once(X.Closing,f);const h=new kb(d,o,()=>this.engine.off(X.Closing,f));return h})}sendFile(t,n){return I(this,void 0,void 0,function*(){const i=crypto.randomUUID();return yield this._sendFile(i,t,n),{id:i}})}_sendFile(t,n,i){return I(this,void 0,void 0,function*(){var r;const o=yield this.streamBytes({streamId:t,totalSize:n.size,name:n.name,mimeType:(r=i?.mimeType)!==null&&r!==void 0?r:n.type,topic:i?.topic,destinationIdentities:i?.destinationIdentities}),s=n.stream().getReader();for(;;){const{done:a,value:c}=yield s.read();if(a)break;yield o.write(c)}return yield o.close(),o.info})}streamBytes(t){return I(this,void 0,void 0,function*(){var n,i,r,o,s;const a=(n=t?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),c=t?.destinationIdentities,l={id:a,mimeType:(i=t?.mimeType)!==null&&i!==void 0?i:"application/octet-stream",topic:(r=t?.topic)!==null&&r!==void 0?r:"",timestamp:Date.now(),attributes:t?.attributes,size:t?.totalSize,name:(o=t?.name)!==null&&o!==void 0?o:"unknown"},u=new Qs({totalLength:ci((s=l.size)!==null&&s!==void 0?s:0),mimeType:l.mimeType,streamId:a,topic:l.topic,timestamp:ci(Date.now()),attributes:l.attributes,contentHeader:{case:"byteHeader",value:new od({name:l.name})}}),d=new gt({destinationIdentities:c,value:{case:"streamHeader",value:u}});yield this.engine.sendDataPacket(d,me.RELIABLE);let f=0;const h=new pt,m=this.engine,p=this.log,y=new WritableStream({write(S){return I(this,void 0,void 0,function*(){const C=yield h.lock();let w=0;try{for(;w<S.byteLength;){const k=S.slice(w,w+Qh);yield m.waitForBufferStatusLow(me.RELIABLE);const b=new gt({destinationIdentities:c,value:{case:"streamChunk",value:new Js({content:k,streamId:a,chunkIndex:ci(f)})}});yield m.sendDataPacket(b,me.RELIABLE),f+=1,w+=k.byteLength}}finally{C()}})},close(){return I(this,void 0,void 0,function*(){const S=new Xs({streamId:a}),C=new gt({destinationIdentities:c,value:{case:"streamTrailer",value:S}});yield m.sendDataPacket(C,me.RELIABLE)})},abort(S){p.error("Sink error:",S)}});return new Cb(y,l)})}}class Jh extends B{constructor(t,n,i,r,o){super(t,i,o),this.sid=n,this.receiver=r}get isLocal(){return!1}setMuted(t){this.isMuted!==t&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?K.Muted:K.Unmuted,this))}setMediaStream(t){this.mediaStream=t;const n=i=>{i.track===this._mediaStreamTrack&&(t.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(K.Ended,this))};t.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return I(this,void 0,void 0,function*(){var t;return!((t=this.receiver)===null||t===void 0)&&t.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(t){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=t:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Ka)),x2()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const t=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>t());const i=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(i){const{timestamp:r,rtpTimestamp:o}=i;o&&this.rtpTimestamp!==o&&(this.emit(K.TimeSyncUpdate,{timestamp:r,rtpTimestamp:o}),this.rtpTimestamp=o)}};t()}}class Xh extends Jh{constructor(t,n,i,r,o,s){super(t,n,B.Kind.Audio,i,s),this.monitorReceiver=()=>I(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=Co(a,this.prevStats)),this.prevStats=a}),this.audioContext=r,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(t){var n;for(const i of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(t,0,.1):i.volume=t;Jt()&&this._mediaStreamTrack._setVolume(t),this.elementVolume=t}getVolume(){if(this.elementVolume)return this.elementVolume;if(Jt())return 1;let t=0;return this.attachedElements.forEach(n=>{n.volume>t&&(t=n.volume)}),t}setSinkId(t){return I(this,void 0,void 0,function*(){this.sinkId=t,yield Promise.all(this.attachedElements.map(n=>{if(Ea(n))return n.setSinkId(t)}))})}attach(t){const n=this.attachedElements.length===0;return t?super.attach(t):t=super.attach(),this.sinkId&&Ea(t)&&t.setSinkId(this.sinkId).catch(i=>{this.log.error("Failed to set sink id on remote audio track",i,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,t),t.volume=0,t.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),t}detach(t){let n;return t?(n=super.detach(t),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(t){this.audioContext=t,t&&this.attachedElements.length>0?this.connectWebAudio(t,this.attachedElements[0]):t||this.disconnectWebAudio()}setWebAudioPlugins(t){this.webAudioPluginNodes=t,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(t,n){this.disconnectWebAudio(),this.sourceNode=t.createMediaStreamSource(n.srcObject);let i=this.sourceNode;this.webAudioPluginNodes.forEach(r=>{i.connect(r),i=r}),this.gainNode=t.createGain(),i.connect(this.gainNode),this.gainNode.connect(t.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),t.state!=="running"&&t.resume().then(()=>{t.state!=="running"&&this.emit(K.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(r=>{this.emit(K.AudioPlaybackFailed,r)})}disconnectWebAudio(){var t,n;(t=this.gainNode)===null||t===void 0||t.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return I(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n;return t.forEach(i=>{i.type==="inbound-rtp"&&(n={type:"audio",streamId:i.id,timestamp:i.timestamp,jitter:i.jitter,bytesReceived:i.bytesReceived,concealedSamples:i.concealedSamples,concealmentEvents:i.concealmentEvents,silentConcealedSamples:i.silentConcealedSamples,silentConcealmentEvents:i.silentConcealmentEvents,totalAudioEnergy:i.totalAudioEnergy,totalSamplesDuration:i.totalSamplesDuration})}),n})}}const nc=100;class Sb extends Jh{constructor(t,n,i,r,o){super(t,n,B.Kind.Video,i,o),this.elementInfos=[],this.monitorReceiver=()=>I(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const s=yield this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=Co(s,this.prevStats)),this.prevStats=s}),this.debouncedHandleResize=qa(()=>{this.updateDimensions()},nc),this.adaptiveStreamSettings=r}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(t){super.setStreamState(t),console.log("setStreamState",t),t===B.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(t){super.setMuted(t),this.attachedElements.forEach(n=>{t?Oi(this._mediaStreamTrack,n):Ii(this._mediaStreamTrack,n)})}attach(t){if(t?super.attach(t):t=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===t)===void 0){const n=new Tb(t);this.observeElementInfo(n)}return t}observeElementInfo(t){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===t)===void 0?(t.handleResize=()=>{this.debouncedHandleResize()},t.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(t),t.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(t){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(i=>i===t);for(const i of n)i.stopObserving();this.elementInfos=this.elementInfos.filter(i=>i!==t),this.updateVisibility(),this.debouncedHandleResize()}detach(t){let n=[];if(t)return this.stopObservingElement(t),super.detach(t);n=super.detach();for(const i of n)this.stopObservingElement(i);return n}getDecoderImplementation(){var t;return(t=this.prevStats)===null||t===void 0?void 0:t.decoderImplementation}getReceiverStats(){return I(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n,i="",r=new Map;return t.forEach(o=>{o.type==="inbound-rtp"?(i=o.codecId,n={type:"video",streamId:o.id,framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&r.set(o.id,o)}),n&&i!==""&&r.get(i)&&(n.mimeType=r.get(i).mimeType),n})}stopObservingElement(t){const n=this.elementInfos.filter(i=>i.element===t);for(const i of n)this.stopObservingElementInfo(i)}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return I(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(t){var n,i;const r=this.elementInfos.reduce((c,l)=>Math.max(c,l.visibilityChangedAt||0),0),o=!((i=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&i!==void 0)||i?this.isInBackground:!1,s=this.elementInfos.some(c=>c.pictureInPicture),a=this.elementInfos.some(c=>c.visible)&&!o||s;if(!(this.lastVisible===a&&!t)){if(!a&&Date.now()-r<nc){at.setTimeout(()=>{this.updateVisibility()},nc);return}this.lastVisible=a,this.emit(K.VisibilityChanged,a,this)}}updateDimensions(){var t,n;let i=0,r=0;const o=this.getPixelDensity();for(const s of this.elementInfos){const a=s.width()*o,c=s.height()*o;a+c>i+r&&(i=a,r=c)}((t=this.lastDimensions)===null||t===void 0?void 0:t.width)===i&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===r||(this.lastDimensions={width:i,height:r},this.emit(K.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var t;const n=(t=this.adaptiveStreamSettings)===null||t===void 0?void 0:t.pixelDensity;return n==="screen"?gh():n||(gh()>2?2:1)}}class Tb{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(t,n){this.onVisibilityChanged=i=>{var r;const{target:o,isIntersecting:s}=i;o===this.element&&(this.isIntersecting=s,this.isPiP=Cr(this.element),this.visibilityChangedAt=Date.now(),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this))},this.onEnterPiP=()=>{var i,r,o;(r=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Cr(this.element),(o=this.handleVisibilityChanged)===null||o===void 0||o.call(this)},this.onLeavePiP=()=>{var i;this.isPiP=Cr(this.element),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this)},this.element=t,this.isIntersecting=n??ic(t),this.isPiP=yt()&&Cr(t),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var t,n,i;this.isIntersecting=ic(this.element),this.isPiP=Cr(this.element),this.element.handleResize=()=>{var r;(r=this.handleResize)===null||r===void 0||r.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,yh().observe(this.element),vh().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(t=window.documentPictureInPicture)===null||t===void 0||t.addEventListener("enter",this.onEnterPiP),(i=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var t,n,i,r,o;(t=yh())===null||t===void 0||t.unobserve(this.element),(n=vh())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(i=window.documentPictureInPicture)===null||i===void 0||i.removeEventListener("enter",this.onEnterPiP),(o=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||o===void 0||o.removeEventListener("pagehide",this.onLeavePiP)}}function Cr(e){var t,n;return document.pictureInPictureElement===e?!0:!((t=window.documentPictureInPicture)===null||t===void 0)&&t.window?ic(e,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function ic(e,t){const n=t||window;let i=e.offsetTop,r=e.offsetLeft;const o=e.offsetWidth,s=e.offsetHeight,{hidden:a}=e,{display:c}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,i+=e.offsetTop,r+=e.offsetLeft;return i<n.pageYOffset+n.innerHeight&&r<n.pageXOffset+n.innerWidth&&i+s>n.pageYOffset&&r+o>n.pageXOffset&&!a&&c!=="none"}class yn extends Yt.EventEmitter{constructor(t,n,i,r){var o;super(),this.metadataMuted=!1,this.encryption=Tt.NONE,this.log=be,this.handleMuted=()=>{this.emit(K.Muted)},this.handleUnmuted=()=>{this.emit(K.Unmuted)},this.log=fn((o=r?.loggerName)!==null&&o!==void 0?o:Ut.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=t,this.trackSid=n,this.trackName=i,this.source=B.Source.Unknown}setTrack(t){this.track&&(this.track.off(K.Muted,this.handleMuted),this.track.off(K.Unmuted,this.handleUnmuted)),this.track=t,t&&(t.on(K.Muted,this.handleMuted),t.on(K.Unmuted,this.handleUnmuted))}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),ye(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Tt.NONE}get audioTrack(){if(en(this.track))return this.track}get videoTrack(){if(Fn(this.track))return this.track}updateInfo(t){this.trackSid=t.sid,this.trackName=t.name,this.source=B.sourceFromProto(t.source),this.mimeType=t.mimeType,this.kind===B.Kind.Video&&t.width>0&&(this.dimensions={width:t.width,height:t.height},this.simulcasted=t.simulcast),this.encryption=t.encryption,this.trackInfo=t,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:t}))}}(function(e){(function(t){t.Desired="desired",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed"})(e.SubscriptionStatus||(e.SubscriptionStatus={})),(function(t){t.Allowed="allowed",t.NotAllowed="not_allowed"})(e.PermissionStatus||(e.PermissionStatus={}))})(yn||(yn={}));class rc extends yn{get isUpstreamPaused(){var t;return(t=this.track)===null||t===void 0?void 0:t.isUpstreamPaused}constructor(t,n,i,r){super(t,n.sid,n.name,r),this.track=void 0,this.handleTrackEnded=()=>{this.emit(K.Ended)},this.handleCpuConstrained=()=>{this.track&&Fn(this.track)&&this.emit(K.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(i)}setTrack(t){this.track&&(this.track.off(K.Ended,this.handleTrackEnded),this.track.off(K.CpuConstrained,this.handleCpuConstrained)),super.setTrack(t),t&&(t.on(K.Ended,this.handleTrackEnded),t.on(K.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return I(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.mute()})}unmute(){return I(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.unmute()})}pauseUpstream(){return I(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.pauseUpstream()})}resumeUpstream(){return I(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.resumeUpstream()})}getTrackFeatures(){var t;if(en(this.track)){const n=this.track.getSourceTrackSettings(),i=new Set;return n.autoGainControl&&i.add(it.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&i.add(it.TF_ECHO_CANCELLATION),n.noiseSuppression&&i.add(it.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&i.add(it.TF_STEREO),!((t=this.options)===null||t===void 0)&&t.dtx||i.add(it.TF_NO_DTX),this.track.enhancedNoiseCancellation&&i.add(it.TF_ENHANCED_NOISE_CANCELLATION),Array.from(i.values())}else return[]}}function To(e,t){return I(this,void 0,void 0,function*(){e??(e={});let n=!1;const{audioProcessor:i,videoProcessor:r,optionsWithoutProcessor:o}=Th(e);let s=o.audio,a=o.video;if(i&&typeof o.audio=="object"&&(o.audio.processor=i),r&&typeof o.video=="object"&&(o.video.processor=r),e.audio&&typeof o.audio=="object"&&typeof o.audio.deviceId=="string"){const d=o.audio.deviceId;o.audio.deviceId={exact:d},n=!0,s=Object.assign(Object.assign({},o.audio),{deviceId:{ideal:d}})}if(o.video&&typeof o.video=="object"&&typeof o.video.deviceId=="string"){const d=o.video.deviceId;o.video.deviceId={exact:d},n=!0,a=Object.assign(Object.assign({},o.video),{deviceId:{ideal:d}})}(o.audio===!0||typeof o.audio=="object"&&!o.audio.deviceId)&&(o.audio={deviceId:"default"}),o.video===!0?o.video={deviceId:"default"}:typeof o.video=="object"&&!o.video.deviceId&&(o.video.deviceId="default");const c=Ch(o,Lh,Fh),l=La(c),u=navigator.mediaDevices.getUserMedia(l);o.audio&&(rt.userMediaPromiseMap.set("audioinput",u),u.catch(()=>rt.userMediaPromiseMap.delete("audioinput"))),o.video&&(rt.userMediaPromiseMap.set("videoinput",u),u.catch(()=>rt.userMediaPromiseMap.delete("videoinput")));try{const d=yield u;return yield Promise.all(d.getTracks().map(f=>I(this,void 0,void 0,function*(){const h=f.kind==="audio";let m=h?c.audio:c.video;(typeof m=="boolean"||!m)&&(m={});let p;const y=h?l.audio:l.video;typeof y!="boolean"&&(p=y);const g=f.getSettings().deviceId;p?.deviceId&&Ln(p.deviceId)!==g?p.deviceId=g:p||(p={deviceId:g});const S=X2(f,p,t);return S.kind===B.Kind.Video?S.source=B.Source.Camera:S.kind===B.Kind.Audio&&(S.source=B.Source.Microphone),S.mediaStream=d,en(S)&&i?yield S.setProcessor(i):Fn(S)&&r&&(yield S.setProcessor(r)),S})))}catch(d){if(!n)throw d;return To(Object.assign(Object.assign({},e),{audio:s,video:a}),t)}})}function xb(e){return I(this,void 0,void 0,function*(){return(yield To({audio:!1,video:!0}))[0]})}function _b(e){return I(this,void 0,void 0,function*(){return(yield To({audio:!0,video:!1}))[0]})}var $n;(function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Lost="lost",e.Unknown="unknown"})($n||($n={}));function Eb(e){switch(e){case ur.EXCELLENT:return $n.Excellent;case ur.GOOD:return $n.Good;case ur.POOR:return $n.Poor;case ur.LOST:return $n.Lost;default:return $n.Unknown}}class ef extends Yt.EventEmitter{get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions)===null||t===void 0?void 0:t.loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(t=>t.isEncrypted)}get isAgent(){var t;return((t=this.permissions)===null||t===void 0?void 0:t.agent)||this.kind===ni.AGENT}get isActive(){var t;return((t=this.participantInfo)===null||t===void 0?void 0:t.state)===_i.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(t,n,i,r,o,s){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:ni.STANDARD;var c;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=$n.Unknown,this.log=be,this.log=fn((c=s?.loggerName)!==null&&c!==void 0?c:Ut.Participant),this.loggerOptions=s,this.setMaxListeners(100),this.sid=t,this.identity=n,this.name=i,this.metadata=r,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=a,this._attributes=o??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(t){for(const[,n]of this.trackPublications)if(n.source===t)return n}getTrackPublicationByName(t){for(const[,n]of this.trackPublications)if(n.trackName===t)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new Xt,this.once(W.Active,()=>{var t,n;(n=(t=this.activeFuture)===null||t===void 0?void 0:t.resolve)===null||n===void 0||n.call(t),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var t;const n=this.getTrackPublication(B.Source.Camera);return!(!((t=n?.isMuted)!==null&&t!==void 0)||t)}get isMicrophoneEnabled(){var t;const n=this.getTrackPublication(B.Source.Microphone);return!(!((t=n?.isMuted)!==null&&t!==void 0)||t)}get isScreenShareEnabled(){return!!this.getTrackPublication(B.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(t){var n;return this.participantInfo&&this.participantInfo.sid===t.sid&&this.participantInfo.version>t.version?!1:(this.identity=t.identity,this.sid=t.sid,this._setName(t.name),this._setMetadata(t.metadata),this._setAttributes(t.attributes),t.state===_i.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==_i.ACTIVE&&this.emit(W.Active),t.permission&&this.setPermissions(t.permission),this.participantInfo=t,!0)}_setMetadata(t){const n=this.metadata!==t,i=this.metadata;this.metadata=t,n&&this.emit(W.ParticipantMetadataChanged,i)}_setName(t){const n=this.name!==t;this.name=t,n&&this.emit(W.ParticipantNameChanged,t)}_setAttributes(t){const n=_2(this.attributes,t);this._attributes=t,Object.keys(n).length>0&&this.emit(W.AttributesChanged,n)}setPermissions(t){var n,i,r,o,s,a;const c=this.permissions,l=t.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||t.canSubscribe!==((i=this.permissions)===null||i===void 0?void 0:i.canSubscribe)||t.canPublishData!==((r=this.permissions)===null||r===void 0?void 0:r.canPublishData)||t.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||t.recorder!==((s=this.permissions)===null||s===void 0?void 0:s.recorder)||t.canPublishSources.length!==this.permissions.canPublishSources.length||t.canPublishSources.some((u,d)=>{var f;return u!==((f=this.permissions)===null||f===void 0?void 0:f.canPublishSources[d])})||t.canSubscribeMetrics!==((a=this.permissions)===null||a===void 0?void 0:a.canSubscribeMetrics);return this.permissions=t,l&&this.emit(W.ParticipantPermissionsChanged,c),l}setIsSpeaking(t){t!==this.isSpeaking&&(this.isSpeaking=t,t&&(this.lastSpokeAt=new Date),this.emit(W.IsSpeakingChanged,t))}setConnectionQuality(t){const n=this._connectionQuality;this._connectionQuality=Eb(t),n!==this._connectionQuality&&this.emit(W.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var t,n;this.activeFuture&&((n=(t=this.activeFuture).reject)===null||n===void 0||n.call(t,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(t){this.audioContext=t,this.audioTrackPublications.forEach(n=>en(n.track)&&n.track.setAudioContext(t))}addTrackPublication(t){t.on(K.Muted,()=>{this.emit(W.TrackMuted,t)}),t.on(K.Unmuted,()=>{this.emit(W.TrackUnmuted,t)});const n=t;switch(n.track&&(n.track.sid=t.trackSid),this.trackPublications.set(t.trackSid,t),t.kind){case B.Kind.Audio:this.audioTrackPublications.set(t.trackSid,t);break;case B.Kind.Video:this.videoTrackPublications.set(t.trackSid,t);break}}}function Pb(e){var t,n,i;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new hd({participantIdentity:(t=e.participantIdentity)!==null&&t!==void 0?t:"",participantSid:(n=e.participantSid)!==null&&n!==void 0?n:"",allTracks:(i=e.allowAll)!==null&&i!==void 0?i:!1,trackSids:e.allowedTrackSids||[]})}class tf extends ef{constructor(t,n,i,r,o,s){super(t,n,void 0,void 0,void 0,{loggerName:r.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Tt.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Xt)},this.handleReconnected=()=>{var a,c;(c=(a=this.reconnectFuture)===null||a===void 0?void 0:a.resolve)===null||c===void 0||c.call(a),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var a,c,l,u,d,f;this.reconnectFuture&&(this.reconnectFuture.promise.catch(h=>this.log.warn(h.message,this.logContext)),(c=(a=this.reconnectFuture)===null||a===void 0?void 0:a.reject)===null||c===void 0||c.call(a,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((u=(l=this.signalConnectedFuture).reject)===null||u===void 0||u.call(l,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(f=(d=this.activeAgentFuture)===null||d===void 0?void 0:d.reject)===null||f===void 0||f.call(d,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=a=>{var c,l;a.participant&&this.updateInfo(a.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new Xt),(l=(c=this.signalConnectedFuture).resolve)===null||l===void 0||l.call(c)},this.handleSignalRequestResponse=a=>{const{requestId:c,reason:l,message:u}=a,d=this.pendingSignalRequests.get(c);d&&(l!==aa.OK&&d.reject(new lh(u,l)),this.pendingSignalRequests.delete(c))},this.handleDataPacket=a=>{switch(a.value.case){case"rpcResponse":let c=a.value.value,l=null,u=null;c.value.case==="payload"?l=c.value.value:c.value.case==="error"&&(u=He.fromProto(c.value.value)),this.handleIncomingRpcResponse(c.requestId,l,u);break;case"rpcAck":let d=a.value.value;this.handleIncomingRpcAck(d.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(a=>Pb(a)))},this.onTrackUnmuted=a=>{this.onTrackMuted(a,a.isUpstreamPaused)},this.onTrackMuted=(a,c)=>{if(c===void 0&&(c=!0),!a.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),ye(a)));return}this.engine.updateMuteStatus(a.sid,c)},this.onTrackUpstreamPaused=a=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),ye(a))),this.onTrackMuted(a,!0)},this.onTrackUpstreamResumed=a=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),ye(a))),this.onTrackMuted(a,a.isMuted)},this.onTrackFeatureUpdate=a=>{const c=this.audioTrackPublications.get(a.sid);if(!c){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(a.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(c.trackSid,c.getTrackFeatures())},this.onTrackCpuConstrained=(a,c)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),ye(c))),this.emit(W.LocalTrackCpuConstrained,a,c)},this.handleSubscribedQualityUpdate=a=>I(this,void 0,void 0,function*(){var c,l,u,d,f;if(!(!((f=this.roomOptions)===null||f===void 0)&&f.dynacast))return;const h=this.videoTrackPublications.get(a.trackSid);if(!h){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:a.trackSid}));return}if(!h.videoTrack)return;const m=yield h.videoTrack.setPublishingCodecs(a.subscribedCodecs);try{for(var p=!0,y=pn(m),g;g=yield y.next(),c=g.done,!c;p=!0){d=g.value,p=!1;const S=d;i2(S)&&(this.log.debug("publish ".concat(S," for ").concat(h.videoTrack.sid),Object.assign(Object.assign({},this.logContext),ye(h))),yield this.publishAdditionalCodecForTrack(h.videoTrack,S,h.options))}}catch(S){l={error:S}}finally{try{!p&&!c&&(u=y.return)&&(yield u.call(y))}finally{if(l)throw l.error}}}),this.handleLocalTrackUnpublished=a=>{const c=this.trackPublications.get(a.trackSid);if(!c){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:a.trackSid}));return}this.unpublishTrack(c.track)},this.handleTrackEnded=a=>I(this,void 0,void 0,function*(){if(a.source===B.Source.ScreenShare||a.source===B.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),ye(a))),this.unpublishTrack(a);else if(a.isUserProvided)yield a.mute();else if(vn(a)||zn(a))try{if(yt())try{const c=yield navigator?.permissions.query({name:a.source===B.Source.Camera?"camera":"microphone"});if(c&&c.state==="denied")throw this.log.warn("user has revoked access to ".concat(a.source),Object.assign(Object.assign({},this.logContext),ye(a))),c.onchange=()=>{c.state!=="denied"&&(a.isMuted||a.restartTrack(),c.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}a.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),ye(a))),vn(a)?yield a.restartTrack({deviceId:"default"}):yield a.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),ye(a))),yield a.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=i,this.roomOptions=r,this.setupEngine(i),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=o,this.roomOutgoingDataStreamManager=s}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Tt.NONE}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setupEngine(t){var n;this.engine=t,this.engine.on(X.RemoteMute,(i,r)=>{const o=this.trackPublications.get(i);!o||!o.track||(r?o.mute():o.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(X.Connected,this.handleReconnected).on(X.SignalConnected,this.handleSignalConnected).on(X.SignalRestarted,this.handleReconnected).on(X.SignalResumed,this.handleReconnected).on(X.Restarting,this.handleReconnecting).on(X.Resuming,this.handleReconnecting).on(X.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(X.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(X.Closing,this.handleClosing).on(X.SignalRequestResponse,this.handleSignalRequestResponse).on(X.DataPacketReceived,this.handleDataPacket)}setMetadata(t){return I(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:t})})}setName(t){return I(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:t})})}setAttributes(t){return I(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:t})})}requestMetadataUpdate(t){return I(this,arguments,void 0,function(n){var i=this;let{metadata:r,name:o,attributes:s}=n;return(function*(){return new Promise((a,c)=>I(i,void 0,void 0,function*(){var l,u;try{let d=!1;const f=yield this.engine.client.sendUpdateLocalMetadata((l=r??this.metadata)!==null&&l!==void 0?l:"",(u=o??this.name)!==null&&u!==void 0?u:"",s),h=performance.now();for(this.pendingSignalRequests.set(f,{resolve:a,reject:m=>{c(m),d=!0},values:{name:o,metadata:r,attributes:s}});performance.now()-h<5e3&&!d;){if((!o||this.name===o)&&(!r||this.metadata===r)&&(!s||Object.entries(s).every(m=>{let[p,y]=m;return this.attributes[p]===y||y===""&&!this.attributes[p]}))){this.pendingSignalRequests.delete(f),a();return}yield vt(50)}c(new lh("Request to update local metadata timed out","TimeoutError"))}catch(d){d instanceof Error&&c(d)}}))})()})}setCameraEnabled(t,n,i){return this.setTrackEnabled(B.Source.Camera,t,n,i)}setMicrophoneEnabled(t,n,i){return this.setTrackEnabled(B.Source.Microphone,t,n,i)}setScreenShareEnabled(t,n,i){return this.setTrackEnabled(B.Source.ScreenShare,t,n,i)}setE2EEEnabled(t){return I(this,void 0,void 0,function*(){this.encryptionType=t?Tt.GCM:Tt.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(t,n,i,r){return I(this,void 0,void 0,function*(){var o,s;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:t,enabled:n})),this.republishPromise&&(yield this.republishPromise);let a=this.getTrackPublication(t);if(n)if(a)yield a.unmute();else{let c;if(this.pendingPublishing.has(t)){const l=yield this.waitForPendingPublicationOfSource(t);return l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:t})),yield l?.unmute(),l}this.pendingPublishing.add(t);try{switch(t){case B.Source.Camera:c=yield this.createTracks({video:(o=i)!==null&&o!==void 0?o:!0});break;case B.Source.Microphone:c=yield this.createTracks({audio:(s=i)!==null&&s!==void 0?s:!0});break;case B.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},i));break;default:throw new gn(t)}}catch(l){throw c?.forEach(u=>{u.stop()}),l instanceof Error&&this.emit(W.MediaDevicesError,l,Fa(t)),this.pendingPublishing.delete(t),l}for(const l of c){const u=Object.assign(Object.assign({},this.roomOptions.publishDefaults),i);t===B.Source.Microphone&&en(l)&&u.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),l.startPreConnectBuffer())}try{const l=[];for(const d of c)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),ye(d))),l.push(this.publishTrack(d,r));[a]=yield Promise.all(l)}catch(l){throw c?.forEach(u=>{u.stop()}),l}finally{this.pendingPublishing.delete(t)}}else if(!a?.track&&this.pendingPublishing.has(t)&&(a=yield this.waitForPendingPublicationOfSource(t),a||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:t}))),a&&a.track)if(t===B.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const c=this.getTrackPublication(B.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return I(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(B.Source.Camera)||this.pendingPublishing.has(B.Source.Microphone))){this.pendingPublishing.add(B.Source.Camera),this.pendingPublishing.add(B.Source.Microphone);try{const t=yield this.createTracks({audio:!0,video:!0});yield Promise.all(t.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(B.Source.Camera),this.pendingPublishing.delete(B.Source.Microphone)}}})}createTracks(t){return I(this,void 0,void 0,function*(){var n,i;t??(t={});const r=Ch(t,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(i=this.roomOptions)===null||i===void 0?void 0:i.videoCaptureDefaults);try{return(yield To(r,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(a=>(en(a)&&(this.microphoneError=void 0,a.setAudioContext(this.audioContext),a.source=B.Source.Microphone,this.emit(W.AudioStreamAcquired)),Fn(a)&&(this.cameraError=void 0,a.source=B.Source.Camera),a))}catch(o){throw o instanceof Error&&(t.audio&&(this.microphoneError=o),t.video&&(this.cameraError=o)),o}})}createScreenTracks(t){return I(this,void 0,void 0,function*(){if(t===void 0&&(t={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new ya("getDisplayMedia not supported");t.resolution===void 0&&!l2()&&(t.resolution=Ta.h1080fps30.resolution);const n=S2(t),i=yield navigator.mediaDevices.getDisplayMedia(n),r=i.getVideoTracks();if(r.length===0)throw new gn("no video track found");const o=new So(r[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=B.Source.ScreenShare,t.contentHint&&(o.mediaStreamTrack.contentHint=t.contentHint);const s=[o];if(i.getAudioTracks().length>0){this.emit(W.AudioStreamAcquired);const a=new wo(i.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=B.Source.ScreenShareAudio,s.push(a)}return s})}publishTrack(t,n){return I(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(t,n)})}publishOrRepublishTrack(t,n){return I(this,arguments,void 0,function(i,r){var o=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return(function*(){var a,c,l,u;vn(i)&&i.setAudioContext(o.audioContext),yield(a=o.reconnectFuture)===null||a===void 0?void 0:a.promise,o.republishPromise&&!s&&(yield o.republishPromise),Ni(i)&&o.pendingPublishPromises.has(i)&&(yield o.pendingPublishPromises.get(i));let d;if(i instanceof MediaStreamTrack)d=i.getConstraints();else{d=i.constraints;let g;switch(i.source){case B.Source.Microphone:g="audioinput";break;case B.Source.Camera:g="videoinput"}g&&o.activeDeviceMap.has(g)&&(d=Object.assign(Object.assign({},d),{deviceId:o.activeDeviceMap.get(g)}))}if(i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new wo(i,d,!0,o.audioContext,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;case"video":i=new So(i,d,!0,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;default:throw new gn("unsupported MediaStreamTrack kind ".concat(i.kind))}else i.updateLoggerOptions({loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});let f;if(o.trackPublications.forEach(g=>{g.track&&g.track===i&&(f=g)}),f)return o.log.warn("track has already been published, skipping",Object.assign(Object.assign({},o.logContext),ye(f))),f;const h=Object.assign(Object.assign({},o.roomOptions.publishDefaults),r),m="channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2,p=(c=h.forceStereo)!==null&&c!==void 0?c:m;p&&(h.dtx===void 0&&o.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},o.logContext),ye(i))),h.red===void 0&&o.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(l=h.dtx)!==null&&l!==void 0||(h.dtx=!1),(u=h.red)!==null&&u!==void 0||(h.red=!1)),!d2()&&o.roomOptions.e2ee&&(o.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},o.logContext)),h.simulcast=!1),h.source&&(i.source=h.source);const y=new Promise((g,S)=>I(o,void 0,void 0,function*(){try{if(this.engine.client.currentState!==De.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:ye(i)}));const C=setTimeout(()=>{S(new ch("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(C);const w=yield this.publish(i,h,p);g(w)}else try{const C=yield this.publish(i,h,p);g(C)}catch(C){S(C)}}catch(C){S(C)}}));o.pendingPublishPromises.set(i,y);try{return yield y}catch(g){throw g}finally{o.pendingPublishPromises.delete(i)}})()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new Xt),this.signalConnectedFuture.promise}hasPermissionsToPublish(t){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),ye(t))),!1;const{canPublish:n,canPublishSources:i}=this.permissions;return n&&(i.length===0||i.map(r=>E2(r)).includes(t.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),ye(t))),!1)}publish(t,n,i){return I(this,void 0,void 0,function*(){var r,o,s,a,c,l,u,d,f,h;if(!this.hasPermissionsToPublish(t))throw new ch("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(P=>Ni(t)&&P.source===t.source)&&t.source!==B.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(t.source),Object.assign(Object.assign({},this.logContext),ye(t))),n.stopMicTrackOnMute&&en(t)&&(t.stopOnMute=!0),t.source===B.Source.ScreenShare&&si()&&(n.simulcast=!1),n.videoCodec==="av1"&&!s2()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!a2()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=Wa),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(P=>n.videoCodec===br(P.mime))||(n.videoCodec=br(this.enabledPublishVideoCodecs[0].mime)));const p=n.videoCodec;t.on(K.Muted,this.onTrackMuted),t.on(K.Unmuted,this.onTrackUnmuted),t.on(K.Ended,this.handleTrackEnded),t.on(K.UpstreamPaused,this.onTrackUpstreamPaused),t.on(K.UpstreamResumed,this.onTrackUpstreamResumed),t.on(K.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const y=[],g=!(!((r=n.dtx)!==null&&r!==void 0)||r),S=t.getSourceTrackSettings();S.autoGainControl&&y.push(it.TF_AUTO_GAIN_CONTROL),S.echoCancellation&&y.push(it.TF_ECHO_CANCELLATION),S.noiseSuppression&&y.push(it.TF_NOISE_SUPPRESSION),S.channelCount&&S.channelCount>1&&y.push(it.TF_STEREO),g&&y.push(it.TF_NO_DTX),vn(t)&&t.hasPreConnectBuffer&&y.push(it.TF_PRECONNECT_BUFFER);const C=new na({cid:t.mediaStreamTrack.id,name:n.name,type:B.kindToProto(t.kind),muted:t.isMuted,source:B.sourceToProto(t.source),disableDtx:g,encryption:this.encryptionType,stereo:i,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n?.stream,backupCodecPolicy:n?.backupCodecPolicy,audioFeatures:y});let w;if(t.kind===B.Kind.Video){let P={width:0,height:0};try{P=yield t.waitForDimensions()}catch{const M=(a=(s=this.roomOptions.videoCaptureDefaults)===null||s===void 0?void 0:s.resolution)!==null&&a!==void 0?a:gr.h720.resolution;P={width:M.width,height:M.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),ye(t)),{dims:P}))}C.width=P.width,C.height=P.height,zn(t)&&(Qt(p)&&(t.source===B.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in t.mediaStreamTrack&&(t.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),ye(t))))),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),C.simulcastCodecs=[new ta({codec:p,cid:t.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:Wa}),n.backupCodec&&p!==n.backupCodec.codec&&C.encryption===Tt.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),C.simulcastCodecs.push(new ta({codec:n.backupCodec.codec,cid:""})))),w=Ja(t.source===B.Source.ScreenShare,C.width,C.height,n),C.layers=Wh(C.width,C.height,w,Qt(n.videoCodec))}else t.kind===B.Kind.Audio&&(w=[{maxBitrate:(l=n.audioPreset)===null||l===void 0?void 0:l.maxBitrate,priority:(d=(u=n.audioPreset)===null||u===void 0?void 0:u.priority)!==null&&d!==void 0?d:"high",networkPriority:(h=(f=n.audioPreset)===null||f===void 0?void 0:f.priority)!==null&&h!==void 0?h:"high"}]);if(!this.engine||this.engine.isClosed)throw new Qe("cannot publish track when not connected");const k=()=>I(this,void 0,void 0,function*(){var P,A,M;if(!this.engine.pcManager)throw new Qe("pcManager is not ready");if(t.sender=yield this.engine.createSender(t,n,w),this.emit(W.LocalSenderCreated,t.sender,t),zn(t)&&((P=n.degradationPreference)!==null&&P!==void 0||(n.degradationPreference=lb(t)),t.setDegradationPreference(n.degradationPreference)),w)if(si()&&t.kind===B.Kind.Audio){let R;for(const z of this.engine.pcManager.publisher.getTransceivers())if(z.sender===t.sender){R=z;break}R&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:R,codec:"opus",maxbr:!((A=w[0])===null||A===void 0)&&A.maxBitrate?w[0].maxBitrate/1e3:0})}else t.codec&&Qt(t.codec)&&(!((M=w[0])===null||M===void 0)&&M.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:C.cid,codec:t.codec,maxbr:w[0].maxBitrate/1e3});yield this.engine.negotiate()});let b;const x=new Promise((P,A)=>I(this,void 0,void 0,function*(){var M;try{b=yield this.engine.addTrack(C),P(b)}catch(R){t.sender&&(!((M=this.engine.pcManager)===null||M===void 0)&&M.publisher)&&(this.engine.pcManager.publisher.removeTrack(t.sender),yield this.engine.negotiate().catch(z=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),ye(t)),{error:z}))})),A(R)}}));if(this.enabledPublishVideoCodecs.length>0)b=(yield Promise.all([x,k()]))[0];else{b=yield x;let P;if(b.codecs.forEach(A=>{P===void 0&&(P=A.mimeType)}),P&&t.kind===B.Kind.Video){const A=br(P);A!==p&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),ye(t)),{codec:A})),n.videoCodec=A,w=Ja(t.source===B.Source.ScreenShare,C.width,C.height,n))}yield k()}const T=new rc(t.kind,b,t,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(T.on(K.CpuConstrained,P=>this.onTrackCpuConstrained(P,T)),T.options=n,t.sid=b.sid,this.log.debug("publishing ".concat(t.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:w,trackInfo:b})),zn(t)?t.startMonitor(this.engine.client):vn(t)&&t.startMonitor(),this.addTrackPublication(T),this.emit(W.LocalTrackPublished,T),vn(t)&&b.audioFeatures.includes(it.TF_PRECONNECT_BUFFER)){const P=t.getPreConnectBuffer(),A=t.getPreConnectBufferMimeType();this.on(W.LocalTrackSubscribed,M=>{if(M.trackSid===b.sid){if(!t.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),ye(t))),t.stopPreConnectBuffer()}}),P&&new Promise((R,z)=>I(this,void 0,void 0,function*(){var D,F,$,V,L,J;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),ye(t)));const E=setTimeout(()=>{z(new Error("agent not active within 10 seconds"))},1e4),ae=yield this.waitUntilActiveAgentPresent();clearTimeout(E),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),ye(t)));const ke=yield this.streamBytes({name:"preconnect-buffer",mimeType:A,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[ae.identity],attributes:{trackId:T.trackSid,sampleRate:String((L=S.sampleRate)!==null&&L!==void 0?L:"48000"),channels:String((J=S.channelCount)!==null&&J!==void 0?J:"1")}});try{for(var _=!0,ee=pn(P),oe;oe=yield ee.next(),D=oe.done,!D;_=!0){V=oe.value,_=!1;const pe=V;yield ke.write(pe)}}catch(pe){F={error:pe}}finally{try{!_&&!D&&($=ee.return)&&(yield $.call(ee))}finally{if(F)throw F.error}}yield ke.close(),R()}catch(E){z(E)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),ye(t)))}).catch(R=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),ye(t)),{error:R}))})}return T})}get isLocal(){return!0}publishAdditionalCodecForTrack(t,n,i){return I(this,void 0,void 0,function*(){var r;if(this.encryptionType!==Tt.NONE)return;let o;if(this.trackPublications.forEach(h=>{h.track&&h.track===t&&(o=h)}),!o)throw new gn("track is not published");if(!zn(t))throw new gn("track is not a video track");const s=Object.assign(Object.assign({},(r=this.roomOptions)===null||r===void 0?void 0:r.publishDefaults),i),a=sb(t,n,s);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),ye(t)));return}const c=t.addSimulcastTrack(n,a);if(!c)return;const l=new na({cid:c.mediaStreamTrack.id,type:B.kindToProto(t.kind),muted:t.isMuted,source:B.sourceToProto(t.source),sid:t.sid,simulcastCodecs:[{codec:s.videoCodec,cid:c.mediaStreamTrack.id}]});if(l.layers=Wh(l.width,l.height,a),!this.engine||this.engine.isClosed)throw new Qe("cannot publish track when not connected");const u=()=>I(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(t,c,s,a),yield this.engine.negotiate()}),f=(yield Promise.all([this.engine.addTrack(l),u()]))[0];this.log.debug("published ".concat(n," for track ").concat(t.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:f}))})}unpublishTrack(t,n){return I(this,void 0,void 0,function*(){var i,r;if(Ni(t)){const l=this.pendingPublishPromises.get(t);l&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),ye(t))),yield l)}const o=this.getPublicationForTrack(t),s=o?ye(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),s)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),s));return}t=o.track,t.off(K.Muted,this.onTrackMuted),t.off(K.Unmuted,this.onTrackUnmuted),t.off(K.Ended,this.handleTrackEnded),t.off(K.UpstreamPaused,this.onTrackUpstreamPaused),t.off(K.UpstreamResumed,this.onTrackUpstreamResumed),t.off(K.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(r=(i=this.roomOptions)===null||i===void 0?void 0:i.stopLocalTrackOnUnpublish)!==null&&r!==void 0?r:!0),n?t.stop():t.stopMonitor();let a=!1;const c=t.sender;if(t.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<qe.FAILED&&c)try{for(const l of this.engine.pcManager.publisher.getTransceivers())l.sender===c&&(l.direction="inactive",a=!0);if(this.engine.removeTrack(c)&&(a=!0),zn(t)){for(const[,l]of t.simulcastCodecs)l.sender&&(this.engine.removeTrack(l.sender)&&(a=!0),l.sender=void 0);t.simulcastCodecs.clear()}}catch(l){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),s),{error:l}))}switch(this.trackPublications.delete(o.trackSid),o.kind){case B.Kind.Audio:this.audioTrackPublications.delete(o.trackSid);break;case B.Kind.Video:this.videoTrackPublications.delete(o.trackSid);break}return this.emit(W.LocalTrackUnpublished,o),o.setTrack(void 0),a&&(yield this.engine.negotiate()),o})}unpublishTracks(t){return I(this,void 0,void 0,function*(){return(yield Promise.all(t.map(i=>this.unpublishTrack(i)))).filter(i=>!!i)})}republishAllTracks(t){return I(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){i.republishPromise&&(yield i.republishPromise),i.republishPromise=new Promise((o,s)=>I(i,void 0,void 0,function*(){try{const a=[];this.trackPublications.forEach(c=>{c.track&&(n&&(c.options=Object.assign(Object.assign({},c.options),n)),a.push(c))}),yield Promise.all(a.map(c=>I(this,void 0,void 0,function*(){const l=c.track;yield this.unpublishTrack(l,!1),r&&!l.isMuted&&l.source!==B.Source.ScreenShare&&l.source!==B.Source.ScreenShareAudio&&(vn(l)||zn(l))&&!l.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:c.trackSid})),yield l.restartTrack()),yield this.publishOrRepublishTrack(l,c.options,!0)}))),o()}catch(a){s(a)}finally{this.republishPromise=void 0}})),yield i.republishPromise})()})}publishData(t){return I(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){const o=r.reliable?me.RELIABLE:me.LOSSY,s=r.destinationIdentities,a=r.topic,c=new gt({kind:o,value:{case:"user",value:new Hu({participantIdentity:i.identity,payload:n,destinationIdentities:s,topic:a})}});yield i.engine.sendDataPacket(c,o)})()})}publishDtmf(t,n){return I(this,void 0,void 0,function*(){const i=new gt({kind:me.RELIABLE,value:{case:"sipDtmf",value:new Wu({code:t,digit:n})}});yield this.engine.sendDataPacket(i,me.RELIABLE)})}sendChatMessage(t,n){return I(this,void 0,void 0,function*(){const i={id:crypto.randomUUID(),message:t,timestamp:Date.now(),attachedFiles:n?.attachments},r=new gt({value:{case:"chatMessage",value:new Ks(Object.assign(Object.assign({},i),{timestamp:Fe.parse(i.timestamp)}))}});return yield this.engine.sendDataPacket(r,me.RELIABLE),this.emit(W.ChatMessage,i),i})}editChatMessage(t,n){return I(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},n),{message:t,editTimestamp:Date.now()}),r=new gt({value:{case:"chatMessage",value:new Ks(Object.assign(Object.assign({},i),{timestamp:Fe.parse(i.timestamp),editTimestamp:Fe.parse(i.editTimestamp)}))}});return yield this.engine.sendDataPacket(r,me.RELIABLE),this.emit(W.ChatMessage,i),i})}sendText(t,n){return I(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(t,n)})}streamText(t){return I(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(t)})}sendFile(t,n){return I(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(t,n)})}streamBytes(t){return I(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(t)})}performRpc(t){return I(this,arguments,void 0,function(n){var i=this;let{destinationIdentity:r,method:o,payload:s,responseTimeout:a=1e4}=n;return(function*(){return new Promise((l,u)=>I(i,void 0,void 0,function*(){var d,f,h,m;if(Ga(s)>zh){u(He.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((f=(d=this.engine.latestJoinResponse)===null||d===void 0?void 0:d.serverInfo)===null||f===void 0)&&f.version&&jt((m=(h=this.engine.latestJoinResponse)===null||h===void 0?void 0:h.serverInfo)===null||m===void 0?void 0:m.version,"1.8.0")<0){u(He.builtIn("UNSUPPORTED_SERVER"));return}const p=crypto.randomUUID();yield this.publishRpcRequest(r,p,o,s,a-2e3);const y=setTimeout(()=>{this.pendingAcks.delete(p),u(He.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(p),clearTimeout(g)},2e3);this.pendingAcks.set(p,{resolve:()=>{clearTimeout(y)},participantIdentity:r});const g=setTimeout(()=>{this.pendingResponses.delete(p),u(He.builtIn("RESPONSE_TIMEOUT"))},a);this.pendingResponses.set(p,{resolve:(S,C)=>{clearTimeout(g),this.pendingAcks.has(p)&&(console.warn("RPC response received before ack",p),this.pendingAcks.delete(p),clearTimeout(y)),C?u(C):l(S??"")},participantIdentity:r})}))})()})}registerRpcMethod(t,n){this.rpcHandlers.has(t)&&this.log.warn("you're overriding the RPC handler for method ".concat(t,", in the future this will throw an error")),this.rpcHandlers.set(t,n)}unregisterRpcMethod(t){this.rpcHandlers.delete(t)}setTrackSubscriptionPermissions(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=t,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(t){const n=this.pendingAcks.get(t);n?(n.resolve(),this.pendingAcks.delete(t)):console.error("Ack received for unexpected RPC request",t)}handleIncomingRpcResponse(t,n,i){const r=this.pendingResponses.get(t);r?(r.resolve(n,i),this.pendingResponses.delete(t)):console.error("Response received for unexpected RPC request",t)}publishRpcRequest(t,n,i,r,o){return I(this,void 0,void 0,function*(){const s=new gt({destinationIdentities:[t],kind:me.RELIABLE,value:{case:"rpcRequest",value:new Zu({id:n,method:i,payload:r,responseTimeoutMs:o,version:1})}});yield this.engine.sendDataPacket(s,me.RELIABLE)})}handleParticipantDisconnected(t){for(const[n,{participantIdentity:i}]of this.pendingAcks)i===t&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:i,resolve:r}]of this.pendingResponses)i===t&&(r(null,He.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(t){this.enabledPublishVideoCodecs=t.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(t){return super.updateInfo(t)?(t.tracks.forEach(n=>{var i,r;const o=this.trackPublications.get(n.sid);if(o){const s=o.isMuted||((r=(i=o.track)===null||i===void 0?void 0:i.isUpstreamPaused)!==null&&r!==void 0?r:!1);s!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),ye(o)),{mutedOnServer:s})),this.engine.client.sendMuteTrack(n.sid,s))}}),!0):!1}setActiveAgent(t){var n,i,r,o;this.firstActiveAgent=t,t&&!this.firstActiveAgent&&(this.firstActiveAgent=t),t?(i=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||i===void 0||i.call(n,t):(o=(r=this.activeAgentFuture)===null||r===void 0?void 0:r.reject)===null||o===void 0||o.call(r,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new Xt),this.activeAgentFuture.promise)}getPublicationForTrack(t){let n;return this.trackPublications.forEach(i=>{const r=i.track;r&&(t instanceof MediaStreamTrack?(vn(r)||zn(r))&&r.mediaStreamTrack===t&&(n=i):t===r&&(n=i))}),n}waitForPendingPublicationOfSource(t){return I(this,void 0,void 0,function*(){const i=Date.now();for(;Date.now()<i+1e4;){const r=Array.from(this.pendingPublishPromises.entries()).find(o=>{let[s]=o;return s.source===t});if(r)return r[1];yield vt(20)}})}}class nf extends yn{constructor(t,n,i,r){super(t,n.sid,n.name,r),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=o=>{this.setTrack(void 0),this.emit(K.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.visible=o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensionsAdaptiveStream=o,this.emitTrackUpdate()},this.subscribed=i,this.updateInfo(n)}setSubscribed(t){const n=this.subscriptionStatus,i=this.permissionStatus;this.subscribed=t,t&&(this.allowed=!0);const r=new so({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new Qu({participantSid:"",trackSids:[this.trackSid]})]});this.emit(K.UpdateSubscription,r),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(i)}get subscriptionStatus(){return this.subscribed===!1?yn.SubscriptionStatus.Unsubscribed:super.isSubscribed?yn.SubscriptionStatus.Subscribed:yn.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?yn.PermissionStatus.Allowed:yn.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(t){!this.isManualOperationAllowed()||this.requestedDisabled===!t||(this.requestedDisabled=!t,this.emitTrackUpdate())}setVideoQuality(t){!this.isManualOperationAllowed()||this.requestedMaxQuality===t||(this.requestedMaxQuality=t,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(t){var n,i;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===t.width&&((i=this.requestedVideoDimensions)===null||i===void 0?void 0:i.height)===t.height||(Ra(this.track)&&(this.requestedVideoDimensions=t),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(t){this.isManualOperationAllowed()&&Ra(this.track)&&this.fps!==t&&(this.fps=t,this.emitTrackUpdate())}get videoQuality(){var t;return(t=this.requestedMaxQuality)!==null&&t!==void 0?t:_t.HIGH}setTrack(t){const n=this.subscriptionStatus,i=this.permissionStatus,r=this.track;r!==t&&(r&&(r.off(K.VideoDimensionsChanged,this.handleVideoDimensionsChange),r.off(K.VisibilityChanged,this.handleVisibilityChange),r.off(K.Ended,this.handleEnded),r.detach(),r.stopMonitor(),this.emit(K.Unsubscribed,r)),super.setTrack(t),t&&(t.sid=this.trackSid,t.on(K.VideoDimensionsChanged,this.handleVideoDimensionsChange),t.on(K.VisibilityChanged,this.handleVisibilityChange),t.on(K.Ended,this.handleEnded),this.emit(K.Subscribed,t)),this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(t){const n=this.subscriptionStatus,i=this.permissionStatus;this.allowed=t,this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(t){this.emit(K.SubscriptionFailed,t)}updateInfo(t){super.updateInfo(t);const n=this.metadataMuted;this.metadataMuted=t.muted,this.track?this.track.setMuted(t.muted):n!==t.muted&&this.emit(t.muted?K.Muted:K.Unmuted)}emitSubscriptionUpdateIfChanged(t){const n=this.subscriptionStatus;t!==n&&this.emit(K.SubscriptionStatusChanged,n,t)}emitPermissionUpdateIfChanged(t){this.permissionStatus!==t&&this.emit(K.SubscriptionPermissionChanged,this.permissionStatus,t)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Ra(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const t=new ad({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===B.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)xh(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const i=P2(this.trackInfo,this.requestedMaxQuality);i&&xh(this.videoDimensionsAdaptiveStream,i)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(t.width=Math.ceil(n.width),t.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),t.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:_t.HIGH})),t.quality=_t.HIGH)}this.emit(K.UpdateSettings,t)}}class xo extends ef{static fromParticipantInfo(t,n,i){return new xo(t,n.sid,n.identity,n.name,n.metadata,n.attributes,i,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(t,n,i,r,o,s,a){let c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:ni.STANDARD;super(n,i||"",r,o,s,a,c),this.signalClient=t,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(t){super.addTrackPublication(t),t.on(K.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),ye(t)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),t.on(K.UpdateSubscription,n=>{n.participantTracks.forEach(i=>{i.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),t.on(K.SubscriptionPermissionChanged,n=>{this.emit(W.TrackSubscriptionPermissionChanged,t,n)}),t.on(K.SubscriptionStatusChanged,n=>{this.emit(W.TrackSubscriptionStatusChanged,t,n)}),t.on(K.Subscribed,n=>{this.emit(W.TrackSubscribed,n,t)}),t.on(K.Unsubscribed,n=>{this.emit(W.TrackUnsubscribed,n,t)}),t.on(K.SubscriptionFailed,n=>{this.emit(W.TrackSubscriptionFailed,t.trackSid,n)})}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setVolume(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B.Source.Microphone;this.volumeMap.set(n,t);const i=this.getTrackPublication(n);i&&i.track&&i.track.setVolume(t)}getVolume(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B.Source.Microphone;const n=this.getTrackPublication(t);return n&&n.track?n.track.getVolume():this.volumeMap.get(t)}addSubscribedMediaTrack(t,n,i,r,o,s){let a=this.getTrackPublicationBySid(n);if(a||n.startsWith("TR")||this.trackPublications.forEach(u=>{!a&&t.kind===u.kind.toString()&&(a=u)}),!a){if(s===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(W.TrackSubscriptionFailed,n);return}s===void 0&&(s=20),setTimeout(()=>{this.addSubscribedMediaTrack(t,n,i,r,o,s-1)},150);return}if(t.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),ye(a))),this.emit(W.TrackSubscriptionFailed,n);return}const c=t.kind==="video";let l;return c?l=new Sb(t,n,r,o):l=new Xh(t,n,r,this.audioContext,this.audioOutput),l.source=a.source,l.isMuted=a.isMuted,l.setMediaStream(i),l.start(),a.setTrack(l),this.volumeMap.has(a.source)&&Aa(l)&&en(l)&&l.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(t){return this.trackPublications.get(t)}updateInfo(t){if(!super.updateInfo(t))return!1;const n=new Map,i=new Map;return t.tracks.forEach(r=>{var o,s;let a=this.getTrackPublicationBySid(r.sid);if(a)a.updateInfo(r);else{const c=B.kindFromProto(r.type);if(!c)return;a=new nf(c,r,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(s=this.loggerOptions)===null||s===void 0?void 0:s.loggerName}),a.updateInfo(r),i.set(r.sid,a);const l=Array.from(this.trackPublications.values()).find(u=>u.source===a?.source);l&&a.source!==B.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:ye(l),newTrack:ye(a)})),this.addTrackPublication(a)}n.set(r.sid,a)}),this.trackPublications.forEach(r=>{n.has(r.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),ye(r))),this.unpublishTrack(r.trackSid,!0))}),i.forEach(r=>{this.emit(W.TrackPublished,r)}),!0}unpublishTrack(t,n){const i=this.trackPublications.get(t);if(!i)return;const{track:r}=i;switch(r&&(r.stop(),i.setTrack(void 0)),this.trackPublications.delete(t),i.kind){case B.Kind.Audio:this.audioTrackPublications.delete(t);break;case B.Kind.Video:this.videoTrackPublications.delete(t);break}n&&this.emit(W.TrackUnpublished,i)}setAudioOutput(t){return I(this,void 0,void 0,function*(){this.audioOutput=t;const n=[];this.audioTrackPublications.forEach(i=>{var r;en(i.track)&&Aa(i.track)&&n.push(i.track.setSinkId((r=t.deviceId)!==null&&r!==void 0?r:"default"))}),yield Promise.all(n)})}emit(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:t,args:i})),super.emit(t,...i)}}var he;(function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting"})(he||(he={}));const Mb=4*1e3;class Di extends Yt.EventEmitter{constructor(t){var n,i,r,o;if(super(),n=this,this.state=he.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=be,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(s,a,c)=>I(this,void 0,void 0,function*(){var l;if(!c2())throw Jt()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const u=yield this.disconnectLock.lock();if(this.state===he.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),u(),Promise.resolve();if(this.connectFuture)return u(),this.connectFuture.promise;this.setAndEmitConnectionState(he.Connecting),((l=this.regionUrlProvider)===null||l===void 0?void 0:l.getServerUrl().toString())!==s&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),Pa(new URL(s))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new tc(s,a):this.regionUrlProvider.updateToken(a),this.regionUrlProvider.fetchRegionSettings().then(h=>{var m;(m=this.regionUrlProvider)===null||m===void 0||m.setServerReportedRegions(h)}).catch(h=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:h}))}));const d=(h,m,p)=>I(this,void 0,void 0,function*(){var y,g;this.abortController&&this.abortController.abort();const S=new AbortController;this.abortController=S,u?.();try{yield this.attemptConnection(p??s,a,c,S),this.abortController=void 0,h()}catch(C){if(this.regionUrlProvider&&C instanceof Ie&&C.reason!==Se.Cancelled&&C.reason!==Se.NotAllowed){let w=null;try{w=yield this.regionUrlProvider.getNextBestRegionUrl((y=this.abortController)===null||y===void 0?void 0:y.signal)}catch(k){if(k instanceof Ie&&(k.status===401||k.reason===Se.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),m(k);return}}w&&!(!((g=this.abortController)===null||g===void 0)&&g.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(C.message,". Retrying with another region: ").concat(w),this.logContext),this.recreateEngine(),yield d(h,m,w)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,kh(C)),m(C))}else{let w=Ft.UNKNOWN_REASON;C instanceof Ie&&(w=kh(C)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,w),m(C)}}}),f=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Xt((h,m)=>{d(h,m,f)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(s,a,c,l,u,d)=>I(this,void 0,void 0,function*(){var f,h,m;const p=yield c.join(s,a,{autoSubscribe:l.autoSubscribe,adaptiveStream:typeof u.adaptiveStream=="object"?!0:u.adaptiveStream,maxRetries:l.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:l.websocketTimeout},d.signal);let y=p.serverInfo;if(y||(y={version:p.serverVersion,region:p.serverRegion}),this.serverInfo=y,this.log.debug("connected to Livekit Server ".concat(Object.entries(y).map(g=>{let[S,C]=g;return"".concat(S,": ").concat(C)}).join(", ")),{room:(f=p.room)===null||f===void 0?void 0:f.name,roomSid:(h=p.room)===null||h===void 0?void 0:h.sid,identity:(m=p.participant)===null||m===void 0?void 0:m.identity}),!y.version)throw new Zy("unknown server version");return y.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),u.dynacast=!1),p}),this.applyJoinResponse=s=>{const a=s.participant;if(this.localParticipant.sid=a.sid,this.localParticipant.identity=a.identity,this.localParticipant.setEnabledPublishCodecs(s.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(s.sifTrailer)}catch(c){this.log.error(c instanceof Error?c.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:c}))}this.handleParticipantUpdates([a,...s.otherParticipants]),s.room&&this.handleRoomUpdate(s.room)},this.attemptConnection=(s,a,c,l)=>I(this,void 0,void 0,function*(){var u,d;this.state===he.Reconnecting||this.isResuming||!((u=this.engine)===null||u===void 0)&&u.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((d=this.regionUrlProvider)===null||d===void 0)&&d.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Za),c),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const f=yield this.connectSignal(s,a,this.engine,this.connOptions,this.options,l);this.applyJoinResponse(f),this.setupLocalParticipantEvents(),this.emit(q.SignalConnected)}catch(f){yield this.engine.close(),this.recreateEngine();const h=new Ie("could not establish signal connection",Se.ServerUnreachable);throw f instanceof Error&&(h.message="".concat(h.message,": ").concat(f.message)),f instanceof Ie&&(h.reason=f.reason,h.status=f.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:f})),h}if(l.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Ie("Connection attempt aborted",Se.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,l)}catch(f){throw yield this.engine.close(),this.recreateEngine(),f}yt()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),yt()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(he.Connected),this.emit(q.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return I(n,[...a],void 0,function(){var l=this;let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var d,f,h,m;const p=yield l.disconnectLock.lock();try{if(l.state===he.Disconnected){l.log.debug("already disconnected",l.logContext);return}l.log.info("disconnect from room",Object.assign({},l.logContext)),(l.state===he.Connecting||l.state===he.Reconnecting||l.isResuming)&&(l.log.warn("abort connection attempt",l.logContext),(d=l.abortController)===null||d===void 0||d.abort(),(h=(f=l.connectFuture)===null||f===void 0?void 0:f.reject)===null||h===void 0||h.call(f,new Ie("Client initiated disconnect",Se.Cancelled)),l.connectFuture=void 0),!((m=l.engine)===null||m===void 0)&&m.client.isDisconnected||(yield l.engine.client.sendLeave()),l.engine&&(yield l.engine.close()),l.handleDisconnect(u,Ft.CLIENT_INITIATED),l.engine=void 0}finally{p()}})()})},this.onPageLeave=()=>I(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>I(this,void 0,void 0,function*(){const s=[],a=xt();if(a&&a.os==="iOS"){const c="livekit-dummy-audio-el";let l=document.getElementById(c);if(!l){l=document.createElement("audio"),l.id=c,l.autoplay=!0,l.hidden=!0;const u=Oa();u.enabled=!0;const d=new MediaStream([u]);l.srcObject=d,document.addEventListener("visibilitychange",()=>{l&&(l.srcObject=document.hidden?null:d,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(l),this.once(q.Disconnected,()=>{l?.remove(),l=null})}s.push(l)}this.remoteParticipants.forEach(c=>{c.audioTrackPublications.forEach(l=>{l.track&&l.track.attachedElements.forEach(u=>{s.push(u)})})});try{yield Promise.all([this.acquireAudioContext(),...s.map(c=>(c.muted=!1,c.play()))]),this.handleAudioPlaybackStarted()}catch(c){throw this.handleAudioPlaybackFailed(c),c}}),this.startVideo=()=>I(this,void 0,void 0,function*(){const s=[];for(const a of this.remoteParticipants.values())a.videoTrackPublications.forEach(c=>{var l;(l=c.track)===null||l===void 0||l.attachedElements.forEach(u=>{s.includes(u)||s.push(u)})});yield Promise.all(s.map(a=>a.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(a=>{a.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const s of this.remoteParticipants.values())this.handleParticipantDisconnected(s.identity,s);this.setAndEmitConnectionState(he.Reconnecting)&&this.emit(q.Reconnecting)},this.handleSignalRestarted=s=>I(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(s.serverRegion),Object.assign(Object.assign({},this.logContext),{region:s.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(s);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(a){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:a}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:s.serverRegion}))}catch{return}this.setAndEmitConnectionState(he.Connected),this.emit(q.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=s=>{s.forEach(a=>{var c;if(a.identity===this.localParticipant.identity){this.localParticipant.updateInfo(a);return}a.identity===""&&(a.identity=(c=this.sidToIdentity.get(a.sid))!==null&&c!==void 0?c:"");let l=this.remoteParticipants.get(a.identity);a.state===_i.DISCONNECTED?this.handleParticipantDisconnected(a.identity,l):l=this.getOrCreateParticipant(a.identity,a)})},this.handleActiveSpeakersUpdate=s=>{const a=[],c={};s.forEach(l=>{if(c[l.sid]=!0,l.sid===this.localParticipant.sid)this.localParticipant.audioLevel=l.level,this.localParticipant.setIsSpeaking(!0),a.push(this.localParticipant);else{const u=this.getRemoteParticipantBySid(l.sid);u&&(u.audioLevel=l.level,u.setIsSpeaking(!0),a.push(u))}}),c[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(l=>{c[l.sid]||(l.audioLevel=0,l.setIsSpeaking(!1))}),this.activeSpeakers=a,this.emitWhenConnected(q.ActiveSpeakersChanged,a)},this.handleSpeakersChanged=s=>{const a=new Map;this.activeSpeakers.forEach(l=>{const u=this.remoteParticipants.get(l.identity);u&&u.sid!==l.sid||a.set(l.sid,l)}),s.forEach(l=>{let u=this.getRemoteParticipantBySid(l.sid);l.sid===this.localParticipant.sid&&(u=this.localParticipant),u&&(u.audioLevel=l.level,u.setIsSpeaking(l.active),l.active?a.set(l.sid,u):a.delete(l.sid))});const c=Array.from(a.values());c.sort((l,u)=>u.audioLevel-l.audioLevel),this.activeSpeakers=c,this.emitWhenConnected(q.ActiveSpeakersChanged,c)},this.handleStreamStateUpdate=s=>{s.streamStates.forEach(a=>{const c=this.getRemoteParticipantBySid(a.participantSid);if(!c)return;const l=c.getTrackPublicationBySid(a.trackSid);if(!l||!l.track)return;const u=B.streamStateFromProto(a.state);l.track.setStreamState(u),u!==l.track.streamState&&(c.emit(W.TrackStreamStateChanged,l,l.track.streamState),this.emitWhenConnected(q.TrackStreamStateChanged,l,l.track.streamState,c))})},this.handleSubscriptionPermissionUpdate=s=>{const a=this.getRemoteParticipantBySid(s.participantSid);if(!a)return;const c=a.getTrackPublicationBySid(s.trackSid);c&&c.setAllowed(s.allowed)},this.handleSubscriptionError=s=>{const a=Array.from(this.remoteParticipants.values()).find(l=>l.trackPublications.has(s.trackSid));if(!a)return;const c=a.getTrackPublicationBySid(s.trackSid);c&&c.setSubscriptionError(s.err)},this.handleDataPacket=s=>{const a=this.remoteParticipants.get(s.participantIdentity);if(s.value.case==="user")this.handleUserPacket(a,s.value.value,s.kind);else if(s.value.case==="transcription")this.handleTranscription(a,s.value.value);else if(s.value.case==="sipDtmf")this.handleSipDtmf(a,s.value.value);else if(s.value.case==="chatMessage")this.handleChatMessage(a,s.value.value);else if(s.value.case==="metrics")this.handleMetrics(s.value.value,a);else if(s.value.case==="streamHeader"||s.value.case==="streamChunk"||s.value.case==="streamTrailer")this.handleDataStream(s);else if(s.value.case==="rpcRequest"){const c=s.value.value;this.handleIncomingRpcRequest(s.participantIdentity,c.id,c.method,c.payload,c.responseTimeoutMs,c.version)}},this.handleUserPacket=(s,a,c)=>{this.emit(q.DataReceived,a.payload,s,c,a.topic),s?.emit(W.DataReceived,a.payload,c)},this.handleSipDtmf=(s,a)=>{this.emit(q.SipDTMFReceived,a,s),s?.emit(W.SipDTMFReceived,a)},this.handleTranscription=(s,a)=>{const c=a.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(a.transcribedParticipantIdentity),l=c?.trackPublications.get(a.trackId),u=v2(a,this.transcriptionReceivedTimes);l?.emit(K.TranscriptionReceived,u),c?.emit(W.TranscriptionReceived,u,l),this.emit(q.TranscriptionReceived,u,c,l)},this.handleChatMessage=(s,a)=>{const c=y2(a);this.emit(q.ChatMessage,c,s)},this.handleMetrics=(s,a)=>{this.emit(q.MetricsReceived,s,a)},this.handleDataStream=s=>{this.incomingDataStreamManager.handleDataStreamPacket(s)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(q.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=s=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:s})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(q.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(q.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(q.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>I(this,void 0,void 0,function*(){var s;((s=xt())===null||s===void 0?void 0:s.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(q.MediaDevicesChanged)}),this.handleRoomUpdate=s=>{const a=this.roomInfo;this.roomInfo=s,a&&a.metadata!==s.metadata&&this.emitWhenConnected(q.RoomMetadataChanged,s.metadata),a?.activeRecording!==s.activeRecording&&this.emitWhenConnected(q.RecordingStatusChanged,s.activeRecording)},this.handleConnectionQualityUpdate=s=>{s.updates.forEach(a=>{if(a.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(a.quality);return}const c=this.getRemoteParticipantBySid(a.participantSid);c&&c.setConnectionQuality(a.quality)})},this.onLocalParticipantMetadataChanged=s=>{this.emit(q.ParticipantMetadataChanged,s,this.localParticipant)},this.onLocalParticipantNameChanged=s=>{this.emit(q.ParticipantNameChanged,s,this.localParticipant)},this.onLocalAttributesChanged=s=>{this.emit(q.ParticipantAttributesChanged,s,this.localParticipant)},this.onLocalTrackMuted=s=>{this.emit(q.TrackMuted,s,this.localParticipant)},this.onLocalTrackUnmuted=s=>{this.emit(q.TrackUnmuted,s,this.localParticipant)},this.onTrackProcessorUpdate=s=>{var a;(a=s?.onPublish)===null||a===void 0||a.call(s,this)},this.onLocalTrackPublished=s=>I(this,void 0,void 0,function*(){var a,c,l,u,d,f;(a=s.track)===null||a===void 0||a.on(K.TrackProcessorUpdate,this.onTrackProcessorUpdate),(c=s.track)===null||c===void 0||c.on(K.Restarted,this.onLocalTrackRestarted),(d=(u=(l=s.track)===null||l===void 0?void 0:l.getProcessor())===null||u===void 0?void 0:u.onPublish)===null||d===void 0||d.call(u,this),this.emit(q.LocalTrackPublished,s,this.localParticipant),vn(s.track)&&(yield s.track.checkForSilence())&&this.emit(q.LocalAudioSilenceDetected,s);const h=yield(f=s.track)===null||f===void 0?void 0:f.getDeviceId(!1),m=Fa(s.source);m&&h&&h!==this.localParticipant.activeDeviceMap.get(m)&&(this.localParticipant.activeDeviceMap.set(m,h),this.emit(q.ActiveDeviceChanged,m,h))}),this.onLocalTrackUnpublished=s=>{var a,c;(a=s.track)===null||a===void 0||a.off(K.TrackProcessorUpdate,this.onTrackProcessorUpdate),(c=s.track)===null||c===void 0||c.off(K.Restarted,this.onLocalTrackRestarted),this.emit(q.LocalTrackUnpublished,s,this.localParticipant)},this.onLocalTrackRestarted=s=>I(this,void 0,void 0,function*(){const a=yield s.getDeviceId(!1),c=Fa(s.source);c&&a&&a!==this.localParticipant.activeDeviceMap.get(c)&&(this.log.debug("local track restarted, setting ".concat(c," ").concat(a," active"),this.logContext),this.localParticipant.activeDeviceMap.set(c,a),this.emit(q.ActiveDeviceChanged,c,a))}),this.onLocalConnectionQualityChanged=s=>{this.emit(q.ConnectionQualityChanged,s,this.localParticipant)},this.onMediaDevicesError=(s,a)=>{this.emit(q.MediaDevicesError,s,a)},this.onLocalParticipantPermissionsChanged=s=>{this.emit(q.ParticipantPermissionsChanged,s,this.localParticipant)},this.onLocalChatMessageSent=s=>{this.emit(q.ChatMessage,s,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},H2),t),this.log=fn((i=this.options.loggerName)!==null&&i!==void 0?i:Ut.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},Lh),t?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},Fh),t?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},q2),t?.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new bb,this.outgoingDataStreamManager=new wb(this.engine,this.log),this.disconnectLock=new pt,this.localParticipant=new tf("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Ln(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Ln(this.options.audioCaptureDefaults.deviceId)),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&this.switchActiveDevice("audiooutput",Ln(this.options.audioOutput.deviceId)).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),yt()){const s=new AbortController;(o=navigator.mediaDevices)===null||o===void 0||o.addEventListener("devicechange",this.handleDeviceChange,{signal:s.signal}),Di.cleanupRegistry&&Di.cleanupRegistry.register(this,()=>{s.abort()})}}registerTextStreamHandler(t,n){return this.incomingDataStreamManager.registerTextStreamHandler(t,n)}unregisterTextStreamHandler(t){return this.incomingDataStreamManager.unregisterTextStreamHandler(t)}registerByteStreamHandler(t,n){return this.incomingDataStreamManager.registerByteStreamHandler(t,n)}unregisterByteStreamHandler(t){return this.incomingDataStreamManager.unregisterByteStreamHandler(t)}registerRpcMethod(t,n){if(this.rpcHandlers.has(t))throw Error("RPC handler already registered for method ".concat(t,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(t,n)}unregisterRpcMethod(t){this.rpcHandlers.delete(t)}setE2EEEnabled(t){return I(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(t)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(t,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var t;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new M2(this.options.e2ee),this.e2eeManager.on(Rn.ParticipantEncryptionStatusChanged,(n,i)=>{k2(i)&&(this.isE2EEEnabled=n),this.emit(q.ParticipantEncryptionStatusChanged,n,i)}),this.e2eeManager.on(Rn.EncryptionError,n=>this.emit(q.EncryptionError,n)),(t=this.e2eeManager)===null||t===void 0||t.setup(this))}get logContext(){var t;return{room:this.name,roomID:(t=this.roomInfo)===null||t===void 0?void 0:t.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return I(this,void 0,void 0,function*(){return this.state===he.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((t,n)=>{const i=r=>{r.sid!==""&&(this.engine.off(X.RoomUpdate,i),t(r.sid))};this.engine.on(X.RoomUpdate,i),this.once(q.Disconnected,()=>{this.engine.off(X.RoomUpdate,i),n("Room disconnected before room server id was available")})})})}get name(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:""}get metadata(){var t;return(t=this.roomInfo)===null||t===void 0?void 0:t.metadata}get numParticipants(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new fb(this.options),this.engine.on(X.ParticipantUpdate,this.handleParticipantUpdates).on(X.RoomUpdate,this.handleRoomUpdate).on(X.SpeakersChanged,this.handleSpeakersChanged).on(X.StreamStateChanged,this.handleStreamStateUpdate).on(X.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(X.SubscriptionError,this.handleSubscriptionError).on(X.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(X.MediaTrackAdded,(t,n,i)=>{this.onTrackAdded(t,n,i)}).on(X.Disconnected,t=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,t)}).on(X.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(X.DataPacketReceived,this.handleDataPacket).on(X.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(he.SignalReconnecting)&&this.emit(q.SignalReconnecting)}).on(X.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(he.Connected)&&this.emit(q.Reconnected)}).on(X.SignalResumed,()=>{this.bufferedEvents=[],(this.state===he.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(X.Restarting,this.handleRestarting).on(X.SignalRestarted,this.handleSignalRestarted).on(X.Offline,()=>{this.setAndEmitConnectionState(he.Reconnecting)&&this.emit(q.Reconnecting)}).on(X.DCBufferStatusChanged,(t,n)=>{this.emit(q.DCBufferStatusChanged,t,n)}).on(X.LocalTrackSubscribed,t=>{const n=this.localParticipant.getTrackPublications().find(i=>{let{trackSid:r}=i;return r===t});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(W.LocalTrackSubscribed,n),this.emitWhenConnected(q.LocalTrackSubscribed,n,this.localParticipant)}).on(X.RoomMoved,t=>{this.log.debug("room moved",t),t.room&&this.handleRoomUpdate(t.room),this.remoteParticipants.forEach((n,i)=>{this.handleParticipantDisconnected(i,n)}),this.emit(q.Moved,t.room.name),t.participant?this.handleParticipantUpdates([t.participant,...t.otherParticipants]):this.handleParticipantUpdates(t.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return rt.getInstance().getDevices(t,n)}prepareConnection(t,n){return I(this,void 0,void 0,function*(){if(this.state===he.Disconnected){this.log.debug("prepareConnection to ".concat(t),this.logContext);try{if(Pa(new URL(t))&&n){this.regionUrlProvider=new tc(t,n);const i=yield this.regionUrlProvider.getNextBestRegionUrl();i&&this.state===he.Disconnected&&(this.regionUrl=i,yield fetch(Na(i),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(i),this.logContext))}else yield fetch(Na(t),{method:"HEAD"})}catch(i){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:i}))}}})}getParticipantByIdentity(t){return this.localParticipant.identity===t?this.localParticipant:this.remoteParticipants.get(t)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(t,n){return I(this,void 0,void 0,function*(){let i=()=>I(this,void 0,void 0,function*(){}),r;switch(t){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":r=new Kt({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":r=new Kt({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":r=new Kt({scenario:{case:"serverLeave",value:!0}});break;case"migration":r=new Kt({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>I(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new Kt({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>I(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new Kt({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":r=new Kt({scenario:{case:"switchCandidateProtocol",value:t==="force-tls"?2:1}}),i=()=>I(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new ao({reason:Ft.CLIENT_INITIATED,action:Pi.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");r=new Kt({scenario:{case:"subscriberBandwidth",value:ci(n)}});break;case"leave-full-reconnect":r=new Kt({scenario:{case:"leaveRequestFullReconnect",value:!0}})}r&&(yield this.engine.client.sendSimulateScenario(r),yield i())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(t){return this.localParticipant.activeDeviceMap.get(t)}switchActiveDevice(t,n){return I(this,arguments,void 0,function(i,r){var o=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(function*(){var a,c,l,u,d,f,h;let m=!0,p=!1;const y=s?{exact:r}:r;if(i==="audioinput"){p=o.localParticipant.audioTrackPublications.size===0;const g=(a=o.getActiveDevice(i))!==null&&a!==void 0?a:o.options.audioCaptureDefaults.deviceId;o.options.audioCaptureDefaults.deviceId=y;const S=Array.from(o.localParticipant.audioTrackPublications.values()).filter(w=>w.source===B.Source.Microphone);try{m=(yield Promise.all(S.map(w=>{var k;return(k=w.audioTrack)===null||k===void 0?void 0:k.setDeviceId(y)}))).every(w=>w===!0)}catch(w){throw o.options.audioCaptureDefaults.deviceId=g,w}const C=S.some(w=>{var k,b;return(b=(k=w.track)===null||k===void 0?void 0:k.isMuted)!==null&&b!==void 0?b:!1});m&&C&&(p=!0)}else if(i==="videoinput"){p=o.localParticipant.videoTrackPublications.size===0;const g=(c=o.getActiveDevice(i))!==null&&c!==void 0?c:o.options.videoCaptureDefaults.deviceId;o.options.videoCaptureDefaults.deviceId=y;const S=Array.from(o.localParticipant.videoTrackPublications.values()).filter(w=>w.source===B.Source.Camera);try{m=(yield Promise.all(S.map(w=>{var k;return(k=w.videoTrack)===null||k===void 0?void 0:k.setDeviceId(y)}))).every(w=>w===!0)}catch(w){throw o.options.videoCaptureDefaults.deviceId=g,w}const C=S.some(w=>{var k,b;return(b=(k=w.track)===null||k===void 0?void 0:k.isMuted)!==null&&b!==void 0?b:!1});m&&C&&(p=!0)}else if(i==="audiooutput"){if(p=!0,!Ea()&&!o.options.webAudioMix||o.options.webAudioMix&&o.audioContext&&!("setSinkId"in o.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");o.options.webAudioMix&&(r=(l=yield rt.getInstance().normalizeDeviceId("audiooutput",r))!==null&&l!==void 0?l:""),(u=(h=o.options).audioOutput)!==null&&u!==void 0||(h.audioOutput={});const g=(d=o.getActiveDevice(i))!==null&&d!==void 0?d:o.options.audioOutput.deviceId;o.options.audioOutput.deviceId=r;try{o.options.webAudioMix&&((f=o.audioContext)===null||f===void 0||f.setSinkId(r)),yield Promise.all(Array.from(o.remoteParticipants.values()).map(S=>S.setAudioOutput({deviceId:r})))}catch(S){throw o.options.audioOutput.deviceId=g,S}}return p&&(o.localParticipant.activeDeviceMap.set(i,r),o.emit(q.ActiveDeviceChanged,i,r)),m})()})}setupLocalParticipantEvents(){this.localParticipant.on(W.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(W.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(W.AttributesChanged,this.onLocalAttributesChanged).on(W.TrackMuted,this.onLocalTrackMuted).on(W.TrackUnmuted,this.onLocalTrackUnmuted).on(W.LocalTrackPublished,this.onLocalTrackPublished).on(W.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(W.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(W.MediaDevicesError,this.onMediaDevicesError).on(W.AudioStreamAcquired,this.startAudio).on(W.ChatMessage,this.onLocalChatMessageSent).on(W.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var t;(t=this.engine)===null||t===void 0||t.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(t,n,i){if(this.state===he.Connecting||this.state===he.Reconnecting){const d=()=>{this.onTrackAdded(t,n,i),f()},f=()=>{this.off(q.Reconnected,d),this.off(q.Connected,d),this.off(q.Disconnected,f)};this.once(q.Reconnected,d),this.once(q.Connected,d),this.once(q.Disconnected,f);return}if(this.state===he.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(t.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const r=o2(n.id),o=r[0];let s=r[1],a=t.id;if(s&&s.startsWith("TR")&&(a=s),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const c=Array.from(this.remoteParticipants.values()).find(d=>d.sid===o);if(!c){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}let l;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?l=this.options.adaptiveStream:l={});const u=c.addSubscribedMediaTrack(t,a,n,i,l);u?.isEncrypted&&!this.e2eeManager&&this.emit(q.EncryptionError,new Error("Encrypted ".concat(u.source," track received from participant ").concat(c.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var i;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearHandlersAndControllers(),this.state!==he.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(r=>{r.trackPublications.forEach(o=>{r.unpublishTrack(o.trackSid)})}),this.localParticipant.trackPublications.forEach(r=>{var o,s,a;r.track&&this.localParticipant.unpublishTrack(r.track,t),t?((o=r.track)===null||o===void 0||o.detach(),(s=r.track)===null||s===void 0||s.stop()):(a=r.track)===null||a===void 0||a.stopMonitor()}),this.localParticipant.off(W.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(W.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(W.AttributesChanged,this.onLocalAttributesChanged).off(W.TrackMuted,this.onLocalTrackMuted).off(W.TrackUnmuted,this.onLocalTrackUnmuted).off(W.LocalTrackPublished,this.onLocalTrackPublished).off(W.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(W.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(W.MediaDevicesError,this.onMediaDevicesError).off(W.AudioStreamAcquired,this.startAudio).off(W.ChatMessage,this.onLocalChatMessageSent).off(W.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),yt()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(i=navigator.mediaDevices)===null||i===void 0||i.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(he.Disconnected),this.emit(q.Disconnected,n)}}}handleParticipantDisconnected(t,n){var i;this.remoteParticipants.delete(t),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(t),n.trackPublications.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(q.ParticipantDisconnected,n),n.setDisconnected(),(i=this.localParticipant)===null||i===void 0||i.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(t,n,i,r,o,s){return I(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(t,n),s!==1){yield this.engine.publishRpcResponse(t,n,null,He.builtIn("UNSUPPORTED_VERSION"));return}const a=this.rpcHandlers.get(i);if(!a){yield this.engine.publishRpcResponse(t,n,null,He.builtIn("UNSUPPORTED_METHOD"));return}let c=null,l=null;try{const u=yield a({requestId:n,callerIdentity:t,payload:r,responseTimeout:o});Ga(u)>zh?(c=He.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(i))):l=u}catch(u){u instanceof He?c=u:(console.warn("Uncaught error returned by RPC handler for ".concat(i,". Returning APPLICATION_ERROR instead."),u),c=He.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(t,n,l,c)})}selectDefaultDevices(){return I(this,void 0,void 0,function*(){var t,n,i;const r=rt.getInstance().previousDevices,o=yield rt.getInstance().getDevices(void 0,!1),s=xt();if(s?.name==="Chrome"&&s.os!=="iOS")for(let c of o){const l=r.find(u=>u.deviceId===c.deviceId);l&&l.label!==""&&l.kind===c.kind&&l.label!==c.label&&this.getActiveDevice(c.kind)==="default"&&this.emit(q.ActiveDeviceChanged,c.kind,c.deviceId)}const a=["audiooutput","audioinput","videoinput"];for(let c of a){const l=w2(c),u=this.localParticipant.getTrackPublication(l);if(u&&(!((t=u.track)===null||t===void 0)&&t.isUserProvided))continue;const d=o.filter(h=>h.kind===c),f=this.getActiveDevice(c);if(f===((n=r.filter(h=>h.kind===c)[0])===null||n===void 0?void 0:n.deviceId)&&d.length>0&&((i=d[0])===null||i===void 0?void 0:i.deviceId)!==f){yield this.switchActiveDevice(c,d[0].deviceId);continue}c==="audioinput"&&!vr()||c==="videoinput"||d.length>0&&!d.find(h=>h.deviceId===this.getActiveDevice(c))&&(c!=="audiooutput"||!vr())&&(yield this.switchActiveDevice(c,d[0].deviceId))}})}acquireAudioContext(){return I(this,void 0,void 0,function*(){var t,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(t=Sh())!==null&&t!==void 0?t:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(r=>r.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),vt(200)])}catch(r){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:r}))}const i=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";i!==this.canPlaybackAudio&&(this.audioEnabled=i,this.emit(q.AudioPlaybackStatusChanged,i))})}createParticipant(t,n){var i;let r;return n?r=xo.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):r=new xo(this.engine.client,"",t,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&r.setAudioContext(this.audioContext),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&r.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),r}getOrCreateParticipant(t,n){if(this.remoteParticipants.has(t)){const r=this.remoteParticipants.get(t);return n&&r.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),r}const i=this.createParticipant(t,n);return this.remoteParticipants.set(t,i),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(q.ParticipantConnected,i),i.on(W.TrackPublished,r=>{this.emitWhenConnected(q.TrackPublished,r,i)}).on(W.TrackSubscribed,(r,o)=>{r.kind===B.Kind.Audio?(r.on(K.AudioPlaybackStarted,this.handleAudioPlaybackStarted),r.on(K.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):r.kind===B.Kind.Video&&(r.on(K.VideoPlaybackFailed,this.handleVideoPlaybackFailed),r.on(K.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(q.TrackSubscribed,r,o,i)}).on(W.TrackUnpublished,r=>{this.emit(q.TrackUnpublished,r,i)}).on(W.TrackUnsubscribed,(r,o)=>{this.emit(q.TrackUnsubscribed,r,o,i)}).on(W.TrackMuted,r=>{this.emitWhenConnected(q.TrackMuted,r,i)}).on(W.TrackUnmuted,r=>{this.emitWhenConnected(q.TrackUnmuted,r,i)}).on(W.ParticipantMetadataChanged,r=>{this.emitWhenConnected(q.ParticipantMetadataChanged,r,i)}).on(W.ParticipantNameChanged,r=>{this.emitWhenConnected(q.ParticipantNameChanged,r,i)}).on(W.AttributesChanged,r=>{this.emitWhenConnected(q.ParticipantAttributesChanged,r,i)}).on(W.ConnectionQualityChanged,r=>{this.emitWhenConnected(q.ConnectionQualityChanged,r,i)}).on(W.ParticipantPermissionsChanged,r=>{this.emitWhenConnected(q.ParticipantPermissionsChanged,r,i)}).on(W.TrackSubscriptionStatusChanged,(r,o)=>{this.emitWhenConnected(q.TrackSubscriptionStatusChanged,r,o,i)}).on(W.TrackSubscriptionFailed,(r,o)=>{this.emit(q.TrackSubscriptionFailed,r,i,o)}).on(W.TrackSubscriptionPermissionChanged,(r,o)=>{this.emitWhenConnected(q.TrackSubscriptionPermissionChanged,r,o,i)}).on(W.Active,()=>{this.emitWhenConnected(q.ParticipantActive,i),i.kind===ni.AGENT&&this.localParticipant.setActiveAgent(i)}),n&&i.updateInfo(n),i}sendSyncState(){const t=Array.from(this.remoteParticipants.values()).reduce((i,r)=>(i.push(...r.getTrackPublications()),i),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(t,n)}updateSubscriptions(){for(const t of this.remoteParticipants.values())for(const n of t.videoTrackPublications.values())n.isSubscribed&&b2(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(t){const n=this.sidToIdentity.get(t);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let t=0;this.connectionReconcileInterval=at.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(t++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:t,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),t>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Ft.STATE_MISMATCH))):t=0},Mb)}clearConnectionReconcile(){this.connectionReconcileInterval&&at.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(t){return t===this.state?!1:(this.state=t,this.emit(q.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(t=>{let[n,i]=t;this.emit(n,...i)}),this.bufferedEvents=[]}emitWhenConnected(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(this.state===he.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([t,i]);else if(this.state===he.Connected)return this.emit(t,...i);return!1}simulateParticipants(t){return I(this,void 0,void 0,function*(){var n,i;const r=Object.assign({audio:!0,video:!0,useRealTracks:!1},t.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},t.participants);if(this.handleDisconnect(),this.roomInfo=new ro({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Fe.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new ti({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(q.SignalConnected),this.emit(q.Connected),this.setAndEmitConnectionState(he.Connected),r.video){const s=new rc(B.Kind.Video,new Ei({source:Ge.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Lt.AUDIO,name:"video-dummy"}),new So(r.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:bh(160*((n=o.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(W.LocalTrackPublished,s)}if(r.audio){const s=new rc(B.Kind.Audio,new Ei({source:Ge.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Lt.AUDIO}),new wo(r.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Oa(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(W.LocalTrackPublished,s)}for(let s=0;s<o.count-1;s+=1){let a=new ti({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(s),state:_i.ACTIVE,tracks:[],joinedAt:Fe.parse(Date.now())});const c=this.getOrCreateParticipant(a.identity,a);if(o.video){const l=bh(160*((i=o.aspectRatios[s%o.aspectRatios.length])!==null&&i!==void 0?i:1),160,!1,!0),u=new Ei({source:Ge.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Lt.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l]),new RTCRtpReceiver),a.tracks=[...a.tracks,u]}if(o.audio){const l=Oa(),u=new Ei({source:Ge.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Lt.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l]),new RTCRtpReceiver),a.tracks=[...a.tracks,u]}c.updateInfo(a)}})}emit(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(t!==q.ActiveSpeakersChanged&&t!==q.TranscriptionReceived){const o=rf(i).filter(s=>s!==void 0);this.log.debug("room event ".concat(t),Object.assign(Object.assign({},this.logContext),{event:t,args:o}))}return super.emit(t,...i)}}Di.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(e=>{e()});function rf(e){return e.map(t=>{if(t)return Array.isArray(t)?rf(t):typeof t=="object"?"logContext"in t?t.logContext:void 0:t})}var qt;(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"})(qt||(qt={}));class jn extends Yt.EventEmitter{constructor(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=qt.IDLE,this.logs=[],this.options={},this.url=t,this.token=n,this.name=this.constructor.name,this.room=new Di(i.roomOptions),this.connectOptions=i.connectOptions,this.options=i}run(t){return I(this,void 0,void 0,function*(){if(this.status!==qt.IDLE)throw Error("check is running already");this.setStatus(qt.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==qt.SKIPPED&&this.setStatus(this.isSuccess()?qt.SUCCESS:qt.FAILED),t&&t(),this.getInfo()})}isSuccess(){return!this.logs.some(t=>t.level==="error")}connect(t){return I(this,void 0,void 0,function*(){return this.room.state===he.Connected?this.room:(t||(t=this.url),yield this.room.connect(t,this.token,this.connectOptions),this.room)})}disconnect(){return I(this,void 0,void 0,function*(){this.room&&this.room.state!==he.Disconnected&&(yield this.room.disconnect(),yield new Promise(t=>setTimeout(t,500)))})}skip(){this.setStatus(qt.SKIPPED)}switchProtocol(t){return I(this,void 0,void 0,function*(){let n=!1,i=!1;if(this.room.on(q.Reconnecting,()=>{n=!0}),this.room.once(q.Reconnected,()=>{i=!0}),this.room.simulateScenario("force-".concat(t)),yield new Promise(o=>setTimeout(o,1e3)),!n)return;const r=Date.now()+1e4;for(;Date.now()<r;){if(i)return;yield vt(100)}throw new Error("Could not reconnect using ".concat(t," protocol after 10 seconds"))})}appendMessage(t){this.logs.push({level:"info",message:t}),this.emit("update",this.getInfo())}appendWarning(t){this.logs.push({level:"warning",message:t}),this.emit("update",this.getInfo())}appendError(t){this.logs.push({level:"error",message:t}),this.emit("update",this.getInfo())}setStatus(t){this.status=t,this.emit("update",this.getInfo())}get engine(){var t;return(t=this.room)===null||t===void 0?void 0:t.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class Ib extends jn{get description(){return"Cloud regions"}perform(){return I(this,void 0,void 0,function*(){const t=new tc(this.url,this.token);if(!t.isCloud()){this.skip();return}const n=[],i=new Set;for(let o=0;o<3;o++){const s=yield t.getNextBestRegionUrl();if(!s)break;if(i.has(s))continue;i.add(s);const a=yield this.checkCloudRegion(s);this.appendMessage("".concat(a.region," RTT: ").concat(a.rtt,"ms, duration: ").concat(a.duration,"ms")),n.push(a)}n.sort((o,s)=>(o.duration-s.duration)*.5+(o.rtt-s.rtt)*.5);const r=n[0];this.bestStats=r,this.appendMessage("best Cloud region: ".concat(r.region))})}getInfo(){const t=super.getInfo();return t.data=this.bestStats,t}checkCloudRegion(t){return I(this,void 0,void 0,function*(){var n,i;yield this.connect(t),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const r=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!r)throw new Error("Region not found");const o=yield this.room.localParticipant.streamText({topic:"test"}),s=1e3,c=1e6/s,l="A".repeat(s),u=Date.now();for(let m=0;m<c;m++)yield o.write(l);yield o.close();const d=Date.now(),f=yield(i=this.room.engine.pcManager)===null||i===void 0?void 0:i.publisher.getStats(),h={region:r,rtt:1e4,duration:d-u};return f?.forEach(m=>{m.type==="candidate-pair"&&m.nominated&&(h.rtt=m.currentRoundTripTime*1e3)}),yield this.disconnect(),h})}}const oc=1e4;class Ob extends jn{get description(){return"Connection via UDP vs TCP"}perform(){return I(this,void 0,void 0,function*(){const t=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=t,t.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(t.packetsLost-n.packetsLost)/t.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const i=this.bestStats;this.appendMessage("upstream bitrate: ".concat((i.bitrateTotal/i.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((i.rttTotal/i.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((i.jitterTotal/i.count*1e3).toFixed(2)," ms")),i.packetsLost>0&&this.appendWarning("packets lost: ".concat((i.packetsLost/i.packetsSent*100).toFixed(2),"%")),i.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((i.qualityLimitationDurations.bandwidth/(oc/1e3)*100).toFixed(2),"%")),i.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((i.qualityLimitationDurations.cpu/(oc/1e3)*100).toFixed(2),"%"))})}getInfo(){const t=super.getInfo();return t.data=this.bestStats,t}checkConnectionProtocol(t){return I(this,void 0,void 0,function*(){yield this.connect(),t==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");let r=0;const o=()=>{r=(r+1)%360,i.fillStyle="hsl(".concat(r,", 100%, 50%)"),i.fillRect(0,0,n.width,n.height),requestAnimationFrame(o)};o();const a=n.captureStream(30).getVideoTracks()[0],l=(yield this.room.localParticipant.publishTrack(a,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,u={protocol:t,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},d=setInterval(()=>I(this,void 0,void 0,function*(){const f=yield l.getRTCStatsReport();f?.forEach(h=>{h.type==="outbound-rtp"?(u.packetsSent=h.packetsSent,u.qualityLimitationDurations=h.qualityLimitationDurations,u.bitrateTotal+=h.targetBitrate,u.count++):h.type==="remote-inbound-rtp"&&(u.packetsLost=h.packetsLost,u.rttTotal+=h.roundTripTime,u.jitterTotal+=h.jitter)})}),1e3);return yield new Promise(f=>setTimeout(f,oc)),clearInterval(d),a.stop(),n.remove(),yield this.disconnect(),u})}}class Nb extends jn{get description(){return"Can publish audio"}perform(){return I(this,void 0,void 0,function*(){var t;const n=yield this.connect(),i=yield _b();if(yield wh(i,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(i),yield new Promise(a=>setTimeout(a,3e3));const o=yield(t=i.sender)===null||t===void 0?void 0:t.getStats();if(!o)throw new Error("Could not get RTCStats");let s=0;if(o.forEach(a=>{a.type==="outbound-rtp"&&(a.kind==="audio"||!a.kind&&a.mediaType==="audio")&&(s=a.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," audio packets"))})}}class Ab extends jn{get description(){return"Can publish video"}perform(){return I(this,void 0,void 0,function*(){var t;const n=yield this.connect(),i=yield xb();yield this.checkForVideo(i.mediaStreamTrack),n.localParticipant.publishTrack(i),yield new Promise(s=>setTimeout(s,5e3));const r=yield(t=i.sender)===null||t===void 0?void 0:t.getStats();if(!r)throw new Error("Could not get RTCStats");let o=0;if(r.forEach(s=>{s.type==="outbound-rtp"&&(s.kind==="video"||!s.kind&&s.mediaType==="video")&&(o+=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}checkForVideo(t){return I(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(t.clone());const i=document.createElement("video");i.srcObject=n,i.muted=!0,yield new Promise(r=>{i.onplay=()=>{setTimeout(()=>{var o,s,a,c;const l=document.createElement("canvas"),u=t.getSettings(),d=(s=(o=u.width)!==null&&o!==void 0?o:i.videoWidth)!==null&&s!==void 0?s:1280,f=(c=(a=u.height)!==null&&a!==void 0?a:i.videoHeight)!==null&&c!==void 0?c:720;l.width=d,l.height=f;const h=l.getContext("2d");h.drawImage(i,0,0);const p=h.getImageData(0,0,l.width,l.height).data;let y=!0;for(let g=0;g<p.length;g+=4)if(p[g]!==0||p[g+1]!==0||p[g+2]!==0){y=!1;break}y?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),r()},1e3)},i.play()}),n.getTracks().forEach(r=>r.stop()),i.remove()})}}class Rb extends jn{get description(){return"Resuming connection after interruption"}perform(){return I(this,void 0,void 0,function*(){var t;const n=yield this.connect();let i=!1,r=!1,o;const s=new Promise(l=>{setTimeout(l,5e3),o=l}),a=()=>{i=!0};n.on(q.SignalReconnecting,a).on(q.Reconnecting,a).on(q.Reconnected,()=>{r=!0,o(!0)}),(t=n.engine.client.ws)===null||t===void 0||t.close();const c=n.engine.client.onClose;if(c&&c(""),yield s,i){if(!r||n.state!==he.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class Db extends jn{get description(){return"Can connect via TURN"}perform(){return I(this,void 0,void 0,function*(){var t,n;const i=new Ua,r=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let o=!1,s=!1,a=!1;for(let c of r.iceServers)for(let l of c.urls)l.startsWith("turn:")?(s=!0,a=!0):l.startsWith("turns:")&&(s=!0,a=!0,o=!0),l.startsWith("stun:")&&(a=!0);a?s&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield i.close(),!((n=(t=this.connectOptions)===null||t===void 0?void 0:t.rtcConfig)===null||n===void 0)&&n.iceServers||s?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(c=>setTimeout(c,0)))})}}class Lb extends jn{get description(){return"Establishing WebRTC connection"}perform(){return I(this,void 0,void 0,function*(){let t=!1,n=!1;this.room.on(q.SignalConnected,()=>{const i=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(r,o)=>{if(r.candidate){const s=new RTCIceCandidate(r);let a="".concat(s.protocol," ").concat(s.address,":").concat(s.port," ").concat(s.type);s.address&&(Fb(s.address)?a+=" (private)":s.protocol==="tcp"&&s.tcpType==="passive"?(t=!0,a+=" (passive)"):s.protocol==="udp"&&(n=!0)),this.appendMessage(a)}i&&i(r,o)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=r=>{r instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(r.errorCode," ").concat(r.errorText," ").concat(r.url))})});try{yield this.connect(),be.info("now the room is connected")}catch(i){throw this.appendWarning("ports need to be open on firewall in order to connect."),i}t||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function Fb(e){const t=e.split(".");if(t.length===4){if(t[0]==="10")return!0;if(t[0]==="192"&&t[1]==="168")return!0;if(t[0]==="172"){const n=parseInt(t[1],10);if(n>=16&&n<=31)return!0}}return!1}class zb extends jn{get description(){return"Connecting to signal connection via WebSocket"}perform(){return I(this,void 0,void 0,function*(){var t,n,i;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let r=new Ua;const o=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((t=o.serverInfo)===null||t===void 0?void 0:t.edition)===Xu.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((i=o.serverInfo)===null||i===void 0?void 0:i.region)),yield r.close()})}}class NN extends Yt.EventEmitter{constructor(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=t,this.token=n,this.options=i}getNextCheckId(){const t=this.checkResults.size;return this.checkResults.set(t,{logs:[],status:qt.IDLE,name:"",description:""}),t}updateCheck(t,n){this.checkResults.set(t,n),this.emit("checkUpdate",t,n)}isSuccess(){return Array.from(this.checkResults.values()).every(t=>t.status!==qt.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(t){return I(this,void 0,void 0,function*(){const n=this.getNextCheckId(),i=new t(this.url,this.token,this.options),r=s=>{this.updateCheck(n,s)};i.on("update",r);const o=yield i.run();return i.off("update",r),o})}checkWebsocket(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(zb)})}checkWebRTC(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(Lb)})}checkTURN(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(Db)})}checkReconnect(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(Rb)})}checkPublishAudio(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(Nb)})}checkPublishVideo(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(Ab)})}checkConnectionProtocol(){return I(this,void 0,void 0,function*(){const t=yield this.createAndRunCheck(Ob);if(t.data&&"protocol"in t.data){const n=t.data;this.options.protocol=n.protocol}return t})}checkCloudRegion(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(Ib)})}}var _o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ub(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sc={exports:{}},$b=sc.exports,of;function jb(){return of||(of=1,(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})($b,function(){var t=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},s=null;function a(p,y){var g=p[y];if(typeof g.bind=="function")return g.bind(p);try{return Function.prototype.bind.call(g,p)}catch{return function(){return Function.prototype.apply.apply(g,[p,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(p){return p==="debug"&&(p="log"),typeof console===n?!1:p==="trace"&&i?c:console[p]!==void 0?a(console,p):console.log!==void 0?a(console,"log"):t}function u(){for(var p=this.getLevel(),y=0;y<r.length;y++){var g=r[y];this[g]=y<p?t:this.methodFactory(g,p,this.name)}if(this.log=this.debug,typeof console===n&&p<this.levels.SILENT)return"No console available for logging"}function d(p){return function(){typeof console!==n&&(u.call(this),this[p].apply(this,arguments))}}function f(p,y,g){return l(p)||d.apply(this,arguments)}function h(p,y){var g=this,S,C,w,k="loglevel";typeof p=="string"?k+=":"+p:typeof p=="symbol"&&(k=void 0);function b(M){var R=(r[M]||"silent").toUpperCase();if(!(typeof window===n||!k)){try{window.localStorage[k]=R;return}catch{}try{window.document.cookie=encodeURIComponent(k)+"="+R+";"}catch{}}}function x(){var M;if(!(typeof window===n||!k)){try{M=window.localStorage[k]}catch{}if(typeof M===n)try{var R=window.document.cookie,z=encodeURIComponent(k),D=R.indexOf(z+"=");D!==-1&&(M=/^([^;]+)/.exec(R.slice(D+z.length+1))[1])}catch{}return g.levels[M]===void 0&&(M=void 0),M}}function T(){if(!(typeof window===n||!k)){try{window.localStorage.removeItem(k)}catch{}try{window.document.cookie=encodeURIComponent(k)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function P(M){var R=M;if(typeof R=="string"&&g.levels[R.toUpperCase()]!==void 0&&(R=g.levels[R.toUpperCase()]),typeof R=="number"&&R>=0&&R<=g.levels.SILENT)return R;throw new TypeError("log.setLevel() called with invalid level: "+M)}g.name=p,g.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},g.methodFactory=y||f,g.getLevel=function(){return w??C??S},g.setLevel=function(M,R){return w=P(M),R!==!1&&b(w),u.call(g)},g.setDefaultLevel=function(M){C=P(M),x()||g.setLevel(M,!1)},g.resetLevel=function(){w=null,T(),u.call(g)},g.enableAll=function(M){g.setLevel(g.levels.TRACE,M)},g.disableAll=function(M){g.setLevel(g.levels.SILENT,M)},g.rebuild=function(){if(s!==g&&(S=P(s.getLevel())),u.call(g),s===g)for(var M in o)o[M].rebuild()},S=P(s?s.getLevel():"WARN");var A=x();A!=null&&(w=P(A)),u.call(g)}s=new h,s.getLogger=function(p){if(typeof p!="symbol"&&typeof p!="string"||p==="")throw new TypeError("You must supply a name when creating a logger.");var y=o[p];return y||(y=o[p]=new h(p,s.methodFactory)),y};var m=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=m),s},s.getLoggers=function(){return o},s.default=s,s})})(sc)),sc.exports}var Bb=jb();const Vb=Ub(Bb);var ac=function(e,t){return ac=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},ac(e,t)};function bn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ac(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function qb(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(d){s(d)}}function c(u){try{l(i.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(e,[])).next())})}function sf(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(n=0)),n;)try{if(i=1,r&&(o=l[0]&2?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,r=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],r=0}finally{i=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Li(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Eo(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),r,o=[],s;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return o}function Po(e,t,n){if(arguments.length===2)for(var i=0,r=t.length,o;i<r;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}function Fi(e){return this instanceof Fi?(this.v=e,this):new Fi(e)}function Hb(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(h){return function(m){return Promise.resolve(m).then(h,d)}}function a(h,m){i[h]&&(r[h]=function(p){return new Promise(function(y,g){o.push([h,p,y,g])>1||c(h,p)})},m&&(r[h]=m(r[h])))}function c(h,m){try{l(i[h](m))}catch(p){f(o[0][3],p)}}function l(h){h.value instanceof Fi?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,m){h(m),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Wb(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Li=="function"?Li(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}function Je(e){return typeof e=="function"}function cc(e){var t=function(i){Error.call(i),i.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var lc=cc(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Mo(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var wr=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,i,r,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Li(s),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(p){t={error:p}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else s.remove(this);var u=this.initialTeardown;if(Je(u))try{u()}catch(p){o=p instanceof lc?p.errors:[p]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var f=Li(d),h=f.next();!h.done;h=f.next()){var m=h.value;try{lf(m)}catch(p){o=o??[],p instanceof lc?o=Po(Po([],Eo(o)),Eo(p.errors)):o.push(p)}}}catch(p){i={error:p}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(i)throw i.error}}}if(o)throw new lc(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)lf(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Mo(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Mo(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})(),af=wr.EMPTY;function cf(e){return e instanceof wr||e&&"closed"in e&&Je(e.remove)&&Je(e.add)&&Je(e.unsubscribe)}function lf(e){Je(e)?e():e.unsubscribe()}var Zb={Promise:void 0},Gb={setTimeout:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,Po([e,t],Eo(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function uf(e){Gb.setTimeout(function(){throw e})}function uc(){}function Io(e){e()}var dc=(function(e){bn(t,e);function t(n){var i=e.call(this)||this;return i.isStopped=!1,n?(i.destination=n,cf(n)&&n.add(i)):i.destination=Qb,i}return t.create=function(n,i,r){return new hc(n,i,r)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(wr),Kb=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(i){Oo(i)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(i){Oo(i)}else Oo(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Oo(n)}},e})(),hc=(function(e){bn(t,e);function t(n,i,r){var o=e.call(this)||this,s;return Je(n)||!n?s={next:n??void 0,error:i??void 0,complete:r??void 0}:s=n,o.destination=new Kb(s),o}return t})(dc);function Oo(e){uf(e)}function Yb(e){throw e}var Qb={closed:!0,next:uc,error:Yb,complete:uc},fc=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function df(e){return e}function Jb(e){return e.length===0?df:e.length===1?e[0]:function(t){return e.reduce(function(n,i){return i(n)},t)}}var Xe=(function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,i){var r=this,o=ek(t)?t:new hc(t,n,i);return Io(function(){var s=r,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?r._subscribe(o):r._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var i=this;return n=hf(n),new n(function(r,o){var s=new hc({next:function(a){try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});i.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[fc]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Jb(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=hf(t),new t(function(i,r){var o;n.subscribe(function(s){return o=s},function(s){return r(s)},function(){return i(o)})})},e.create=function(t){return new e(t)},e})();function hf(e){var t;return(t=e??Zb.Promise)!==null&&t!==void 0?t:Promise}function Xb(e){return e&&Je(e.next)&&Je(e.error)&&Je(e.complete)}function ek(e){return e&&e instanceof dc||Xb(e)&&cf(e)}function tk(e){return Je(e?.lift)}function Bn(e){return function(t){if(tk(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function li(e,t,n,i,r){return new nk(e,t,n,i,r)}var nk=(function(e){bn(t,e);function t(n,i,r,o,s,a){var c=e.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=i?function(l){try{i(l)}catch(u){n.error(u)}}:e.prototype._next,c._error=o?function(l){try{o(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=r?function(){try{r()}catch(l){n.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;e.prototype.unsubscribe.call(this),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t})(dc),ik=cc(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),No=(function(e){bn(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var i=new ff(this,this);return i.operator=n,i},t.prototype._throwIfClosed=function(){if(this.closed)throw new ik},t.prototype.next=function(n){var i=this;Io(function(){var r,o;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var s=Li(i.currentObservers),a=s.next();!a.done;a=s.next()){var c=a.value;c.next(n)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}}})},t.prototype.error=function(n){var i=this;Io(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=n;for(var r=i.observers;r.length;)r.shift().error(n)}})},t.prototype.complete=function(){var n=this;Io(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var i=n.observers;i.length;)i.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var i=this,r=this,o=r.hasError,s=r.isStopped,a=r.observers;return o||s?af:(this.currentObservers=null,a.push(n),new wr(function(){i.currentObservers=null,Mo(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var i=this,r=i.hasError,o=i.thrownError,s=i.isStopped;r?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new Xe;return n.source=this,n},t.create=function(n,i){return new ff(n,i)},t})(Xe),ff=(function(e){bn(t,e);function t(n,i){var r=e.call(this)||this;return r.destination=n,r.source=i,r}return t.prototype.next=function(n){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.next)===null||r===void 0||r.call(i,n)},t.prototype.error=function(n){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.error)===null||r===void 0||r.call(i,n)},t.prototype.complete=function(){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||i===void 0||i.call(n)},t.prototype._subscribe=function(n){var i,r;return(r=(i=this.source)===null||i===void 0?void 0:i.subscribe(n))!==null&&r!==void 0?r:af},t})(No),rk=(function(e){bn(t,e);function t(n){var i=e.call(this)||this;return i._value=n,i}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var i=e.prototype._subscribe.call(this,n);return!i.closed&&n.next(this._value),i},t.prototype.getValue=function(){var n=this,i=n.hasError,r=n.thrownError,o=n._value;if(i)throw r;return this._throwIfClosed(),o},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t})(No),ok={now:function(){return Date.now()}},sk=(function(e){bn(t,e);function t(n,i){return e.call(this)||this}return t.prototype.schedule=function(n,i){return this},t})(wr),pf={setInterval:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,Po([e,t],Eo(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},ak=(function(e){bn(t,e);function t(n,i){var r=e.call(this,n,i)||this;return r.scheduler=n,r.work=i,r.pending=!1,r}return t.prototype.schedule=function(n,i){var r;if(i===void 0&&(i=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,i)),this.pending=!0,this.delay=i,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,i),this},t.prototype.requestAsyncId=function(n,i,r){return r===void 0&&(r=0),pf.setInterval(n.flush.bind(n,this),r)},t.prototype.recycleAsyncId=function(n,i,r){if(r===void 0&&(r=0),r!=null&&this.delay===r&&this.pending===!1)return i;i!=null&&pf.clearInterval(i)},t.prototype.execute=function(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(n,i);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,i){var r=!1,o;try{this.work(n)}catch(s){r=!0,o=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,i=n.id,r=n.scheduler,o=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Mo(o,this),i!=null&&(this.id=this.recycleAsyncId(r,i,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t})(sk),mf=(function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,i){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(i,n)},e.now=ok.now,e})(),ck=(function(e){bn(t,e);function t(n,i){i===void 0&&(i=mf.now);var r=e.call(this,n,i)||this;return r.actions=[],r._active=!1,r}return t.prototype.flush=function(n){var i=this.actions;if(this._active){i.push(n);return}var r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=i.shift());if(this._active=!1,r){for(;n=i.shift();)n.unsubscribe();throw r}},t})(mf);new ck(ak);function lk(e){return e&&Je(e.schedule)}function uk(e){return e[e.length-1]}function gf(e){return lk(uk(e))?e.pop():void 0}var vf=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function yf(e){return Je(e?.then)}function bf(e){return Je(e[fc])}function kf(e){return Symbol.asyncIterator&&Je(e?.[Symbol.asyncIterator])}function Cf(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function dk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wf=dk();function Sf(e){return Je(e?.[wf])}function Tf(e){return Hb(this,arguments,function(){var t,n,i,r;return sf(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Fi(t.read())];case 3:return n=o.sent(),i=n.value,r=n.done,r?[4,Fi(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Fi(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function xf(e){return Je(e?.getReader)}function zi(e){if(e instanceof Xe)return e;if(e!=null){if(bf(e))return hk(e);if(vf(e))return fk(e);if(yf(e))return pk(e);if(kf(e))return _f(e);if(Sf(e))return mk(e);if(xf(e))return gk(e)}throw Cf(e)}function hk(e){return new Xe(function(t){var n=e[fc]();if(Je(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fk(e){return new Xe(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function pk(e){return new Xe(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,uf)})}function mk(e){return new Xe(function(t){var n,i;try{for(var r=Li(e),o=r.next();!o.done;o=r.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}t.complete()})}function _f(e){return new Xe(function(t){vk(e,t).catch(function(n){return t.error(n)})})}function gk(e){return _f(Tf(e))}function vk(e,t){var n,i,r,o;return qb(this,void 0,void 0,function(){var s,a;return sf(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=Wb(e),c.label=1;case 1:return[4,n.next()];case 2:if(i=c.sent(),!!i.done)return[3,4];if(s=i.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),r={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),i&&!i.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function ui(e,t,n,i,r){i===void 0&&(i=0),r===void 0&&(r=!1);var o=t.schedule(function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!r)return o}function Ef(e,t){return t===void 0&&(t=0),Bn(function(n,i){n.subscribe(li(i,function(r){return ui(i,e,function(){return i.next(r)},t)},function(){return ui(i,e,function(){return i.complete()},t)},function(r){return ui(i,e,function(){return i.error(r)},t)}))})}function Pf(e,t){return t===void 0&&(t=0),Bn(function(n,i){i.add(e.schedule(function(){return n.subscribe(i)},t))})}function yk(e,t){return zi(e).pipe(Pf(t),Ef(t))}function bk(e,t){return zi(e).pipe(Pf(t),Ef(t))}function kk(e,t){return new Xe(function(n){var i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}function Ck(e,t){return new Xe(function(n){var i;return ui(n,t,function(){i=e[wf](),ui(n,t,function(){var r,o,s;try{r=i.next(),o=r.value,s=r.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return Je(i?.return)&&i.return()}})}function Mf(e,t){if(!e)throw new Error("Iterable cannot be null");return new Xe(function(n){ui(n,t,function(){var i=e[Symbol.asyncIterator]();ui(n,t,function(){i.next().then(function(r){r.done?n.complete():n.next(r.value)})},0,!0)})})}function wk(e,t){return Mf(Tf(e),t)}function Sk(e,t){if(e!=null){if(bf(e))return yk(e,t);if(vf(e))return kk(e,t);if(yf(e))return bk(e,t);if(kf(e))return Mf(e,t);if(Sf(e))return Ck(e,t);if(xf(e))return wk(e,t)}throw Cf(e)}function If(e,t){return t?Sk(e,t):zi(e)}cc(function(e){return function(t){t===void 0&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function Ht(e,t){return Bn(function(n,i){var r=0;n.subscribe(li(i,function(o){i.next(e.call(t,o,r++))}))})}function Tk(e,t,n,i,r,o,s,a){var c=[],l=0,u=0,d=!1,f=function(){d&&!c.length&&!l&&t.complete()},h=function(p){return l<i?m(p):c.push(p)},m=function(p){l++;var y=!1;zi(n(p,u++)).subscribe(li(t,function(g){t.next(g)},function(){y=!0},void 0,function(){if(y)try{l--;for(var g=function(){var S=c.shift();s||m(S)};c.length&&l<i;)g();f()}catch(S){t.error(S)}}))};return e.subscribe(li(t,h,function(){d=!0,f()})),function(){}}function Of(e,t,n){return n===void 0&&(n=1/0),Je(t)?Of(function(i,r){return Ht(function(o,s){return t(i,o,r,s)})(zi(e(i,r)))},n):(typeof t=="number"&&(n=t),Bn(function(i,r){return Tk(i,r,e,n)}))}function xk(e){return Of(df,e)}function _k(){return xk(1)}function Nf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return _k()(If(e,gf(e)))}function Af(e,t){return Bn(function(n,i){var r=0;n.subscribe(li(i,function(o){return e.call(t,o,r++)&&i.next(o)}))})}function Ek(e,t,n,i,r){return function(o,s){var a=n,c=t,l=0;o.subscribe(li(s,function(u){var d=l++;c=a?e(c,u,d):(a=!0,u),s.next(c)},r))}}function Rf(e,t){return Bn(Ek(e,t,arguments.length>=2,!0))}function Vn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=gf(e);return Bn(function(i,r){(n?Nf(e,i,n):Nf(e,i)).subscribe(r)})}function Df(e){return Bn(function(t,n){zi(e).subscribe(li(n,function(){return n.complete()},uc)),!n.closed&&t.subscribe(n)})}var Pk=Object.defineProperty,Mk=Object.defineProperties,Ik=Object.getOwnPropertyDescriptors,Lf=Object.getOwnPropertySymbols,Ok=Object.prototype.hasOwnProperty,Nk=Object.prototype.propertyIsEnumerable,Ff=(e,t,n)=>t in e?Pk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,di=(e,t)=>{for(var n in t||(t={}))Ok.call(t,n)&&Ff(e,n,t[n]);if(Lf)for(var n of Lf(t))Nk.call(t,n)&&Ff(e,n,t[n]);return e},Ui=(e,t)=>Mk(e,Ik(t)),Ao=(e,t,n)=>new Promise((i,r)=>{var o=c=>{try{a(n.next(c))}catch(l){r(l)}},s=c=>{try{a(n.throw(c))}catch(l){r(l)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())}),Ak="lk";function pc(e){return typeof e>"u"?!1:Rk(e)||Dk(e)}function Rk(e){var t;return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&typeof((t=e.publication)==null?void 0:t.track)<"u":!1}function Dk(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&typeof e.publication<"u":!1}function Lk(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u":!1}function zf(e){if(typeof e=="string"||typeof e=="number")return`${e}`;if(Lk(e))return`${e.participant.identity}_${e.source}_placeholder`;if(pc(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${e}`)}var Fk=[q.ConnectionStateChanged,q.RoomMetadataChanged,q.ActiveSpeakersChanged,q.ConnectionQualityChanged,q.ParticipantConnected,q.ParticipantDisconnected,q.ParticipantPermissionsChanged,q.ParticipantMetadataChanged,q.ParticipantNameChanged,q.ParticipantAttributesChanged,q.TrackMuted,q.TrackUnmuted,q.TrackPublished,q.TrackUnpublished,q.TrackStreamStateChanged,q.TrackSubscriptionFailed,q.TrackSubscriptionPermissionChanged,q.TrackSubscriptionStatusChanged],Uf=[...Fk,q.LocalTrackPublished,q.LocalTrackUnpublished],zk=[W.TrackPublished,W.TrackUnpublished,W.TrackMuted,W.TrackUnmuted,W.TrackStreamStateChanged,W.TrackSubscribed,W.TrackUnsubscribed,W.TrackSubscriptionPermissionChanged,W.TrackSubscriptionFailed,W.LocalTrackPublished,W.LocalTrackUnpublished],Uk=[W.ConnectionQualityChanged,W.IsSpeakingChanged,W.ParticipantMetadataChanged,W.ParticipantPermissionsChanged,W.TrackMuted,W.TrackUnmuted,W.TrackPublished,W.TrackUnpublished,W.TrackStreamStateChanged,W.TrackSubscriptionFailed,W.TrackSubscriptionPermissionChanged,W.TrackSubscriptionStatusChanged];[...Uk,W.LocalTrackPublished,W.LocalTrackUnpublished];var kn=Vb.getLogger("lk-components-js");kn.setDefaultLevel("WARN");function $k(e,t){var n;return Ui(di({},e),{receivedAtMediaTimestamp:(n=t.rtpTimestamp)!=null?n:0,receivedAt:t.timestamp})}function jk(e,t,n){return[...e,...t].reduceRight((i,r)=>(i.find(o=>o.id===r.id)||i.unshift(r),i),[]).slice(0-n)}function $f(e){return typeof e=="object"}function jf(e){return Array.isArray(e)&&e.filter($f).length>0}function Bk(e){return`${Ak}-${e}`}function Vk(e){const t=mc(e),n=Hf(e.participant).pipe(Ht(()=>mc(e)),Vn(t));return{className:Bk(e.source===B.Source.Camera||e.source===B.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function mc(e){if(pc(e))return e.publication;{const{source:t,name:n,participant:i}=e;if(t&&n)return i.getTrackPublications().find(r=>r.source===t&&r.trackName===n);if(n)return i.getTrackPublicationByName(n);if(t)return i.getTrackPublication(t);throw new Error("At least one of source and name needs to be defined")}}function Bf(e,...t){return new Xe(n=>{const i=()=>{n.next(e)};return t.forEach(r=>{e.on(r,i)}),()=>{t.forEach(r=>{e.off(r,i)})}}).pipe(Vn(e))}function Vf(e,t){return new Xe(n=>{const i=(...r)=>{n.next(r)};return e.on(t,i),()=>{e.off(t,i)}})}function qk(e){return Vf(e,q.ConnectionStateChanged).pipe(Ht(([t])=>t),Vn(e.state))}function Hk(e){return Vf(e,q.DataReceived)}function qf(e,...t){return new Xe(n=>{const i=()=>{n.next(e)};return t.forEach(r=>{e.on(r,i)}),()=>{t.forEach(r=>{e.off(r,i)})}}).pipe(Vn(e))}function Hf(e){return qf(e,W.TrackMuted,W.TrackUnmuted,W.ParticipantPermissionsChanged,W.TrackPublished,W.TrackUnpublished,W.LocalTrackPublished,W.LocalTrackUnpublished,W.MediaDevicesError,W.TrackSubscriptionStatusChanged).pipe(Ht(t=>{const{isMicrophoneEnabled:n,isCameraEnabled:i,isScreenShareEnabled:r}=t,o=t.getTrackPublication(B.Source.Microphone),s=t.getTrackPublication(B.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:n,isScreenShareEnabled:r,cameraTrack:s,microphoneTrack:o,participant:t}}))}function Wk(e,t){return new Xe(n=>{const i=(...r)=>{n.next(r)};return e.on(t,i),()=>{e.off(t,i)}})}function Zk(e,t={}){var n;let i;const r=new Xe(c=>(i=c,()=>a.unsubscribe())).pipe(Vn(Array.from(e.remoteParticipants.values()))),o=(n=t.additionalRoomEvents)!=null?n:Uf,s=Array.from(new Set([q.ParticipantConnected,q.ParticipantDisconnected,q.ConnectionStateChanged,...o])),a=Bf(e,...s).subscribe(c=>i?.next(Array.from(c.remoteParticipants.values())));return e.remoteParticipants.size>0&&i?.next(Array.from(e.remoteParticipants.values())),r}function Wf(e){return typeof e>"u"?new Xe:Wk(e,W.AttributesChanged).pipe(Ht(([t])=>({changed:t,attributes:e.attributes})),Vn({changed:e.attributes,attributes:e.attributes}))}var Gk={CHAT:"lk.chat"},Kk={CHAT:"lk-chat-topic"};function Zf(e,t){return Ao(this,arguments,function*(n,i,r={}){const{reliable:o,destinationIdentities:s,topic:a}=r;yield n.publishData(i,{destinationIdentities:s,topic:a,reliable:o})})}function Yk(e,t,n){const i=Array.isArray(t)?t:[t],r=Hk(e).pipe(Af(([,,,a])=>t===void 0||a!==void 0&&i.includes(a)),Ht(([a,c,,l])=>({payload:a,topic:l,from:c})));let o;const s=new Xe(a=>{o=a});return{messageObservable:r,isSendingObservable:s,send:(a,...c)=>Ao(this,[a,...c],function*(l,u={}){o.next(!0);try{yield Zf(e.localParticipant,l,di({topic:i[0]},u))}finally{o.next(!1)}})}}var Ro=new WeakMap;function Qk(e){return e.ignoreLegacy==!0}var Jk=e=>JSON.parse(new TextDecoder().decode(e)),Xk=e=>new TextEncoder().encode(JSON.stringify(e));function e3(e,t){var n,i,r,o,s,a;const c=()=>{var k,b,x;return((k=e.serverInfo)==null?void 0:k.edition)===1||!!((b=e.serverInfo)!=null&&b.version)&&jt((x=e.serverInfo)==null?void 0:x.version,"1.8.2")>0},l=new No,u=(n=void 0)!=null?n:Gk.CHAT,d=(i=void 0)!=null?i:Kk.CHAT;let f=!1;Ro.has(e)||(f=!0);const h=(r=Ro.get(e))!=null?r:new Map,m=(o=h.get(u))!=null?o:new No;h.set(u,m),Ro.set(e,h);const p=(s=void 0)!=null?s:Jk;if(f){e.registerTextStreamHandler(u,(b,x)=>Ao(this,null,function*(){const{id:T,timestamp:P}=b.info;If(b).pipe(Rf((A,M)=>A+M),Ht(A=>({id:T,timestamp:P,message:A,from:e.getParticipantByIdentity(x.identity)}))).subscribe({next:A=>m.next(A)})}));const{messageObservable:k}=Yk(e,[d]);k.pipe(Ht(b=>{const x=p(b.payload);return Qk(x)?void 0:Ui(di({},x),{from:b.from})}),Af(b=>!!b),Df(l)).subscribe(m)}const y=m.pipe(Rf((k,b)=>{if("id"in b&&k.find(x=>{var T,P;return((T=x.from)==null?void 0:T.identity)===((P=b.from)==null?void 0:P.identity)&&x.id===b.id})){const x=k.findIndex(T=>T.id===b.id);if(x>-1){const T=k[x];k[x]=Ui(di({},b),{timestamp:T.timestamp,editTimestamp:b.timestamp})}return[...k]}return[...k,b]},[]),Df(l)),g=new rk(!1),S=(a=void 0)!=null?a:Xk,C=(k,b)=>Ao(this,null,function*(){b||(b={}),b.topic!=null||(b.topic=u),g.next(!0);try{const x={id:(yield e.localParticipant.sendText(k,b)).id,timestamp:Date.now(),message:k},T=Ui(di({},x),{attachedFiles:b.attachments}),P=Ui(di({},T),{from:e.localParticipant,attributes:b.attributes});m.next(P);const A=S(Ui(di({},x),{ignoreLegacy:c()}));try{yield Zf(e.localParticipant,A,{reliable:!0,topic:d})}catch(M){kn.info("could not send message in legacy chat format",M)}return P}finally{g.next(!1)}});function w(){l.next(),l.complete(),m.complete(),Ro.delete(e),e.unregisterTextStreamHandler(u)}return e.once(q.Disconnected,w),{messageObservable:y,isSendingObservable:g,send:C}}function Gf(e,t,n=!0){const i=[e.localParticipant,...Array.from(e.remoteParticipants.values())],r=[];return i.forEach(o=>{t.forEach(s=>{const a=Array.from(o.trackPublications.values()).filter(c=>c.source===s&&(!n||c.track)).map(c=>({participant:o,publication:c,source:c.source}));r.push(...a)})}),{trackReferences:r,participants:i}}function Kf(e,t,n=!1){const{sources:i,kind:r,name:o}=t;return Array.from(e.trackPublications.values()).filter(s=>(!i||i.includes(s.source))&&(!r||s.kind===r)&&(!o||s.trackName===o)&&(!n||s.track)).map(s=>({participant:e,publication:s,source:s.source}))}function t3(e,t,n){var i,r;const o=(i=n.additionalRoomEvents)!=null?i:Uf,s=(r=n.onlySubscribed)!=null?r:!0,a=Array.from(new Set([q.ParticipantConnected,q.ParticipantDisconnected,q.ConnectionStateChanged,q.LocalTrackPublished,q.LocalTrackUnpublished,q.TrackPublished,q.TrackUnpublished,q.TrackSubscriptionStatusChanged,...o]).values());return Bf(e,...a).pipe(Ht(c=>{const l=Gf(c,t,s);return kn.debug(`TrackReference[] was updated. (length ${l.trackReferences.length})`,l),l}),Vn(Gf(e,t,s)))}function n3(e,t){return qf(e,...zk).pipe(Ht(n=>{const i=Kf(n,t);return kn.debug(`TrackReference[] was updated. (length ${i.length})`,i),i}),Vn(Kf(e,t)))}function Yf(e,t){return new Xe(n=>{const i=(...r)=>{n.next(r)};return e.on(t,i),()=>{e.off(t,i)}})}function i3(e){return Yf(e,K.TranscriptionReceived)}function r3(e){return Yf(e,K.TimeSyncUpdate).pipe(Ht(([t])=>t))}O.createContext(void 0);const o3=O.createContext(void 0);function s3(){return O.useContext(o3)}function a3(e){const t=s3(),n=e??t;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}const c3=O.createContext(void 0);function Qf(){return O.useContext(c3)}const gc=O.createContext(void 0);function l3(){const e=O.useContext(gc);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function u3(){return O.useContext(gc)}function Do(e){const t=u3(),n=e??t;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}O.createContext(void 0);function Jf(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Jf(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function d3(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Jf(e))&&(i&&(i+=" "),i+=t);return i}function h3(...e){return(...t)=>{for(const n of e)if(typeof n=="function")try{n(...t)}catch(i){console.error(i)}}}function f3(...e){const t={...e[0]};for(let n=1;n<e.length;n++){const i=e[n];for(const r in i){const o=t[r],s=i[r];typeof o=="function"&&typeof s=="function"&&r[0]==="o"&&r[1]==="n"&&r.charCodeAt(2)>=65&&r.charCodeAt(2)<=90?t[r]=h3(o,s):(r==="className"||r==="UNSAFE_className")&&typeof o=="string"&&typeof s=="string"?t[r]=d3(o,s):t[r]=s!==void 0?s:o}}return t}function p3(e){return e!==void 0}function m3(...e){return f3(...e.filter(p3))}function $i(e,t,n=!0){const[i,r]=O.useState(t);return O.useEffect(()=>{if(n&&r(t),typeof window>"u"||!e)return;const o=e.subscribe(r);return()=>o.unsubscribe()},[e,n]),i}function Xf(e){const t=Do(e),n=O.useMemo(()=>qk(t),[t]);return $i(n,t.state)}function g3(e={}){const t=Do(e.room),[n,i]=O.useState(t.localParticipant),[r,o]=O.useState(n.isMicrophoneEnabled),[s,a]=O.useState(n.isCameraEnabled),[c,l]=O.useState(n.isScreenShareEnabled),[u,d]=O.useState(n.lastMicrophoneError),[f,h]=O.useState(n.lastCameraError),[m,p]=O.useState(void 0),[y,g]=O.useState(void 0),S=C=>{a(C.isCameraEnabled),o(C.isMicrophoneEnabled),l(C.isScreenShareEnabled),g(C.cameraTrack),p(C.microphoneTrack),d(C.participant.lastMicrophoneError),h(C.participant.lastCameraError),i(C.participant)};return O.useEffect(()=>{const C=Hf(t.localParticipant).subscribe(S);return()=>C.unsubscribe()},[t]),{isMicrophoneEnabled:r,isScreenShareEnabled:c,isCameraEnabled:s,microphoneTrack:m,cameraTrack:y,lastMicrophoneError:u,lastCameraError:f,localParticipant:n}}function vc(e={}){const t=Do(e.room),[n,i]=O.useState([]);return O.useEffect(()=>{const r=Zk(t,{additionalRoomEvents:e.updateOnlyOn}).subscribe(i);return()=>r.unsubscribe()},[t,JSON.stringify(e.updateOnlyOn)]),n}function v3(e=[B.Source.Camera,B.Source.Microphone,B.Source.ScreenShare,B.Source.ScreenShareAudio,B.Source.Unknown],t={}){const n=Do(t.room),[i,r]=O.useState([]),[o,s]=O.useState([]),a=O.useMemo(()=>e.map(c=>$f(c)?c.source:c),[JSON.stringify(e)]);return O.useEffect(()=>{const c=t3(n,a,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe(({trackReferences:l,participants:u})=>{kn.debug("setting track bundles",l,u),r(l),s(u)});return()=>c.unsubscribe()},[n,JSON.stringify(t.onlySubscribed),JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]),O.useMemo(()=>{if(jf(e)){const c=b3(e,o),l=Array.from(i);return o.forEach(u=>{c.has(u.identity)&&(c.get(u.identity)??[]).forEach(d=>{if(i.find(({participant:h,publication:m})=>u.identity===h.identity&&m.source===d))return;kn.debug(`Add ${d} placeholder for participant ${u.identity}.`);const f={participant:u,source:d};l.push(f)})}),l}else return i},[i,o,e])}function y3(e,t){const n=new Set(e);for(const i of t)n.delete(i);return n}function b3(e,t){const n=new Map;if(jf(e)){const i=e.filter(r=>r.withPlaceholder).map(r=>r.source);t.forEach(r=>{const o=r.getTrackPublications().map(a=>{var c;return(c=a.track)==null?void 0:c.source}).filter(a=>a!==void 0),s=Array.from(y3(new Set(i),new Set(o)));s.length>0&&n.set(r.identity,s)})}return n}function k3(e){const t=l3(),n=Xf(t),i=O.useMemo(()=>n===he.Disconnected,[n]),r=O.useMemo(()=>e3(t),[t,e,i]),o=$i(r.isSendingObservable,!1),s=$i(r.messageObservable,[]);return{send:r.send,chatMessages:s,isSending:o}}function ep(e,t){const n=Qf(),i=vc({updateOnlyOn:[]}),r=O.useMemo(()=>t?i.find(s=>s.identity===t):n,[t,i,n]),o=O.useMemo(()=>{if(r)return n3(r,{sources:e})},[r,JSON.stringify(e)]);return $i(o,[])}function C3(e){var t,n,i;const r=O.useMemo(()=>{var o;return(o=e?.publication)!=null&&o.track?r3(e?.publication.track):void 0},[(t=e?.publication)==null?void 0:t.track]);return $i(r,{timestamp:Date.now(),rtpTimestamp:(i=(n=e?.publication)==null?void 0:n.track)==null?void 0:i.rtpTimestamp})}const w3={bufferSize:100};function yc(e,t){const n={...w3,...t},[i,r]=O.useState([]),o=C3(e),s=a=>{var c;(c=n.onTranscription)==null||c.call(n,a),r(l=>jk(l,a.map(u=>$k(u,o)),n.bufferSize))};return O.useEffect(()=>{if(!(e!=null&&e.publication))return;const a=i3(e.publication).subscribe(c=>{s(...c)});return()=>{a.unsubscribe()}},[e&&zf(e),s]),{segments:i}}function S3(e={}){const t=Qf(),n=e.participant??t,i=O.useMemo(()=>Wf(n),[n]);return $i(i,{attributes:n?.attributes})}const tp="lk.agent.state";function np(){const e=vc(),t=e.find(d=>d.kind===ni.AGENT&&!("lk.publish_on_behalf"in d.attributes)),n=e.find(d=>d.kind===ni.AGENT&&d.attributes["lk.publish_on_behalf"]===t?.identity),i=ep([B.Source.Microphone,B.Source.Camera],t?.identity),r=ep([B.Source.Microphone,B.Source.Camera],n?.identity),o=i.find(d=>d.source===B.Source.Microphone)??r.find(d=>d.source===B.Source.Microphone),s=i.find(d=>d.source===B.Source.Camera)??r.find(d=>d.source===B.Source.Camera),{segments:a}=yc(o),c=Xf(),{attributes:l}=S3({participant:t}),u=O.useMemo(()=>c===he.Disconnected?"disconnected":c===he.Connecting||!t||!(l!=null&&l[tp])?"connecting":l[tp],[l,t,c]);return{agent:t,state:u,audioTrack:o,videoTrack:s,agentTranscriptions:a,agentAttributes:l}}function T3(e,t={}){const[n,i]=O.useState(mc(e)),[r,o]=O.useState(n?.isMuted),[s,a]=O.useState(n?.isSubscribed),[c,l]=O.useState(n?.track),[u,d]=O.useState("landscape"),f=O.useRef(),{className:h,trackObserver:m}=O.useMemo(()=>Vk(e),[e.participant.sid??e.participant.identity,e.source,pc(e)&&e.publication.trackSid]);return O.useEffect(()=>{const p=m.subscribe(y=>{kn.debug("update track",y),i(y),o(y?.isMuted),a(y?.isSubscribed),l(y?.track)});return()=>p?.unsubscribe()},[m]),O.useEffect(()=>{var p,y;return c&&(f.current&&c.detach(f.current),(p=t.element)!=null&&p.current&&!(e.participant.isLocal&&c?.kind==="audio")&&c.attach(t.element.current)),f.current=(y=t.element)==null?void 0:y.current,()=>{f.current&&c?.detach(f.current)}},[c,t.element]),O.useEffect(()=>{var p,y;if(typeof((p=n?.dimensions)==null?void 0:p.width)=="number"&&typeof((y=n?.dimensions)==null?void 0:y.height)=="number"){const g=n.dimensions.width>n.dimensions.height?"landscape":"portrait";d(g)}},[n]),{publication:n,isMuted:r,isSubscribed:s,track:c,elementProps:m3(t.props,{className:h,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":n?.source,...n?.kind==="video"&&{"data-lk-orientation":u}})}}var bc,ip;function x3(){if(ip)return bc;ip=1;var e="Expected a function",t=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof _o=="object"&&_o&&_o.Object===Object&&_o,l=typeof self=="object"&&self&&self.Object===Object&&self,u=c||l||Function("return this")(),d=Object.prototype,f=d.toString,h=Math.max,m=Math.min,p=function(){return u.Date.now()};function y(k,b,x){var T,P,A,M,R,z,D=0,F=!1,$=!1,V=!0;if(typeof k!="function")throw new TypeError(e);b=w(b)||0,g(x)&&(F=!!x.leading,$="maxWait"in x,A=$?h(w(x.maxWait)||0,b):A,V="trailing"in x?!!x.trailing:V);function L(ie){var xe=T,_e=P;return T=P=void 0,D=ie,M=k.apply(_e,xe),M}function J(ie){return D=ie,R=setTimeout(oe,b),F?L(ie):M}function _(ie){var xe=ie-z,_e=ie-D,Ce=b-xe;return $?m(Ce,A-_e):Ce}function ee(ie){var xe=ie-z,_e=ie-D;return z===void 0||xe>=b||xe<0||$&&_e>=A}function oe(){var ie=p();if(ee(ie))return E(ie);R=setTimeout(oe,_(ie))}function E(ie){return R=void 0,V&&T?L(ie):(T=P=void 0,M)}function ae(){R!==void 0&&clearTimeout(R),D=0,T=z=P=R=void 0}function ke(){return R===void 0?M:E(p())}function pe(){var ie=p(),xe=ee(ie);if(T=arguments,P=this,z=ie,xe){if(R===void 0)return J(z);if($)return R=setTimeout(oe,b),L(z)}return R===void 0&&(R=setTimeout(oe,b)),M}return pe.cancel=ae,pe.flush=ke,pe}function g(k){var b=typeof k;return!!k&&(b=="object"||b=="function")}function S(k){return!!k&&typeof k=="object"}function C(k){return typeof k=="symbol"||S(k)&&f.call(k)==n}function w(k){if(typeof k=="number")return k;if(C(k))return t;if(g(k)){var b=typeof k.valueOf=="function"?k.valueOf():k;k=g(b)?b+"":b}if(typeof k!="string")return k===0?k:+k;k=k.replace(i,"");var x=o.test(k);return x||s.test(k)?a(k.slice(2),x?2:8):r.test(k)?t:+k}return bc=y,bc}x3();const _3=O.forwardRef(function({trackRef:e,onSubscriptionStatusChanged:t,volume:n,...i},r){const o=a3(e),s=O.useRef(null);O.useImperativeHandle(r,()=>s.current);const{elementProps:a,isSubscribed:c,track:l,publication:u}=T3(o,{element:s,props:i});return O.useEffect(()=>{t?.(!!c)},[c,t]),O.useEffect(()=>{l===void 0||n===void 0||(l instanceof Xh?l.setVolume(n):kn.warn("Volume can only be set on remote audio tracks."))},[n,l]),O.useEffect(()=>{u===void 0||i.muted===void 0||(u instanceof nf?u.setEnabled(!i.muted):kn.warn("Can only call setEnabled on remote track publications."))},[i.muted,u,l]),O.createElement("audio",{ref:s,...a})});function E3({volume:e,muted:t}){const n=v3([B.Source.Microphone,B.Source.ScreenShareAudio,B.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(i=>!i.participant.isLocal&&i.publication.kind===B.Kind.Audio);return O.createElement("div",{style:{display:"none"}},n.map(i=>O.createElement(_3,{key:zf(i),trackRef:i,volume:e,muted:t})))}function rp(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=rp(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function P3(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=rp(e))&&(i&&(i+=" "),i+=t);return i}const op=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,kc=P3,M3=(e,t)=>n=>{var i;if(t?.variants==null)return kc(e,n?.class,n?.className);const{variants:r,defaultVariants:o}=t,s=Object.keys(r).map(l=>{const u=n?.[l],d=o?.[l];if(u===null)return null;const f=op(u)||op(d);return r[l][f]}),a=n&&Object.entries(n).reduce((l,u)=>{let[d,f]=u;return f===void 0||(l[d]=f),l},{}),c=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((l,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(m=>{let[p,y]=m;return Array.isArray(y)?y.includes({...o,...a}[p]):{...o,...a}[p]===y})?[...l,d,f]:l},[]);return kc(e,s,c,n?.class,n?.className)},Cc="-",I3=e=>{const t=N3(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:s=>{const a=s.split(Cc);return a[0]===""&&a.length!==1&&a.shift(),sp(a,t)||O3(s)},getConflictingClassGroupIds:(s,a)=>{const c=n[s]||[];return a&&i[s]?[...c,...i[s]]:c}}},sp=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],i=t.nextPart.get(n),r=i?sp(e.slice(1),i):void 0;if(r)return r;if(t.validators.length===0)return;const o=e.join(Cc);return t.validators.find(({validator:s})=>s(o))?.classGroupId},ap=/^\[(.+)\]$/,O3=e=>{if(ap.test(e)){const t=ap.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},N3=e=>{const{theme:t,classGroups:n}=e,i={nextPart:new Map,validators:[]};for(const r in n)wc(n[r],i,r,t);return i},wc=(e,t,n,i)=>{e.forEach(r=>{if(typeof r=="string"){const o=r===""?t:cp(t,r);o.classGroupId=n;return}if(typeof r=="function"){if(A3(r)){wc(r(i),t,n,i);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([o,s])=>{wc(s,cp(t,o),n,i)})})},cp=(e,t)=>{let n=e;return t.split(Cc).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},A3=e=>e.isThemeGetter,R3=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,i=new Map;const r=(o,s)=>{n.set(o,s),t++,t>e&&(t=0,i=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=i.get(o))!==void 0)return r(o,s),s},set(o,s){n.has(o)?n.set(o,s):r(o,s)}}},Sc="!",Tc=":",D3=Tc.length,L3=e=>{const{prefix:t,experimentalParseClassName:n}=e;let i=r=>{const o=[];let s=0,a=0,c=0,l;for(let m=0;m<r.length;m++){let p=r[m];if(s===0&&a===0){if(p===Tc){o.push(r.slice(c,m)),c=m+D3;continue}if(p==="/"){l=m;continue}}p==="["?s++:p==="]"?s--:p==="("?a++:p===")"&&a--}const u=o.length===0?r:r.substring(c),d=F3(u),f=d!==u,h=l&&l>c?l-c:void 0;return{modifiers:o,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:h}};if(t){const r=t+Tc,o=i;i=s=>s.startsWith(r)?o(s.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const r=i;i=o=>n({className:o,parseClassName:r})}return i},F3=e=>e.endsWith(Sc)?e.substring(0,e.length-1):e.startsWith(Sc)?e.substring(1):e,z3=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const r=[];let o=[];return i.forEach(s=>{s[0]==="["||t[s]?(r.push(...o.sort(),s),o=[]):o.push(s)}),r.push(...o.sort()),r}},U3=e=>({cache:R3(e.cacheSize),parseClassName:L3(e),sortModifiers:z3(e),...I3(e)}),$3=/\s+/,j3=(e,t)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:r,sortModifiers:o}=t,s=[],a=e.trim().split($3);let c="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{isExternal:d,modifiers:f,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=n(u);if(d){c=u+(c.length>0?" "+c:c);continue}let y=!!p,g=i(y?m.substring(0,p):m);if(!g){if(!y){c=u+(c.length>0?" "+c:c);continue}if(g=i(m),!g){c=u+(c.length>0?" "+c:c);continue}y=!1}const S=o(f).join(":"),C=h?S+Sc:S,w=C+g;if(s.includes(w))continue;s.push(w);const k=r(g,y);for(let b=0;b<k.length;++b){const x=k[b];s.push(C+x)}c=u+(c.length>0?" "+c:c)}return c};function B3(){let e=0,t,n,i="";for(;e<arguments.length;)(t=arguments[e++])&&(n=lp(t))&&(i&&(i+=" "),i+=n);return i}const lp=e=>{if(typeof e=="string")return e;let t,n="";for(let i=0;i<e.length;i++)e[i]&&(t=lp(e[i]))&&(n&&(n+=" "),n+=t);return n};function V3(e,...t){let n,i,r,o=s;function s(c){const l=t.reduce((u,d)=>d(u),e());return n=U3(l),i=n.cache.get,r=n.cache.set,o=a,a(c)}function a(c){const l=i(c);if(l)return l;const u=j3(c,n);return r(c,u),u}return function(){return o(B3.apply(null,arguments))}}const et=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},up=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,dp=/^\((?:(\w[\w-]*):)?(.+)\)$/i,q3=/^\d+\/\d+$/,H3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,W3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Z3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,G3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,K3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ji=e=>q3.test(e),ge=e=>!!e&&!Number.isNaN(Number(e)),qn=e=>!!e&&Number.isInteger(Number(e)),xc=e=>e.endsWith("%")&&ge(e.slice(0,-1)),Cn=e=>H3.test(e),Y3=()=>!0,Q3=e=>W3.test(e)&&!Z3.test(e),hp=()=>!1,J3=e=>G3.test(e),X3=e=>K3.test(e),eC=e=>!te(e)&&!ne(e),tC=e=>Bi(e,vp,hp),te=e=>up.test(e),hi=e=>Bi(e,yp,Q3),_c=e=>Bi(e,sC,ge),fp=e=>Bi(e,mp,hp),nC=e=>Bi(e,gp,X3),Lo=e=>Bi(e,bp,J3),ne=e=>dp.test(e),Sr=e=>Vi(e,yp),iC=e=>Vi(e,aC),pp=e=>Vi(e,mp),rC=e=>Vi(e,vp),oC=e=>Vi(e,gp),Fo=e=>Vi(e,bp,!0),Bi=(e,t,n)=>{const i=up.exec(e);return i?i[1]?t(i[1]):n(i[2]):!1},Vi=(e,t,n=!1)=>{const i=dp.exec(e);return i?i[1]?t(i[1]):n:!1},mp=e=>e==="position"||e==="percentage",gp=e=>e==="image"||e==="url",vp=e=>e==="length"||e==="size"||e==="bg-size",yp=e=>e==="length",sC=e=>e==="number",aC=e=>e==="family-name",bp=e=>e==="shadow",cC=V3(()=>{const e=et("color"),t=et("font"),n=et("text"),i=et("font-weight"),r=et("tracking"),o=et("leading"),s=et("breakpoint"),a=et("container"),c=et("spacing"),l=et("radius"),u=et("shadow"),d=et("inset-shadow"),f=et("text-shadow"),h=et("drop-shadow"),m=et("blur"),p=et("perspective"),y=et("aspect"),g=et("ease"),S=et("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],w=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...w(),ne,te],b=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto","contain","none"],T=()=>[ne,te,c],P=()=>[ji,"full","auto",...T()],A=()=>[qn,"none","subgrid",ne,te],M=()=>["auto",{span:["full",qn,ne,te]},qn,ne,te],R=()=>[qn,"auto",ne,te],z=()=>["auto","min","max","fr",ne,te],D=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...T()],V=()=>[ji,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],L=()=>[e,ne,te],J=()=>[...w(),pp,fp,{position:[ne,te]}],_=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ee=()=>["auto","cover","contain",rC,tC,{size:[ne,te]}],oe=()=>[xc,Sr,hi],E=()=>["","none","full",l,ne,te],ae=()=>["",ge,Sr,hi],ke=()=>["solid","dashed","dotted","double"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>[ge,xc,pp,fp],xe=()=>["","none",m,ne,te],_e=()=>["none",ge,ne,te],Ce=()=>["none",ge,ne,te],Re=()=>[ge,ne,te],Le=()=>[ji,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Cn],breakpoint:[Cn],color:[Y3],container:[Cn],"drop-shadow":[Cn],ease:["in","out","in-out"],font:[eC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Cn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Cn],shadow:[Cn],spacing:["px",ge],text:[Cn],"text-shadow":[Cn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ji,te,ne,y]}],container:["container"],columns:[{columns:[ge,te,ne,a]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:b()}],"overflow-x":[{"overflow-x":b()}],"overflow-y":[{"overflow-y":b()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[qn,"auto",ne,te]}],basis:[{basis:[ji,"full","auto",a,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ge,ji,"auto","initial","none",te]}],grow:[{grow:["",ge,ne,te]}],shrink:[{shrink:["",ge,ne,te]}],order:[{order:[qn,"first","last","none",ne,te]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...D(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...D()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":D()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[a,"screen",...V()]}],"min-w":[{"min-w":[a,"screen","none",...V()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...V()]}],h:[{h:["screen","lh",...V()]}],"min-h":[{"min-h":["screen","lh","none",...V()]}],"max-h":[{"max-h":["screen","lh",...V()]}],"font-size":[{text:["base",n,Sr,hi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,ne,_c]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",xc,te]}],"font-family":[{font:[iC,te,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,ne,te]}],"line-clamp":[{"line-clamp":[ge,"none",ne,_c]}],leading:[{leading:[o,...T()]}],"list-image":[{"list-image":["none",ne,te]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ne,te]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ke(),"wavy"]}],"text-decoration-thickness":[{decoration:[ge,"from-font","auto",ne,hi]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[ge,"auto",ne,te]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ne,te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ne,te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:_()}],"bg-size":[{bg:ee()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},qn,ne,te],radial:["",ne,te],conic:[qn,ne,te]},oC,nC]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:oe()}],"gradient-via-pos":[{via:oe()}],"gradient-to-pos":[{to:oe()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:E()}],"rounded-s":[{"rounded-s":E()}],"rounded-e":[{"rounded-e":E()}],"rounded-t":[{"rounded-t":E()}],"rounded-r":[{"rounded-r":E()}],"rounded-b":[{"rounded-b":E()}],"rounded-l":[{"rounded-l":E()}],"rounded-ss":[{"rounded-ss":E()}],"rounded-se":[{"rounded-se":E()}],"rounded-ee":[{"rounded-ee":E()}],"rounded-es":[{"rounded-es":E()}],"rounded-tl":[{"rounded-tl":E()}],"rounded-tr":[{"rounded-tr":E()}],"rounded-br":[{"rounded-br":E()}],"rounded-bl":[{"rounded-bl":E()}],"border-w":[{border:ae()}],"border-w-x":[{"border-x":ae()}],"border-w-y":[{"border-y":ae()}],"border-w-s":[{"border-s":ae()}],"border-w-e":[{"border-e":ae()}],"border-w-t":[{"border-t":ae()}],"border-w-r":[{"border-r":ae()}],"border-w-b":[{"border-b":ae()}],"border-w-l":[{"border-l":ae()}],"divide-x":[{"divide-x":ae()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ae()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ke(),"hidden","none"]}],"divide-style":[{divide:[...ke(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...ke(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ge,ne,te]}],"outline-w":[{outline:["",ge,Sr,hi]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",u,Fo,Lo]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",d,Fo,Lo]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[ge,hi]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":ae()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",f,Fo,Lo]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[ge,ne,te]}],"mix-blend":[{"mix-blend":[...pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ge]}],"mask-image-linear-from-pos":[{"mask-linear-from":ie()}],"mask-image-linear-to-pos":[{"mask-linear-to":ie()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":ie()}],"mask-image-t-to-pos":[{"mask-t-to":ie()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":ie()}],"mask-image-r-to-pos":[{"mask-r-to":ie()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":ie()}],"mask-image-b-to-pos":[{"mask-b-to":ie()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":ie()}],"mask-image-l-to-pos":[{"mask-l-to":ie()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":ie()}],"mask-image-x-to-pos":[{"mask-x-to":ie()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":ie()}],"mask-image-y-to-pos":[{"mask-y-to":ie()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[ne,te]}],"mask-image-radial-from-pos":[{"mask-radial-from":ie()}],"mask-image-radial-to-pos":[{"mask-radial-to":ie()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":w()}],"mask-image-conic-pos":[{"mask-conic":[ge]}],"mask-image-conic-from-pos":[{"mask-conic-from":ie()}],"mask-image-conic-to-pos":[{"mask-conic-to":ie()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:_()}],"mask-size":[{mask:ee()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ne,te]}],filter:[{filter:["","none",ne,te]}],blur:[{blur:xe()}],brightness:[{brightness:[ge,ne,te]}],contrast:[{contrast:[ge,ne,te]}],"drop-shadow":[{"drop-shadow":["","none",h,Fo,Lo]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",ge,ne,te]}],"hue-rotate":[{"hue-rotate":[ge,ne,te]}],invert:[{invert:["",ge,ne,te]}],saturate:[{saturate:[ge,ne,te]}],sepia:[{sepia:["",ge,ne,te]}],"backdrop-filter":[{"backdrop-filter":["","none",ne,te]}],"backdrop-blur":[{"backdrop-blur":xe()}],"backdrop-brightness":[{"backdrop-brightness":[ge,ne,te]}],"backdrop-contrast":[{"backdrop-contrast":[ge,ne,te]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ge,ne,te]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ge,ne,te]}],"backdrop-invert":[{"backdrop-invert":["",ge,ne,te]}],"backdrop-opacity":[{"backdrop-opacity":[ge,ne,te]}],"backdrop-saturate":[{"backdrop-saturate":[ge,ne,te]}],"backdrop-sepia":[{"backdrop-sepia":["",ge,ne,te]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ne,te]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ge,"initial",ne,te]}],ease:[{ease:["linear","initial",g,ne,te]}],delay:[{delay:[ge,ne,te]}],animate:[{animate:["none",S,ne,te]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,ne,te]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:_e()}],"rotate-x":[{"rotate-x":_e()}],"rotate-y":[{"rotate-y":_e()}],"rotate-z":[{"rotate-z":_e()}],scale:[{scale:Ce()}],"scale-x":[{"scale-x":Ce()}],"scale-y":[{"scale-y":Ce()}],"scale-z":[{"scale-z":Ce()}],"scale-3d":["scale-3d"],skew:[{skew:Re()}],"skew-x":[{"skew-x":Re()}],"skew-y":[{"skew-y":Re()}],transform:[{transform:[ne,te,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ne,te]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ne,te]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[ge,Sr,hi,_c]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});U.createContext({});var lC=(e,t,n,i,r,o,s,a)=>{let c=document.documentElement,l=["light","dark"];function u(h){(Array.isArray(e)?e:[e]).forEach(m=>{let p=m==="class",y=p&&o?r.map(g=>o[g]||g):r;p?(c.classList.remove(...y),c.classList.add(o&&o[h]?o[h]:h)):c.setAttribute(m,h)}),d(h)}function d(h){a&&l.includes(h)&&(c.style.colorScheme=h)}function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(i)u(i);else try{let h=localStorage.getItem(t)||n,m=s&&h==="system"?f():h;u(m)}catch{}};O.createContext(void 0),O.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:i,enableColorScheme:r,defaultTheme:o,value:s,themes:a,nonce:c,scriptProps:l})=>{let u=JSON.stringify([n,t,o,e,a,s,i,r]).slice(1,-1);return O.createElement("script",{...l,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${lC.toString()})(${u})`}})});function uC(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Array(12).fill(0);let Ec=1;class dC{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:i,...r}=t,o=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:Ec++,s=this.toasts.find(c=>c.id===o),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),s?this.toasts=this.toasts.map(c=>c.id===o?(this.publish({...c,...t,id:o,title:i}),{...c,...t,id:o,dismissible:a,title:i}):c):this.addToast({title:i,...r,dismissible:a,id:o}),o},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(i=>i({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let i;n.loading!==void 0&&(i=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(t instanceof Function?t():t);let o=i!==void 0,s;const a=r.then(async l=>{if(s=["resolve",l],U.isValidElement(l))o=!1,this.create({id:i,type:"default",message:l});else if(fC(l)&&!l.ok){o=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${l.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${l.status}`):n.description,m=typeof d=="object"&&!U.isValidElement(d)?d:{message:d};this.create({id:i,type:"error",description:f,...m})}else if(l instanceof Error){o=!1;const d=typeof n.error=="function"?await n.error(l):n.error,f=typeof n.description=="function"?await n.description(l):n.description,m=typeof d=="object"&&!U.isValidElement(d)?d:{message:d};this.create({id:i,type:"error",description:f,...m})}else if(n.success!==void 0){o=!1;const d=typeof n.success=="function"?await n.success(l):n.success,f=typeof n.description=="function"?await n.description(l):n.description,m=typeof d=="object"&&!U.isValidElement(d)?d:{message:d};this.create({id:i,type:"success",description:f,...m})}}).catch(async l=>{if(s=["reject",l],n.error!==void 0){o=!1;const u=typeof n.error=="function"?await n.error(l):n.error,d=typeof n.description=="function"?await n.description(l):n.description,h=typeof u=="object"&&!U.isValidElement(u)?u:{message:u};this.create({id:i,type:"error",description:d,...h})}}).finally(()=>{o&&(this.dismiss(i),i=void 0),n.finally==null||n.finally.call(n)}),c=()=>new Promise((l,u)=>a.then(()=>s[0]==="reject"?u(s[1]):l(s[1])).catch(u));return typeof i!="string"&&typeof i!="number"?{unwrap:c}:Object.assign(i,{unwrap:c})},this.custom=(t,n)=>{const i=n?.id||Ec++;return this.create({jsx:t(i),id:i,...n}),i},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Nt=new dC,hC=(e,t)=>{const n=t?.id||Ec++;return Nt.addToast({title:e,...t,id:n}),n},fC=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",pC=hC,mC=()=>Nt.toasts,gC=()=>Nt.getActiveToasts(),Pc=Object.assign(pC,{success:Nt.success,info:Nt.info,warning:Nt.warning,error:Nt.error,custom:Nt.custom,message:Nt.message,promise:Nt.promise,dismiss:Nt.dismiss,loading:Nt.loading},{getHistory:mC,getToasts:gC});uC("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const Te=(...e)=>cC(kc(e));var tt=(e=>(e.CHAT="chat",e.CALL="call",e))(tt||{});const vC=({room:e,initialMode:t="chat"})=>{const[n,i]=U.useState(t),r=np(),o=U.useCallback(async s=>{if(!r.agent||!e)throw new Error("No agent or room available");const a=await e.localParticipant.performRpc({destinationIdentity:r.agent.identity,method:"toggle_mode",payload:s==="chat"?"chat_mode":"call_mode"});return i(s),e.localParticipant.setMicrophoneEnabled(s==="call"),a},[e,r.agent]);return{currentMode:n,setCurrentMode:i,switchToChat:async()=>o("chat"),switchToCall:async()=>o("call")}};var qi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},zo={},yC={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},bC=class{#e=yC;#t=!1;setTimeoutProvider(e){zo.NODE_ENV!=="production"&&this.#t&&e!==this.#e&&console.error("[timeoutManager]: Switching provider after calls to previous provider might result in unexpected behavior.",{previous:this.#e,provider:e}),this.#e=e,zo.NODE_ENV!=="production"&&(this.#t=!1)}setTimeout(e,t){return zo.NODE_ENV!=="production"&&(this.#t=!0),this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return zo.NODE_ENV!=="production"&&(this.#t=!0),this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},fi=new bC;function kC(e){setTimeout(e,0)}var kp={},pi=typeof window>"u"||"Deno"in globalThis;function ft(){}function CC(e,t){return typeof e=="function"?e(t):e}function Mc(e){return typeof e=="number"&&e>=0&&e!==1/0}function Cp(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Hn(e,t){return typeof e=="function"?e(t):e}function At(e,t){return typeof e=="function"?e(t):e}function wp(e,t){const{type:n="all",exact:i,fetchStatus:r,predicate:o,queryKey:s,stale:a}=e;if(s){if(i){if(t.queryHash!==Ic(s,t.options))return!1}else if(!Tr(t.queryKey,s))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||r&&r!==t.state.fetchStatus||o&&!o(t))}function Sp(e,t){const{exact:n,status:i,predicate:r,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(mi(t.options.mutationKey)!==mi(o))return!1}else if(!Tr(t.options.mutationKey,o))return!1}return!(i&&t.state.status!==i||r&&!r(t))}function Ic(e,t){return(t?.queryKeyHashFn||mi)(e)}function mi(e){return JSON.stringify(e,(t,n)=>Nc(n)?Object.keys(n).sort().reduce((i,r)=>(i[r]=n[r],i),{}):n)}function Tr(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Tr(e[n],t[n])):!1}var wC=Object.prototype.hasOwnProperty;function Oc(e,t){if(e===t)return e;const n=Tp(e)&&Tp(t);if(!n&&!(Nc(e)&&Nc(t)))return t;const r=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),s=o.length,a=n?new Array(s):{};let c=0;for(let l=0;l<s;l++){const u=n?l:o[l],d=e[u],f=t[u];if(d===f){a[u]=d,(n?l<r:wC.call(e,u))&&c++;continue}if(d===null||f===null||typeof d!="object"||typeof f!="object"){a[u]=f;continue}const h=Oc(d,f);a[u]=h,h===d&&c++}return r===s&&c===r?e:a}function Uo(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Tp(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Nc(e){if(!xp(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!xp(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function xp(e){return Object.prototype.toString.call(e)==="[object Object]"}function SC(e){return new Promise(t=>{fi.setTimeout(t,e)})}function Ac(e,t,n){if(typeof n.structuralSharing=="function")return n.structuralSharing(e,t);if(n.structuralSharing!==!1){if(kp.NODE_ENV!=="production")try{return Oc(e,t)}catch(i){throw console.error(`Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${n.queryHash}]: ${i}`),i}return Oc(e,t)}return t}function TC(e,t,n=0){const i=[...e,t];return n&&i.length>n?i.slice(1):i}function xC(e,t,n=0){const i=[t,...e];return n&&i.length>n?i.slice(0,-1):i}var $o=Symbol();function _p(e,t){return kp.NODE_ENV!=="production"&&e.queryFn===$o&&console.error(`Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${e.queryHash}'`),!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===$o?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Ep(e,t){return typeof e=="function"?e(...t):!!e}var _C=class extends qi{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!pi&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Rc=new _C;function Dc(){let e,t;const n=new Promise((r,o)=>{e=r,t=o});n.status="pending",n.catch(()=>{});function i(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{i({status:"fulfilled",value:r}),e(r)},n.reject=r=>{i({status:"rejected",reason:r}),t(r)},n}var EC=kC;function PC(){let e=[],t=0,n=a=>{a()},i=a=>{a()},r=EC;const o=a=>{t?e.push(a):r(()=>{n(a)})},s=()=>{const a=e;e=[],a.length&&r(()=>{i(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;t++;try{c=a()}finally{t--,t||s()}return c},batchCalls:a=>(...c)=>{o(()=>{a(...c)})},schedule:o,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{i=a},setScheduler:a=>{r=a}}}var nt=PC(),MC=class extends qi{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!pi&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},jo=new MC;function IC(e){return Math.min(1e3*2**e,3e4)}function Pp(e){return(e??"online")==="online"?jo.isOnline():!0}var Lc=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Mp(e){let t=!1,n=0,i;const r=Dc(),o=()=>r.status!=="pending",s=p=>{if(!o()){const y=new Lc(p);f(y),e.onCancel?.(y)}},a=()=>{t=!0},c=()=>{t=!1},l=()=>Rc.isFocused()&&(e.networkMode==="always"||jo.isOnline())&&e.canRun(),u=()=>Pp(e.networkMode)&&e.canRun(),d=p=>{o()||(i?.(),r.resolve(p))},f=p=>{o()||(i?.(),r.reject(p))},h=()=>new Promise(p=>{i=y=>{(o()||l())&&p(y)},e.onPause?.()}).then(()=>{i=void 0,o()||e.onContinue?.()}),m=()=>{if(o())return;let p;const y=n===0?e.initialPromise:void 0;try{p=y??e.fn()}catch(g){p=Promise.reject(g)}Promise.resolve(p).then(d).catch(g=>{if(o())return;const S=e.retry??(pi?0:3),C=e.retryDelay??IC,w=typeof C=="function"?C(n,g):C,k=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,g);if(t||!k){f(g);return}n++,e.onFail?.(n,g),SC(w).then(()=>l()?void 0:h()).then(()=>{t?f(g):m()})})};return{promise:r,status:()=>r.status,cancel:s,continue:()=>(i?.(),r),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?m():h().then(m),r)}}var Ip=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Mc(this.gcTime)&&(this.#e=fi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(pi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(fi.clearTimeout(this.#e),this.#e=void 0)}},Op={},OC=class extends Ip{#e;#t;#n;#r;#i;#s;#a;constructor(e){super(),this.#a=!1,this.#s=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#n=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Ap(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(e){if(this.options={...this.#s,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Ap(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const n=Ac(this.state.data,e,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#o({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#i?.promise;return this.#i?.cancel(e),t?t.then(ft).catch(ft):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>At(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$o||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Hn(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Cp(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(e&&this.setOptions(e),!this.options.queryFn){const a=this.observers.find(c=>c.options.queryFn);a&&this.setOptions(a.options)}Op.NODE_ENV!=="production"&&(Array.isArray(this.options.queryKey)||console.error("As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']"));const n=new AbortController,i=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},r=()=>{const a=_p(this.options,t),l=(()=>{const u={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(u),u})();return this.#a=!1,this.options.persister?this.options.persister(a,l,this):a(l)},s=(()=>{const a={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return i(a),a})();this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#o({type:"fetch",meta:s.fetchOptions?.meta}),this.#i=Mp({initialPromise:t?.initialPromise,fn:s.fetchFn,onCancel:a=>{a instanceof Lc&&a.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(a,c)=>{this.#o({type:"failed",failureCount:a,error:c})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0});try{const a=await this.#i.start();if(a===void 0)throw Op.NODE_ENV!=="production"&&console.error(`Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`),new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#n.config.onSuccess?.(a,this),this.#n.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof Lc){if(a.silent)return this.#i.promise;if(a.revert){if(this.state.data===void 0)throw a;return this.state.data}}throw this.#o({type:"error",error:a}),this.#n.config.onError?.(a,this),this.#n.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#o(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Np(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const r=e.error;return{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),nt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function Np(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Pp(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Ap(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,i=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var NC=class extends qi{constructor(e,t){super(),this.options=t,this.#e=e,this.#o=null,this.#a=Dc(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#s;#a;#o;#m;#h;#f;#l;#u;#c;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Rp(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Fc(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Fc(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#k(),this.#C(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof At(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),t._defaulted&&!Uo(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&Dp(this.#t,n,this.options,t)&&this.#d(),this.updateResult(),i&&(this.#t!==n||At(this.options.enabled,this.#t)!==At(t.enabled,this.#t)||Hn(this.options.staleTime,this.#t)!==Hn(t.staleTime,this.#t))&&this.#g();const r=this.#v();i&&(this.#t!==n||At(this.options.enabled,this.#t)!==At(t.enabled,this.#t)||r!==this.#c)&&this.#y(r)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return RC(this,n)&&(this.#r=n,this.#s=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(e,t){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),t?.(i),i==="promise"&&!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,i))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(e){this.#w();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(ft)),t}#g(){this.#k();const e=Hn(this.options.staleTime,this.#t);if(pi||this.#r.isStale||!Mc(e))return;const n=Cp(this.#r.dataUpdatedAt,e)+1;this.#l=fi.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#C(),this.#c=e,!(pi||At(this.options.enabled,this.#t)===!1||!Mc(this.#c)||this.#c===0)&&(this.#u=fi.setInterval(()=>{(this.options.refetchIntervalInBackground||Rc.isFocused())&&this.#d()},this.#c))}#b(){this.#g(),this.#y(this.#v())}#k(){this.#l&&(fi.clearTimeout(this.#l),this.#l=void 0)}#C(){this.#u&&(fi.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const n=this.#t,i=this.options,r=this.#r,o=this.#i,s=this.#s,c=e!==n?e.state:this.#n,{state:l}=e;let u={...l},d=!1,f;if(t._optimisticResults){const T=this.hasListeners(),P=!T&&Rp(e,t),A=T&&Dp(e,n,t,i);(P||A)&&(u={...u,...Np(l.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:h,errorUpdatedAt:m,status:p}=u;f=u.data;let y=!1;if(t.placeholderData!==void 0&&f===void 0&&p==="pending"){let T;r?.isPlaceholderData&&t.placeholderData===s?.placeholderData?(T=r.data,y=!0):T=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,T!==void 0&&(p="success",f=Ac(r?.data,T,t),d=!0)}if(t.select&&f!==void 0&&!y)if(r&&f===o?.data&&t.select===this.#m)f=this.#h;else try{this.#m=t.select,f=t.select(f),f=Ac(r?.data,f,t),this.#h=f,this.#o=null}catch(T){this.#o=T}this.#o&&(h=this.#o,f=this.#h,m=Date.now(),p="error");const g=u.fetchStatus==="fetching",S=p==="pending",C=p==="error",w=S&&g,k=f!==void 0,x={status:p,fetchStatus:u.fetchStatus,isPending:S,isSuccess:p==="success",isError:C,isInitialLoading:w,isLoading:w,data:f,dataUpdatedAt:u.dataUpdatedAt,error:h,errorUpdatedAt:m,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:g,isRefetching:g&&!S,isLoadingError:C&&!k,isPaused:u.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:C&&k,isStale:zc(e,t),refetch:this.refetch,promise:this.#a,isEnabled:At(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const T=M=>{x.status==="error"?M.reject(x.error):x.data!==void 0&&M.resolve(x.data)},P=()=>{const M=this.#a=x.promise=Dc();T(M)},A=this.#a;switch(A.status){case"pending":e.queryHash===n.queryHash&&T(A);break;case"fulfilled":(x.status==="error"||x.data!==A.value)&&P();break;case"rejected":(x.status!=="error"||x.error!==A.reason)&&P();break}}return x}updateResult(){const e=this.#r,t=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#s=this.options,this.#i.data!==void 0&&(this.#f=this.#t),Uo(t,e))return;this.#r=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,r=typeof i=="function"?i():i;if(r==="all"||!r&&!this.#p.size)return!0;const o=new Set(r??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#r).some(s=>{const a=s;return this.#r[a]!==e[a]&&o.has(a)})};this.#S({listeners:n()})}#w(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(e){nt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function AC(e,t){return At(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Rp(e,t){return AC(e,t)||e.state.data!==void 0&&Fc(e,t,t.refetchOnMount)}function Fc(e,t,n){if(At(t.enabled,e)!==!1&&Hn(t.staleTime,e)!=="static"){const i=typeof n=="function"?n(e):n;return i==="always"||i!==!1&&zc(e,t)}return!1}function Dp(e,t,n,i){return(e!==t||At(i.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&zc(e,n)}function zc(e,t){return At(t.enabled,e)!==!1&&e.isStaleByTime(Hn(t.staleTime,e))}function RC(e,t){return!Uo(e.getCurrentResult(),t)}function Lp(e){return{onFetch:(t,n)=>{const i=t.options,r=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],s=t.state.data?.pageParams||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let u=!1;const d=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},f=_p(t.options,t.fetchOptions),h=async(m,p,y)=>{if(u)return Promise.reject();if(p==null&&m.pages.length)return Promise.resolve(m);const S=(()=>{const b={client:t.client,queryKey:t.queryKey,pageParam:p,direction:y?"backward":"forward",meta:t.options.meta};return d(b),b})(),C=await f(S),{maxPages:w}=t.options,k=y?xC:TC;return{pages:k(m.pages,C,w),pageParams:k(m.pageParams,p,w)}};if(r&&o.length){const m=r==="backward",p=m?DC:Fp,y={pages:o,pageParams:s},g=p(i,y);a=await h(y,g,m)}else{const m=e??o.length;do{const p=c===0?s[0]??i.initialPageParam:Fp(i,a);if(c>0&&p==null)break;a=await h(a,p),c++}while(c<m)}return a};t.options.persister?t.fetchFn=()=>t.options.persister?.(l,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=l}}}function Fp(e,{pages:t,pageParams:n}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,n[i],n):void 0}function DC(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var LC=class extends Ip{#e;#t;#n;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||zp(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#i({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=Mp({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(o,s)=>{this.#i({type:"failed",failureCount:o,error:s})},onPause:()=>{this.#i({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",r=!this.#r.canStart();try{if(i)t();else{this.#i({type:"pending",variables:e,isPaused:r}),await this.#n.config.onMutate?.(e,this,n);const s=await this.options.onMutate?.(e,n);s!==this.state.context&&this.#i({type:"pending",context:s,variables:e,isPaused:r})}const o=await this.#r.start();return await this.#n.config.onSuccess?.(o,e,this.state.context,this,n),await this.options.onSuccess?.(o,e,this.state.context,n),await this.#n.config.onSettled?.(o,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(o,null,e,this.state.context,n),this.#i({type:"success",data:o}),o}catch(o){try{throw await this.#n.config.onError?.(o,e,this.state.context,this,n),await this.options.onError?.(o,e,this.state.context,n),await this.#n.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,o,e,this.state.context,n),o}finally{this.#i({type:"error",error:o})}}finally{this.#n.runNext(this)}}#i(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),nt.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function zp(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var FC=class extends qi{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,n){const i=new LC({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:n});return this.add(i),i}add(e){this.#e.add(e);const t=Bo(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Bo(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Bo(e);if(typeof t=="string"){const i=this.#t.get(t)?.find(r=>r.state.status==="pending");return!i||i===e}else return!0}runNext(e){const t=Bo(e);return typeof t=="string"?this.#t.get(t)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){nt.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>Sp(t,n))}findAll(e={}){return this.getAll().filter(t=>Sp(e,t))}notify(e){nt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return nt.batch(()=>Promise.all(e.map(t=>t.continue().catch(ft))))}};function Bo(e){return e.options.scope?.id}var zC=class extends qi{#e;#t=void 0;#n;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#e.defaultMutationOptions(e),Uo(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&mi(t.mutationKey)!==mi(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#s()}mutate(e,t){return this.#r=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??zp();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){nt.batch(()=>{if(this.#r&&this.hasListeners()){const t=this.#t.variables,n=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#r.onSuccess?.(e.data,t,n,i),this.#r.onSettled?.(e.data,null,t,n,i)):e?.type==="error"&&(this.#r.onError?.(e.error,t,n,i),this.#r.onSettled?.(void 0,e.error,t,n,i))}this.listeners.forEach(t=>{t(this.#t)})})}},UC=class extends qi{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const i=t.queryKey,r=t.queryHash??Ic(i,t);let o=this.get(r);return o||(o=new OC({client:e,queryKey:i,queryHash:r,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){nt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>wp(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>wp(e,n)):t}notify(e){nt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){nt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){nt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$C=class{#e;#t;#n;#r;#i;#s;#a;#o;constructor(e={}){this.#e=e.queryCache||new UC,this.#t=e.mutationCache||new FC,this.#n=e.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#a=Rc.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=jo.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#a?.(),this.#a=void 0,this.#o?.(),this.#o=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),i=n.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Hn(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const i=n.data;return[t,i]})}setQueryData(e,t,n){const i=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(i.queryHash)?.state.data,s=CC(t,o);if(s!==void 0)return this.#e.build(this,i).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return nt.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;nt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return nt.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},i=nt.batch(()=>this.#e.findAll(e).map(r=>r.cancel(n)));return Promise.all(i).then(ft).catch(ft)}invalidateQueries(e,t={}){return nt.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},i=nt.batch(()=>this.#e.findAll(e).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let o=r.fetch(void 0,n);return n.throwOnError||(o=o.catch(ft)),r.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(i).then(ft)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(Hn(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ft).catch(ft)}fetchInfiniteQuery(e){return e.behavior=Lp(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ft).catch(ft)}ensureInfiniteQueryData(e){return e.behavior=Lp(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return jo.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#r.set(mi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(i=>{Tr(e,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(e,t){this.#i.set(mi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()],n={};return t.forEach(i=>{Tr(e,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ic(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===$o&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Up=O.createContext(void 0),$p=e=>{const t=O.useContext(Up);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},jC=({client:e,children:t})=>(O.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),v.jsx(Up.Provider,{value:e,children:t})),jp=O.createContext(!1),BC=()=>O.useContext(jp);jp.Provider;function VC(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var qC=O.createContext(VC()),HC=()=>O.useContext(qC),WC=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},ZC=e=>{O.useEffect(()=>{e.clearReset()},[e])},GC=({result:e,errorResetBoundary:t,throwOnError:n,query:i,suspense:r})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(r&&e.data===void 0||Ep(n,[e.error,i])),KC=e=>{if(e.suspense){const n=r=>r==="static"?r:Math.max(r??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...r)=>n(i(...r)):n(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},YC=(e,t)=>e.isLoading&&e.isFetching&&!t,QC=(e,t)=>e?.suspense&&t.isPending,Bp=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()}),Vp={};function JC(e,t,n){if(Vp.NODE_ENV!=="production"&&(typeof e!="object"||Array.isArray(e)))throw new Error('Bad argument type. Starting with v5, only the "Object" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object');const i=BC(),r=HC(),o=$p(),s=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(s),Vp.NODE_ENV!=="production"&&(s.queryFn||console.error(`[${s.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`)),s._optimisticResults=i?"isRestoring":"optimistic",KC(s),WC(s,r),ZC(r);const a=!o.getQueryCache().get(s.queryHash),[c]=O.useState(()=>new t(o,s)),l=c.getOptimisticResult(s),u=!i&&e.subscribed!==!1;if(O.useSyncExternalStore(O.useCallback(d=>{const f=u?c.subscribe(nt.batchCalls(d)):ft;return c.updateResult(),f},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),O.useEffect(()=>{c.setOptions(s)},[s,c]),QC(s,l))throw Bp(s,c,r);if(GC({result:l,errorResetBoundary:r,throwOnError:s.throwOnError,query:o.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw l.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(s,l),s.experimental_prefetchInRender&&!pi&&YC(l,i)&&(a?Bp(s,c,r):o.getQueryCache().get(s.queryHash)?.promise)?.catch(ft).finally(()=>{c.updateResult()}),s.notifyOnChangeProps?l:c.trackResult(l)}function XC(e,t){return JC(e,NC)}function Uc(e,t){const n=$p(),[i]=O.useState(()=>new zC(n,e));O.useEffect(()=>{i.setOptions(e)},[i,e]);const r=O.useSyncExternalStore(O.useCallback(s=>i.subscribe(nt.batchCalls(s)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),o=O.useCallback((s,a)=>{i.mutate(s,a).catch(ft)},[i]);if(r.error&&Ep(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:o,mutateAsync:r.mutate}}const qp=e=>e==="local"||e==="development"?"https://webhooks.dev.sophiie.ai/api":"https://webhooks.sophiie.ai/api",$c=e=>{const{orgId:t,environment:n,isTestSophiie:i,testSophiieToken:r}=e,o=qp(n),s=()=>({"Content-Type":"application/json",...r&&i?{"X-Session-Token":r}:{}}),a=async(c,l,u=6e4)=>{const d=new AbortController,f=setTimeout(()=>d.abort(),u);try{const h=await fetch(c,{...l,signal:d.signal});if(clearTimeout(f),!h.ok){const p=(await h.json().catch(()=>({})))?.message||`HTTP ${h.status}: ${h.statusText}`;throw new Error(p)}return h}catch(h){throw clearTimeout(f),h}};return{get:c=>a(`${o}${c}`,{method:"GET",headers:s()}),post:(c,l,u)=>a(`${o}${c}`,{method:"POST",headers:s(),body:l?JSON.stringify({...l,orgId:t,...i&&{isTestSophiie:i}}):void 0,...u?.keepalive&&{keepalive:!0}})}},e4=e=>({queryKey:e.queryKey,queryFn:e.queryFn,staleTime:e.staleTime??300*1e3,gcTime:e.gcTime??600*1e3}),jc=e=>({mutationFn:e.mutationFn,onError:e.onError,onSuccess:e.onSuccess});function t4(e){const{orgId:t,environment:n}=e,i=$c(e);return XC(e4({queryKey:["chatbot","init",t,n],queryFn:async()=>{const r=n==="local"||n==="development"?"dev":"production",s=await(await i.get(`/chatbot/init?orgId=${t}&environment=${r}`)).json();return{featureFlags:{enableChatbotCall:s.featureFlags?.enableChatbotCall||!1},agentName:s.agentName||"Sophiie",orgLogo:s.orgLogo||null,config:{hidePoweredBy:s.config?.hidePoweredBy||!1}}}}))}const xr=U.createContext({}),tn=()=>U.useContext(xr),Hp=({children:e,config:t,modeType:n})=>{const i=n||t.defaultMode,[r,o]=U.useState(!1),[s,a]=U.useState(void 0),c=U.useCallback(C=>{a(()=>C)},[]),l=U.useCallback(()=>{o(!1)},[]),{data:u,isLoading:d}=t4({orgId:t.orgId,environment:t.environment}),f=u?.featureFlags.enableChatbotCall||!1,h=u?.agentName||"Sophiie",m=u?.config?.hidePoweredBy||!1,p=u?.orgLogo||null,y=t.defaultMode===tt.CALL?!0:f,g=U.useMemo(()=>({...t,orgLogo:p,hidePoweredBy:m}),[t,p,m]),S=U.useMemo(()=>({config:g,chat:{messages:[],input:"",handleInputChange:()=>{},handleSubmit:()=>{},isLoading:!1},startSession:()=>{},endSession:l,resetSession:()=>{},disconnectChat:s,setDisconnectChat:c,handleSubmit:()=>{},handleRetry:()=>{},chatId:"temp-id",sessionState:"idle",confirmEndChat:r,setConfirmEndChat:o,error:void 0,featureFlags:{enableChatbotCall:y,isLoading:d},agentName:h,modeType:i}),[g,y,h,d,r,l,s,c,i]);return v.jsx(xr.Provider,{value:S,children:v.jsx("div",{id:"sophiie-chat",style:{height:"100%"},children:e})})},n4=({setIsOpen:e,animationClass:t})=>v.jsx("div",{className:Te("fixed inset-0 z-40 transition-all duration-300",t==="open"?"bg-black/50 opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:()=>e(!1),style:{pointerEvents:t==="open"?"auto":"none"}}),Wp=U.createContext(null),Zp=({children:e})=>{const[t,n]=U.useState(!1),[i,r]=U.useState(void 0),o=U.useCallback(()=>{n(!0)},[]),s=U.useCallback(()=>{n(!1)},[]),a=U.useCallback(l=>{r(l)},[]),c={openWidget:o,minimizeWidget:s,isWidgetOpen:t,updateTestSophiieToken:a,testSophiieToken:i};return v.jsx(Wp.Provider,{value:c,children:e})},_r=()=>U.useContext(Wp),i4=(e,t)=>{const n=U.useRef(new Map);return{...e,mutateAsync:async(...i)=>{const r=t(...i),o=n.current.get(r);if(o)return console.log(`[withDeduplication] Returning existing pending call for key: ${r}`),o;const s=e.mutateAsync(...i);return n.current.set(r,s),s.finally(()=>{n.current.delete(r)}),s}}};function Gp(e){const{orgId:t}=e,n=$c(e),i=Uc(jc({mutationFn:async r=>await(await n.post("/chatbot/authorize-web-agent-call",{...r,isTestSophiie:e.isTestSophiie||!1,enableWebhook:!0})).json(),onError:r=>{console.error("Failed to authorize web agent call:",r)}}));return i4(i,r=>JSON.stringify({orgId:t,mode:r.mode,webAgentId:r.webAgentId}))}async function Kp(e){e.room.state&&e.room.state!==he.Disconnected&&(console.warn("LiveKit room was not in disconnected state before connecting.",{state:e.room.state}),await e.room.disconnect(!0)),await e.room.connect(e.url,e.sessionToken),await e.room.localParticipant.setMicrophoneEnabled(e.enableMicrophone??!0)}function Yp(e){(e.state===he.Connected||e.state===he.Reconnecting)&&e.disconnect()}var r4={};const o4=r4.NODE_ENV==="development";function ct(e,...t){o4&&console.log(`[Chatbot] ${e}`,...t)}const de={IDLE:"IDLE",INITIATING:"INITIATING",IN_PROGRESS:"IN_PROGRESS",ERROR:"ERROR"};function s4(e){return e.filter(t=>!t.removed&&t.role!=="system").map(t=>`${t.role}: ${t.content}`).join(`
`)}function a4({initCall:e,messages:t,modeSwitch:n,livekitRoom:i,onCallEnded:r,onCallStarted:o,orgId:s,environment:a="development",connectRoom:c,isTestSophiie:l,onSessionCleanup:u,testSophiieToken:d}){const f=()=>n.currentMode===tt.CALL&&i.state==="connected"?{status:de.IN_PROGRESS}:{status:de.IDLE},[h,m]=U.useState(f),p=U.useRef(null),y=U.useRef(!1),g=Gp({orgId:s,environment:a,isTestSophiie:l,testSophiieToken:d});U.useEffect(()=>{!c&&p.current&&(p.current.abort(),p.current=null)},[c]),U.useEffect(()=>{h.status===de.IDLE&&n.currentMode===tt.CALL&&i.state==="connected"&&m({status:de.IN_PROGRESS})},[n.currentMode,i.state,h.status]);const S=U.useCallback(()=>{Yp(i)},[i]),C=h.status===de.IN_PROGRESS||h.status===de.INITIATING,w=n.currentMode===tt.CALL,k=async()=>{ct("Call initiation requested",{roomState:i.state,isCallMode:w,callInProgress:C});try{if(i.state==="connected"&&!w){ct("Switching to call mode via RPC (already connected)");try{m({status:de.INITIATING}),y.current=!0;const P=await n.switchToCall();ct("Switched to call mode:",P),m({status:de.IN_PROGRESS}),y.current=!1,o?.();return}catch(P){console.warn("Failed to switch to call mode, agent may not be ready:",P),y.current=!1}}else{if(C){ct("Call already in progress, ignoring request");return}ct("Establishing new call connection",{messagesCount:t?.length||0}),n.setCurrentMode(tt.CALL),m({status:de.INITIATING}),y.current=!0;const P=new AbortController;p.current=P;const A=await g.mutateAsync({webAgentId:null,mode:"voice",historyPrompt:t?.length?s4(t):void 0});if(!A.success||!A.data)throw new Error(A.message||"Web agent data not received.");const M=A.data;ct("Call authorized, connecting to LiveKit",{url:`${M.url?.substring(0,50)}...`}),await Kp({url:M.url,sessionToken:M.sessionToken,room:i})}ct("Call successfully established"),m({status:de.IN_PROGRESS}),y.current=!1,p.current=null,o?.()}catch(P){if(P instanceof Error&&(P.message.includes("Client initiated disconnect")||P.message.includes("cannot send signal request before connected"))){y.current=!1;return}ct("Call failed",P),console.error("Failed to send RPC or authorize web agent call:",P);const M=P instanceof Error?P.message:"Unknown error occurred";if(M.includes("Operation aborted")||M.includes("AbortError")||P instanceof Error&&P.name==="AbortError"){S(),y.current=!1,p.current=null,m({status:de.IDLE});return}S(),y.current=!1,p.current=null,m({status:de.ERROR,error:{message:"Connection Failed",description:P instanceof Error?P.message:"Could not connect to the agent. Please try again."}})}},b=U.useCallback(()=>{ct("Call ending",{callStatus:h}),S()},[S,h]),x=async P=>{ct(`Microphone ${P?"unmute":"mute"} requested`);try{if(i?.localParticipant){await i.localParticipant.setMicrophoneEnabled(P),ct(`Microphone ${P?"unmuted":"muted"} successfully`);return}console.warn("No LiveKit local participant available for microphone control")}catch(A){console.error("Error controlling microphone:",A)}};U.useEffect(()=>{if(e&&n.currentMode===tt.CALL)return k(),()=>{i.state==="connected"&&b()}},[e]),U.useEffect(()=>{const P=R=>{if(ct("LiveKit Room disconnected",{callStatus:h,reason:R}),y.current){ct("Ignoring disconnect during call initiation",{reason:R});return}(h.status===de.IN_PROGRESS||h.status===de.INITIATING)&&(ct("Call ended due to room disconnection",{reason:R}),m({status:de.IDLE}),r?.(),u?.())},A=()=>{ct("LiveKit Room reconnecting",{callStatus:h})},M=()=>{ct("LiveKit Room reconnected",{callStatus:h}),h.status===de.ERROR&&w&&m({status:de.IN_PROGRESS})};return i.on("disconnected",P),i.on("reconnecting",A),i.on("reconnected",M),()=>{i.off("disconnected",P),i.off("reconnecting",A),i.off("reconnected",M)}},[i,h,r,w]),U.useEffect(()=>{if(h.status===de.ERROR){const P=setTimeout(()=>{m({status:de.IDLE})},3e4);return()=>clearTimeout(P)}},[h]);const T=U.useCallback(()=>{m({status:de.IDLE})},[]);return{callStatus:h,livekitRoom:i,startCall:k,endCall:b,toggleMicrophone:x,dismissError:T}}function c4(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let l=0;l<t.length;l++)t[l]=255;for(let l=0;l<e.length;l++){const u=e.charAt(l),d=u.charCodeAt(0);if(t[d]!==255)throw new TypeError(u+" is ambiguous");t[d]=l}const n=e.length,i=e.charAt(0),r=Math.log(n)/Math.log(256),o=Math.log(256)/Math.log(n);function s(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,f=0;const h=l.length;for(;f!==h&&l[f]===0;)f++,u++;const m=(h-f)*o+1>>>0,p=new Uint8Array(m);for(;f!==h;){let S=l[f],C=0;for(let w=m-1;(S!==0||C<d)&&w!==-1;w--,C++)S+=256*p[w]>>>0,p[w]=S%n>>>0,S=S/n>>>0;if(S!==0)throw new Error("Non-zero carry");d=C,f++}let y=m-d;for(;y!==m&&p[y]===0;)y++;let g=i.repeat(u);for(;y<m;++y)g+=e.charAt(p[y]);return g}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,f=0;for(;l[u]===i;)d++,u++;const h=(l.length-u)*r+1>>>0,m=new Uint8Array(h);for(;u<l.length;){const S=l.charCodeAt(u);if(S>255)return;let C=t[S];if(C===255)return;let w=0;for(let k=h-1;(C!==0||w<f)&&k!==-1;k--,w++)C+=n*m[k]>>>0,m[k]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");f=w,u++}let p=h-f;for(;p!==h&&m[p]===0;)p++;const y=new Uint8Array(d+(h-p));let g=d;for(;p!==h;)y[g++]=m[p++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:s,decodeUnsafe:a,decode:c}}const l4=c4("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function Vo(){const e=crypto.getRandomValues(new Uint8Array(20)),n=Date.now()-17e11;return e[0]=n>>>24&255,e[1]=n>>>16&255,e[2]=n>>>8&255,e[3]=n&255,`${l4.encode(e)}`}const Bc=e=>{const t="SOPHIIE_CHATBOT_CHAT_DATA";return e?`${t}_${e}`:t},Qp=e=>{const t=Bc(e),n=localStorage.getItem(t);return n?JSON.parse(n):null},Jp=(e,t)=>{const n=Bc(t);localStorage.setItem(n,JSON.stringify({chatId:e.chatId,sessionState:e.sessionState,messages:e.messages}))},Vc=e=>{const t=Bc(e);localStorage.removeItem(t)},qo={IDLE:"IDLE",RUNNING:"RUNNING",ERROR:"ERROR",COMPLETED:"COMPLETED"},u4=e=>e.map(n=>{const i=n.createdAt?new Date((typeof n.createdAt=="number",n.createdAt)).toLocaleTimeString():"",r=n.role==="assistant"?"Assistant":"User";return`[${i}] ${r}: ${n.content}`}).join(`
`),d4=({orgId:e,livekitRoom:t,config:n,onDisconnect:i,connectRoom:r})=>{const s=_r()?.testSophiieToken,[a,c]=U.useState({status:de.IDLE}),l=U.useRef(!1),u=U.useRef(e),d=U.useRef(t),f=U.useRef(a),h=U.useRef(null);u.current=e,d.current=t,f.current=a;const m=Gp({orgId:e,environment:n.environment,isTestSophiie:n.isTestSophiie,testSophiieToken:s});U.useEffect(()=>{!r&&h.current&&(h.current.abort(),h.current=null)},[r]);const p=U.useCallback(async S=>{if(!r&&!S?.force)return{success:!1,error:"Connection disabled"};const C=d.current,w=u.current,k=f.current;if(k.status===de.IN_PROGRESS||k.status===de.INITIATING||C.state===he.Connected||C.state===he.Connecting||l.current)return{success:!0};l.current=!0,c({status:de.INITIATING});try{if(!w)throw new Error("Organization ID not available.");const b=new AbortController;h.current=b;const x=await m.mutateAsync({webAgentId:null,mode:"text",historyPrompt:u4(S?.messages||[])});if(!x.success||!x.data)throw new Error(x.message||"Failed to authorize web agent call");const T=x.data;return await Kp({url:T.url,sessionToken:T.sessionToken,room:C,enableMicrophone:!1}),l.current=!1,h.current=null,{success:!0}}catch(b){const x=b instanceof Error?b.message:"Unknown error occurred";return x.includes("Operation aborted")||x.includes("AbortError")||b instanceof Error&&b.name==="AbortError"?(l.current=!1,h.current=null,c({status:de.IDLE}),{success:!1,error:"Aborted"}):(y(),c({status:de.ERROR,error:{message:x||"Authorization Failed",description:x?.includes("Feature is disabled")?"The business has disabled this chatbot feature.":x?.includes("active session already exists")?"Please wait for the current session to complete.":"Please try again or contact support if the issue persists."}}),l.current=!1,h.current=null,{success:!1,error:x})}},[r]),y=U.useCallback(()=>{const S=d.current;f.current.status===de.IN_PROGRESS&&i?.(),S.localParticipant.setMicrophoneEnabled(!1),Yp(S),c({status:de.IDLE})},[i]);U.useEffect(()=>{const S=()=>{f.current.status===de.IN_PROGRESS&&(i?.(),c({status:de.IDLE}))},C=()=>{f.current.status===de.INITIATING&&c({status:de.IN_PROGRESS})};if(t)return t.on("disconnected",S),t.on("connected",C),()=>{t.off("disconnected",S),t.off("connected",C)}},[t,i]);const g=U.useCallback(()=>{c({status:de.IDLE})},[]);return U.useEffect(()=>{if(a.status===de.ERROR){const S=setTimeout(()=>{c({status:de.IDLE})},3e4);return()=>clearTimeout(S)}},[a]),{connectChat:p,disconnectChat:y,livekitRoomStatus:a,setLivekitRoomStatus:c,dismissError:g}};function Xp(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function em(...e){return t=>{let n=!1;const i=e.map(r=>{const o=Xp(r,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let r=0;r<i.length;r++){const o=i[r];typeof o=="function"?o():Xp(e[r],null)}}}}function gi(...e){return O.useCallback(em(...e),e)}function tm(e){const t=f4(e),n=O.forwardRef((i,r)=>{const{children:o,...s}=i,a=O.Children.toArray(o),c=a.find(m4);if(c){const l=c.props.children,u=a.map(d=>d===c?O.Children.count(l)>1?O.Children.only(null):O.isValidElement(l)?l.props.children:null:d);return v.jsx(t,{...s,ref:r,children:O.isValidElement(l)?O.cloneElement(l,void 0,u):null})}return v.jsx(t,{...s,ref:r,children:o})});return n.displayName=`${e}.Slot`,n}var h4=tm("Slot");function f4(e){const t=O.forwardRef((n,i)=>{const{children:r,...o}=n;if(O.isValidElement(r)){const s=v4(r),a=g4(o,r.props);return r.type!==O.Fragment&&(a.ref=i?em(i,s):s),O.cloneElement(r,a)}return O.Children.count(r)>1?O.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var nm=Symbol("radix.slottable");function p4(e){const t=({children:n})=>v.jsx(v.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=nm,t}function m4(e){return O.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===nm}function g4(e,t){const n={...t};for(const i in t){const r=e[i],o=t[i];/^on[A-Z]/.test(i)?r&&o?n[i]=(...a)=>{const c=o(...a);return r(...a),c}:r&&(n[i]=r):i==="style"?n[i]={...r,...o}:i==="className"&&(n[i]=[r,o].filter(Boolean).join(" "))}return{...e,...n}}function v4(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const y4=M3("inline-flex items-center gap-2 justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-xs hover:bg-destructive/90",outline:"border border-gray-300 text-gray-700 bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"border border-brand-300 bg-secondary text-center text-secondary-foreground shadow-xs hover:bg-primary hover:text-primary-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-brand-700 underline-offset-4 hover:underline",success:"bg-success-500 text-white hover:bg-success-500/90"},size:{sm:"h-8 rounded-md px-3 text-xs",md:"h-9 px-4 py-2",lg:"h-10 rounded-lg px-3.5 py-2.5",icon:"size-8"}},defaultVariants:{variant:"primary",size:"md"}}),im=O.forwardRef(({className:e,variant:t,size:n,asChild:i=!1,disabled:r,children:o,type:s="button",isLoading:a=!1,...c},l)=>{const u=i?h4:"button",d={className:Te(y4({variant:t,size:n,className:e})),ref:l,disabled:a||r,type:s,...c};return v.jsx(u,{...d,children:o})});im.displayName="ButtonBase";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),k4=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),rm=e=>{const t=k4(e);return t.charAt(0).toUpperCase()+t.slice(1)},om=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),C4=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var w4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=U.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:o,iconNode:s,...a},c)=>U.createElement("svg",{ref:c,...w4,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:om("lucide",r),...!o&&!C4(a)&&{"aria-hidden":"true"},...a},[...s.map(([l,u])=>U.createElement(l,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=(e,t)=>{const n=U.forwardRef(({className:i,...r},o)=>U.createElement(S4,{ref:o,iconNode:t,className:om(`lucide-${b4(rm(e))}`,`lucide-${e}`,i),...r}));return n.displayName=rm(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=N("a-large-small",[["path",{d:"m15 16 2.536-7.328a1.02 1.02 1 0 1 1.928 0L22 16",key:"xik6mr"}],["path",{d:"M15.697 14h5.606",key:"1stdlc"}],["path",{d:"m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16",key:"d5nyq2"}],["path",{d:"M3.304 13h6.392",key:"1q3zxz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=N("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=N("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=N("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=N("arrow-down-to-line",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=N("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=N("arrow-left-right",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=N("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=N("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=N("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=N("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=N("at-sign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=N("audio-waveform",[["path",{d:"M2 13a2 2 0 0 0 2-2V7a2 2 0 0 1 4 0v13a2 2 0 0 0 4 0V4a2 2 0 0 1 4 0v13a2 2 0 0 0 4 0v-4a2 2 0 0 1 2-2",key:"57tc96"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=N("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=N("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=N("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=N("bell-plus",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M15 8h6",key:"8ybuxh"}],["path",{d:"M18 5v6",key:"g5ayrv"}],["path",{d:"M20.002 14.464a9 9 0 0 0 .738.863A1 1 0 0 1 20 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 8.75-5.332",key:"1abcvy"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=N("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=N("blocks",[["path",{d:"M10 22V7a1 1 0 0 0-1-1H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5a1 1 0 0 0-1-1H2",key:"1ah6g2"}],["rect",{x:"14",y:"2",width:"8",height:"8",rx:"1",key:"88lufb"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=N("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=N("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=N("bot-message-square",[["path",{d:"M12 6V2H8",key:"1155em"}],["path",{d:"M15 11v2",key:"i11awn"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 16a2 2 0 0 1-2 2H8.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 4 20.286V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2z",key:"11gyqh"}],["path",{d:"M9 11v2",key:"1ueba0"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=N("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=N("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=N("brick-wall",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 9v6",key:"199k2o"}],["path",{d:"M16 15v6",key:"8rj2es"}],["path",{d:"M16 3v6",key:"1j6rpj"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M8 15v6",key:"1stoo3"}],["path",{d:"M8 3v6",key:"vlvjmk"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=N("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=N("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=N("cable",[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=N("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=N("calendar-check",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=N("calendar-cog",[["path",{d:"m15.228 16.852-.923-.383",key:"npixar"}],["path",{d:"m15.228 19.148-.923.383",key:"51cr3n"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"m16.47 14.305.382.923",key:"obybxd"}],["path",{d:"m16.852 20.772-.383.924",key:"dpfhf9"}],["path",{d:"m19.148 15.228.383-.923",key:"1reyyz"}],["path",{d:"m19.53 21.696-.382-.924",key:"1goivc"}],["path",{d:"m20.772 16.852.924-.383",key:"htqkph"}],["path",{d:"m20.772 19.148.924.383",key:"9w9pjp"}],["path",{d:"M21 10.592V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"1pvbig"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=N("calendar-plus",[["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M21 12.598V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5",key:"1glfrc"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=N("calendar-x-2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m17 22 5-5",key:"1k6ppv"}],["path",{d:"m17 17 5 5",key:"p7ous7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=N("calendar-x",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=N("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=N("chart-bar",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=N("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=N("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=N("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=N("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=N("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=N("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=N("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=N("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=N("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=N("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=N("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=N("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=N("circle-dollar-sign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=N("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=N("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=N("circle-stop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=N("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=N("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=N("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=N("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=N("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=N("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=N("cog",[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=N("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=N("command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=N("copy-check",[["path",{d:"m12 15 2 2 4-4",key:"2c609p"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=N("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=N("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=N("crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=N("crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=N("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=N("delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=N("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=N("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=N("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=N("ear",[["path",{d:"M6 8.5a6.5 6.5 0 1 1 13 0c0 6-6 6-6 10a3.5 3.5 0 1 1-7 0",key:"1dfaln"}],["path",{d:"M15 8.5a2.5 2.5 0 0 0-5 0v1a2 2 0 1 1 0 4",key:"1qnva7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=N("earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=N("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=N("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=N("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=N("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=N("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=N("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=N("fence",[["path",{d:"M4 3 2 5v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"1n2rgs"}],["path",{d:"M6 8h4",key:"utf9t1"}],["path",{d:"M6 18h4",key:"12yh4b"}],["path",{d:"m12 3-2 2v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"3ha7mj"}],["path",{d:"M14 8h4",key:"1r8wg2"}],["path",{d:"M14 18h4",key:"1t3kbu"}],["path",{d:"m20 3-2 2v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"dfd4e2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=N("file-archive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=N("file-lock-2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v1",key:"jmtmu2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["rect",{width:"8",height:"5",x:"2",y:"13",rx:"1",key:"10y5wo"}],["path",{d:"M8 13v-2a2 2 0 1 0-4 0v2",key:"1pdxzg"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=N("file-pen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=N("file-play",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=N("file-spreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=N("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=N("file-warning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=N("file-x",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=N("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=N("fire-extinguisher",[["path",{d:"M15 6.5V3a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v3.5",key:"sqyvz"}],["path",{d:"M9 18h8",key:"i7pszb"}],["path",{d:"M18 3h-3",key:"7idoqj"}],["path",{d:"M11 3a6 6 0 0 0-6 6v11",key:"1v5je3"}],["path",{d:"M5 13h4",key:"svpcxo"}],["path",{d:"M17 10a4 4 0 0 0-8 0v10a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2Z",key:"vsjego"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=N("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=N("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=N("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=N("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=N("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=N("hand-helping",[["path",{d:"M11 12h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 14",key:"1j4xps"}],["path",{d:"m7 18 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"uospg8"}],["path",{d:"m2 13 6 6",key:"16e5sb"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=N("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=N("headset",[["path",{d:"M3 11h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5Zm0 0a9 9 0 1 1 18 0m0 0v5a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3Z",key:"12oyoe"}],["path",{d:"M21 16v2a4 4 0 0 1-4 4h-5",key:"1x7m43"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=N("hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=N("house-plus",[["path",{d:"M12.35 21H5a2 2 0 0 1-2-2v-9a2 2 0 0 1 .71-1.53l7-6a2 2 0 0 1 2.58 0l7 6A2 2 0 0 1 21 10v2.35",key:"8ek5ge"}],["path",{d:"M14.8 12.4A1 1 0 0 0 14 12h-4a1 1 0 0 0-1 1v8",key:"1rbg29"}],["path",{d:"M15 18h6",key:"3b3c90"}],["path",{d:"M18 15v6",key:"9wciyi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=N("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=N("image-play",[["path",{d:"M15 15.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"nrt1m3"}],["path",{d:"M21 12.17V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"99hgts"}],["path",{d:"m6 21 5-5",key:"1wyjai"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=N("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=N("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=N("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=N("laptop",[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=N("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=N("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=N("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=N("list-filter",[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=N("list-plus",[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=N("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=N("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=N("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=N("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=N("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=N("logs",[["path",{d:"M3 5h1",key:"1mv5vm"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M3 19h1",key:"w6f3n9"}],["path",{d:"M8 5h1",key:"1nxr5w"}],["path",{d:"M8 12h1",key:"1con00"}],["path",{d:"M8 19h1",key:"k7p10e"}],["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=N("mail-x",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h9",key:"1j9vog"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m17 17 4 4",key:"1b3523"}],["path",{d:"m21 17-4 4",key:"uinynz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=N("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=N("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=N("message-circle-heart",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}],["path",{d:"M7.828 13.07A3 3 0 0 1 12 8.764a3 3 0 0 1 5.004 2.224 3 3 0 0 1-.832 2.083l-3.447 3.62a1 1 0 0 1-1.45-.001z",key:"hoo97p"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=N("message-circle-more",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=N("message-circle-x",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=N("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=N("message-square-heart",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7.5 9.5c0 .687.265 1.383.697 1.844l3.009 3.264a1.14 1.14 0 0 0 .407.314 1 1 0 0 0 .783-.004 1.14 1.14 0 0 0 .398-.31l3.008-3.264A2.77 2.77 0 0 0 16.5 9.5 2.5 2.5 0 0 0 12 8a2.5 2.5 0 0 0-4.5 1.5",key:"1faxuh"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=N("message-square-x",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"m14.5 8.5-5 5",key:"19tnj2"}],["path",{d:"m9.5 8.5 5 5",key:"1oa8ql"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=N("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=N("mic-off",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=N("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=N("milestone",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M12 3v3",key:"1n5kay"}],["path",{d:"M4 6a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h13a2 2 0 0 0 1.152-.365l3.424-2.317a1 1 0 0 0 0-1.635l-3.424-2.318A2 2 0 0 0 17 6z",key:"1btarq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=N("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=N("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=N("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=N("paint-roller",[["rect",{width:"16",height:"6",x:"2",y:"2",rx:"2",key:"jcyz7m"}],["path",{d:"M10 16v-2a2 2 0 0 1 2-2h8a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2",key:"1b9h7c"}],["rect",{width:"4",height:"6",x:"8",y:"16",rx:"1",key:"d6e7yl"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=N("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=N("panel-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=N("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=N("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=N("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=N("pencil-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=N("pencil-ruler",[["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=N("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=N("phone-call",[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=N("phone-incoming",[["path",{d:"M16 2v6h6",key:"1mfrl5"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=N("phone-off",[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=N("phone-outgoing",[["path",{d:"m16 8 6-6",key:"oawc05"}],["path",{d:"M22 8V2h-6",key:"oqy2zc"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=N("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=N("pizza",[["path",{d:"m12 14-1 1",key:"11onhr"}],["path",{d:"m13.75 18.25-1.25 1.42",key:"1yisr3"}],["path",{d:"M17.775 5.654a15.68 15.68 0 0 0-12.121 12.12",key:"1qtqk6"}],["path",{d:"M18.8 9.3a1 1 0 0 0 2.1 7.7",key:"fbbbr2"}],["path",{d:"M21.964 20.732a1 1 0 0 1-1.232 1.232l-18-5a1 1 0 0 1-.695-1.232A19.68 19.68 0 0 1 15.732 2.037a1 1 0 0 1 1.232.695z",key:"1hyfdd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=N("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=N("plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=N("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=N("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=N("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=N("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=N("remove-formatting",[["path",{d:"M4 7V4h16v3",key:"9msm58"}],["path",{d:"M5 20h6",key:"1h6pxn"}],["path",{d:"M13 4 8 20",key:"kqq6aj"}],["path",{d:"m15 15 5 5",key:"me55sn"}],["path",{d:"m20 15-5 5",key:"11p7ol"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=N("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=N("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=N("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=N("send-horizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=N("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=N("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=N("shield-ban",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m4.243 5.21 14.39 12.472",key:"1c9a7c"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=N("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=N("shield-plus",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9 12h6",key:"1c52cq"}],["path",{d:"M12 9v6",key:"199k2o"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=N("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=N("shovel",[["path",{d:"M21.56 4.56a1.5 1.5 0 0 1 0 2.122l-.47.47a3 3 0 0 1-4.212-.03 3 3 0 0 1 0-4.243l.44-.44a1.5 1.5 0 0 1 2.121 0z",key:"1gcedi"}],["path",{d:"M3 22a1 1 0 0 1-1-1v-3.586a1 1 0 0 1 .293-.707l3.355-3.355a1.205 1.205 0 0 1 1.704 0l3.296 3.296a1.205 1.205 0 0 1 0 1.704l-3.355 3.355a1 1 0 0 1-.707.293z",key:"pg9kv3"}],["path",{d:"m9 15 7.879-7.878",key:"1o1zgh"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=N("shower-head",[["path",{d:"m4 4 2.5 2.5",key:"uv2vmf"}],["path",{d:"M13.5 6.5a4.95 4.95 0 0 0-7 7",key:"frdkwv"}],["path",{d:"M15 5 5 15",key:"1ag8rq"}],["path",{d:"M14 17v.01",key:"eokfpp"}],["path",{d:"M10 16v.01",key:"14uyyl"}],["path",{d:"M13 13v.01",key:"1v1k97"}],["path",{d:"M16 10v.01",key:"5169yg"}],["path",{d:"M11 20v.01",key:"cj92p8"}],["path",{d:"M17 14v.01",key:"11cswd"}],["path",{d:"M20 11v.01",key:"19e0od"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=N("skip-forward",[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=N("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=N("sparkle",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=N("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=N("square-user",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=N("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=N("step-back",[["path",{d:"M13.971 4.285A2 2 0 0 1 17 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"19qhus"}],["path",{d:"M21 20V4",key:"cb8qj8"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=N("step-forward",[["path",{d:"M10.029 4.285A2 2 0 0 0 7 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"1ystz2"}],["path",{d:"M3 4v16",key:"1ph11n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=N("sticky-note",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=N("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=N("sun-medium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=N("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=N("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=N("tags",[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=N("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=N("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=N("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=N("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=N("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=N("trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=N("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=N("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=N("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=N("unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=N("unplug",[["path",{d:"m19 5 3-3",key:"yk6iyv"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z",key:"1snsnr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=N("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=N("user-pen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=N("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=N("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=N("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=N("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=N("venetian-mask",[["path",{d:"M18 11c-1.5 0-2.5.5-3 2",key:"1fod00"}],["path",{d:"M4 6a2 2 0 0 0-2 2v4a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V8a2 2 0 0 0-2-2h-3a8 8 0 0 0-5 2 8 8 0 0 0-5-2z",key:"d70hit"}],["path",{d:"M6 11c1.5 0 2.5.5 3 2",key:"136fht"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=N("voicemail",[["circle",{cx:"6",cy:"12",r:"4",key:"1ehtga"}],["circle",{cx:"18",cy:"12",r:"4",key:"4vafl8"}],["line",{x1:"6",x2:"18",y1:"16",y2:"16",key:"pmt8us"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=N("volume-1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=N("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=N("volume-off",[["path",{d:"M16 9a5 5 0 0 1 .95 2.293",key:"1fgyg8"}],["path",{d:"M19.364 5.636a9 9 0 0 1 1.889 9.96",key:"l3zxae"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"m7 7-.587.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298V11",key:"1gbwow"}],["path",{d:"M9.828 4.172A.686.686 0 0 1 11 4.657v.686",key:"s2je0y"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=N("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=N("waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=N("wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=N("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=N("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=N("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=N("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=N("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),cS={aLargeSmall:T4,activity:x4,add:gm,admin:pw,alertCircle:am,apps:e=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[v.jsx("path",{d:"M8.4 3H4.6C4.03995 3 3.75992 3 3.54601 3.10899C3.35785 3.20487 3.20487 3.35785 3.10899 3.54601C3 3.75992 3 4.03995 3 4.6V8.4C3 8.96005 3 9.24008 3.10899 9.45399C3.20487 9.64215 3.35785 9.79513 3.54601 9.89101C3.75992 10 4.03995 10 4.6 10H8.4C8.96005 10 9.24008 10 9.45399 9.89101C9.64215 9.79513 9.79513 9.64215 9.89101 9.45399C10 9.24008 10 8.96005 10 8.4V4.6C10 4.03995 10 3.75992 9.89101 3.54601C9.79513 3.35785 9.64215 3.20487 9.45399 3.10899C9.24008 3 8.96005 3 8.4 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),v.jsx("path",{d:"M19.4 3H15.6C15.0399 3 14.7599 3 14.546 3.10899C14.3578 3.20487 14.2049 3.35785 14.109 3.54601C14 3.75992 14 4.03995 14 4.6V8.4C14 8.96005 14 9.24008 14.109 9.45399C14.2049 9.64215 14.3578 9.79513 14.546 9.89101C14.7599 10 15.0399 10 15.6 10H19.4C19.9601 10 20.2401 10 20.454 9.89101C20.6422 9.79513 20.7951 9.64215 20.891 9.45399C21 9.24008 21 8.96005 21 8.4V4.6C21 4.03995 21 3.75992 20.891 3.54601C20.7951 3.35785 20.6422 3.20487 20.454 3.10899C20.2401 3 19.9601 3 19.4 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),v.jsx("path",{d:"M19.4 14H15.6C15.0399 14 14.7599 14 14.546 14.109C14.3578 14.2049 14.2049 14.3578 14.109 14.546C14 14.7599 14 15.0399 14 15.6V19.4C14 19.9601 14 20.2401 14.109 20.454C14.2049 20.6422 14.3578 20.7951 14.546 20.891C14.7599 21 15.0399 21 15.6 21H19.4C19.9601 21 20.2401 21 20.454 20.891C20.6422 20.7951 20.7951 20.6422 20.891 20.454C21 20.2401 21 19.9601 21 19.4V15.6C21 15.0399 21 14.7599 20.891 14.546C20.7951 14.3578 20.6422 14.2049 20.454 14.109C20.2401 14 19.9601 14 19.4 14Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),v.jsx("path",{d:"M8.4 14H4.6C4.03995 14 3.75992 14 3.54601 14.109C3.35785 14.2049 3.20487 14.3578 3.10899 14.546C3 14.7599 3 15.0399 3 15.6V19.4C3 19.9601 3 20.2401 3.10899 20.454C3.20487 20.6422 3.35785 20.7951 3.54601 20.891C3.75992 21 4.03995 21 4.6 21H8.4C8.96005 21 9.24008 21 9.45399 20.891C9.64215 20.7951 9.79513 20.6422 9.89101 20.454C10 20.2401 10 19.9601 10 19.4V15.6C10 15.0399 10 14.7599 9.89101 14.546C9.79513 14.3578 9.64215 14.2049 9.45399 14.109C9.24008 14 8.96005 14 8.4 14Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),archive:_4,arrowDown:M4,arrowDownRight:E4,arrowDownToLine:P4,arrowLeft:O4,arrowRight:N4,arrowUp:R4,arrowUpRight:A4,arrowLeftRight:I4,atSign:D4,audioWaveform:L4,badgeCheck:F4,ban:z4,bankNote:U4,bell:j4,bellPlus:$4,billing:um,blocks:B4,bold:V4,bot:W4,botMessageSquare:H4,brain:Z4,brickWall:G4,briefcase:K4,building2:sm,cable:Y4,calculator:Q4,calendar:i6,calendarCheck:J4,calendarCog:X4,calendarOne:e=>v.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:v.jsx("path",{d:"M21 10H3M16 2V6M8 2V6M10.5 14L12 13V18M10.75 18H13.25M7.8 22H16.2C17.8802 22 18.7202 22 19.362 21.673C19.9265 21.3854 20.3854 20.9265 20.673 20.362C21 19.7202 21 18.8802 21 17.2V8.8C21 7.11984 21 6.27976 20.673 5.63803C20.3854 5.07354 19.9265 4.6146 19.362 4.32698C18.7202 4 17.8802 4 16.2 4H7.8C6.11984 4 5.27976 4 4.63803 4.32698C4.07354 4.6146 3.6146 5.07354 3.32698 5.63803C3 6.27976 3 7.11984 3 8.8V17.2C3 18.8802 3 19.7202 3.32698 20.362C3.6146 20.9265 4.07354 21.3854 4.63803 21.673C5.27976 22 6.11984 22 7.8 22Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),calendarPlus:e6,calendarX:n6,calendarX2:t6,cash:dm,catalog:q4,chartBar:r6,check:s6,checkCircle:p6,chevronDown:a6,chevronLeft:c6,chevronRight:l6,chevronUp:u6,chevronsLeft:d6,chevronsRight:h6,chevronsUpDown:f6,circle:b6,circleCheck:m6,circleQuestionMark:cm,dollarSign:dm,circleDollarSign:g6,circleX:lm,clear:z6,clock:k6,close:rS,closeCircle:lm,cloud:w6,code:S6,cog:T6,command:_6,coins:x6,copy:P6,copyCheck:E6,creditCard:um,crop:M6,crossHair:I6,database:O6,delete:N6,download:A6,droplets:R6,ear:D6,earth:L6,edit:Z5,edit2:q5,ellipsis:hm,ellipsisVertical:hm,error:am,external:U6,eye:fm,eyeOff:$6,fence:j6,flask:J6,file:K6,fileAlt:e=>v.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:v.jsx("path",{d:"M14 11H8M10 15H8M16 7H8M20 6.8V17.2C20 18.8802 20 19.7202 19.673 20.362C19.3854 20.9265 18.9265 21.3854 18.362 21.673C17.7202 22 16.8802 22 15.2 22H8.8C7.11984 22 6.27976 22 5.63803 21.673C5.07354 21.3854 4.6146 20.9265 4.32698 20.362C4 19.7202 4 18.8802 4 17.2V6.8C4 5.11984 4 4.27976 4.32698 3.63803C4.6146 3.07354 5.07354 2.6146 5.63803 2.32698C6.27976 2 7.11984 2 8.8 2H15.2C16.8802 2 17.7202 2 18.362 2.32698C18.9265 2.6146 19.3854 3.07354 19.673 3.63803C20 4.27976 20 5.11984 20 6.8Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),fileArchive:B6,fileLock2:pm,filePen:V6,fileSpreadsheet:H6,fileText:W6,fileVideo:q6,fileWarning:Z6,fileX:G6,fireExtinguisher:Y6,flag:Q6,globe:X6,grid3x3:e5,gripVertical:t5,handshake:i5,headset:r5,help:cm,helpingHand:n5,home:a5,hourglass:o5,housePlus:s5,image:mm,imagePlay:c5,impersonate:Kw,info:l5,italic:u5,laptop:d5,layers:h5,leaf:f5,link:p5,list:v5,listAdd:g5,listFilter:m5,loader:b5,loader2:y5,logout:C5,logs:w5,mail:T5,mailX:S5,mapPin:x5,media:mm,messageCircle:M5,messageCircleHeart:_5,messageCircleMore:E5,messageCircleX:P5,messageSquare:N5,messageSquareHeart:I5,messageSquareX:O5,mic:R5,micOff:A5,milestone:D5,minus:L5,moon:F5,moreHorizontal:F6,organization:sm,outlook:e=>v.jsxs("svg",{width:"24px",height:"24px",viewBox:"0 0 0.96 0.96",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"true",...e,children:[v.jsx("title",{children:"file_type_outlook"}),v.jsx("path",{d:"M0.585 0.238v0.164l0.057 0.036a0.015 0.015 0 0 0 0.006 0l0.247 -0.167a0.035 0.035 0 0 0 -0.029 -0.034Z",fill:"currentColor"}),v.jsx("path",{d:"m0.585 0.464 0.052 0.036a0.016 0.016 0 0 0 0.016 0c-0.009 0.005 0.242 -0.161 0.242 -0.161v0.302a0.042 0.042 0 0 1 -0.045 0.047h-0.266v-0.223Z",fill:"currentColor"}),v.jsx("path",{d:"M0.313 0.388a0.048 0.048 0 0 0 -0.043 0.025 0.124 0.124 0 0 0 -0.016 0.067A0.121 0.121 0 0 0 0.271 0.546a0.048 0.048 0 0 0 0.083 0.001 0.12 0.12 0 0 0 0.015 -0.066 0.131 0.131 0 0 0 -0.015 -0.068 0.046 0.046 0 0 0 -0.041 -0.024",fill:"currentColor"}),v.jsx("path",{d:"M0.065 0.155v0.643L0.554 0.9V0.06Zm0.327 0.43a0.097 0.097 0 0 1 -0.081 0.041 0.096 0.096 0 0 1 -0.079 -0.04A0.164 0.164 0 0 1 0.201 0.483a0.176 0.176 0 0 1 0.031 -0.108 0.098 0.098 0 0 1 0.082 -0.042 0.094 0.094 0 0 1 0.078 0.04 0.169 0.169 0 0 1 0.03 0.105 0.173 0.173 0 0 1 -0.031 0.108",fill:"currentColor"})]}),package:z5,paintRoller:U5,panelLeft:j5,pause:B5,pencilLine:H5,pencilRuler:W5,penTool:V5,phone:J5,phoneCall:G5,phoneIncoming:K5,phoneOff:Y5,phoneOutgoing:Q5,pizza:X5,play:ew,plug:tw,plus:gm,plusCircle:v6,quote:nw,refreshCcw:iw,refreshCw:rw,removeFormatting:ow,roles:pm,rotateCcw:sw,save:aw,search:cw,security:k5,send:lw,sendAlt:uw,settings:dw,shield:mw,shieldBan:hw,shieldCheck:fw,shovel:gw,showerHead:vw,skipForward:yw,slidersHorizontal:bw,sparkle:kw,squareCheckBig:Cw,squareUser:ww,star:Sw,stats:o6,stepBack:Tw,stepForward:xw,stickyNote:_w,stop:y6,strikethrough:Ew,sun:Pw,table:Mw,tag:Iw,tags:Ow,timer:Nw,toggleLeft:Aw,toggleRight:Rw,trash:Lw,trash2:Dw,trees:Fw,underline:Uw,undo:$w,unlink:jw,unplug:Bw,upload:C6,uploadBasic:Vw,user:Zw,userPen:qw,userPlus:Hw,userX:Ww,users:Gw,view:fm,voicemail:Yw,volume:Qw,volume2:Jw,volume3:Xw,wallet:eS,warning:zw,waves:tS,wind:nS,wrench:iS,zap:oS,zoomOut:aS,zoomIn:sS,attachment:e=>v.jsx("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:v.jsx("g",{id:"attachment-02",children:v.jsx("path",{id:"Icon",d:"M15.0834 4.38017V13.7503C15.0834 16.2816 13.0314 18.3337 10.5001 18.3337C7.96878 18.3337 5.91675 16.2816 5.91675 13.7503V4.72255C5.91675 3.03501 7.28477 1.66699 8.9723 1.66699C10.6598 1.66699 12.0279 3.03501 12.0279 4.72255V13.7051C12.0279 14.5489 11.3439 15.2329 10.5001 15.2329C9.65631 15.2329 8.9723 14.5489 8.9723 13.7051V5.54296",stroke:"#475467",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})}),brightnessDown:e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"icon icon-tabler icons-tabler-outline icon-tabler-brightness-down",...e,children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),v.jsx("path",{d:"M9 12a3 3 0 1 0 6 0 3 3 0 1 0-6 0M12 5v.01M17 7v.01M19 12v.01M17 17v.01M12 19v.01M7 17v.01M5 12v.01M7 7v.01"})]}),brightnessUp:e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"icon icon-tabler icons-tabler-outline icon-tabler-brightness-up",...e,children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),v.jsx("path",{d:"M9 12a3 3 0 1 0 6 0 3 3 0 1 0-6 0M12 5V3M17 7l1.4-1.4M19 12h2M17 17l1.4 1.4M12 19v2M7 17l-1.4 1.4M6 12H4M7 7 5.6 5.6"})]}),calCom:e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"101",height:"22",viewBox:"0 0 101 22",fill:"none",...e,children:[v.jsx("path",{d:"M10.0582 20.817C4.32115 20.817 0 16.2763 0 10.6704C0 5.04589 4.1005 0.467773 10.0582 0.467773C13.2209 0.467773 15.409 1.43945 17.1191 3.66311L14.3609 5.96151C13.2025 4.72822 11.805 4.11158 10.0582 4.11158C6.17833 4.11158 4.04533 7.08268 4.04533 10.6704C4.04533 14.2582 6.38059 17.1732 10.0582 17.1732C11.7866 17.1732 13.2577 16.5566 14.4161 15.3233L17.1375 17.7151C15.501 19.8453 13.2577 20.817 10.0582 20.817Z",fill:"#fafafa"}),v.jsx("path",{d:"M29.0161 5.88601H32.7304V20.4612H29.0161V18.331C28.2438 19.8446 26.9566 20.8536 24.4927 20.8536C20.5577 20.8536 17.4133 17.4341 17.4133 13.2297C17.4133 9.02528 20.5577 5.60571 24.4927 5.60571C26.9383 5.60571 28.2438 6.61477 29.0161 8.12835V5.88601ZM29.1264 13.2297C29.1264 10.95 27.5634 9.06266 25.0995 9.06266C22.7274 9.06266 21.1828 10.9686 21.1828 13.2297C21.1828 15.4346 22.7274 17.3967 25.0995 17.3967C27.5451 17.3967 29.1264 15.4907 29.1264 13.2297Z",fill:"#fafafa"}),v.jsx("path",{d:"M35.3599 0H39.0742V20.4427H35.3599V0Z",fill:"#fafafa"}),v.jsx("path",{d:"M40.7291 18.5182C40.7291 17.3223 41.6853 16.3132 42.9908 16.3132C44.2964 16.3132 45.2158 17.3223 45.2158 18.5182C45.2158 19.7515 44.278 20.7605 42.9908 20.7605C41.7037 20.7605 40.7291 19.7515 40.7291 18.5182Z",fill:"#fafafa"}),v.jsx("path",{d:"M59.4296 18.1068C58.0505 19.7885 55.9543 20.8536 53.4719 20.8536C49.0404 20.8536 45.7858 17.4341 45.7858 13.2297C45.7858 9.02528 49.0404 5.60571 53.4719 5.60571C55.8623 5.60571 57.9402 6.61477 59.3193 8.20309L56.4508 10.6136C55.7336 9.71667 54.7958 9.04397 53.4719 9.04397C51.0999 9.04397 49.5553 10.95 49.5553 13.211C49.5553 15.472 51.0999 17.378 53.4719 17.378C54.9062 17.378 55.8991 16.6306 56.6346 15.6215L59.4296 18.1068Z",fill:"#fafafa"}),v.jsx("path",{d:"M59.7422 13.2297C59.7422 9.02528 62.9968 5.60571 67.4283 5.60571C71.8598 5.60571 75.1144 9.02528 75.1144 13.2297C75.1144 17.4341 71.8598 20.8536 67.4283 20.8536C62.9968 20.8349 59.7422 17.4341 59.7422 13.2297ZM71.3449 13.2297C71.3449 10.95 69.8003 9.06266 67.4283 9.06266C65.0563 9.04397 63.5117 10.95 63.5117 13.2297C63.5117 15.4907 65.0563 17.3967 67.4283 17.3967C69.8003 17.3967 71.3449 15.4907 71.3449 13.2297Z",fill:"#fafafa"}),v.jsx("path",{d:"M100.232 11.5482V20.4428H96.518V12.4638C96.518 9.94119 95.3412 8.85739 93.576 8.85739C91.921 8.85739 90.7442 9.67958 90.7442 12.4638V20.4428H87.0299V12.4638C87.0299 9.94119 85.8346 8.85739 84.0878 8.85739C82.4329 8.85739 80.9802 9.67958 80.9802 12.4638V20.4428H77.2659V5.8676H80.9802V7.88571C81.7525 6.31607 83.15 5.53125 85.3014 5.53125C87.3425 5.53125 89.0525 6.5403 89.9903 8.24074C90.9281 6.50293 92.3072 5.53125 94.8079 5.53125C97.8603 5.54994 100.232 7.86702 100.232 11.5482Z",fill:"#fafafa"})]}),caretDown:e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-caret-down",...e,children:[v.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),v.jsx("path",{d:"M18 9c.852 0 1.297.986.783 1.623l-.076.084-6 6a1 1 0 0 1-1.32.083l-.094-.083-6-6-.083-.094-.054-.077-.054-.096-.017-.036-.027-.067-.032-.108-.01-.053-.01-.06-.004-.057v-.118l.005-.058.009-.06.01-.052.032-.108.027-.067.07-.132.065-.09.073-.081.094-.083.077-.054.096-.054.036-.017.067-.027.108-.032.053-.01.06-.01.057-.004L18 9z"})]}),caretDownAndUp:e=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none","aria-hidden":"true",...e,children:v.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.932 5.432a.45.45 0 1 0 .636.636L7.5 4.136l1.932 1.932a.45.45 0 0 0 .636-.636l-2.25-2.25a.45.45 0 0 0-.636 0l-2.25 2.25Zm5.136 4.136a.45.45 0 0 0-.636-.636L7.5 10.864 5.568 8.932a.45.45 0 0 0-.636.636l2.25 2.25a.45.45 0 0 0 .636 0l2.25-2.25Z",clipRule:"evenodd"})}),caretLeft:e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-caret-left",...e,children:[v.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),v.jsx("path",{d:"m13.883 5.007.058-.005h.118l.058.005.06.009.052.01.108.032.067.027.132.07.09.065.081.073.083.094.054.077.054.096.017.036.027.067.032.108.01.053.01.06.004.057L15 6v12c0 .852-.986 1.297-1.623.783l-.084-.076-6-6a1 1 0 0 1-.083-1.32l.083-.094 6-6 .094-.083.077-.054.096-.054.036-.017.067-.027.108-.032.053-.01.06-.01z"})]}),caretRight:e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-caret-right",...e,children:[v.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),v.jsx("path",{d:"M9 6c0-.852.986-1.297 1.623-.783l.084.076 6 6a1 1 0 0 1 .083 1.32l-.083.094-6 6-.094.083-.077.054-.096.054-.036.017-.067.027-.108.032-.053.01-.06.01-.057.004L10 19l-.059-.002-.058-.005-.06-.009-.052-.01-.108-.032-.067-.027-.132-.07-.09-.065-.081-.073-.083-.094-.054-.077-.054-.096-.017-.036-.027-.067-.032-.108-.01-.053-.01-.06-.004-.057L9 6z"})]}),caretUp:e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-caret-up",...e,children:[v.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),v.jsx("path",{d:"M11.293 7.293a1 1 0 0 1 1.32-.083l.094.083 6 6 .083.094.054.077.054.096.017.036.027.067.032.108.01.053.01.06.004.057L19 14l-.002.059-.005.058-.009.06-.01.052-.032.108-.027.067-.07.132-.065.09-.073.081-.094.083-.077.054-.096.054-.036.017-.067.027-.108.032-.053.01-.06.01-.057.004L18 15H6c-.852 0-1.297-.986-.783-1.623l.076-.084 6-6z"})]}),chatbot:e=>v.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[v.jsx("g",{id:"message-chat-circle",clipPath:"url(#clip0_1108_18597)",children:v.jsx("path",{id:"Icon",d:"M3.04718 5.6144C3.0161 5.41411 2.99998 5.20893 2.99998 5C2.99998 2.79086 4.80262 1 7.0263 1C9.24997 1 11.0526 2.79086 11.0526 5C11.0526 5.49904 10.9606 5.97673 10.7926 6.41725C10.7577 6.50874 10.7402 6.55449 10.7323 6.59021C10.7244 6.62559 10.7214 6.65049 10.7206 6.68673C10.7197 6.7233 10.7247 6.76359 10.7346 6.84416L10.9359 8.47926C10.9577 8.65627 10.9686 8.74477 10.9391 8.80911C10.9133 8.86548 10.8675 8.91026 10.8105 8.93475C10.7455 8.9627 10.6573 8.94977 10.4809 8.92391L8.88823 8.69046C8.80507 8.67827 8.76349 8.67217 8.72562 8.67239C8.68816 8.6726 8.66224 8.67537 8.62557 8.68307C8.58852 8.69086 8.54117 8.7086 8.44649 8.74406C8.00484 8.90949 7.52621 9 7.0263 9C6.8172 9 6.61183 8.98417 6.41133 8.95364M3.81579 11C5.29824 11 6.5 9.76878 6.5 8.25C6.5 6.73122 5.29824 5.5 3.81579 5.5C2.33334 5.5 1.13158 6.73122 1.13158 8.25C1.13158 8.5553 1.18014 8.84897 1.26977 9.12336C1.30767 9.23935 1.32661 9.29735 1.33283 9.33697C1.33932 9.37833 1.34046 9.40156 1.33804 9.44336C1.33572 9.4834 1.32571 9.52865 1.30567 9.61915L1 11L2.4974 10.7955C2.57913 10.7843 2.62 10.7788 2.65568 10.779C2.69326 10.7793 2.7132 10.7813 2.75005 10.7886C2.78505 10.7956 2.83708 10.814 2.94114 10.8507C3.2153 10.9475 3.50955 11 3.81579 11Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})}),v.jsx("defs",{children:v.jsx("clipPath",{id:"clip0_1108_18597",children:v.jsx("rect",{width:"12",height:"12",fill:"white"})})})]}),checkItem:e=>v.jsx("svg",{fill:"#1a1a1a",color:"#1a1a1a",fillOpacity:"0.5",height:"16",width:"16",viewBox:"0 0 16 16",...e,children:v.jsx("path",{d:"m8 16c-4.418278 0-8-3.581722-8-8s3.581722-8 8-8 8 3.581722 8 8-3.581722 8-8 8zm3.0832728-11.00479172-4.0832728 4.09057816-1.79289322-1.79289322c-.39052429-.39052429-1.02368927-.39052429-1.41421356 0s-.39052429 1.02368927 0 1.41421356l2.5 2.50000002c.39052429.3905243 1.02368927.3905243 1.41421356 0l4.79037962-4.79768495c.3905243-.3905243.3905243-1.02368927 0-1.41421357-.3905243-.39052429-1.0236893-.39052429-1.4142136 0z",fillRule:"evenodd"})}),coinsStacked:e=>v.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:v.jsx("path",{d:"M8.66683 3.33333C8.66683 4.06971 7.02521 4.66667 5.00016 4.66667C2.97512 4.66667 1.3335 4.06971 1.3335 3.33333M8.66683 3.33333C8.66683 2.59695 7.02521 2 5.00016 2C2.97512 2 1.3335 2.59695 1.3335 3.33333M8.66683 3.33333V4.33333M1.3335 3.33333V11.3333C1.3335 12.0697 2.97512 12.6667 5.00016 12.6667M5.00016 7.33333C4.8878 7.33333 4.77662 7.3315 4.66683 7.3279C2.798 7.26666 1.3335 6.69552 1.3335 6M5.00016 10C2.97512 10 1.3335 9.40305 1.3335 8.66667M14.6668 7.66667C14.6668 8.40305 13.0252 9 11.0002 9C8.97512 9 7.3335 8.40305 7.3335 7.66667M14.6668 7.66667C14.6668 6.93029 13.0252 6.33333 11.0002 6.33333C8.97512 6.33333 7.3335 6.93029 7.3335 7.66667M14.6668 7.66667V12.6667C14.6668 13.403 13.0252 14 11.0002 14C8.97512 14 7.3335 13.403 7.3335 12.6667V7.66667M14.6668 10.1667C14.6668 10.903 13.0252 11.5 11.0002 11.5C8.97512 11.5 7.3335 10.903 7.3335 10.1667",stroke:"#4B5563",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"})}),crown:e=>v.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...e,children:[v.jsx("path",{d:"M14.3361 13.3761C14.3361 13.4401 14.3041 13.4721 14.2721 13.5361C13.7921 14.2081 11.2001 14.7521 8.06411 14.7521C4.92811 14.7521 2.30411 14.2401 1.85611 13.5361C1.82411 13.5041 1.79211 13.4401 1.79211 13.3761C1.50411 12.5441 2.14411 11.7441 2.14411 11.7441C2.14411 11.7441 3.04011 12.1601 3.42411 12.3201C5.92011 11.7121 10.2081 11.7121 12.7361 12.3201C13.1201 12.1281 14.0161 11.7441 14.0161 11.7441C14.0161 11.7441 14.6241 12.5761 14.3361 13.3761Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.1",d:"M12.672 12.3519C12.448 12.2879 12.224 12.2559 11.968 12.1919C12.128 12.3519 12.288 12.4799 12.416 12.6719C12.576 12.9279 12.672 13.2479 12.64 13.5679C12.608 13.6959 12.576 13.8559 12.512 13.9839C12.448 14.1119 12.384 14.2399 12.32 14.3359C13.344 14.1119 14.048 13.8239 14.272 13.5039C14.304 13.4399 14.336 13.4079 14.336 13.3439C14.624 12.5119 13.984 11.7119 13.984 11.7119C13.984 11.7119 13.088 12.1919 12.672 12.3519V12.3519Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.15",d:"M3.39224 12.3519C3.61624 12.2879 3.84024 12.2559 4.09624 12.1919C3.93624 12.3519 3.77624 12.4799 3.64824 12.6719C3.48824 12.9279 3.39224 13.2479 3.42424 13.5679C3.45624 13.6959 3.48824 13.8559 3.55224 13.9839C3.61624 14.1119 3.68024 14.2399 3.74424 14.3359C2.72024 14.1119 2.01624 13.8239 1.79224 13.5039C1.76024 13.4399 1.72824 13.4079 1.72824 13.3439C1.44024 12.5119 2.08024 11.7119 2.08024 11.7119C2.08024 11.7119 3.00824 12.1919 3.39224 12.3519V12.3519Z",fill:"currentColor"}),v.jsx("path",{d:"M14.0482 11.968C14.0482 12.736 11.3602 13.344 8.03221 13.344C4.70421 13.344 2.0162 12.736 2.0162 11.968C2.0482 10.144 14.0482 10.144 14.0482 11.968Z",fill:"currentColor"}),v.jsx("path",{d:"M14.8158 6.20803C14.8158 8.00003 14.4638 9.98403 13.8558 11.808C13.8238 12.544 11.2318 13.12 8.03183 13.12C4.83183 13.12 2.23983 12.544 2.20783 11.808C1.59983 9.98403 1.24783 8.00003 1.24783 6.20803C1.24783 5.69603 1.27983 5.21603 1.31183 4.73603H2.55983C2.81583 6.59203 3.74383 7.96803 4.83183 7.96803C6.11183 7.96803 7.16783 6.01603 7.16783 3.61603V3.32803H8.86383C8.79983 5.15203 9.53583 7.96803 11.1998 7.96803C12.2878 7.96803 13.1838 6.59203 13.4718 4.73603H14.7198C14.7838 5.18403 14.8158 5.69603 14.8158 6.20803Z",fill:"currentColor"}),v.jsx("path",{d:"M8.06406 3.29609H7.20006V3.58409C7.20006 5.98409 6.14406 7.93609 4.86406 7.93609C3.77606 7.93609 2.88006 6.56009 2.59206 4.70409H1.34406C1.28006 5.18409 1.28006 5.69609 1.28006 6.17609C1.28006 7.96809 1.63206 9.95209 2.24006 11.7761C2.27206 12.5121 4.86406 13.0881 8.06406 13.0881H8.09606V3.29609H8.06406Z",fill:"currentColor"}),v.jsx("path",{d:"M7.20006 3.84004V4.09604C7.20006 6.49604 6.14406 8.44804 4.86406 8.44804C3.77606 8.44804 2.88006 7.07204 2.59206 5.21604H1.34406C1.31206 5.63204 1.28006 6.04804 1.28006 6.43204V6.17604C1.28006 5.66404 1.31206 5.18404 1.34406 4.70404H2.59206C2.84806 6.56004 3.77606 7.93604 4.86406 7.93604C6.11206 7.93604 7.13606 6.11204 7.20006 3.84004V3.84004Z",fill:"currentColor"}),v.jsx("path",{d:"M7.19998 3.58409V3.29609H8.89598V3.80809H7.19998V3.58409Z",fill:"currentColor"}),v.jsx("path",{d:"M14.8162 6.20804V6.46404C14.8162 6.04804 14.7842 5.63204 14.7522 5.24804H13.5042C13.2482 7.10404 12.3202 8.48004 11.2322 8.48004C9.53623 8.48004 8.83223 5.63204 8.89623 3.84004C9.05623 8.80004 12.8322 9.50404 13.5042 4.73604H14.7202C14.7842 5.18404 14.8162 5.69604 14.8162 6.20804Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.1",d:"M14.7202 4.7041H13.4722C13.2482 6.3681 12.4802 7.6161 11.5842 7.8721L10.9762 12.8961C12.6722 12.6721 13.8242 12.2561 13.8562 11.7761C14.4642 9.9521 14.8162 7.9681 14.8162 6.1761C14.8162 5.6961 14.7842 5.1841 14.7202 4.7041V4.7041Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.15",d:"M1.34383 4.7041H2.59183C2.81583 6.3681 3.58383 7.6161 4.47983 7.8721L5.08783 12.8961C3.39183 12.6721 2.23983 12.2561 2.20783 11.7761C1.59983 9.9521 1.24783 7.9681 1.24783 6.1761C1.24783 5.6961 1.27983 5.1841 1.34383 4.7041V4.7041Z",fill:"currentColor"}),v.jsx("path",{d:"M14.1119 5.9201C14.8895 5.9201 15.5199 5.28972 15.5199 4.5121C15.5199 3.73449 14.8895 3.1041 14.1119 3.1041C13.3343 3.1041 12.7039 3.73449 12.7039 4.5121C12.7039 5.28972 13.3343 5.9201 14.1119 5.9201Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.2",d:"M14.016 5.6322C14.6876 5.6322 15.232 5.08777 15.232 4.4162C15.232 3.74462 14.6876 3.2002 14.016 3.2002C13.3444 3.2002 12.8 3.74462 12.8 4.4162C12.8 5.08777 13.3444 5.6322 14.016 5.6322Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.2",d:"M13.9201 5.37603C14.4856 5.37603 14.9441 4.91757 14.9441 4.35203C14.9441 3.78649 14.4856 3.32803 13.9201 3.32803C13.3545 3.32803 12.8961 3.78649 12.8961 4.35203C12.8961 4.91757 13.3545 5.37603 13.9201 5.37603Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.2",d:"M13.8239 4.95999C14.2303 4.95999 14.5599 4.63047 14.5599 4.22399C14.5599 3.81751 14.2303 3.48799 13.8239 3.48799C13.4174 3.48799 13.0879 3.81751 13.0879 4.22399C13.0879 4.63047 13.4174 4.95999 13.8239 4.95999Z",fill:"currentColor"}),v.jsx("path",{d:"M1.88807 5.9201C2.66569 5.9201 3.29607 5.28972 3.29607 4.5121C3.29607 3.73449 2.66569 3.1041 1.88807 3.1041C1.11046 3.1041 0.480072 3.73449 0.480072 4.5121C0.480072 5.28972 1.11046 5.9201 1.88807 5.9201Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.2",d:"M1.82382 5.6322C2.4954 5.6322 3.03982 5.08777 3.03982 4.4162C3.03982 3.74462 2.4954 3.2002 1.82382 3.2002C1.15224 3.2002 0.607819 3.74462 0.607819 4.4162C0.607819 5.08777 1.15224 5.6322 1.82382 5.6322Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.2",d:"M1.72789 5.37603C2.29343 5.37603 2.75189 4.91757 2.75189 4.35203C2.75189 3.78649 2.29343 3.32803 1.72789 3.32803C1.16235 3.32803 0.703888 3.78649 0.703888 4.35203C0.703888 4.91757 1.16235 5.37603 1.72789 5.37603Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.2",d:"M1.63209 4.95999C2.03857 4.95999 2.36809 4.63047 2.36809 4.22399C2.36809 3.81751 2.03857 3.48799 1.63209 3.48799C1.22561 3.48799 0.896088 3.81751 0.896088 4.22399C0.896088 4.63047 1.22561 4.95999 1.63209 4.95999Z",fill:"currentColor"}),v.jsx("path",{d:"M8.03218 4.96005C9.05722 4.96005 9.88818 4.12909 9.88818 3.10405C9.88818 2.07901 9.05722 1.24805 8.03218 1.24805C7.00714 1.24805 6.17618 2.07901 6.17618 3.10405C6.17618 4.12909 7.00714 4.96005 8.03218 4.96005Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.2",d:"M7.93638 4.51208C8.80236 4.51208 9.50438 3.81006 9.50438 2.94408C9.50438 2.07809 8.80236 1.37608 7.93638 1.37608C7.0704 1.37608 6.36838 2.07809 6.36838 2.94408C6.36838 3.81006 7.0704 4.51208 7.93638 4.51208Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.2",d:"M7.80808 4.22413C8.55035 4.22413 9.15208 3.6224 9.15208 2.88013C9.15208 2.13786 8.55035 1.53613 7.80808 1.53613C7.06581 1.53613 6.46408 2.13786 6.46408 2.88013C6.46408 3.6224 7.06581 4.22413 7.80808 4.22413Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.2",d:"M7.68012 3.67996C8.21032 3.67996 8.64012 3.25015 8.64012 2.71996C8.64012 2.18977 8.21032 1.75996 7.68012 1.75996C7.14993 1.75996 6.72012 2.18977 6.72012 2.71996C6.72012 3.25015 7.14993 3.67996 7.68012 3.67996Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.2",d:"M7.80805 14.624C8.55032 14.624 9.15205 14.3518 9.15205 14.016C9.15205 13.6802 8.55032 13.408 7.80805 13.408C7.06578 13.408 6.46405 13.6802 6.46405 14.016C6.46405 14.3518 7.06578 14.624 7.80805 14.624Z",fill:"currentColor"}),v.jsx("path",{opacity:"0.2",d:"M7.80797 14.528C8.3735 14.528 8.83196 14.356 8.83196 14.144C8.83196 13.9319 8.3735 13.76 7.80797 13.76C7.24243 13.76 6.78397 13.9319 6.78397 14.144C6.78397 14.356 7.24243 14.528 7.80797 14.528Z",fill:"currentColor"})]}),edit3:e=>v.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:v.jsx("path",{d:"M9.99998 16.6662H17.5M2.5 16.6662H3.89545C4.3031 16.6662 4.50693 16.6662 4.69874 16.6202C4.8688 16.5793 5.03138 16.512 5.1805 16.4206C5.34869 16.3175 5.49282 16.1734 5.78107 15.8852L16.25 5.4162C16.9404 4.72585 16.9404 3.60656 16.25 2.9162C15.5597 2.22585 14.4404 2.22585 13.75 2.9162L3.28105 13.3852C2.9928 13.6734 2.84867 13.8175 2.7456 13.9857C2.65422 14.1348 2.58688 14.2974 2.54605 14.4675C2.5 14.6593 2.5 14.8631 2.5 15.2708V16.6662Z",stroke:"currentColor",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})}),fileCsv:e=>v.jsxs("svg",{width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[v.jsx("path",{d:"M6.60034 0.950195H16.2C16.2546 0.950195 16.3075 0.966212 16.3523 0.996094L16.3943 1.03027L22.8699 7.50586C22.9213 7.55729 22.95 7.62747 22.95 7.7002V22.0996C22.95 23.1766 22.0767 24.0498 20.9998 24.0498H6.60034C5.52339 24.0498 4.65015 23.1766 4.65015 22.0996V2.90039C4.65015 1.82344 5.52339 0.950195 6.60034 0.950195Z",fill:"white",stroke:"#D5D7DA",strokeWidth:"0.9"}),v.jsx("path",{d:"M16.2 0.800781V5.30078C16.2 6.62626 17.2745 7.70078 18.6 7.70078H23.1",stroke:"#D5D7DA",strokeWidth:"0.9"}),v.jsx("rect",{x:"0.699951",y:"11.4004",width:"16.6",height:"9.4",rx:"1.2",fill:"#099250"}),v.jsx("path",{d:"M6.76358 15.7637H5.83034C5.8133 15.6429 5.7785 15.5357 5.72594 15.4419C5.67338 15.3468 5.60591 15.2658 5.52353 15.199C5.44114 15.1323 5.34597 15.0811 5.23801 15.0456C5.13148 15.0101 5.01571 14.9924 4.89071 14.9924C4.66486 14.9924 4.46813 15.0485 4.30051 15.1607C4.1329 15.2715 4.00293 15.4334 3.9106 15.6465C3.81827 15.8581 3.77211 16.1152 3.77211 16.4178C3.77211 16.7289 3.81827 16.9902 3.9106 17.2019C4.00435 17.4135 4.13503 17.5733 4.30265 17.6813C4.47026 17.7892 4.66415 17.8432 4.88432 17.8432C5.0079 17.8432 5.12225 17.8269 5.22736 17.7942C5.3339 17.7615 5.42836 17.714 5.51074 17.6515C5.59313 17.5875 5.66131 17.5101 5.71529 17.4192C5.77069 17.3283 5.80904 17.2246 5.83034 17.1081L6.76358 17.1124C6.73944 17.3127 6.67907 17.5059 6.58248 17.6919C6.4873 17.8766 6.35875 18.0421 6.19682 18.1884C6.03631 18.3333 5.84455 18.4483 5.62154 18.5336C5.39995 18.6174 5.14924 18.6593 4.86941 18.6593C4.4802 18.6593 4.13219 18.5712 3.82537 18.3951C3.51998 18.2189 3.2785 17.964 3.10094 17.6301C2.9248 17.2963 2.83674 16.8922 2.83674 16.4178C2.83674 15.9419 2.92623 15.5371 3.1052 15.2033C3.28418 14.8695 3.52708 14.6152 3.8339 14.4405C4.14071 14.2644 4.48588 14.1763 4.86941 14.1763C5.12225 14.1763 5.35662 14.2118 5.57253 14.2828C5.78986 14.3539 5.98233 14.4576 6.14995 14.5939C6.31756 14.7289 6.45392 14.8944 6.55904 15.0904C6.66557 15.2864 6.73375 15.5108 6.76358 15.7637ZM9.79235 15.4909C9.7753 15.3191 9.70215 15.1855 9.57289 15.0904C9.44363 14.9952 9.2682 14.9476 9.04661 14.9476C8.89604 14.9476 8.76891 14.9689 8.66522 15.0115C8.56152 15.0527 8.48198 15.1103 8.42658 15.1841C8.3726 15.258 8.34561 15.3418 8.34561 15.4355C8.34277 15.5137 8.35911 15.5819 8.39462 15.6401C8.43155 15.6983 8.48198 15.7488 8.5459 15.7914C8.60982 15.8326 8.68368 15.8688 8.76749 15.9C8.8513 15.9299 8.94078 15.9554 9.03596 15.9767L9.428 16.0705C9.61834 16.1131 9.79306 16.1699 9.95215 16.2409C10.1112 16.312 10.249 16.3993 10.3655 16.503C10.482 16.6067 10.5722 16.7289 10.6361 16.8695C10.7014 17.0101 10.7348 17.1713 10.7362 17.3532C10.7348 17.6202 10.6666 17.8517 10.5317 18.0478C10.3982 18.2424 10.205 18.3936 9.95215 18.5016C9.70073 18.6081 9.39746 18.6614 9.04235 18.6614C8.69007 18.6614 8.38326 18.6074 8.12189 18.4995C7.86195 18.3915 7.65882 18.2317 7.51252 18.0201C7.36763 17.807 7.29164 17.5435 7.28453 17.2296H8.17729C8.18723 17.3759 8.22914 17.498 8.303 17.5961C8.37828 17.6926 8.47843 17.7658 8.60343 17.8155C8.72985 17.8638 8.8726 17.888 9.03169 17.888C9.18794 17.888 9.3236 17.8652 9.43865 17.8198C9.55513 17.7743 9.64533 17.7111 9.70925 17.6301C9.77317 17.5492 9.80513 17.4561 9.80513 17.351C9.80513 17.253 9.77601 17.1706 9.71777 17.1039C9.66096 17.0371 9.57715 16.9803 9.46635 16.9334C9.35698 16.8865 9.22275 16.8439 9.06365 16.8056L8.58851 16.6863C8.22061 16.5968 7.93013 16.4569 7.71706 16.2665C7.504 16.0762 7.39817 15.8198 7.39959 15.4973C7.39817 15.2331 7.46848 15.0023 7.61053 14.8049C7.754 14.6074 7.95073 14.4533 8.20073 14.3425C8.45073 14.2317 8.73482 14.1763 9.053 14.1763C9.37686 14.1763 9.65953 14.2317 9.90101 14.3425C10.1439 14.4533 10.3328 14.6074 10.4678 14.8049C10.6027 15.0023 10.6723 15.231 10.6766 15.4909H9.79235ZM12.1452 14.236L13.1998 17.5513H13.2403L14.2971 14.236H15.3199L13.8156 18.5996H12.6267L11.1203 14.236H12.1452Z",fill:"white"})]}),fileExcel:e=>v.jsxs("svg",{width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[v.jsx("path",{d:"M6.60034 0.950195H16.2C16.2546 0.950195 16.3075 0.966212 16.3523 0.996094L16.3943 1.03027L22.8699 7.50586C22.9213 7.55729 22.95 7.62747 22.95 7.7002V22.0996C22.95 23.1766 22.0767 24.0498 20.9998 24.0498H6.60034C5.52339 24.0498 4.65015 23.1766 4.65015 22.0996V2.90039C4.65015 1.82344 5.52339 0.950195 6.60034 0.950195Z",fill:"white",stroke:"#D5D7DA",strokeWidth:"0.9"}),v.jsx("path",{d:"M16.2 0.800781V5.30078C16.2 6.62626 17.2745 7.70078 18.6 7.70078H23.1",stroke:"#D5D7DA",strokeWidth:"0.9"}),v.jsx("rect",{x:"0.699951",y:"11.4004",width:"19.6",height:"9.4",rx:"1.2",fill:"#099250"}),v.jsx("path",{d:"M3.78729 14.236L4.66726 15.7232H4.70135L5.58558 14.236H6.62749L5.29581 16.4178L6.65732 18.5996H5.59624L4.70135 17.1103H4.66726L3.77237 18.5996H2.71555L4.08132 16.4178L2.74112 14.236H3.78729ZM7.21129 18.5996V14.236H8.13388V17.839H10.0046V18.5996H7.21129ZM12.9828 15.4909C12.9657 15.3191 12.8926 15.1855 12.7633 15.0904C12.6341 14.9952 12.4586 14.9476 12.237 14.9476C12.0865 14.9476 11.9593 14.9689 11.8556 15.0115C11.752 15.0527 11.6724 15.1103 11.617 15.1841C11.563 15.258 11.536 15.3418 11.536 15.4355C11.5332 15.5137 11.5495 15.5819 11.585 15.6401C11.622 15.6983 11.6724 15.7488 11.7363 15.7914C11.8002 15.8326 11.8741 15.8688 11.9579 15.9C12.0417 15.9299 12.1312 15.9554 12.2264 15.9767L12.6184 16.0705C12.8088 16.1131 12.9835 16.1699 13.1426 16.2409C13.3017 16.312 13.4395 16.3993 13.5559 16.503C13.6724 16.6067 13.7626 16.7289 13.8265 16.8695C13.8919 17.0101 13.9252 17.1713 13.9267 17.3532C13.9252 17.6202 13.8571 17.8517 13.7221 18.0478C13.5886 18.2424 13.3954 18.3936 13.1426 18.5016C12.8912 18.6081 12.5879 18.6614 12.2328 18.6614C11.8805 18.6614 11.5737 18.6074 11.3123 18.4995C11.0524 18.3915 10.8493 18.2317 10.7029 18.0201C10.5581 17.807 10.4821 17.5435 10.475 17.2296H11.3677C11.3777 17.3759 11.4196 17.498 11.4934 17.5961C11.5687 17.6926 11.6689 17.7658 11.7939 17.8155C11.9203 17.8638 12.063 17.888 12.2221 17.888C12.3784 17.888 12.514 17.8652 12.6291 17.8198C12.7456 17.7743 12.8358 17.7111 12.8997 17.6301C12.9636 17.5492 12.9956 17.4561 12.9956 17.351C12.9956 17.253 12.9664 17.1706 12.9082 17.1039C12.8514 17.0371 12.7676 16.9803 12.6568 16.9334C12.5474 16.8865 12.4132 16.8439 12.2541 16.8056L11.7789 16.6863C11.411 16.5968 11.1206 16.4569 10.9075 16.2665C10.6944 16.0762 10.5886 15.8198 10.59 15.4973C10.5886 15.2331 10.6589 15.0023 10.801 14.8049C10.9444 14.6074 11.1412 14.4533 11.3912 14.3425C11.6412 14.2317 11.9252 14.1763 12.2434 14.1763C12.5673 14.1763 12.85 14.2317 13.0914 14.3425C13.3343 14.4533 13.5233 14.6074 13.6582 14.8049C13.7931 15.0023 13.8627 15.231 13.867 15.4909H12.9828ZM15.4123 14.236L16.2923 15.7232H16.3263L17.2106 14.236H18.2525L16.9208 16.4178L18.2823 18.5996H17.2212L16.3263 17.1103H16.2923L15.3974 18.5996H14.3406L15.7063 16.4178L14.3661 14.236H15.4123Z",fill:"white"})]}),github:e=>v.jsx("svg",{viewBox:"0 0 438.549 438.549",...e,children:v.jsx("path",{fill:"currentColor",d:"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"})}),google:e=>v.jsxs("svg",{...e,viewBox:"0 0 25 24",children:[v.jsx("path",{d:"M21 12.3446C21 11.6734 20.9456 11.1836 20.8277 10.6757H13.1633V13.7052H17.6621C17.5715 14.458 17.0817 15.5918 15.9932 16.3537L15.978 16.4551L18.4013 18.3324L18.5692 18.3492C20.1111 16.9251 21 14.8299 21 12.3446Z",fill:"url(#paint0_linear_8026_76)",fillOpacity:"0.4"}),v.jsx("path",{d:"M17.6621 13.3302H13.5383V11.0507H20.5226C20.5919 11.4315 20.625 11.8288 20.625 12.3446C20.625 14.6475 19.8344 16.5772 18.4782 17.9176L16.5329 16.4106C17.4932 15.5971 17.9423 14.5153 18.0345 13.75L18.085 13.3302H17.6621Z",stroke:"white",strokeOpacity:"0.2",strokeWidth:"0.75"}),v.jsx("path",{d:"M13.1632 20.3265C15.3672 20.3265 17.2175 19.6009 18.5691 18.3492L15.9931 16.3537C15.3038 16.8344 14.3786 17.17 13.1632 17.17C11.0045 17.17 9.17227 15.746 8.51915 13.7778L8.42341 13.7859L5.90359 15.736L5.87064 15.8276C7.21303 18.4943 9.9704 20.3265 13.1632 20.3265Z",fill:"url(#paint1_linear_8026_76)",fillOpacity:"0.4"}),v.jsx("path",{d:"M15.9744 16.8135L17.9777 18.3654C16.7365 19.3691 15.1014 19.9515 13.1632 19.9515C10.2088 19.9515 7.64442 18.3072 6.32396 15.8849L8.32962 14.3327C9.14318 16.2174 10.9979 17.545 13.1632 17.545C14.3232 17.545 15.25 17.2556 15.9744 16.8135Z",stroke:"white",strokeOpacity:"0.2",strokeWidth:"0.75"}),v.jsx("path",{d:"M8.51924 13.7778C8.34691 13.2699 8.24717 12.7256 8.24717 12.1633C8.24717 11.6009 8.34691 11.0567 8.51017 10.5488L8.50561 10.4406L5.9542 8.45917L5.87073 8.49887C5.31746 9.60546 5 10.8481 5 12.1633C5 13.4785 5.31746 14.7211 5.87073 15.8277L8.51924 13.7778Z",fill:"url(#paint2_linear_8026_76)",fillOpacity:"0.4"}),v.jsx("path",{d:"M7.87217 12.1633C7.87217 12.6754 7.94881 13.1718 8.08351 13.6409L6.01264 15.2436C5.60439 14.2951 5.375 13.2552 5.375 12.1633C5.375 11.0416 5.61707 9.9748 6.0464 9.00557L8.1018 10.6018C7.95875 11.0937 7.87217 11.619 7.87217 12.1633Z",stroke:"white",strokeOpacity:"0.2",strokeWidth:"0.75"}),v.jsx("path",{d:"M13.1632 7.15644C14.696 7.15644 15.73 7.81857 16.3196 8.37189L18.6235 6.12245C17.2085 4.80726 15.3672 4 13.1632 4C9.9704 4 7.21303 5.83218 5.87064 8.49883L8.51008 10.5487C9.17227 8.58049 11.0045 7.15644 13.1632 7.15644Z",fill:"url(#paint3_linear_8026_76)",fillOpacity:"0.4"}),v.jsx("path",{d:"M16.3048 7.86229C15.6379 7.32472 14.6014 6.78144 13.1632 6.78144C11.016 6.78144 9.17515 8.08673 8.34394 9.94489L6.34919 8.39568C7.6769 5.99855 10.2275 4.375 13.1632 4.375C15.1182 4.375 16.7677 5.03782 18.0729 6.13591L16.3048 7.86229Z",stroke:"white",strokeOpacity:"0.2",strokeWidth:"0.75"})]}),hamburgerMenu:e=>v.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",...e,children:v.jsx("path",{d:"M3 12H15M3 6H21M3 18H21",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),infoAlt:e=>v.jsxs("svg",{width:"38",height:"38",viewBox:"0 0 38 38",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[v.jsx("g",{opacity:"0.3",children:v.jsx("rect",{x:"6",y:"6",width:"26",height:"26",rx:"13",stroke:"currentColor",strokeWidth:"2"})}),v.jsx("g",{opacity:"0.1",children:v.jsx("rect",{x:"1",y:"1",width:"36",height:"36",rx:"18",stroke:"currentColor",strokeWidth:"2"})}),v.jsx("g",{clipPath:"url(#clip0_8403_53106)",children:v.jsx("path",{d:"M19.0013 15.668V19.0013M19.0013 22.3346H19.0096M27.3346 19.0013C27.3346 23.6037 23.6037 27.3346 19.0013 27.3346C14.3989 27.3346 10.668 23.6037 10.668 19.0013C10.668 14.3989 14.3989 10.668 19.0013 10.668C23.6037 10.668 27.3346 14.3989 27.3346 19.0013Z",stroke:"currentColor",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})}),v.jsx("defs",{children:v.jsx("clipPath",{id:"clip0_8403_53106",children:v.jsx("rect",{width:"20",height:"20",fill:"white",transform:"translate(9 9)"})})})]}),intercom:e=>v.jsx("svg",{focusable:"false","aria-hidden":"true",viewBox:"0 0 28 32",width:"28",height:"32",fill:"none",...e,children:v.jsx("path",{fill:"currentColor",d:"M28,32 C28,32 23.2863266,30.1450667 19.4727818,28.6592 L3.43749107,28.6592 C1.53921989,28.6592 0,27.0272 0,25.0144 L0,3.6448 C0,1.632 1.53921989,0 3.43749107,0 L24.5615088,0 C26.45978,0 27.9989999,1.632 27.9989999,3.6448 L27.9989999,22.0490667 L28,22.0490667 L28,32 Z M23.8614088,20.0181333 C23.5309223,19.6105242 22.9540812,19.5633836 22.5692242,19.9125333 C22.5392199,19.9392 19.5537934,22.5941333 13.9989999,22.5941333 C8.51321617,22.5941333 5.48178311,19.9584 5.4277754,19.9104 C5.04295119,19.5629428 4.46760991,19.6105095 4.13759108,20.0170667 C3.97913051,20.2124916 3.9004494,20.4673395 3.91904357,20.7249415 C3.93763774,20.9825435 4.05196575,21.2215447 4.23660523,21.3888 C4.37862552,21.5168 7.77411059,24.5386667 13.9989999,24.5386667 C20.2248893,24.5386667 23.6203743,21.5168 23.7623946,21.3888 C23.9467342,21.2215726 24.0608642,20.9827905 24.0794539,20.7254507 C24.0980436,20.4681109 24.0195551,20.2135019 23.8614088,20.0181333 Z"})}),mailOpen:e=>v.jsx("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"#36A5E1",...e,children:v.jsx("g",{id:"mail-05",children:v.jsx("path",{id:"Icon",d:"M16.0347 3.07261L24.8174 8.78136C25.1277 8.98308 25.2829 9.08394 25.3953 9.21848C25.4948 9.33757 25.5696 9.47532 25.6152 9.62367C25.6667 9.79125 25.6667 9.97632 25.6667 10.3465V18.9001C25.6667 20.8603 25.6667 21.8404 25.2852 22.5891C24.9497 23.2476 24.4142 23.7831 23.7557 24.1186C23.007 24.5001 22.0269 24.5001 20.0667 24.5001H7.93337C5.97319 24.5001 4.9931 24.5001 4.24441 24.1186C3.58584 23.7831 3.05041 23.2476 2.71485 22.5891C2.33337 21.8404 2.33337 20.8603 2.33337 18.9001V10.3465C2.33337 9.97632 2.33337 9.79125 2.38491 9.62367C2.43052 9.47532 2.50528 9.33757 2.6048 9.21848C2.71722 9.08394 2.87239 8.98308 3.18273 8.78136L11.9654 3.07261M16.0347 3.07261C15.2982 2.59392 14.93 2.35457 14.5332 2.26145C14.1825 2.17913 13.8175 2.17913 13.4668 2.26145C13.0701 2.35457 12.7019 2.59392 11.9654 3.07261M16.0347 3.07261L23.2589 7.76834C24.0614 8.28996 24.4626 8.55077 24.6016 8.88152C24.723 9.17056 24.723 9.49632 24.6016 9.78536C24.4626 10.1161 24.0614 10.3769 23.2589 10.8985L16.0347 15.5943C15.2982 16.073 14.93 16.3123 14.5332 16.4054C14.1825 16.4878 13.8175 16.4878 13.4668 16.4054C13.0701 16.3123 12.7019 16.073 11.9654 15.5943L4.74121 10.8985C3.93872 10.3769 3.53748 10.1161 3.39851 9.78536C3.27706 9.49632 3.27706 9.17056 3.39851 8.88152C3.53748 8.55077 3.93872 8.28996 4.74121 7.76835L11.9654 3.07261M25.0834 22.1668L17.3334 15.1668M10.6667 15.1668L2.91671 22.1668",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),messageOval:e=>v.jsx("svg",{viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",...e,children:v.jsx("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:v.jsx("path",{d:"M18.0000533,7 C24.6266329,7 30,11.4789312 30,16.9976931 C30,22.5163617 24.6266329,26.9953062 18.0000533,26.9953062 C17.123351,26.9971724 16.2483812,26.9169271 15.386606,26.7553699 C14.0404188,27.7431078 12.5315125,28.4873102 10.9284053,28.9541197 C10.4583473,29.0903502 9.95341047,28.916663 9.66660965,28.5199682 C9.37982216,28.1234068 9.37297168,27.5894152 9.64952342,27.1855224 C10.1505552,26.5172998 10.5515886,25.7796289 10.840002,24.9957036 C7.9365286,23.3624038 6.10015838,20.3278759 6,16.9976931 C6,11.4789179 11.3733271,7 18.0000533,7 Z M18.0000533,18.0020932 L14.0000889,18.0020932 L13.8644511,18.0112196 C13.3765531,18.0774186 13.0005042,18.4957012 13.0005042,19.0018279 C13.0005042,19.5539661 13.4480335,20.0015625 14.0000889,20.0015625 L18.0000533,20.0015625 L18.135691,19.9924361 C18.623589,19.9262371 18.9996379,19.5079545 18.9996379,19.0018279 C18.9996379,18.4496896 18.5521087,18.0020932 18.0000533,18.0020932 Z M22.0001244,14.001515 L14.0000889,14.001515 L13.8644511,14.0106414 C13.3765531,14.0768404 13.0005042,14.495123 13.0005042,15.0012497 C13.0005042,15.5533879 13.4480335,16.0009843 14.0000889,16.0009843 L22.0001244,16.0009843 L22.1357621,15.9918579 C22.6236601,15.9256589 22.999709,15.5073764 22.999709,15.0012497 C22.999709,14.4491115 22.5521797,14.001515 22.0001244,14.001515 Z",fill:"#ffffff"})})}),messageSquareDots:e=>v.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:v.jsx("path",{d:"M6.25 8.75H6.25833M10 8.75H10.0083M13.75 8.75H13.7583M5.83333 15V16.9463C5.83333 17.3903 5.83333 17.6123 5.92436 17.7263C6.00352 17.8255 6.12356 17.8832 6.25045 17.8831C6.39636 17.8829 6.56973 17.7442 6.91646 17.4668L8.90434 15.8765C9.31043 15.5517 9.51347 15.3892 9.73957 15.2737C9.94017 15.1712 10.1537 15.0963 10.3743 15.051C10.6231 15 10.8831 15 11.4031 15H13.5C14.9001 15 15.6002 15 16.135 14.7275C16.6054 14.4878 16.9878 14.1054 17.2275 13.635C17.5 13.1002 17.5 12.4001 17.5 11V6.5C17.5 5.09987 17.5 4.3998 17.2275 3.86502C16.9878 3.39462 16.6054 3.01217 16.135 2.77248C15.6002 2.5 14.9001 2.5 13.5 2.5H6.5C5.09987 2.5 4.3998 2.5 3.86502 2.77248C3.39462 3.01217 3.01217 3.39462 2.77248 3.86502C2.5 4.3998 2.5 5.09987 2.5 6.5V11.6667C2.5 12.4416 2.5 12.8291 2.58519 13.147C2.81635 14.0098 3.49022 14.6836 4.35295 14.9148C4.67087 15 5.05836 15 5.83333 15ZM6.66667 8.75C6.66667 8.98012 6.48012 9.16667 6.25 9.16667C6.01988 9.16667 5.83333 8.98012 5.83333 8.75C5.83333 8.51988 6.01988 8.33333 6.25 8.33333C6.48012 8.33333 6.66667 8.51988 6.66667 8.75ZM10.4167 8.75C10.4167 8.98012 10.2301 9.16667 10 9.16667C9.76988 9.16667 9.58333 8.98012 9.58333 8.75C9.58333 8.51988 9.76988 8.33333 10 8.33333C10.2301 8.33333 10.4167 8.51988 10.4167 8.75ZM14.1667 8.75C14.1667 8.98012 13.9801 9.16667 13.75 9.16667C13.5199 9.16667 13.3333 8.98012 13.3333 8.75C13.3333 8.51988 13.5199 8.33333 13.75 8.33333C13.9801 8.33333 14.1667 8.51988 14.1667 8.75Z",stroke:"#344054",strokeWidth:"1.66",strokeLinecap:"round",strokeLinejoin:"round"})}),sparkles:e=>v.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[v.jsxs("g",{clipPath:"url(#clip0_8279_26143)",children:[v.jsx("path",{d:"M5.41797 10.8346L6.07168 12.1421C6.29293 12.5845 6.40355 12.8058 6.55133 12.9975C6.68246 13.1676 6.83497 13.3201 7.0051 13.4513C7.19682 13.5991 7.41806 13.7097 7.86054 13.9309L9.16797 14.5846L7.86054 15.2384C7.41806 15.4596 7.19682 15.5702 7.0051 15.718C6.83497 15.8491 6.68246 16.0016 6.55133 16.1718C6.40355 16.3635 6.29293 16.5847 6.07168 17.0272L5.41797 18.3346L4.76425 17.0272C4.54301 16.5847 4.43239 16.3635 4.28461 16.1718C4.15348 16.0016 4.00096 15.8491 3.83084 15.718C3.63912 15.5702 3.41788 15.4596 2.9754 15.2384L1.66797 14.5846L2.9754 13.9309C3.41788 13.7097 3.63912 13.5991 3.83084 13.4513C4.00096 13.3201 4.15348 13.1676 4.28461 12.9975C4.43239 12.8058 4.54301 12.5845 4.76425 12.1421L5.41797 10.8346Z",stroke:"currentColor"}),v.jsx("path",{d:"M12.5013 1.66797L13.4835 4.22165C13.7185 4.83268 13.836 5.13819 14.0187 5.39517C14.1807 5.62293 14.3797 5.82192 14.6074 5.98387C14.8644 6.1666 15.1699 6.28411 15.781 6.51912L18.3346 7.5013L15.781 8.48349C15.1699 8.7185 14.8644 8.836 14.6074 9.01873C14.3797 9.18068 14.1807 9.37968 14.0187 9.60743C13.836 9.86442 13.7185 10.1699 13.4835 10.781L12.5013 13.3346L11.5191 10.781C11.2841 10.1699 11.1666 9.86442 10.9839 9.60743C10.8219 9.37968 10.6229 9.18068 10.3952 9.01873C10.1382 8.836 9.83268 8.7185 9.22165 8.48349L6.66797 7.5013L9.22165 6.51912C9.83268 6.28411 10.1382 6.1666 10.3952 5.98387C10.6229 5.82192 10.8219 5.62293 10.9839 5.39517C11.1666 5.13819 11.2841 4.83268 11.5191 4.22165L12.5013 1.66797Z",stroke:"currentColor"})]}),v.jsx("defs",{children:v.jsx("clipPath",{id:"clip0_8279_26143",children:v.jsx("rect",{width:"20",height:"20",fill:"white"})})})]}),spinner:e=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,className:Te("animate-spin",e.className),children:v.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),stripe:e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"24",viewBox:"0 0 468 222.5",...e,children:[v.jsx("style",{children:".st0{fill-rule:evenodd;clip-rule:evenodd;fill:#635bff}"}),v.jsx("path",{d:"M414 113.4c0-25.6-12.4-45.8-36.1-45.8-23.8 0-38.2 20.2-38.2 45.6 0 30.1 17 45.3 41.4 45.3 11.9 0 20.9-2.7 27.7-6.5v-20c-6.8 3.4-14.6 5.5-24.5 5.5-9.7 0-18.3-3.4-19.4-15.2h48.9c0-1.3.2-6.5.2-8.9zm-49.4-9.5c0-11.3 6.9-16 13.2-16 6.1 0 12.6 4.7 12.6 16h-25.8zM301.1 67.6c-9.8 0-16.1 4.6-19.6 7.8l-1.3-6.2h-22v116.6l25-5.3.1-28.3c3.6 2.6 8.9 6.3 17.7 6.3 17.9 0 34.2-14.4 34.2-46.1-.1-29-16.6-44.8-34.1-44.8zm-6 68.9c-5.9 0-9.4-2.1-11.8-4.7l-.1-37.1c2.6-2.9 6.2-4.9 11.9-4.9 9.1 0 15.4 10.2 15.4 23.3 0 13.4-6.2 23.4-15.4 23.4zM223.8 61.7l25.1-5.4V36l-25.1 5.3zM223.8 69.3h25.1v87.5h-25.1zM196.9 76.7l-1.6-7.4h-21.6v87.5h25V97.5c5.9-7.7 15.9-6.3 19-5.2v-23c-3.2-1.2-14.9-3.4-20.8 7.4zM146.9 47.6l-24.4 5.2-.1 80.1c0 14.8 11.1 25.7 25.9 25.7 8.2 0 14.2-1.5 17.5-3.3V135c-3.2 1.3-19 5.9-19-8.9V90.6h19V69.3h-19l.1-21.7zM79.3 94.7c0-3.9 3.2-5.4 8.5-5.4 7.6 0 17.2 2.3 24.8 6.4V72.2c-8.3-3.3-16.5-4.6-24.8-4.6C67.5 67.6 54 78.2 54 95.9c0 27.6 38 23.2 38 35.1 0 4.6-4 6.1-9.6 6.1-8.3 0-18.9-3.4-27.3-8v23.8c9.3 4 18.7 5.7 27.3 5.7 20.8 0 35.1-10.3 35.1-28.2-.1-29.8-38.2-24.5-38.2-35.7z",className:"st0"})]}),tool2:e=>v.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:v.jsx("g",{id:"tool-02",children:v.jsx("path",{id:"Icon",d:"M6 6L10.5 10.5M6 6H3L2 3L3 2L6 3V6ZM19.259 2.74101L16.6314 5.36863C16.2354 5.76465 16.0373 5.96265 15.9632 6.19098C15.8979 6.39183 15.8979 6.60817 15.9632 6.80902C16.0373 7.03735 16.2354 7.23535 16.6314 7.63137L16.8686 7.86863C17.2646 8.26465 17.4627 8.46265 17.691 8.53684C17.8918 8.6021 18.1082 8.6021 18.309 8.53684C18.5373 8.46265 18.7354 8.26465 19.1314 7.86863L21.5893 5.41072C21.854 6.05488 22 6.76039 22 7.5C22 10.5376 19.5376 13 16.5 13C16.1338 13 15.7759 12.9642 15.4298 12.8959C14.9436 12.8001 14.7005 12.7521 14.5532 12.7668C14.3965 12.7824 14.3193 12.8059 14.1805 12.8802C14.0499 12.9501 13.919 13.081 13.657 13.343L6.5 20.5C5.67157 21.3284 4.32843 21.3284 3.5 20.5C2.67157 19.6716 2.67157 18.3284 3.5 17.5L10.657 10.343C10.919 10.081 11.0499 9.95005 11.1198 9.81949C11.1941 9.68068 11.2176 9.60347 11.2332 9.44681C11.2479 9.29945 11.1999 9.05638 11.1041 8.57024C11.0358 8.22406 11 7.86621 11 7.5C11 4.46243 13.4624 2 16.5 2C17.5055 2 18.448 2.26982 19.259 2.74101ZM12.0001 14.9999L17.5 20.4999C18.3284 21.3283 19.6716 21.3283 20.5 20.4999C21.3284 19.6715 21.3284 18.3283 20.5 17.4999L15.9753 12.9753C15.655 12.945 15.3427 12.8872 15.0408 12.8043C14.6517 12.6975 14.2249 12.7751 13.9397 13.0603L12.0001 14.9999Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),instagram:e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",...e,className:Te("stroke-2",e.className),children:[v.jsx("rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5"}),v.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),v.jsx("line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5"})]}),twitter:e=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",...e,className:Te("stroke-2",e.className),children:v.jsx("path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"})}),linkedIn:e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",...e,className:Te("stroke-2",e.className),children:[v.jsx("path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"}),v.jsx("rect",{width:"4",height:"12",x:"2",y:"9"}),v.jsx("circle",{cx:"4",cy:"4",r:"2"})]}),facebook:e=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",...e,className:Te("stroke-2",e.className),children:v.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})}),webform:e=>v.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:v.jsx("g",{id:"file-05",children:v.jsx("path",{id:"Icon",d:"M7 1.13477V3.20004C7 3.48006 7 3.62007 7.0545 3.72703C7.10243 3.82111 7.17892 3.8976 7.273 3.94554C7.37996 4.00004 7.51997 4.00004 7.8 4.00004H9.86527M7 8.5H4M8 6.5H4M10 4.99411V8.6C10 9.44008 10 9.86012 9.83651 10.181C9.6927 10.4632 9.46323 10.6927 9.18099 10.8365C8.86012 11 8.44008 11 7.6 11H4.4C3.55992 11 3.13988 11 2.81901 10.8365C2.53677 10.6927 2.3073 10.4632 2.16349 10.181C2 9.86012 2 9.44008 2 8.6V3.4C2 2.55992 2 2.13988 2.16349 1.81901C2.3073 1.53677 2.53677 1.3073 2.81901 1.16349C3.13988 1 3.55992 1 4.4 1H6.00589C6.37277 1 6.55622 1 6.72885 1.04145C6.8819 1.07819 7.02822 1.1388 7.16243 1.22104C7.3138 1.3138 7.44352 1.44352 7.70294 1.70294L9.29706 3.29706C9.55648 3.55648 9.6862 3.6862 9.77896 3.83757C9.8612 3.97178 9.92181 4.1181 9.95855 4.27115C10 4.44378 10 4.62723 10 4.99411Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})}),receiptCheck:e=>v.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:v.jsx("path",{d:"M9 10.5L11 12.5L15.5 8M20 21V7.8C20 6.11984 20 5.27976 19.673 4.63803C19.3854 4.07354 18.9265 3.6146 18.362 3.32698C17.7202 3 16.8802 3 15.2 3H8.8C7.11984 3 6.27976 3 5.63803 3.32698C5.07354 3.6146 4.6146 4.07354 4.32698 4.63803C4 5.27976 4 6.11984 4 7.8V21L6.75 19L9.25 21L12 19L14.75 21L17.25 19L20 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),palette:$5},ze=({type:e,className:t,style:n,strokeWidth:i})=>{const r=cS[e];return v.jsx(r,{className:Te(t),style:n,strokeWidth:i})};function wn(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),n===!1||!r.defaultPrevented)return t?.(r)}}function vm(e,t=[]){let n=[];function i(o,s){const a=O.createContext(s),c=n.length;n=[...n,s];const l=d=>{const{scope:f,children:h,...m}=d,p=f?.[e]?.[c]||a,y=O.useMemo(()=>m,Object.values(m));return v.jsx(p.Provider,{value:y,children:h})};l.displayName=o+"Provider";function u(d,f){const h=f?.[e]?.[c]||a,m=O.useContext(h);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[l,u]}const r=()=>{const o=n.map(s=>O.createContext(s));return function(a){const c=a?.[e]||o;return O.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return r.scopeName=e,[i,lS(r,...t)]}function lS(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const s=i.reduce((a,{useScope:c,scopeName:l})=>{const d=c(o)[`__scope${l}`];return{...a,...d}},{});return O.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var uS=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Wn=uS.reduce((e,t)=>{const n=tm(`Primitive.${t}`),i=O.forwardRef((r,o)=>{const{asChild:s,...a}=r,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(c,{...a,ref:o})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function dS(e,t){e&&lu.flushSync(()=>e.dispatchEvent(t))}function Ho(e){const t=O.useRef(e);return O.useEffect(()=>{t.current=e}),O.useMemo(()=>(...n)=>t.current?.(...n),[])}function hS(e,t=globalThis?.document){const n=Ho(e);O.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var fS="DismissableLayer",qc="dismissableLayer.update",pS="dismissableLayer.pointerDownOutside",mS="dismissableLayer.focusOutside",ym,bm=O.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),km=O.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...c}=e,l=O.useContext(bm),[u,d]=O.useState(null),f=u?.ownerDocument??globalThis?.document,[,h]=O.useState({}),m=gi(t,x=>d(x)),p=Array.from(l.layers),[y]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),g=p.indexOf(y),S=u?p.indexOf(u):-1,C=l.layersWithOutsidePointerEventsDisabled.size>0,w=S>=g,k=yS(x=>{const T=x.target,P=[...l.branches].some(A=>A.contains(T));!w||P||(r?.(x),s?.(x),x.defaultPrevented||a?.())},f),b=bS(x=>{const T=x.target;[...l.branches].some(A=>A.contains(T))||(o?.(x),s?.(x),x.defaultPrevented||a?.())},f);return hS(x=>{S===l.layers.size-1&&(i?.(x),!x.defaultPrevented&&a&&(x.preventDefault(),a()))},f),O.useEffect(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(ym=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),Cm(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=ym)}},[u,f,n,l]),O.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),Cm())},[u,l]),O.useEffect(()=>{const x=()=>h({});return document.addEventListener(qc,x),()=>document.removeEventListener(qc,x)},[]),v.jsx(Wn.div,{...c,ref:m,style:{pointerEvents:C?w?"auto":"none":void 0,...e.style},onFocusCapture:wn(e.onFocusCapture,b.onFocusCapture),onBlurCapture:wn(e.onBlurCapture,b.onBlurCapture),onPointerDownCapture:wn(e.onPointerDownCapture,k.onPointerDownCapture)})});km.displayName=fS;var gS="DismissableLayerBranch",vS=O.forwardRef((e,t)=>{const n=O.useContext(bm),i=O.useRef(null),r=gi(t,i);return O.useEffect(()=>{const o=i.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),v.jsx(Wn.div,{...e,ref:r})});vS.displayName=gS;function yS(e,t=globalThis?.document){const n=Ho(e),i=O.useRef(!1),r=O.useRef(()=>{});return O.useEffect(()=>{const o=a=>{if(a.target&&!i.current){let c=function(){wm(pS,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=c,t.addEventListener("click",r.current,{once:!0})):c()}else t.removeEventListener("click",r.current);i.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",o),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function bS(e,t=globalThis?.document){const n=Ho(e),i=O.useRef(!1);return O.useEffect(()=>{const r=o=>{o.target&&!i.current&&wm(mS,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Cm(){const e=new CustomEvent(qc);document.dispatchEvent(e)}function wm(e,t,n,{discrete:i}){const r=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),i?dS(r,o):r.dispatchEvent(o)}var Zn=globalThis?.document?O.useLayoutEffect:()=>{},kS=O[" useId ".trim().toString()]||(()=>{}),CS=0;function wS(e){const[t,n]=O.useState(kS());return Zn(()=>{n(i=>i??String(CS++))},[e]),t?`radix-${t}`:""}const SS=["top","right","bottom","left"],Gn=Math.min,Et=Math.max,Wo=Math.round,Zo=Math.floor,nn=e=>({x:e,y:e}),TS={left:"right",right:"left",bottom:"top",top:"bottom"},xS={start:"end",end:"start"};function Hc(e,t,n){return Et(e,Gn(t,n))}function Sn(e,t){return typeof e=="function"?e(t):e}function Tn(e){return e.split("-")[0]}function Hi(e){return e.split("-")[1]}function Wc(e){return e==="x"?"y":"x"}function Zc(e){return e==="y"?"height":"width"}const _S=new Set(["top","bottom"]);function rn(e){return _S.has(Tn(e))?"y":"x"}function Gc(e){return Wc(rn(e))}function ES(e,t,n){n===void 0&&(n=!1);const i=Hi(e),r=Gc(e),o=Zc(r);let s=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Go(s)),[s,Go(s)]}function PS(e){const t=Go(e);return[Kc(e),t,Kc(t)]}function Kc(e){return e.replace(/start|end/g,t=>xS[t])}const Sm=["left","right"],Tm=["right","left"],MS=["top","bottom"],IS=["bottom","top"];function OS(e,t,n){switch(e){case"top":case"bottom":return n?t?Tm:Sm:t?Sm:Tm;case"left":case"right":return t?MS:IS;default:return[]}}function NS(e,t,n,i){const r=Hi(e);let o=OS(Tn(e),n==="start",i);return r&&(o=o.map(s=>s+"-"+r),t&&(o=o.concat(o.map(Kc)))),o}function Go(e){return e.replace(/left|right|bottom|top/g,t=>TS[t])}function AS(e){return{top:0,right:0,bottom:0,left:0,...e}}function xm(e){return typeof e!="number"?AS(e):{top:e,right:e,bottom:e,left:e}}function Ko(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}function _m(e,t,n){let{reference:i,floating:r}=e;const o=rn(t),s=Gc(t),a=Zc(s),c=Tn(t),l=o==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let h;switch(c){case"top":h={x:u,y:i.y-r.height};break;case"bottom":h={x:u,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-r.width,y:d};break;default:h={x:i.x,y:i.y}}switch(Hi(t)){case"start":h[s]-=f*(n&&l?-1:1);break;case"end":h[s]+=f*(n&&l?-1:1);break}return h}const RS=async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(t));let l=await s.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=_m(l,i,c),f=i,h={},m=0;for(let p=0;p<a.length;p++){const{name:y,fn:g}=a[p],{x:S,y:C,data:w,reset:k}=await g({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:l,platform:s,elements:{reference:e,floating:t}});u=S??u,d=C??d,h={...h,[y]:{...h[y],...w}},k&&m<=50&&(m++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(l=k.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:r}):k.rects),{x:u,y:d}=_m(l,f,c)),p=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:h}};async function Er(e,t){var n;t===void 0&&(t={});const{x:i,y:r,platform:o,rects:s,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Sn(t,e),m=xm(h),y=a[f?d==="floating"?"reference":"floating":d],g=Ko(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(y)))==null||n?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),S=d==="floating"?{x:i,y:r,width:s.floating.width,height:s.floating.height}:s.reference,C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),w=await(o.isElement==null?void 0:o.isElement(C))?await(o.getScale==null?void 0:o.getScale(C))||{x:1,y:1}:{x:1,y:1},k=Ko(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:S,offsetParent:C,strategy:c}):S);return{top:(g.top-k.top+m.top)/w.y,bottom:(k.bottom-g.bottom+m.bottom)/w.y,left:(g.left-k.left+m.left)/w.x,right:(k.right-g.right+m.right)/w.x}}const DS=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:r,rects:o,platform:s,elements:a,middlewareData:c}=t,{element:l,padding:u=0}=Sn(e,t)||{};if(l==null)return{};const d=xm(u),f={x:n,y:i},h=Gc(r),m=Zc(h),p=await s.getDimensions(l),y=h==="y",g=y?"top":"left",S=y?"bottom":"right",C=y?"clientHeight":"clientWidth",w=o.reference[m]+o.reference[h]-f[h]-o.floating[m],k=f[h]-o.reference[h],b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l));let x=b?b[C]:0;(!x||!await(s.isElement==null?void 0:s.isElement(b)))&&(x=a.floating[C]||o.floating[m]);const T=w/2-k/2,P=x/2-p[m]/2-1,A=Gn(d[g],P),M=Gn(d[S],P),R=A,z=x-p[m]-M,D=x/2-p[m]/2+T,F=Hc(R,D,z),$=!c.arrow&&Hi(r)!=null&&D!==F&&o.reference[m]/2-(D<R?A:M)-p[m]/2<0,V=$?D<R?D-R:D-z:0;return{[h]:f[h]+V,data:{[h]:F,centerOffset:D-F-V,...$&&{alignmentOffset:V}},reset:$}}}),LS=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:r,middlewareData:o,rects:s,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...y}=Sn(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const g=Tn(r),S=rn(a),C=Tn(a)===a,w=await(c.isRTL==null?void 0:c.isRTL(l.floating)),k=f||(C||!p?[Go(a)]:PS(a)),b=m!=="none";!f&&b&&k.push(...NS(a,p,m,w));const x=[a,...k],T=await Er(t,y),P=[];let A=((i=o.flip)==null?void 0:i.overflows)||[];if(u&&P.push(T[g]),d){const D=ES(r,s,w);P.push(T[D[0]],T[D[1]])}if(A=[...A,{placement:r,overflows:P}],!P.every(D=>D<=0)){var M,R;const D=(((M=o.flip)==null?void 0:M.index)||0)+1,F=x[D];if(F&&(!(d==="alignment"?S!==rn(F):!1)||A.every(L=>rn(L.placement)===S?L.overflows[0]>0:!0)))return{data:{index:D,overflows:A},reset:{placement:F}};let $=(R=A.filter(V=>V.overflows[0]<=0).sort((V,L)=>V.overflows[1]-L.overflows[1])[0])==null?void 0:R.placement;if(!$)switch(h){case"bestFit":{var z;const V=(z=A.filter(L=>{if(b){const J=rn(L.placement);return J===S||J==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(J=>J>0).reduce((J,_)=>J+_,0)]).sort((L,J)=>L[1]-J[1])[0])==null?void 0:z[0];V&&($=V);break}case"initialPlacement":$=a;break}if(r!==$)return{reset:{placement:$}}}return{}}}};function Em(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Pm(e){return SS.some(t=>e[t]>=0)}const FS=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...r}=Sn(e,t);switch(i){case"referenceHidden":{const o=await Er(t,{...r,elementContext:"reference"}),s=Em(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Pm(s)}}}case"escaped":{const o=await Er(t,{...r,altBoundary:!0}),s=Em(o,n.floating);return{data:{escapedOffsets:s,escaped:Pm(s)}}}default:return{}}}}},Mm=new Set(["left","top"]);async function zS(e,t){const{placement:n,platform:i,elements:r}=e,o=await(i.isRTL==null?void 0:i.isRTL(r.floating)),s=Tn(n),a=Hi(n),c=rn(n)==="y",l=Mm.has(s)?-1:1,u=o&&c?-1:1,d=Sn(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),c?{x:h*u,y:f*l}:{x:f*l,y:h*u}}const US=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:r,y:o,placement:s,middlewareData:a}=t,c=await zS(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+c.x,y:o+c.y,data:{...c,placement:s}}}}},$S=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:r}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:y=>{let{x:g,y:S}=y;return{x:g,y:S}}},...c}=Sn(e,t),l={x:n,y:i},u=await Er(t,c),d=rn(Tn(r)),f=Wc(d);let h=l[f],m=l[d];if(o){const y=f==="y"?"top":"left",g=f==="y"?"bottom":"right",S=h+u[y],C=h-u[g];h=Hc(S,h,C)}if(s){const y=d==="y"?"top":"left",g=d==="y"?"bottom":"right",S=m+u[y],C=m-u[g];m=Hc(S,m,C)}const p=a.fn({...t,[f]:h,[d]:m});return{...p,data:{x:p.x-n,y:p.y-i,enabled:{[f]:o,[d]:s}}}}}},jS=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:r,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=Sn(e,t),u={x:n,y:i},d=rn(r),f=Wc(d);let h=u[f],m=u[d];const p=Sn(a,t),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const C=f==="y"?"height":"width",w=o.reference[f]-o.floating[C]+y.mainAxis,k=o.reference[f]+o.reference[C]-y.mainAxis;h<w?h=w:h>k&&(h=k)}if(l){var g,S;const C=f==="y"?"width":"height",w=Mm.has(Tn(r)),k=o.reference[d]-o.floating[C]+(w&&((g=s.offset)==null?void 0:g[d])||0)+(w?0:y.crossAxis),b=o.reference[d]+o.reference[C]+(w?0:((S=s.offset)==null?void 0:S[d])||0)-(w?y.crossAxis:0);m<k?m=k:m>b&&(m=b)}return{[f]:h,[d]:m}}}},BS=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:r,rects:o,platform:s,elements:a}=t,{apply:c=()=>{},...l}=Sn(e,t),u=await Er(t,l),d=Tn(r),f=Hi(r),h=rn(r)==="y",{width:m,height:p}=o.floating;let y,g;d==="top"||d==="bottom"?(y=d,g=f===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(g=d,y=f==="end"?"top":"bottom");const S=p-u.top-u.bottom,C=m-u.left-u.right,w=Gn(p-u[y],S),k=Gn(m-u[g],C),b=!t.middlewareData.shift;let x=w,T=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=C),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(x=S),b&&!f){const A=Et(u.left,0),M=Et(u.right,0),R=Et(u.top,0),z=Et(u.bottom,0);h?T=m-2*(A!==0||M!==0?A+M:Et(u.left,u.right)):x=p-2*(R!==0||z!==0?R+z:Et(u.top,u.bottom))}await c({...t,availableWidth:T,availableHeight:x});const P=await s.getDimensions(a.floating);return m!==P.width||p!==P.height?{reset:{rects:!0}}:{}}}};function Yo(){return typeof window<"u"}function Wi(e){return Im(e)?(e.nodeName||"").toLowerCase():"#document"}function Pt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function on(e){var t;return(t=(Im(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Im(e){return Yo()?e instanceof Node||e instanceof Pt(e).Node:!1}function Wt(e){return Yo()?e instanceof Element||e instanceof Pt(e).Element:!1}function sn(e){return Yo()?e instanceof HTMLElement||e instanceof Pt(e).HTMLElement:!1}function Om(e){return!Yo()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Pt(e).ShadowRoot}const VS=new Set(["inline","contents"]);function Pr(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=Zt(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!VS.has(r)}const qS=new Set(["table","td","th"]);function HS(e){return qS.has(Wi(e))}const WS=[":popover-open",":modal"];function Qo(e){return WS.some(t=>{try{return e.matches(t)}catch{return!1}})}const ZS=["transform","translate","scale","rotate","perspective"],GS=["transform","translate","scale","rotate","perspective","filter"],KS=["paint","layout","strict","content"];function Yc(e){const t=Qc(),n=Wt(e)?Zt(e):e;return ZS.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||GS.some(i=>(n.willChange||"").includes(i))||KS.some(i=>(n.contain||"").includes(i))}function YS(e){let t=Kn(e);for(;sn(t)&&!Zi(t);){if(Yc(t))return t;if(Qo(t))return null;t=Kn(t)}return null}function Qc(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const QS=new Set(["html","body","#document"]);function Zi(e){return QS.has(Wi(e))}function Zt(e){return Pt(e).getComputedStyle(e)}function Jo(e){return Wt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Kn(e){if(Wi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Om(e)&&e.host||on(e);return Om(t)?t.host:t}function Nm(e){const t=Kn(e);return Zi(t)?e.ownerDocument?e.ownerDocument.body:e.body:sn(t)&&Pr(t)?t:Nm(t)}function Mr(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=Nm(e),o=r===((i=e.ownerDocument)==null?void 0:i.body),s=Pt(r);if(o){const a=Jc(s);return t.concat(s,s.visualViewport||[],Pr(r)?r:[],a&&n?Mr(a):[])}return t.concat(r,Mr(r,[],n))}function Jc(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Am(e){const t=Zt(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=sn(e),o=r?e.offsetWidth:n,s=r?e.offsetHeight:i,a=Wo(n)!==o||Wo(i)!==s;return a&&(n=o,i=s),{width:n,height:i,$:a}}function Xc(e){return Wt(e)?e:e.contextElement}function Gi(e){const t=Xc(e);if(!sn(t))return nn(1);const n=t.getBoundingClientRect(),{width:i,height:r,$:o}=Am(t);let s=(o?Wo(n.width):n.width)/i,a=(o?Wo(n.height):n.height)/r;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const JS=nn(0);function Rm(e){const t=Pt(e);return!Qc()||!t.visualViewport?JS:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function XS(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Pt(e)?!1:t}function vi(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=Xc(e);let s=nn(1);t&&(i?Wt(i)&&(s=Gi(i)):s=Gi(e));const a=XS(o,n,i)?Rm(o):nn(0);let c=(r.left+a.x)/s.x,l=(r.top+a.y)/s.y,u=r.width/s.x,d=r.height/s.y;if(o){const f=Pt(o),h=i&&Wt(i)?Pt(i):i;let m=f,p=Jc(m);for(;p&&i&&h!==m;){const y=Gi(p),g=p.getBoundingClientRect(),S=Zt(p),C=g.left+(p.clientLeft+parseFloat(S.paddingLeft))*y.x,w=g.top+(p.clientTop+parseFloat(S.paddingTop))*y.y;c*=y.x,l*=y.y,u*=y.x,d*=y.y,c+=C,l+=w,m=Pt(p),p=Jc(m)}}return Ko({width:u,height:d,x:c,y:l})}function Xo(e,t){const n=Jo(e).scrollLeft;return t?t.left+n:vi(on(e)).left+n}function Dm(e,t){const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-Xo(e,n),r=n.top+t.scrollTop;return{x:i,y:r}}function e9(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e;const o=r==="fixed",s=on(i),a=t?Qo(t.floating):!1;if(i===s||a&&o)return n;let c={scrollLeft:0,scrollTop:0},l=nn(1);const u=nn(0),d=sn(i);if((d||!d&&!o)&&((Wi(i)!=="body"||Pr(s))&&(c=Jo(i)),sn(i))){const h=vi(i);l=Gi(i),u.x=h.x+i.clientLeft,u.y=h.y+i.clientTop}const f=s&&!d&&!o?Dm(s,c):nn(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:n.y*l.y-c.scrollTop*l.y+u.y+f.y}}function t9(e){return Array.from(e.getClientRects())}function n9(e){const t=on(e),n=Jo(e),i=e.ownerDocument.body,r=Et(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),o=Et(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let s=-n.scrollLeft+Xo(e);const a=-n.scrollTop;return Zt(i).direction==="rtl"&&(s+=Et(t.clientWidth,i.clientWidth)-r),{width:r,height:o,x:s,y:a}}const Lm=25;function i9(e,t){const n=Pt(e),i=on(e),r=n.visualViewport;let o=i.clientWidth,s=i.clientHeight,a=0,c=0;if(r){o=r.width,s=r.height;const u=Qc();(!u||u&&t==="fixed")&&(a=r.offsetLeft,c=r.offsetTop)}const l=Xo(i);if(l<=0){const u=i.ownerDocument,d=u.body,f=getComputedStyle(d),h=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,m=Math.abs(i.clientWidth-d.clientWidth-h);m<=Lm&&(o-=m)}else l<=Lm&&(o+=l);return{width:o,height:s,x:a,y:c}}const r9=new Set(["absolute","fixed"]);function o9(e,t){const n=vi(e,!0,t==="fixed"),i=n.top+e.clientTop,r=n.left+e.clientLeft,o=sn(e)?Gi(e):nn(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,c=r*o.x,l=i*o.y;return{width:s,height:a,x:c,y:l}}function Fm(e,t,n){let i;if(t==="viewport")i=i9(e,n);else if(t==="document")i=n9(on(e));else if(Wt(t))i=o9(t,n);else{const r=Rm(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Ko(i)}function zm(e,t){const n=Kn(e);return n===t||!Wt(n)||Zi(n)?!1:Zt(n).position==="fixed"||zm(n,t)}function s9(e,t){const n=t.get(e);if(n)return n;let i=Mr(e,[],!1).filter(a=>Wt(a)&&Wi(a)!=="body"),r=null;const o=Zt(e).position==="fixed";let s=o?Kn(e):e;for(;Wt(s)&&!Zi(s);){const a=Zt(s),c=Yc(s);!c&&a.position==="fixed"&&(r=null),(o?!c&&!r:!c&&a.position==="static"&&!!r&&r9.has(r.position)||Pr(s)&&!c&&zm(e,s))?i=i.filter(u=>u!==s):r=a,s=Kn(s)}return t.set(e,i),i}function a9(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const s=[...n==="clippingAncestors"?Qo(t)?[]:s9(t,this._c):[].concat(n),i],a=s[0],c=s.reduce((l,u)=>{const d=Fm(t,u,r);return l.top=Et(d.top,l.top),l.right=Gn(d.right,l.right),l.bottom=Gn(d.bottom,l.bottom),l.left=Et(d.left,l.left),l},Fm(t,a,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function c9(e){const{width:t,height:n}=Am(e);return{width:t,height:n}}function l9(e,t,n){const i=sn(t),r=on(t),o=n==="fixed",s=vi(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const c=nn(0);function l(){c.x=Xo(r)}if(i||!i&&!o)if((Wi(t)!=="body"||Pr(r))&&(a=Jo(t)),i){const h=vi(t,!0,o,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else r&&l();o&&!i&&r&&l();const u=r&&!i&&!o?Dm(r,a):nn(0),d=s.left+a.scrollLeft-c.x-u.x,f=s.top+a.scrollTop-c.y-u.y;return{x:d,y:f,width:s.width,height:s.height}}function el(e){return Zt(e).position==="static"}function Um(e,t){if(!sn(e)||Zt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return on(e)===n&&(n=n.ownerDocument.body),n}function $m(e,t){const n=Pt(e);if(Qo(e))return n;if(!sn(e)){let r=Kn(e);for(;r&&!Zi(r);){if(Wt(r)&&!el(r))return r;r=Kn(r)}return n}let i=Um(e,t);for(;i&&HS(i)&&el(i);)i=Um(i,t);return i&&Zi(i)&&el(i)&&!Yc(i)?n:i||YS(e)||n}const u9=async function(e){const t=this.getOffsetParent||$m,n=this.getDimensions,i=await n(e.floating);return{reference:l9(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function d9(e){return Zt(e).direction==="rtl"}const h9={convertOffsetParentRelativeRectToViewportRelativeRect:e9,getDocumentElement:on,getClippingRect:a9,getOffsetParent:$m,getElementRects:u9,getClientRects:t9,getDimensions:c9,getScale:Gi,isElement:Wt,isRTL:d9};function jm(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function f9(e,t){let n=null,i;const r=on(e);function o(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function s(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),o();const l=e.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=l;if(a||t(),!f||!h)return;const m=Zo(d),p=Zo(r.clientWidth-(u+f)),y=Zo(r.clientHeight-(d+h)),g=Zo(u),C={rootMargin:-m+"px "+-p+"px "+-y+"px "+-g+"px",threshold:Et(0,Gn(1,c))||1};let w=!0;function k(b){const x=b[0].intersectionRatio;if(x!==c){if(!w)return s();x?s(!1,x):i=setTimeout(()=>{s(!1,1e-7)},1e3)}x===1&&!jm(l,e.getBoundingClientRect())&&s(),w=!1}try{n=new IntersectionObserver(k,{...C,root:r.ownerDocument})}catch{n=new IntersectionObserver(k,C)}n.observe(e)}return s(!0),o}function p9(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=i,l=Xc(e),u=r||o?[...l?Mr(l):[],...Mr(t)]:[];u.forEach(g=>{r&&g.addEventListener("scroll",n,{passive:!0}),o&&g.addEventListener("resize",n)});const d=l&&a?f9(l,n):null;let f=-1,h=null;s&&(h=new ResizeObserver(g=>{let[S]=g;S&&S.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var C;(C=h)==null||C.observe(t)})),n()}),l&&!c&&h.observe(l),h.observe(t));let m,p=c?vi(e):null;c&&y();function y(){const g=vi(e);p&&!jm(p,g)&&n(),p=g,m=requestAnimationFrame(y)}return n(),()=>{var g;u.forEach(S=>{r&&S.removeEventListener("scroll",n),o&&S.removeEventListener("resize",n)}),d?.(),(g=h)==null||g.disconnect(),h=null,c&&cancelAnimationFrame(m)}}const m9=US,g9=$S,v9=LS,y9=BS,b9=FS,Bm=DS,k9=jS,C9=(e,t,n)=>{const i=new Map,r={platform:h9,...n},o={...r.platform,_c:i};return RS(e,t,{...r,platform:o})};var w9=typeof document<"u",S9=function(){},es=w9?U.useLayoutEffect:S9;function ts(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!ts(e[i],t[i]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const o=r[i];if(!(o==="_owner"&&e.$$typeof)&&!ts(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Vm(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function qm(e,t){const n=Vm(e);return Math.round(t*n)/n}function tl(e){const t=O.useRef(e);return es(()=>{t.current=e}),t}function T9(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:c,open:l}=e,[u,d]=O.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=O.useState(i);ts(f,i)||h(i);const[m,p]=O.useState(null),[y,g]=O.useState(null),S=O.useCallback(L=>{L!==b.current&&(b.current=L,p(L))},[]),C=O.useCallback(L=>{L!==x.current&&(x.current=L,g(L))},[]),w=o||m,k=s||y,b=O.useRef(null),x=O.useRef(null),T=O.useRef(u),P=c!=null,A=tl(c),M=tl(r),R=tl(l),z=O.useCallback(()=>{if(!b.current||!x.current)return;const L={placement:t,strategy:n,middleware:f};M.current&&(L.platform=M.current),C9(b.current,x.current,L).then(J=>{const _={...J,isPositioned:R.current!==!1};D.current&&!ts(T.current,_)&&(T.current=_,lu.flushSync(()=>{d(_)}))})},[f,t,n,M,R]);es(()=>{l===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(L=>({...L,isPositioned:!1})))},[l]);const D=O.useRef(!1);es(()=>(D.current=!0,()=>{D.current=!1}),[]),es(()=>{if(w&&(b.current=w),k&&(x.current=k),w&&k){if(A.current)return A.current(w,k,z);z()}},[w,k,z,A,P]);const F=O.useMemo(()=>({reference:b,floating:x,setReference:S,setFloating:C}),[S,C]),$=O.useMemo(()=>({reference:w,floating:k}),[w,k]),V=O.useMemo(()=>{const L={position:n,left:0,top:0};if(!$.floating)return L;const J=qm($.floating,u.x),_=qm($.floating,u.y);return a?{...L,transform:"translate("+J+"px, "+_+"px)",...Vm($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:J,top:_}},[n,a,$.floating,u.x,u.y]);return O.useMemo(()=>({...u,update:z,refs:F,elements:$,floatingStyles:V}),[u,z,F,$,V])}const x9=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:r}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?Bm({element:i.current,padding:r}).fn(n):{}:i?Bm({element:i,padding:r}).fn(n):{}}}},_9=(e,t)=>({...m9(e),options:[e,t]}),E9=(e,t)=>({...g9(e),options:[e,t]}),P9=(e,t)=>({...k9(e),options:[e,t]}),M9=(e,t)=>({...v9(e),options:[e,t]}),I9=(e,t)=>({...y9(e),options:[e,t]}),O9=(e,t)=>({...b9(e),options:[e,t]}),N9=(e,t)=>({...x9(e),options:[e,t]});var A9="Arrow",Hm=O.forwardRef((e,t)=>{const{children:n,width:i=10,height:r=5,...o}=e;return v.jsx(Wn.svg,{...o,ref:t,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});Hm.displayName=A9;var R9=Hm;function D9(e){const[t,n]=O.useState(void 0);return Zn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const o=r[0];let s,a;if("borderBoxSize"in o){const c=o.borderBoxSize,l=Array.isArray(c)?c[0]:c;s=l.inlineSize,a=l.blockSize}else s=e.offsetWidth,a=e.offsetHeight;n({width:s,height:a})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var nl="Popper",[Wm,Zm]=vm(nl),[L9,Gm]=Wm(nl),Km=e=>{const{__scopePopper:t,children:n}=e,[i,r]=O.useState(null);return v.jsx(L9,{scope:t,anchor:i,onAnchorChange:r,children:n})};Km.displayName=nl;var Ym="PopperAnchor",Qm=O.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:i,...r}=e,o=Gm(Ym,n),s=O.useRef(null),a=gi(t,s),c=O.useRef(null);return O.useEffect(()=>{const l=c.current;c.current=i?.current||s.current,l!==c.current&&o.onAnchorChange(c.current)}),i?null:v.jsx(Wn.div,{...r,ref:a})});Qm.displayName=Ym;var il="PopperContent",[F9,z9]=Wm(il),Jm=O.forwardRef((e,t)=>{const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:m,...p}=e,y=Gm(il,n),[g,S]=O.useState(null),C=gi(t,ie=>S(ie)),[w,k]=O.useState(null),b=D9(w),x=b?.width??0,T=b?.height??0,P=i+(o!=="center"?"-"+o:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},M=Array.isArray(l)?l:[l],R=M.length>0,z={padding:A,boundary:M.filter($9),altBoundary:R},{refs:D,floatingStyles:F,placement:$,isPositioned:V,middlewareData:L}=T9({strategy:"fixed",placement:P,whileElementsMounted:(...ie)=>p9(...ie,{animationFrame:h==="always"}),elements:{reference:y.anchor},middleware:[_9({mainAxis:r+T,alignmentAxis:s}),c&&E9({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?P9():void 0,...z}),c&&M9({...z}),I9({...z,apply:({elements:ie,rects:xe,availableWidth:_e,availableHeight:Ce})=>{const{width:Re,height:Le}=xe.reference,ut=ie.floating.style;ut.setProperty("--radix-popper-available-width",`${_e}px`),ut.setProperty("--radix-popper-available-height",`${Ce}px`),ut.setProperty("--radix-popper-anchor-width",`${Re}px`),ut.setProperty("--radix-popper-anchor-height",`${Le}px`)}}),w&&N9({element:w,padding:a}),j9({arrowWidth:x,arrowHeight:T}),f&&O9({strategy:"referenceHidden",...z})]}),[J,_]=t1($),ee=Ho(m);Zn(()=>{V&&ee?.()},[V,ee]);const oe=L.arrow?.x,E=L.arrow?.y,ae=L.arrow?.centerOffset!==0,[ke,pe]=O.useState();return Zn(()=>{g&&pe(window.getComputedStyle(g).zIndex)},[g]),v.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:V?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[L.transformOrigin?.x,L.transformOrigin?.y].join(" "),...L.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:v.jsx(F9,{scope:n,placedSide:J,onArrowChange:k,arrowX:oe,arrowY:E,shouldHideArrow:ae,children:v.jsx(Wn.div,{"data-side":J,"data-align":_,...p,ref:C,style:{...p.style,animation:V?void 0:"none"}})})})});Jm.displayName=il;var Xm="PopperArrow",U9={top:"bottom",right:"left",bottom:"top",left:"right"},e1=O.forwardRef(function(t,n){const{__scopePopper:i,...r}=t,o=z9(Xm,i),s=U9[o.placedSide];return v.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:v.jsx(R9,{...r,ref:n,style:{...r.style,display:"block"}})})});e1.displayName=Xm;function $9(e){return e!==null}var j9=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:i,middlewareData:r}=t,s=r.arrow?.centerOffset!==0,a=s?0:e.arrowWidth,c=s?0:e.arrowHeight,[l,u]=t1(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(r.arrow?.x??0)+a/2,h=(r.arrow?.y??0)+c/2;let m="",p="";return l==="bottom"?(m=s?d:`${f}px`,p=`${-c}px`):l==="top"?(m=s?d:`${f}px`,p=`${i.floating.height+c}px`):l==="right"?(m=`${-c}px`,p=s?d:`${h}px`):l==="left"&&(m=`${i.floating.width+c}px`,p=s?d:`${h}px`),{data:{x:m,y:p}}}});function t1(e){const[t,n="center"]=e.split("-");return[t,n]}var B9=Km,V9=Qm,q9=Jm,H9=e1,W9="Portal",n1=O.forwardRef((e,t)=>{const{container:n,...i}=e,[r,o]=O.useState(!1);Zn(()=>o(!0),[]);const s=n||r&&globalThis?.document?.body;return s?au.createPortal(v.jsx(Wn.div,{...i,ref:t}),s):null});n1.displayName=W9;function Z9(e,t){return O.useReducer((n,i)=>t[n][i]??n,e)}var rl=e=>{const{present:t,children:n}=e,i=G9(t),r=typeof n=="function"?n({present:i.isPresent}):O.Children.only(n),o=gi(i.ref,K9(r));return typeof n=="function"||i.isPresent?O.cloneElement(r,{ref:o}):null};rl.displayName="Presence";function G9(e){const[t,n]=O.useState(),i=O.useRef(null),r=O.useRef(e),o=O.useRef("none"),s=e?"mounted":"unmounted",[a,c]=Z9(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return O.useEffect(()=>{const l=ns(i.current);o.current=a==="mounted"?l:"none"},[a]),Zn(()=>{const l=i.current,u=r.current;if(u!==e){const f=o.current,h=ns(l);e?c("MOUNT"):h==="none"||l?.display==="none"?c("UNMOUNT"):c(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,c]),Zn(()=>{if(t){let l;const u=t.ownerDocument.defaultView??window,d=h=>{const p=ns(i.current).includes(CSS.escape(h.animationName));if(h.target===t&&p&&(c("ANIMATION_END"),!r.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},f=h=>{h.target===t&&(o.current=ns(i.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:O.useCallback(l=>{i.current=l?getComputedStyle(l):null,n(l)},[])}}function ns(e){return e?.animationName||"none"}function K9(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Y9=O[" useInsertionEffect ".trim().toString()]||Zn;function Q9({prop:e,defaultProp:t,onChange:n=()=>{},caller:i}){const[r,o,s]=J9({defaultProp:t,onChange:n}),a=e!==void 0,c=a?e:r;{const u=O.useRef(e!==void 0);O.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const l=O.useCallback(u=>{if(a){const d=X9(u)?u(e):u;d!==e&&s.current?.(d)}else o(u)},[a,e,o,s]);return[c,l]}function J9({defaultProp:e,onChange:t}){const[n,i]=O.useState(e),r=O.useRef(n),o=O.useRef(t);return Y9(()=>{o.current=t},[t]),O.useEffect(()=>{r.current!==n&&(o.current?.(n),r.current=n)},[n,r]),[n,i,o]}function X9(e){return typeof e=="function"}var e8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),t8="VisuallyHidden",i1=O.forwardRef((e,t)=>v.jsx(Wn.span,{...e,ref:t,style:{...e8,...e.style}}));i1.displayName=t8;var n8=i1,[is]=vm("Tooltip",[Zm]),rs=Zm(),r1="TooltipProvider",i8=700,ol="tooltip.open",[r8,sl]=is(r1),o1=e=>{const{__scopeTooltip:t,delayDuration:n=i8,skipDelayDuration:i=300,disableHoverableContent:r=!1,children:o}=e,s=O.useRef(!0),a=O.useRef(!1),c=O.useRef(0);return O.useEffect(()=>{const l=c.current;return()=>window.clearTimeout(l)},[]),v.jsx(r8,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:O.useCallback(()=>{window.clearTimeout(c.current),s.current=!1},[]),onClose:O.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>s.current=!0,i)},[i]),isPointerInTransitRef:a,onPointerInTransitChange:O.useCallback(l=>{a.current=l},[]),disableHoverableContent:r,children:o})};o1.displayName=r1;var Ir="Tooltip",[o8,Or]=is(Ir),s1=e=>{const{__scopeTooltip:t,children:n,open:i,defaultOpen:r,onOpenChange:o,disableHoverableContent:s,delayDuration:a}=e,c=sl(Ir,e.__scopeTooltip),l=rs(t),[u,d]=O.useState(null),f=wS(),h=O.useRef(0),m=s??c.disableHoverableContent,p=a??c.delayDuration,y=O.useRef(!1),[g,S]=Q9({prop:i,defaultProp:r??!1,onChange:x=>{x?(c.onOpen(),document.dispatchEvent(new CustomEvent(ol))):c.onClose(),o?.(x)},caller:Ir}),C=O.useMemo(()=>g?y.current?"delayed-open":"instant-open":"closed",[g]),w=O.useCallback(()=>{window.clearTimeout(h.current),h.current=0,y.current=!1,S(!0)},[S]),k=O.useCallback(()=>{window.clearTimeout(h.current),h.current=0,S(!1)},[S]),b=O.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{y.current=!0,S(!0),h.current=0},p)},[p,S]);return O.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),v.jsx(B9,{...l,children:v.jsx(o8,{scope:t,contentId:f,open:g,stateAttribute:C,trigger:u,onTriggerChange:d,onTriggerEnter:O.useCallback(()=>{c.isOpenDelayedRef.current?b():w()},[c.isOpenDelayedRef,b,w]),onTriggerLeave:O.useCallback(()=>{m?k():(window.clearTimeout(h.current),h.current=0)},[k,m]),onOpen:w,onClose:k,disableHoverableContent:m,children:n})})};s1.displayName=Ir;var al="TooltipTrigger",a1=O.forwardRef((e,t)=>{const{__scopeTooltip:n,...i}=e,r=Or(al,n),o=sl(al,n),s=rs(n),a=O.useRef(null),c=gi(t,a,r.onTriggerChange),l=O.useRef(!1),u=O.useRef(!1),d=O.useCallback(()=>l.current=!1,[]);return O.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),v.jsx(V9,{asChild:!0,...s,children:v.jsx(Wn.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...i,ref:c,onPointerMove:wn(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:wn(e.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:wn(e.onPointerDown,()=>{r.open&&r.onClose(),l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:wn(e.onFocus,()=>{l.current||r.onOpen()}),onBlur:wn(e.onBlur,r.onClose),onClick:wn(e.onClick,r.onClose)})})});a1.displayName=al;var cl="TooltipPortal",[s8,a8]=is(cl,{forceMount:void 0}),c1=e=>{const{__scopeTooltip:t,forceMount:n,children:i,container:r}=e,o=Or(cl,t);return v.jsx(s8,{scope:t,forceMount:n,children:v.jsx(rl,{present:n||o.open,children:v.jsx(n1,{asChild:!0,container:r,children:i})})})};c1.displayName=cl;var Ki="TooltipContent",l1=O.forwardRef((e,t)=>{const n=a8(Ki,e.__scopeTooltip),{forceMount:i=n.forceMount,side:r="top",...o}=e,s=Or(Ki,e.__scopeTooltip);return v.jsx(rl,{present:i||s.open,children:s.disableHoverableContent?v.jsx(u1,{side:r,...o,ref:t}):v.jsx(c8,{side:r,...o,ref:t})})}),c8=O.forwardRef((e,t)=>{const n=Or(Ki,e.__scopeTooltip),i=sl(Ki,e.__scopeTooltip),r=O.useRef(null),o=gi(t,r),[s,a]=O.useState(null),{trigger:c,onClose:l}=n,u=r.current,{onPointerInTransitChange:d}=i,f=O.useCallback(()=>{a(null),d(!1)},[d]),h=O.useCallback((m,p)=>{const y=m.currentTarget,g={x:m.clientX,y:m.clientY},S=f8(g,y.getBoundingClientRect()),C=p8(g,S),w=m8(p.getBoundingClientRect()),k=v8([...C,...w]);a(k),d(!0)},[d]);return O.useEffect(()=>()=>f(),[f]),O.useEffect(()=>{if(c&&u){const m=y=>h(y,u),p=y=>h(y,c);return c.addEventListener("pointerleave",m),u.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",p)}}},[c,u,h,f]),O.useEffect(()=>{if(s){const m=p=>{const y=p.target,g={x:p.clientX,y:p.clientY},S=c?.contains(y)||u?.contains(y),C=!g8(g,s);S?f():C&&(f(),l())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[c,u,s,l,f]),v.jsx(u1,{...e,ref:o})}),[l8,u8]=is(Ir,{isInside:!1}),d8=p4("TooltipContent"),u1=O.forwardRef((e,t)=>{const{__scopeTooltip:n,children:i,"aria-label":r,onEscapeKeyDown:o,onPointerDownOutside:s,...a}=e,c=Or(Ki,n),l=rs(n),{onClose:u}=c;return O.useEffect(()=>(document.addEventListener(ol,u),()=>document.removeEventListener(ol,u)),[u]),O.useEffect(()=>{if(c.trigger){const d=f=>{f.target?.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),v.jsx(km,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:v.jsxs(q9,{"data-state":c.stateAttribute,...l,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[v.jsx(d8,{children:i}),v.jsx(l8,{scope:n,isInside:!0,children:v.jsx(n8,{id:c.contentId,role:"tooltip",children:r||i})})]})})});l1.displayName=Ki;var d1="TooltipArrow",h8=O.forwardRef((e,t)=>{const{__scopeTooltip:n,...i}=e,r=rs(n);return u8(d1,n).isInside?null:v.jsx(H9,{...r,...i,ref:t})});h8.displayName=d1;function f8(e,t){const n=Math.abs(t.top-e.y),i=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,i,r,o)){case o:return"left";case r:return"right";case n:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function p8(e,t,n=5){const i=[];switch(t){case"top":i.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":i.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":i.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":i.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return i}function m8(e){const{top:t,right:n,bottom:i,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:i},{x:r,y:i}]}function g8(e,t){const{x:n,y:i}=e;let r=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const a=t[o],c=t[s],l=a.x,u=a.y,d=c.x,f=c.y;u>i!=f>i&&n<(d-l)*(i-u)/(f-u)+l&&(r=!r)}return r}function v8(e){const t=e.slice();return t.sort((n,i)=>n.x<i.x?-1:n.x>i.x?1:n.y<i.y?-1:n.y>i.y?1:0),y8(t)}function y8(e){if(e.length<=1)return e.slice();const t=[];for(let i=0;i<e.length;i++){const r=e[i];for(;t.length>=2;){const o=t[t.length-1],s=t[t.length-2];if((o.x-s.x)*(r.y-s.y)>=(o.y-s.y)*(r.x-s.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let i=e.length-1;i>=0;i--){const r=e[i];for(;n.length>=2;){const o=n[n.length-1],s=n[n.length-2];if((o.x-s.x)*(r.y-s.y)>=(o.y-s.y)*(r.x-s.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var b8=o1,k8=s1,C8=a1,w8=c1,h1=l1;const S8=b8,T8=k8,x8=C8,f1=O.forwardRef(({className:e,sideOffset:t=4,...n},i)=>v.jsx(w8,{children:v.jsx(h1,{ref:i,sideOffset:t,className:Te("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));f1.displayName=h1.displayName;const _8=({isLoading:e,children:t,RightIcon:n,rightIconClassName:i,LeftIcon:r,leftIconClassName:o})=>v.jsxs(v.Fragment,{children:[r&&!e?v.jsx(ze,{type:r,className:Te("size-4",o)}):null,e?v.jsx(ze,{type:"spinner",className:"size-4"}):null,t,n&&!e?v.jsx(ze,{type:n,className:Te("size-4",{"ml-2":!!t},i)}):null]}),Ue=O.forwardRef(({tooltipText:e,tooltipSide:t="top",tooltipDelayDuration:n,RightIcon:i,rightIconClassName:r,LeftIcon:o,leftIconClassName:s,children:a,...c},l)=>{const u=v.jsx(im,{ref:l,...c,children:v.jsx(_8,{LeftIcon:o,RightIcon:i,isLoading:c.isLoading,rightIconClassName:r,leftIconClassName:s,children:a})});return e?v.jsx(S8,{children:v.jsxs(T8,{delayDuration:n,children:[v.jsx(x8,{asChild:!0,children:u}),v.jsx(f1,{side:t,children:v.jsx("p",{children:e})})]})}):u});Ue.displayName="Button";const E8=({isOpen:e,onClose:t,title:n,icon:i="",description:r,onConfirm:o,confirmText:s="Confirm",cancelText:a="Cancel",variant:c="primary"})=>{const[l,u]=U.useState(!1),d=U.useCallback(async()=>{u(!0);try{await o()}finally{u(!1),t()}},[o,t]);return e?v.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-gray-300/60",children:v.jsx("div",{className:"bg-background w-[90%] max-w-sm rounded-lg border pt-8 pb-6 px-4 sm:px-8 shadow-lg",children:v.jsxs("div",{className:"flex flex-col space-y-4",children:[i||c==="destructive"?v.jsx("div",{className:"flex items-center justify-center mb-2",children:v.jsx("div",{className:Te("flex items-center justify-center rounded-full p-3",{"bg-destructive-50":c==="destructive","bg-brand-50":c==="primary"}),children:v.jsx(ze,{type:c==="destructive"?"trash2":i,className:Te("size-6",{"text-destructive-500":c==="destructive","text-brand-600":c==="primary"})})})}):null,v.jsxs("div",{className:"text-center",children:[v.jsx("h3",{className:"text-lg font-semibold",children:n}),v.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r})]}),v.jsxs("div",{className:"flex justify-between gap-3 mt-2",children:[v.jsx(Ue,{type:"button",className:"flex-1",variant:"outline",onClick:t,disabled:l,children:a}),v.jsx(Ue,{type:"button",className:"flex-1",variant:c,onClick:d,isLoading:l,children:s})]})]})})}):null},P8=()=>{const[e,t]=U.useState({isOpen:!1,options:null}),n=U.useCallback(o=>new Promise((s,a)=>{const c={...o,onConfirm:async()=>{try{await o.onConfirm(),s()}catch(l){a(l)}}};t({isOpen:!0,options:c})}),[]),i=U.useCallback(()=>{t(o=>({...o,isOpen:!1}))},[]),r=U.useCallback(()=>e.options?v.jsx(E8,{isOpen:e.isOpen,onClose:i,...e.options}):null,[e,i]);return{confirm:n,DialogComponent:r}};function M8(e){const{confirm:t,DialogComponent:n}=P8();return{resetConversation:async()=>{await t({title:"Refresh Chat and Start Over?",icon:"refreshCcw",description:`Refreshing will delete your current chat with ${e.agentName||"Sophiie"} and start a new session.`,onConfirm:async()=>{const r=Date.now();e.setResetTimestamp(r),Vc(e.orgId),e.transcripts.clear(),e.userMessages.clear(),e.setMessages([]),e.setEditingMessageId(null),e.setInput(""),e.setPendingMessage(null),e.setRegenerationInfo({agentMessage:null,userMessage:null,isLoading:!1}),e.disconnectChat(),e.setRoomKey(o=>o+1),e.onResetComplete&&await e.onResetComplete()}})},ResetConfirmationDialog:n}}function p1(e,t,n){return{id:e.id,content:e.final?e.text:`${e.text} ...`,role:n instanceof tf?"user":"assistant",createdAt:t?.createdAt??e.firstReceivedTime??Date.now(),removed:t?.removed??!1}}function ll(e){return{id:e.id,content:e.content,role:e.role,createdAt:typeof e.createdAt=="number"?new Date(e.createdAt):e.createdAt}}function m1(e){const{orgId:t}=e.config,n=e.modeSwitch,{connectChat:i,disconnectChat:r,livekitRoomStatus:o,dismissError:s}=d4({orgId:t,livekitRoom:e.livekitRoom,config:e.config,onDisconnect:()=>{xn(),e.onSessionCleanup?.()},connectRoom:e.connectRoom}),[a,c]=U.useState(!1),l=np(),u=l?.audioTrack,[d,f]=U.useState(!1),h=vc();U.useEffect(()=>{const se="lk.agent.state",je=(h.find(Q=>Q.attributes?.[se]!==void 0)?.attributes?.[se]??"initializing")==="listening";h.length>0&&e.livekitRoom.state===he.Connected&&je&&!d&&f(!0)},[h,e.livekitRoom.state]);const m=yc(l?.audioTrack||void 0),p=g3(),y=yc({publication:p.microphoneTrack,source:B.Source.Microphone,participant:p.localParticipant}),{chatMessages:g,send:S,isSending:C}=k3(),[w,k]=U.useState(new Map),[b,x]=U.useState(new Map),[T,P]=U.useState(e.initialMessages||[]),[A]=U.useState(e.initialMessages||[]),[M,R]=U.useState(""),[z,D]=U.useState(null),[F,$]=U.useState({agentMessage:null,userMessage:null,isLoading:!1}),[V,L]=U.useState(null),[J,_]=U.useState(""),[ee,oe]=U.useState(0),E=U.useMemo(()=>`chatbot-${Vo()}`,[]),{resetConversation:ae,ResetConfirmationDialog:ke}=M8({setResetTimestamp:oe,transcripts:w,userMessages:b,setMessages:P,setEditingMessageId:L,setInput:R,setPendingMessage:D,setRegenerationInfo:$,disconnectChat:r,setRoomKey:e.setRoomKey,orgId:t,agentName:e.agentName}),pe=async()=>{const se=Date.now();oe(se),Vc(t),w.clear(),b.clear(),P([]),L(null),R(""),D(null),$({agentMessage:null,userMessage:null,isLoading:!1}),r(),e.setRoomKey(we=>we+1),e.resetSession&&e.resetSession()},ie=U.useRef(T),xe=se=>{L(se.id),_(se.content)},_e=async()=>{if(V){const se=T.findIndex(we=>we.id===V);if(se!==-1){const we=T[se];if(!we)return;we.role==="user"&&(T.slice(se).forEach(je=>{je.role==="assistant"&&w.set(je.id,{...je,removed:!0}),je.role==="user"&&b.set(je.id,{...je,removed:!0})}),await Pn(J)),L(null),_("")}}},Ce=async se=>{const we=T.findIndex(ot=>ot.id===se);if(we!==-1&&we>0){const ot=T[we];if(ot?.role==="assistant"){const je=T[we-1];je?.role==="user"&&(T.slice(we).forEach(Q=>{Q.role==="assistant"&&w.set(Q.id,{...Q,removed:!0}),Q.role==="user"&&b.set(Q.id,{...Q,removed:!0})}),$({agentMessage:ot,userMessage:je,isLoading:!0}),await Pn(je.content))}}},Re=se=>{const we=se.id||Vo(),ot=se.createdAt??Date.now(),je={id:we,role:se.role,content:se.content??"",createdAt:ot};return e.onMessageAdd&&e.onMessageAdd(je),P(H=>[...H,je]),je},Le=se=>Array.isArray(se)?se.map(we=>Re({id:Vo(),role:"system",content:we})):Re({id:Vo(),role:"system",content:se}),ut=()=>Le("call_started"),xn=()=>{if(!T?.length)return;n.currentMode!==tt.CHAT&&Le("call_ended"),T[T.length-1]?.content!=="session_ended"&&Le("session_ended")},_n=()=>{T[T.length-1]?.content!=="session_ended"&&Le("session_ended"),r()},Xn=se=>{R(se.target.value)},En=async()=>{try{if(e.livekitRoom.state==="connected"&&n.currentMode!==tt.CHAT)try{c(!0);const se=await n.switchToChat();Le("call_ended"),ct("Switched to chat mode:",se),c(!1)}catch(se){console.warn("Failed to switch to chat mode, agent may not be ready:",se),c(!1)}else{if(c(!0),n.setCurrentMode(tt.CHAT),!(await i({messages:T,force:!0}))?.success)throw console.error("Failed to connect to chat room"),new Error("Connection failed");c(!1)}}catch(se){console.error("Error starting chat:",se),c(!1)}},Pn=async se=>{try{return await En(),d?(S(se),!0):(D(se),Pc.info("Waiting for agent to connect..."),!0)}catch(we){return console.error("Error in sendChatWhenConnected:",we),c(!1),R(M),!1}},ei=async se=>{if(se.preventDefault(),!M.trim())return;await Pn(M)&&R("")};U.useEffect(()=>{d&&z&&(S(z),D(null))},[d,z]);const or=U.useRef(e.connectRoom);U.useEffect(()=>{const se=e.connectRoom,we=or.current,ot=ie.current.some(je=>je.role==="system"&&je.content==="session_ended");return se&&!ot&&n.currentMode===tt.CHAT&&i({messages:ie.current||[]}),or.current=se,()=>{we===!0&&se===!1&&e.livekitRoom.state===he.Connected&&(T[T.length-1]?.content!=="session_ended"&&Le("session_ended"),r())}},[e.connectRoom]),U.useEffect(()=>{ie.current=T},[T]),U.useEffect(function(){if(F.isLoading)return;const we=new Map(w),ot=new Map(b);u&&m.segments.filter(le=>(le.firstReceivedTime||Date.now())>ee).forEach(le=>we.set(le.id,p1(le,we.get(le.id),u.participant))),y.segments.filter(le=>(le.firstReceivedTime||Date.now())>ee).forEach(le=>we.set(le.id,p1(le,we.get(le.id),p.localParticipant))),g?.length&&g.filter(le=>le.timestamp>ee).forEach(le=>{const St=ot.get(le.id);ot.set(le.id,{id:le.id,content:le.message,role:le.from?.identity===p.localParticipant.identity?"user":le.from?.identity===u?.participant?.identity?"assistant":"system",createdAt:St?.createdAt??le.timestamp,removed:St?.removed??!1})}),k(we),x(ot);const je=Array.from(we.values()),H=Array.from(ot.values()),Q=A.filter(le=>!we.has(le.id)&&!ot.has(le.id)&&le.createdAt>ee),ue=T.filter(le=>le.role==="system"&&le.createdAt>ee),ve=new Map;[...Q,...je,...H,...ue].filter(le=>!le.removed).forEach(le=>{ve.set(le.id,le)});const Pe=Array.from(ve.values()).sort((le,St)=>le.createdAt-St.createdAt);P(Pe)},[m.segments,y.segments,g,F.isLoading,u,u?.participant,u?.participant?.identity,p.localParticipant,p.localParticipant.identity,ee,A]);const un=m.segments[m.segments.length-1];return U.useEffect(function(){if(F.isLoading&&un?.final){const we=g[g.length-1];F.userMessage&&we&&b.set(we.id,{...F.userMessage,removed:!0}),F.agentMessage&&un?.id&&(w.set(F.agentMessage.id,{...un,role:"assistant",content:un?.text||"",removed:!0}),w.set(un.id,{...F.agentMessage,id:un.id,content:un?.text??"",removed:!1})),$({agentMessage:null,userMessage:null,isLoading:!1})}},[un?.final]),U.useEffect(()=>{T.length>0&&Jp({chatId:E,sessionState:a||C?qo.RUNNING:qo.IDLE,messages:T.map(se=>({id:se.id,role:se.role,content:se.content,createdAt:typeof se.createdAt=="number"?new Date(se.createdAt):se.createdAt}))},t)},[T,a,C,E,t]),{messages:T.map(ll),input:M,handleInputChange:Xn,handleSubmit:ei,isLoading:C||a||o.status===de.INITIATING||o.status===de.IN_PROGRESS&&!d,resetConversation:ae,immediateReset:pe,error:void 0,editingMessageId:V,setEditingMessageId:L,editContent:J,setEditContent:_,handleEditClick:xe,handleSaveEdit:_e,handleRegenerate:Ce,regenerationInfo:{agentMessage:F.agentMessage?ll(F.agentMessage):null,userMessage:F.userMessage?ll(F.userMessage):null,isLoading:F.isLoading},ResetConfirmationDialog:ke,livekitRoom:e.livekitRoom,startChat:En,addCallStartedMessage:ut,addCallEndedMessage:xn,disconnectChat:_n,currentMode:n.currentMode===tt.CALL?"CALL":"CHAT",modeSwitch:n,connectionStatus:o,dismissConnectionError:s}}const I8=({storageId:e,isOpen:t,onDisconnectRequest:n,room:i})=>{const[r,o]=U.useState("idle"),[s,a]=U.useState("none"),c=U.useRef(Math.random().toString(36).substring(2,15)),l=U.useRef(null),u=U.useRef(null),d=U.useRef(null),f=U.useRef(!1),h=U.useCallback(async y=>{const{type:g,tabId:S,status:C}=y.data;if(S!==c.current)switch(g){case"SESSION_CHECK":r==="active"&&l.current?.postMessage({type:"SESSION_STATUS",tabId:c.current,status:"active",timestamp:Date.now(),from:"SESSION_CHECK"});break;case"SESSION_STATUS":C==="active"&&r==="idle"&&(s!=="moved"&&a("switch"),i?.state==="connected"&&i.disconnect());break;case"REQUEST_DISCONNECT":r==="active"&&(a("moved"),o("idle"),l.current?.postMessage({type:"SESSION_DISCONNECTED",tabId:c.current,timestamp:Date.now(),from:"REQUEST_DISCONNECT"}));break;case"SESSION_DISCONNECTED":r==="switching"&&!f.current&&(f.current=!0,(async()=>{try{o("active"),a("none"),l.current?.postMessage({type:"SESSION_STATUS",tabId:c.current,status:"active",timestamp:Date.now(),from:"SESSION_DISCONNECTED"}),Pc.success("Session switched successfully")}catch(w){console.error("Error during session takeover:",w),o("idle"),Pc.error("Failed to switch session")}finally{f.current=!1}})());break}},[r,s,n,e,i]);U.useEffect(()=>{if(!(typeof window>"u"))return l.current=new BroadcastChannel(`chatbot-session-${e}`),l.current.addEventListener("message",h),()=>{l.current?.removeEventListener("message",h),l.current?.close()}},[e,h]),U.useEffect(()=>(t&&r==="idle"&&s==="none"&&(l.current?.postMessage({type:"SESSION_CHECK",tabId:c.current,timestamp:Date.now()}),d.current=setTimeout(()=>{r==="idle"&&s==="none"&&o("active")},500)),()=>{d.current&&clearTimeout(d.current)}),[t]),U.useEffect(()=>(r==="active"?u.current=setInterval(()=>{l.current?.postMessage({type:"SESSION_STATUS",tabId:c.current,status:"active",timestamp:Date.now(),from:"heartbeat"})},2e3):u.current&&(clearInterval(u.current),u.current=null),()=>{u.current&&clearInterval(u.current)}),[r]),U.useEffect(()=>{const y=()=>{};return window.addEventListener("beforeunload",y),()=>{window.removeEventListener("beforeunload",y)}},[r]),U.useEffect(()=>{r!=="switching"&&(f.current=!1)},[r]);const m=U.useCallback(()=>{o("switching"),setTimeout(()=>{l.current?.postMessage({type:"REQUEST_DISCONNECT",tabId:c.current,timestamp:Date.now(),from:"requestSessionSwitch fn"})},500)},[]),p=U.useCallback(()=>{o("idle"),a("none"),f.current=!1},[]);return{sessionStatus:r,showSessionSwitch:s==="switch",showSessionMoved:s==="moved",hasActiveSession:s!=="none",requestSessionSwitch:m,markAsInactive:p,tabId:c.current}};function Z(e,t,n){function i(a,c){var l;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(l=a._zod).traits??(l.traits=new Set),a._zod.traits.add(e),t(a,c);for(const u in s.prototype)u in a||Object.defineProperty(a,u,{value:s.prototype[u].bind(a)});a._zod.constr=s,a._zod.def=c}const r=n?.Parent??Object;class o extends r{}Object.defineProperty(o,"name",{value:e});function s(a){var c;const l=n?.Parent?new o:this;i(l,a),(c=l._zod).deferred??(c.deferred=[]);for(const u of l._zod.deferred)u();return l}return Object.defineProperty(s,"init",{value:i}),Object.defineProperty(s,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}class Yi extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class g1 extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const v1={};function yi(e){return v1}function O8(e){const t=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,r])=>t.indexOf(+i)===-1).map(([i,r])=>r)}function ul(e,t){return typeof t=="bigint"?t.toString():t}function dl(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function hl(e){return e==null}function fl(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function N8(e,t){const n=(e.toString().split(".")[1]||"").length,i=t.toString();let r=(i.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(i)){const c=i.match(/\d?e-(\d?)/);c?.[1]&&(r=Number.parseInt(c[1]))}const o=n>r?n:r,s=Number.parseInt(e.toFixed(o).replace(".","")),a=Number.parseInt(t.toFixed(o).replace(".",""));return s%a/10**o}const y1=Symbol("evaluating");function Oe(e,t,n){let i;Object.defineProperty(e,t,{get(){if(i!==y1)return i===void 0&&(i=y1,i=n()),i},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function bi(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ki(...e){const t={};for(const n of e){const i=Object.getOwnPropertyDescriptors(n);Object.assign(t,i)}return Object.defineProperties({},t)}function b1(e){return JSON.stringify(e)}const k1="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function os(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const A8=dl(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Nr(e){if(os(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(os(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function C1(e){return Nr(e)?{...e}:Array.isArray(e)?[...e]:e}const R8=new Set(["string","number","symbol"]);function ss(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Yn(e,t,n){const i=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(i._zod.parent=e),i}function re(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function D8(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const L8={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function F8(e,t){const n=e._zod.def,i=ki(e._zod.def,{get shape(){const r={};for(const o in t){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(r[o]=n.shape[o])}return bi(this,"shape",r),r},checks:[]});return Yn(e,i)}function z8(e,t){const n=e._zod.def,i=ki(e._zod.def,{get shape(){const r={...e._zod.def.shape};for(const o in t){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete r[o]}return bi(this,"shape",r),r},checks:[]});return Yn(e,i)}function U8(e,t){if(!Nr(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=ki(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t};return bi(this,"shape",o),o},checks:[]});return Yn(e,r)}function $8(e,t){if(!Nr(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const i={...e._zod.def.shape,...t};return bi(this,"shape",i),i},checks:e._zod.def.checks};return Yn(e,n)}function j8(e,t){const n=ki(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t._zod.def.shape};return bi(this,"shape",i),i},get catchall(){return t._zod.def.catchall},checks:[]});return Yn(e,n)}function B8(e,t,n){const i=ki(t._zod.def,{get shape(){const r=t._zod.def.shape,o={...r};if(n)for(const s in n){if(!(s in r))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(o[s]=e?new e({type:"optional",innerType:r[s]}):r[s])}else for(const s in r)o[s]=e?new e({type:"optional",innerType:r[s]}):r[s];return bi(this,"shape",o),o},checks:[]});return Yn(t,i)}function V8(e,t,n){const i=ki(t._zod.def,{get shape(){const r=t._zod.def.shape,o={...r};if(n)for(const s in n){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(o[s]=new e({type:"nonoptional",innerType:r[s]}))}else for(const s in r)o[s]=new e({type:"nonoptional",innerType:r[s]});return bi(this,"shape",o),o},checks:[]});return Yn(t,i)}function Qi(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function w1(e,t){return t.map(n=>{var i;return(i=n).path??(i.path=[]),n.path.unshift(e),n})}function as(e){return typeof e=="string"?e:e?.message}function Ci(e,t,n){const i={...e,path:e.path??[]};if(!e.message){const r=as(e.inst?._zod.def?.error?.(e))??as(t?.error?.(e))??as(n.customError?.(e))??as(n.localeError?.(e))??"Invalid input";i.message=r}return delete i.inst,delete i.continue,t?.reportInput||delete i.input,i}function pl(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Ar(...e){const[t,n,i]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:i}:{...t}}const S1=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,ul,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},T1=Z("$ZodError",S1),x1=Z("$ZodError",S1,{Parent:Error});function q8(e,t=n=>n.message){const n={},i=[];for(const r of e.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(t(r))):i.push(t(r));return{formErrors:i,fieldErrors:n}}function H8(e,t){const n=t||function(o){return o.message},i={_errors:[]},r=o=>{for(const s of o.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(a=>r({issues:a}));else if(s.code==="invalid_key")r({issues:s.issues});else if(s.code==="invalid_element")r({issues:s.issues});else if(s.path.length===0)i._errors.push(n(s));else{let a=i,c=0;for(;c<s.path.length;){const l=s.path[c];c===s.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(s))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return r(e),i}const ml=e=>(t,n,i,r)=>{const o=i?Object.assign(i,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new Yi;if(s.issues.length){const a=new(r?.Err??e)(s.issues.map(c=>Ci(c,o,yi())));throw k1(a,r?.callee),a}return s.value},gl=e=>async(t,n,i,r)=>{const o=i?Object.assign(i,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise&&(s=await s),s.issues.length){const a=new(r?.Err??e)(s.issues.map(c=>Ci(c,o,yi())));throw k1(a,r?.callee),a}return s.value},cs=e=>(t,n,i)=>{const r=i?{...i,async:!1}:{async:!1},o=t._zod.run({value:n,issues:[]},r);if(o instanceof Promise)throw new Yi;return o.issues.length?{success:!1,error:new(e??T1)(o.issues.map(s=>Ci(s,r,yi())))}:{success:!0,data:o.value}},W8=cs(x1),ls=e=>async(t,n,i)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},r);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(s=>Ci(s,r,yi())))}:{success:!0,data:o.value}},Z8=ls(x1),G8=e=>(t,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return ml(e)(t,n,r)},K8=e=>(t,n,i)=>ml(e)(t,n,i),Y8=e=>async(t,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return gl(e)(t,n,r)},Q8=e=>async(t,n,i)=>gl(e)(t,n,i),J8=e=>(t,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return cs(e)(t,n,r)},X8=e=>(t,n,i)=>cs(e)(t,n,i),eT=e=>async(t,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return ls(e)(t,n,r)},tT=e=>async(t,n,i)=>ls(e)(t,n,i),nT=/^[cC][^\s-]{8,}$/,iT=/^[0-9a-z]+$/,rT=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,oT=/^[0-9a-vA-V]{20}$/,sT=/^[A-Za-z0-9]{27}$/,aT=/^[a-zA-Z0-9_-]{21}$/,cT=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,lT=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,_1=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,uT=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,dT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function hT(){return new RegExp(dT,"u")}const fT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,mT=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,gT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vT=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,E1=/^[A-Za-z0-9_-]*$/,yT=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,bT=/^\+(?:[0-9]){6,14}[0-9]$/,P1="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",kT=new RegExp(`^${P1}$`);function M1(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function CT(e){return new RegExp(`^${M1(e)}$`)}function wT(e){const t=M1({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${t}(?:${n.join("|")})`;return new RegExp(`^${P1}T(?:${i})$`)}const ST=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},TT=/^-?\d+$/,xT=/^-?\d+(?:\.\d+)?/,_T=/^(?:true|false)$/i,ET=/^[^A-Z]*$/,PT=/^[^a-z]*$/,bt=Z("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),I1={number:"number",bigint:"bigint",object:"date"},O1=Z("$ZodCheckLessThan",(e,t)=>{bt.init(e,t);const n=I1[typeof t.value];e._zod.onattach.push(i=>{const r=i._zod.bag,o=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value<=t.value:i.value<t.value)||i.issues.push({origin:n,code:"too_big",maximum:t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),N1=Z("$ZodCheckGreaterThan",(e,t)=>{bt.init(e,t);const n=I1[typeof t.value];e._zod.onattach.push(i=>{const r=i._zod.bag,o=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value>=t.value:i.value>t.value)||i.issues.push({origin:n,code:"too_small",minimum:t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),MT=Z("$ZodCheckMultipleOf",(e,t)=>{bt.init(e,t),e._zod.onattach.push(n=>{var i;(i=n._zod.bag).multipleOf??(i.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):N8(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),IT=Z("$ZodCheckNumberFormat",(e,t)=>{bt.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),i=n?"int":"number",[r,o]=L8[t.format];e._zod.onattach.push(s=>{const a=s._zod.bag;a.format=t.format,a.minimum=r,a.maximum=o,n&&(a.pattern=TT)}),e._zod.check=s=>{const a=s.value;if(n){if(!Number.isInteger(a)){s.issues.push({expected:i,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!t.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!t.abort});return}}a<r&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),a>o&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:o,inst:e})}}),OT=Z("$ZodCheckMaxLength",(e,t)=>{var n;bt.init(e,t),(n=e._zod.def).when??(n.when=i=>{const r=i.value;return!hl(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(i._zod.bag.maximum=t.maximum)}),e._zod.check=i=>{const r=i.value;if(r.length<=t.maximum)return;const s=pl(r);i.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),NT=Z("$ZodCheckMinLength",(e,t)=>{var n;bt.init(e,t),(n=e._zod.def).when??(n.when=i=>{const r=i.value;return!hl(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(i._zod.bag.minimum=t.minimum)}),e._zod.check=i=>{const r=i.value;if(r.length>=t.minimum)return;const s=pl(r);i.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),AT=Z("$ZodCheckLengthEquals",(e,t)=>{var n;bt.init(e,t),(n=e._zod.def).when??(n.when=i=>{const r=i.value;return!hl(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=i=>{const r=i.value,o=r.length;if(o===t.length)return;const s=pl(r),a=o>t.length;i.issues.push({origin:s,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!t.abort})}}),us=Z("$ZodCheckStringFormat",(e,t)=>{var n,i;bt.init(e,t),e._zod.onattach.push(r=>{const o=r._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(i=e._zod).check??(i.check=()=>{})}),RT=Z("$ZodCheckRegex",(e,t)=>{us.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),DT=Z("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=ET),us.init(e,t)}),LT=Z("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=PT),us.init(e,t)}),FT=Z("$ZodCheckIncludes",(e,t)=>{bt.init(e,t);const n=ss(t.includes),i=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=i,e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(i)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),zT=Z("$ZodCheckStartsWith",(e,t)=>{bt.init(e,t);const n=new RegExp(`^${ss(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=i=>{i.value.startsWith(t.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:i.value,inst:e,continue:!t.abort})}}),UT=Z("$ZodCheckEndsWith",(e,t)=>{bt.init(e,t);const n=new RegExp(`.*${ss(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=i=>{i.value.endsWith(t.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:i.value,inst:e,continue:!t.abort})}}),$T=Z("$ZodCheckOverwrite",(e,t)=>{bt.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class jT{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const i=t.split(`
`).filter(s=>s),r=Math.min(...i.map(s=>s.length-s.trimStart().length)),o=i.map(s=>s.slice(r)).map(s=>" ".repeat(this.indent*2)+s);for(const s of o)this.content.push(s)}compile(){const t=Function,n=this?.args,r=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...n,r.join(`
`))}}const BT={major:4,minor:1,patch:11},Ze=Z("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=BT;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const r of i)for(const o of r._zod.onattach)o(e);if(i.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const r=(s,a,c)=>{let l=Qi(s),u;for(const d of a){if(d._zod.def.when){if(!d._zod.def.when(s))continue}else if(l)continue;const f=s.issues.length,h=d._zod.check(s);if(h instanceof Promise&&c?.async===!1)throw new Yi;if(u||h instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await h,s.issues.length!==f&&(l||(l=Qi(s,f)))});else{if(s.issues.length===f)continue;l||(l=Qi(s,f))}}return u?u.then(()=>s):s},o=(s,a,c)=>{if(Qi(s))return s.aborted=!0,s;const l=r(a,i,c);if(l instanceof Promise){if(c.async===!1)throw new Yi;return l.then(u=>e._zod.parse(u,c))}return e._zod.parse(l,c)};e._zod.run=(s,a)=>{if(a.skipChecks)return e._zod.parse(s,a);if(a.direction==="backward"){const l=e._zod.parse({value:s.value,issues:[]},{...a,skipChecks:!0});return l instanceof Promise?l.then(u=>o(u,s,a)):o(l,s,a)}const c=e._zod.parse(s,a);if(c instanceof Promise){if(a.async===!1)throw new Yi;return c.then(l=>r(l,i,a))}return r(c,i,a)}}e["~standard"]={validate:r=>{try{const o=W8(e,r);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return Z8(e,r).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),vl=Z("$ZodString",(e,t)=>{Ze.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??ST(e._zod.bag),e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),$e=Z("$ZodStringFormat",(e,t)=>{us.init(e,t),vl.init(e,t)}),VT=Z("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=lT),$e.init(e,t)}),qT=Z("$ZodUUID",(e,t)=>{if(t.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(i===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=_1(i))}else t.pattern??(t.pattern=_1());$e.init(e,t)}),HT=Z("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=uT),$e.init(e,t)}),WT=Z("$ZodURL",(e,t)=>{$e.init(e,t),e._zod.check=n=>{try{const i=n.value.trim(),r=new URL(i);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:yT.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=r.href:n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),ZT=Z("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=hT()),$e.init(e,t)}),GT=Z("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=aT),$e.init(e,t)}),KT=Z("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=nT),$e.init(e,t)}),YT=Z("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=iT),$e.init(e,t)}),QT=Z("$ZodULID",(e,t)=>{t.pattern??(t.pattern=rT),$e.init(e,t)}),JT=Z("$ZodXID",(e,t)=>{t.pattern??(t.pattern=oT),$e.init(e,t)}),XT=Z("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=sT),$e.init(e,t)}),ex=Z("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=wT(t)),$e.init(e,t)}),tx=Z("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=kT),$e.init(e,t)}),nx=Z("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=CT(t)),$e.init(e,t)}),ix=Z("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=cT),$e.init(e,t)}),rx=Z("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=fT),$e.init(e,t),e._zod.onattach.push(n=>{const i=n._zod.bag;i.format="ipv4"})}),ox=Z("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=pT),$e.init(e,t),e._zod.onattach.push(n=>{const i=n._zod.bag;i.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),sx=Z("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=mT),$e.init(e,t)}),ax=Z("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=gT),$e.init(e,t),e._zod.check=n=>{const i=n.value.split("/");try{if(i.length!==2)throw new Error;const[r,o]=i;if(!o)throw new Error;const s=Number(o);if(`${s}`!==o)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function A1(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const cx=Z("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=vT),$e.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{A1(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function lx(e){if(!E1.test(e))return!1;const t=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return A1(n)}const ux=Z("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=E1),$e.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{lx(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),dx=Z("$ZodE164",(e,t)=>{t.pattern??(t.pattern=bT),$e.init(e,t)});function hx(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[i]=n;if(!i)return!1;const r=JSON.parse(atob(i));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}const fx=Z("$ZodJWT",(e,t)=>{$e.init(e,t),e._zod.check=n=>{hx(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),R1=Z("$ZodNumber",(e,t)=>{Ze.init(e,t),e._zod.pattern=e._zod.bag.pattern??xT,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const o=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...o?{received:o}:{}}),n}}),px=Z("$ZodNumber",(e,t)=>{IT.init(e,t),R1.init(e,t)}),mx=Z("$ZodBoolean",(e,t)=>{Ze.init(e,t),e._zod.pattern=_T,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),n}}),gx=Z("$ZodUnknown",(e,t)=>{Ze.init(e,t),e._zod.parse=n=>n}),vx=Z("$ZodNever",(e,t)=>{Ze.init(e,t),e._zod.parse=(n,i)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function D1(e,t,n){e.issues.length&&t.issues.push(...w1(n,e.issues)),t.value[n]=e.value}const yx=Z("$ZodArray",(e,t)=>{Ze.init(e,t),e._zod.parse=(n,i)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),n;n.value=Array(r.length);const o=[];for(let s=0;s<r.length;s++){const a=r[s],c=t.element._zod.run({value:a,issues:[]},i);c instanceof Promise?o.push(c.then(l=>D1(l,n,s))):D1(c,n,s)}return o.length?Promise.all(o).then(()=>n):n}});function ds(e,t,n,i){e.issues.length&&t.issues.push(...w1(n,e.issues)),e.value===void 0?n in i&&(t.value[n]=void 0):t.value[n]=e.value}function L1(e){const t=Object.keys(e.shape);for(const i of t)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const n=D8(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function F1(e,t,n,i,r,o){const s=[],a=r.keySet,c=r.catchall._zod,l=c.def.type;for(const u of Object.keys(t)){if(a.has(u))continue;if(l==="never"){s.push(u);continue}const d=c.run({value:t[u],issues:[]},i);d instanceof Promise?e.push(d.then(f=>ds(f,n,u,t))):ds(d,n,u,t)}return s.length&&n.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:o}),e.length?Promise.all(e).then(()=>n):n}const bx=Z("$ZodObject",(e,t)=>{if(Ze.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const a=t.shape;Object.defineProperty(t,"shape",{get:()=>{const c={...a};return Object.defineProperty(t,"shape",{value:c}),c}})}const i=dl(()=>L1(t));Oe(e._zod,"propValues",()=>{const a=t.shape,c={};for(const l in a){const u=a[l]._zod;if(u.values){c[l]??(c[l]=new Set);for(const d of u.values)c[l].add(d)}}return c});const r=os,o=t.catchall;let s;e._zod.parse=(a,c)=>{s??(s=i.value);const l=a.value;if(!r(l))return a.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),a;a.value={};const u=[],d=s.shape;for(const f of s.keys){const m=d[f]._zod.run({value:l[f],issues:[]},c);m instanceof Promise?u.push(m.then(p=>ds(p,a,f,l))):ds(m,a,f,l)}return o?F1(u,l,a,c,i.value,e):u.length?Promise.all(u).then(()=>a):a}}),kx=Z("$ZodObjectJIT",(e,t)=>{bx.init(e,t);const n=e._zod.parse,i=dl(()=>L1(t)),r=f=>{const h=new jT(["shape","payload","ctx"]),m=i.value,p=C=>{const w=b1(C);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};h.write("const input = payload.value;");const y=Object.create(null);let g=0;for(const C of m.keys)y[C]=`key_${g++}`;h.write("const newResult = {};");for(const C of m.keys){const w=y[C],k=b1(C);h.write(`const ${w} = ${p(C)};`),h.write(`
        if (${w}.issues.length) {
          payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${k}, ...iss.path] : [${k}]
          })));
        }
        
        
        if (${w}.value === undefined) {
          if (${k} in input) {
            newResult[${k}] = undefined;
          }
        } else {
          newResult[${k}] = ${w}.value;
        }
        
      `)}h.write("payload.value = newResult;"),h.write("return payload;");const S=h.compile();return(C,w)=>S(f,C,w)};let o;const s=os,a=!v1.jitless,l=a&&A8.value,u=t.catchall;let d;e._zod.parse=(f,h)=>{d??(d=i.value);const m=f.value;return s(m)?a&&l&&h?.async===!1&&h.jitless!==!0?(o||(o=r(t.shape)),f=o(f,h),u?F1([],m,f,h,d,e):f):n(f,h):(f.issues.push({expected:"object",code:"invalid_type",input:m,inst:e}),f)}});function z1(e,t,n,i){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;const r=e.filter(o=>!Qi(o));return r.length===1?(t.value=r[0].value,r[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(o=>o.issues.map(s=>Ci(s,i,yi())))}),t)}const Cx=Z("$ZodUnion",(e,t)=>{Ze.init(e,t),Oe(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),Oe(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),Oe(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),Oe(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${r.map(o=>fl(o.source)).join("|")})$`)}});const n=t.options.length===1,i=t.options[0]._zod.run;e._zod.parse=(r,o)=>{if(n)return i(r,o);let s=!1;const a=[];for(const c of t.options){const l=c._zod.run({value:r.value,issues:[]},o);if(l instanceof Promise)a.push(l),s=!0;else{if(l.issues.length===0)return l;a.push(l)}}return s?Promise.all(a).then(c=>z1(c,r,e,o)):z1(a,r,e,o)}}),wx=Z("$ZodIntersection",(e,t)=>{Ze.init(e,t),e._zod.parse=(n,i)=>{const r=n.value,o=t.left._zod.run({value:r,issues:[]},i),s=t.right._zod.run({value:r,issues:[]},i);return o instanceof Promise||s instanceof Promise?Promise.all([o,s]).then(([c,l])=>U1(n,c,l)):U1(n,o,s)}});function yl(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Nr(e)&&Nr(t)){const n=Object.keys(t),i=Object.keys(e).filter(o=>n.indexOf(o)!==-1),r={...e,...t};for(const o of i){const s=yl(e[o],t[o]);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};r[o]=s.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let i=0;i<e.length;i++){const r=e[i],o=t[i],s=yl(r,o);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function U1(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Qi(e))return e;const i=yl(t.value,n.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const Sx=Z("$ZodEnum",(e,t)=>{Ze.init(e,t);const n=O8(t.entries),i=new Set(n);e._zod.values=i,e._zod.pattern=new RegExp(`^(${n.filter(r=>R8.has(typeof r)).map(r=>typeof r=="string"?ss(r):r.toString()).join("|")})$`),e._zod.parse=(r,o)=>{const s=r.value;return i.has(s)||r.issues.push({code:"invalid_value",values:n,input:s,inst:e}),r}}),Tx=Z("$ZodTransform",(e,t)=>{Ze.init(e,t),e._zod.parse=(n,i)=>{if(i.direction==="backward")throw new g1(e.constructor.name);const r=t.transform(n.value,n);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(s=>(n.value=s,n));if(r instanceof Promise)throw new Yi;return n.value=r,n}});function $1(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const xx=Z("$ZodOptional",(e,t)=>{Ze.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Oe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Oe(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${fl(n.source)})?$`):void 0}),e._zod.parse=(n,i)=>{if(t.innerType._zod.optin==="optional"){const r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>$1(o,n.value)):$1(r,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,i)}}),_x=Z("$ZodNullable",(e,t)=>{Ze.init(e,t),Oe(e._zod,"optin",()=>t.innerType._zod.optin),Oe(e._zod,"optout",()=>t.innerType._zod.optout),Oe(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${fl(n.source)}|null)$`):void 0}),Oe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,i)=>n.value===null?n:t.innerType._zod.run(n,i)}),Ex=Z("$ZodDefault",(e,t)=>{Ze.init(e,t),e._zod.optin="optional",Oe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,i)=>{if(i.direction==="backward")return t.innerType._zod.run(n,i);if(n.value===void 0)return n.value=t.defaultValue,n;const r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>j1(o,t)):j1(r,t)}});function j1(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Px=Z("$ZodPrefault",(e,t)=>{Ze.init(e,t),e._zod.optin="optional",Oe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,i)=>(i.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,i))}),Mx=Z("$ZodNonOptional",(e,t)=>{Ze.init(e,t),Oe(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(i=>i!==void 0)):void 0}),e._zod.parse=(n,i)=>{const r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>B1(o,e)):B1(r,e)}});function B1(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Ix=Z("$ZodCatch",(e,t)=>{Ze.init(e,t),Oe(e._zod,"optin",()=>t.innerType._zod.optin),Oe(e._zod,"optout",()=>t.innerType._zod.optout),Oe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,i)=>{if(i.direction==="backward")return t.innerType._zod.run(n,i);const r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(s=>Ci(s,i,yi()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(o=>Ci(o,i,yi()))},input:n.value}),n.issues=[]),n)}}),Ox=Z("$ZodPipe",(e,t)=>{Ze.init(e,t),Oe(e._zod,"values",()=>t.in._zod.values),Oe(e._zod,"optin",()=>t.in._zod.optin),Oe(e._zod,"optout",()=>t.out._zod.optout),Oe(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,i)=>{if(i.direction==="backward"){const o=t.out._zod.run(n,i);return o instanceof Promise?o.then(s=>hs(s,t.in,i)):hs(o,t.in,i)}const r=t.in._zod.run(n,i);return r instanceof Promise?r.then(o=>hs(o,t.out,i)):hs(r,t.out,i)}});function hs(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const Nx=Z("$ZodReadonly",(e,t)=>{Ze.init(e,t),Oe(e._zod,"propValues",()=>t.innerType._zod.propValues),Oe(e._zod,"values",()=>t.innerType._zod.values),Oe(e._zod,"optin",()=>t.innerType._zod.optin),Oe(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,i)=>{if(i.direction==="backward")return t.innerType._zod.run(n,i);const r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(V1):V1(r)}});function V1(e){return e.value=Object.freeze(e.value),e}const Ax=Z("$ZodCustom",(e,t)=>{bt.init(e,t),Ze.init(e,t),e._zod.parse=(n,i)=>n,e._zod.check=n=>{const i=n.value,r=t.fn(i);if(r instanceof Promise)return r.then(o=>q1(o,n,i,e));q1(r,n,i,e)}});function q1(e,t,n,i){if(!e){const r={code:"custom",input:n,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(r.params=i._zod.def.params),t.issues.push(Ar(r))}}class Rx{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const i=n[0];if(this._map.set(t,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const i={...this.get(n)??{}};delete i.id;const r={...i,...this._map.get(t)};return Object.keys(r).length?r:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Dx(){return new Rx}const fs=Dx();function Lx(e,t){return new e({type:"string",...re(t)})}function Fx(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...re(t)})}function H1(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...re(t)})}function zx(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...re(t)})}function Ux(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...re(t)})}function $x(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...re(t)})}function jx(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...re(t)})}function Bx(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...re(t)})}function Vx(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...re(t)})}function qx(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...re(t)})}function Hx(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...re(t)})}function Wx(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...re(t)})}function Zx(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...re(t)})}function Gx(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...re(t)})}function Kx(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...re(t)})}function Yx(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...re(t)})}function Qx(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...re(t)})}function Jx(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...re(t)})}function Xx(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...re(t)})}function e7(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...re(t)})}function t7(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...re(t)})}function n7(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...re(t)})}function i7(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...re(t)})}function r7(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...re(t)})}function o7(e,t){return new e({type:"string",format:"date",check:"string_format",...re(t)})}function s7(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...re(t)})}function a7(e,t){return new e({type:"string",format:"duration",check:"string_format",...re(t)})}function c7(e,t){return new e({type:"number",checks:[],...re(t)})}function l7(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...re(t)})}function u7(e,t){return new e({type:"boolean",...re(t)})}function d7(e){return new e({type:"unknown"})}function h7(e,t){return new e({type:"never",...re(t)})}function W1(e,t){return new O1({check:"less_than",...re(t),value:e,inclusive:!1})}function bl(e,t){return new O1({check:"less_than",...re(t),value:e,inclusive:!0})}function Z1(e,t){return new N1({check:"greater_than",...re(t),value:e,inclusive:!1})}function kl(e,t){return new N1({check:"greater_than",...re(t),value:e,inclusive:!0})}function G1(e,t){return new MT({check:"multiple_of",...re(t),value:e})}function K1(e,t){return new OT({check:"max_length",...re(t),maximum:e})}function ps(e,t){return new NT({check:"min_length",...re(t),minimum:e})}function Y1(e,t){return new AT({check:"length_equals",...re(t),length:e})}function f7(e,t){return new RT({check:"string_format",format:"regex",...re(t),pattern:e})}function p7(e){return new DT({check:"string_format",format:"lowercase",...re(e)})}function m7(e){return new LT({check:"string_format",format:"uppercase",...re(e)})}function g7(e,t){return new FT({check:"string_format",format:"includes",...re(t),includes:e})}function v7(e,t){return new zT({check:"string_format",format:"starts_with",...re(t),prefix:e})}function y7(e,t){return new UT({check:"string_format",format:"ends_with",...re(t),suffix:e})}function Rr(e){return new $T({check:"overwrite",tx:e})}function b7(e){return Rr(t=>t.normalize(e))}function k7(){return Rr(e=>e.trim())}function C7(){return Rr(e=>e.toLowerCase())}function w7(){return Rr(e=>e.toUpperCase())}function S7(e,t,n){return new e({type:"array",element:t,...re(n)})}function T7(e,t,n){return new e({type:"custom",check:"custom",fn:t,...re(n)})}function x7(e){const t=_7(n=>(n.addIssue=i=>{if(typeof i=="string")n.issues.push(Ar(i,n.value,t._zod.def));else{const r=i;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(Ar(r))}},e(n.value,n)));return t}function _7(e,t){const n=new bt({check:"custom",...re(t)});return n._zod.check=e,n}const E7=Z("ZodISODateTime",(e,t)=>{ex.init(e,t),Be.init(e,t)});function P7(e){return r7(E7,e)}const M7=Z("ZodISODate",(e,t)=>{tx.init(e,t),Be.init(e,t)});function I7(e){return o7(M7,e)}const O7=Z("ZodISOTime",(e,t)=>{nx.init(e,t),Be.init(e,t)});function N7(e){return s7(O7,e)}const A7=Z("ZodISODuration",(e,t)=>{ix.init(e,t),Be.init(e,t)});function R7(e){return a7(A7,e)}const Rt=Z("ZodError",(e,t)=>{T1.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>H8(e,n)},flatten:{value:n=>q8(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,ul,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,ul,2)}},isEmpty:{get(){return e.issues.length===0}}})},{Parent:Error}),D7=ml(Rt),L7=gl(Rt),F7=cs(Rt),z7=ls(Rt),U7=G8(Rt),$7=K8(Rt),j7=Y8(Rt),B7=Q8(Rt),V7=J8(Rt),q7=X8(Rt),H7=eT(Rt),W7=tT(Rt),Ke=Z("ZodType",(e,t)=>(Ze.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(ki(t,{checks:[...t.checks??[],...n.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(n,i)=>Yn(e,n,i),e.brand=()=>e,e.register=((n,i)=>(n.add(e,i),e)),e.parse=(n,i)=>D7(e,n,i,{callee:e.parse}),e.safeParse=(n,i)=>F7(e,n,i),e.parseAsync=async(n,i)=>L7(e,n,i,{callee:e.parseAsync}),e.safeParseAsync=async(n,i)=>z7(e,n,i),e.spa=e.safeParseAsync,e.encode=(n,i)=>U7(e,n,i),e.decode=(n,i)=>$7(e,n,i),e.encodeAsync=async(n,i)=>j7(e,n,i),e.decodeAsync=async(n,i)=>B7(e,n,i),e.safeEncode=(n,i)=>V7(e,n,i),e.safeDecode=(n,i)=>q7(e,n,i),e.safeEncodeAsync=async(n,i)=>H7(e,n,i),e.safeDecodeAsync=async(n,i)=>W7(e,n,i),e.refine=(n,i)=>e.check(F_(n,i)),e.superRefine=n=>e.check(z_(n)),e.overwrite=n=>e.check(Rr(n)),e.optional=()=>i0(e),e.nullable=()=>r0(e),e.nullish=()=>i0(r0(e)),e.nonoptional=n=>O_(e,n),e.array=()=>y_(e),e.or=n=>C_([e,n]),e.and=n=>S_(e,n),e.transform=n=>s0(e,x_(n)),e.default=n=>P_(e,n),e.prefault=n=>I_(e,n),e.catch=n=>A_(e,n),e.pipe=n=>s0(e,n),e.readonly=()=>L_(e),e.describe=n=>{const i=e.clone();return fs.add(i,{description:n}),i},Object.defineProperty(e,"description",{get(){return fs.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return fs.get(e);const i=e.clone();return fs.add(i,n[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Q1=Z("_ZodString",(e,t)=>{vl.init(e,t),Ke.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...i)=>e.check(f7(...i)),e.includes=(...i)=>e.check(g7(...i)),e.startsWith=(...i)=>e.check(v7(...i)),e.endsWith=(...i)=>e.check(y7(...i)),e.min=(...i)=>e.check(ps(...i)),e.max=(...i)=>e.check(K1(...i)),e.length=(...i)=>e.check(Y1(...i)),e.nonempty=(...i)=>e.check(ps(1,...i)),e.lowercase=i=>e.check(p7(i)),e.uppercase=i=>e.check(m7(i)),e.trim=()=>e.check(k7()),e.normalize=(...i)=>e.check(b7(...i)),e.toLowerCase=()=>e.check(C7()),e.toUpperCase=()=>e.check(w7())}),Z7=Z("ZodString",(e,t)=>{vl.init(e,t),Q1.init(e,t),e.email=n=>e.check(Fx(G7,n)),e.url=n=>e.check(Bx(K7,n)),e.jwt=n=>e.check(i7(u_,n)),e.emoji=n=>e.check(Vx(Y7,n)),e.guid=n=>e.check(H1(J1,n)),e.uuid=n=>e.check(zx(ms,n)),e.uuidv4=n=>e.check(Ux(ms,n)),e.uuidv6=n=>e.check($x(ms,n)),e.uuidv7=n=>e.check(jx(ms,n)),e.nanoid=n=>e.check(qx(Q7,n)),e.guid=n=>e.check(H1(J1,n)),e.cuid=n=>e.check(Hx(J7,n)),e.cuid2=n=>e.check(Wx(X7,n)),e.ulid=n=>e.check(Zx(e_,n)),e.base64=n=>e.check(e7(a_,n)),e.base64url=n=>e.check(t7(c_,n)),e.xid=n=>e.check(Gx(t_,n)),e.ksuid=n=>e.check(Kx(n_,n)),e.ipv4=n=>e.check(Yx(i_,n)),e.ipv6=n=>e.check(Qx(r_,n)),e.cidrv4=n=>e.check(Jx(o_,n)),e.cidrv6=n=>e.check(Xx(s_,n)),e.e164=n=>e.check(n7(l_,n)),e.datetime=n=>e.check(P7(n)),e.date=n=>e.check(I7(n)),e.time=n=>e.check(N7(n)),e.duration=n=>e.check(R7(n))});function Ji(e){return Lx(Z7,e)}const Be=Z("ZodStringFormat",(e,t)=>{$e.init(e,t),Q1.init(e,t)}),G7=Z("ZodEmail",(e,t)=>{HT.init(e,t),Be.init(e,t)}),J1=Z("ZodGUID",(e,t)=>{VT.init(e,t),Be.init(e,t)}),ms=Z("ZodUUID",(e,t)=>{qT.init(e,t),Be.init(e,t)}),K7=Z("ZodURL",(e,t)=>{WT.init(e,t),Be.init(e,t)}),Y7=Z("ZodEmoji",(e,t)=>{ZT.init(e,t),Be.init(e,t)}),Q7=Z("ZodNanoID",(e,t)=>{GT.init(e,t),Be.init(e,t)}),J7=Z("ZodCUID",(e,t)=>{KT.init(e,t),Be.init(e,t)}),X7=Z("ZodCUID2",(e,t)=>{YT.init(e,t),Be.init(e,t)}),e_=Z("ZodULID",(e,t)=>{QT.init(e,t),Be.init(e,t)}),t_=Z("ZodXID",(e,t)=>{JT.init(e,t),Be.init(e,t)}),n_=Z("ZodKSUID",(e,t)=>{XT.init(e,t),Be.init(e,t)}),i_=Z("ZodIPv4",(e,t)=>{rx.init(e,t),Be.init(e,t)}),r_=Z("ZodIPv6",(e,t)=>{ox.init(e,t),Be.init(e,t)}),o_=Z("ZodCIDRv4",(e,t)=>{sx.init(e,t),Be.init(e,t)}),s_=Z("ZodCIDRv6",(e,t)=>{ax.init(e,t),Be.init(e,t)}),a_=Z("ZodBase64",(e,t)=>{cx.init(e,t),Be.init(e,t)}),c_=Z("ZodBase64URL",(e,t)=>{ux.init(e,t),Be.init(e,t)}),l_=Z("ZodE164",(e,t)=>{dx.init(e,t),Be.init(e,t)}),u_=Z("ZodJWT",(e,t)=>{fx.init(e,t),Be.init(e,t)}),X1=Z("ZodNumber",(e,t)=>{R1.init(e,t),Ke.init(e,t),e.gt=(i,r)=>e.check(Z1(i,r)),e.gte=(i,r)=>e.check(kl(i,r)),e.min=(i,r)=>e.check(kl(i,r)),e.lt=(i,r)=>e.check(W1(i,r)),e.lte=(i,r)=>e.check(bl(i,r)),e.max=(i,r)=>e.check(bl(i,r)),e.int=i=>e.check(e0(i)),e.safe=i=>e.check(e0(i)),e.positive=i=>e.check(Z1(0,i)),e.nonnegative=i=>e.check(kl(0,i)),e.negative=i=>e.check(W1(0,i)),e.nonpositive=i=>e.check(bl(0,i)),e.multipleOf=(i,r)=>e.check(G1(i,r)),e.step=(i,r)=>e.check(G1(i,r)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function d_(e){return c7(X1,e)}const h_=Z("ZodNumberFormat",(e,t)=>{px.init(e,t),X1.init(e,t)});function e0(e){return l7(h_,e)}const f_=Z("ZodBoolean",(e,t)=>{mx.init(e,t),Ke.init(e,t)});function gs(e){return u7(f_,e)}const p_=Z("ZodUnknown",(e,t)=>{gx.init(e,t),Ke.init(e,t)});function t0(){return d7(p_)}const m_=Z("ZodNever",(e,t)=>{vx.init(e,t),Ke.init(e,t)});function g_(e){return h7(m_,e)}const v_=Z("ZodArray",(e,t)=>{yx.init(e,t),Ke.init(e,t),e.element=t.element,e.min=(n,i)=>e.check(ps(n,i)),e.nonempty=n=>e.check(ps(1,n)),e.max=(n,i)=>e.check(K1(n,i)),e.length=(n,i)=>e.check(Y1(n,i)),e.unwrap=()=>e.element});function y_(e,t){return S7(v_,e,t)}const b_=Z("ZodObject",(e,t)=>{kx.init(e,t),Ke.init(e,t),Oe(e,"shape",()=>t.shape),e.keyof=()=>vs(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:t0()}),e.loose=()=>e.clone({...e._zod.def,catchall:t0()}),e.strict=()=>e.clone({...e._zod.def,catchall:g_()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>U8(e,n),e.safeExtend=n=>$8(e,n),e.merge=n=>j8(e,n),e.pick=n=>F8(e,n),e.omit=n=>z8(e,n),e.partial=(...n)=>B8(n0,e,n[0]),e.required=(...n)=>V8(o0,e,n[0])});function Cl(e,t){const n={type:"object",shape:e??{},...re(t)};return new b_(n)}const k_=Z("ZodUnion",(e,t)=>{Cx.init(e,t),Ke.init(e,t),e.options=t.options});function C_(e,t){return new k_({type:"union",options:e,...re(t)})}const w_=Z("ZodIntersection",(e,t)=>{wx.init(e,t),Ke.init(e,t)});function S_(e,t){return new w_({type:"intersection",left:e,right:t})}const wl=Z("ZodEnum",(e,t)=>{Sx.init(e,t),Ke.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(i,r)=>{const o={};for(const s of i)if(n.has(s))o[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new wl({...t,checks:[],...re(r),entries:o})},e.exclude=(i,r)=>{const o={...t.entries};for(const s of i)if(n.has(s))delete o[s];else throw new Error(`Key ${s} not found in enum`);return new wl({...t,checks:[],...re(r),entries:o})}});function vs(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new wl({type:"enum",entries:n,...re(t)})}const T_=Z("ZodTransform",(e,t)=>{Tx.init(e,t),Ke.init(e,t),e._zod.parse=(n,i)=>{if(i.direction==="backward")throw new g1(e.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(Ar(o,n.value,t));else{const s=o;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),n.issues.push(Ar(s))}};const r=t.transform(n.value,n);return r instanceof Promise?r.then(o=>(n.value=o,n)):(n.value=r,n)}});function x_(e){return new T_({type:"transform",transform:e})}const n0=Z("ZodOptional",(e,t)=>{xx.init(e,t),Ke.init(e,t),e.unwrap=()=>e._zod.def.innerType});function i0(e){return new n0({type:"optional",innerType:e})}const __=Z("ZodNullable",(e,t)=>{_x.init(e,t),Ke.init(e,t),e.unwrap=()=>e._zod.def.innerType});function r0(e){return new __({type:"nullable",innerType:e})}const E_=Z("ZodDefault",(e,t)=>{Ex.init(e,t),Ke.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function P_(e,t){return new E_({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():C1(t)}})}const M_=Z("ZodPrefault",(e,t)=>{Px.init(e,t),Ke.init(e,t),e.unwrap=()=>e._zod.def.innerType});function I_(e,t){return new M_({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():C1(t)}})}const o0=Z("ZodNonOptional",(e,t)=>{Mx.init(e,t),Ke.init(e,t),e.unwrap=()=>e._zod.def.innerType});function O_(e,t){return new o0({type:"nonoptional",innerType:e,...re(t)})}const N_=Z("ZodCatch",(e,t)=>{Ix.init(e,t),Ke.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function A_(e,t){return new N_({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const R_=Z("ZodPipe",(e,t)=>{Ox.init(e,t),Ke.init(e,t),e.in=t.in,e.out=t.out});function s0(e,t){return new R_({type:"pipe",in:e,out:t})}const D_=Z("ZodReadonly",(e,t)=>{Nx.init(e,t),Ke.init(e,t),e.unwrap=()=>e._zod.def.innerType});function L_(e){return new D_({type:"readonly",innerType:e})}const a0=Z("ZodCustom",(e,t)=>{Ax.init(e,t),Ke.init(e,t)});function F_(e,t={}){return T7(a0,e,t)}function z_(e){return x7(e)}function U_(e,t={error:`Input not instance of ${e.name}`}){const n=new a0({type:"custom",check:"custom",fn:i=>i instanceof e,abort:!0,...re(t)});return n._zod.bag.Class=e,n}const $_="sophiie-chat-frame";var Dr=(e=>(e.EMBEDDED="embedded",e.OVERLAY="overlay",e))(Dr||{});const j_=Cl({mode:vs(Dr).default("overlay"),target:U_(typeof window<"u"?HTMLElement:Object).optional().nullable().transform(e=>e??(typeof document<"u"?document.getElementById($_):void 0)??void 0),position:Cl({bottom:Ji().optional(),right:Ji().optional()}).optional()}).optional().transform(e=>{if(e?.target&&e.mode!=="embedded"&&console.warn(`render.target has no effect in ${e.mode} mode.`),e?.mode==="embedded"){if(e.target)return{mode:"embedded",target:e.target,position:e.position};console.error("No valid target found for embedded mode. Defaulting to overlay mode.")}return{mode:"overlay",position:e?.position}}),B_=e=>{const{environment:t,orgId:n,enabled:i=!0,heartbeatInterval:r=90*1e3,isSessionActive:o=!0}=e,s=U.useRef(null),a=U.useRef(!1),c=$c({orgId:n,environment:t}),l=Uc({...jc({mutationFn:async()=>{console.log("[useSessionCleanup] Ending session"),await c.post("/webhooks/chatbot/session-end",{},{keepalive:!0})},onError:m=>{console.error("Failed to end session:",m)}}),retry:0}),u=Uc(jc({mutationFn:async()=>{console.log("[useSessionCleanup] Extending session"),await c.post("/webhooks/chatbot/session-extend",{})},onError:m=>{console.error("Failed to extend session:",m)},onSuccess:()=>{console.debug("Session extended successfully")}})),d=async()=>{l.mutate()},f=async()=>{o&&u.mutate()},h=()=>{i&&!a.current&&d()};return U.useEffect(()=>{if(!i)return;const m=()=>{a.current||!o||(a.current=!0,d())};return window.addEventListener("beforeunload",m),window.addEventListener("pagehide",m),()=>{window.removeEventListener("beforeunload",m),window.removeEventListener("pagehide",m)}},[i,o]),U.useEffect(()=>{if(!i||!o){s.current&&(clearInterval(s.current),s.current=null);return}return s.current=setInterval(()=>{f()},r),()=>{s.current&&(clearInterval(s.current),s.current=null)}},[i,o,r]),U.useEffect(()=>()=>{s.current&&clearInterval(s.current)},[]),{manualCleanup:h}},c0=U.createContext({});function V_({children:e}){const{startSession:t,sessionState:n,setConfirmEndChat:i,endSession:r,modeType:o,config:s,featureFlags:a}=tn(),c=_r(),[l,u]=U.useState(!1),[d,f]=U.useState(o||tt.CHAT),h=c?.isWidgetOpen??!1,m=U.useCallback(C=>{(typeof C=="function"?C(h):C)?c?.openWidget():c?.minimizeWidget()},[c,h]),p=()=>{c?.openWidget(),n===qo.IDLE&&t()};U.useEffect(()=>{s.autoOpen&&!a.isLoading&&p()},[a.isLoading]);const y=()=>{c?.minimizeWidget()},g=()=>{i(!0)},S=()=>{r(),u(!0),c?.minimizeWidget()};return v.jsx(c0.Provider,{value:{isOpen:h,setIsOpen:m,isSessionEnded:l,setIsSessionEnded:u,currentMode:d,setCurrentMode:f,handleOpenWidget:p,handleMinimizeWidget:y,handleCloseWidget:g,handleEndChat:S},children:e})}const Lr=()=>{const e=U.useContext(c0);if(e===void 0)throw new Error("useWidgetContext must be used within a WidgetProvider");return e},q_=()=>{const{confirmEndChat:e,setConfirmEndChat:t,disconnectChat:n}=tn(),{setIsSessionEnded:i}=Lr();return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:Te("absolute inset-0 bg-black opacity-20 hidden",e?"block":"hidden")}),v.jsx("div",{className:Te("absolute bottom-0 left-0 right-0 bg-white",e?"flex flex-col opacity-100 h-28 pointer-events-auto":"hidden opacity-0 h-0 pointer-events-none"),style:{transition:e?"height 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear":"height 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},children:v.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[v.jsx(Ue,{type:"button",variant:"destructive",onClick:()=>{n&&n(),i&&i(!0),t(!1)},children:"End Chat"}),v.jsx(Ue,{type:"button",variant:"ghost",onClick:()=>t(!1),children:"Cancel"})]})})]})},H_=({onToggle:e,className:t,variant:n="default",recordPluginRef:i})=>{const[r,o]=U.useState(!0);U.useEffect(()=>{let a=null;return(async()=>{try{a=await navigator.mediaDevices.getUserMedia({audio:!0}),o(!0)}catch(l){console.error("Error accessing microphone:",l),o(!1)}})().catch(console.error),()=>{a&&a.getTracks().forEach(l=>l.stop())}},[]);const s=U.useCallback(async()=>{try{if((await navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks().forEach(l=>{l.enabled=!r}),i?.current)if(r)try{i.current.pauseRecording()}catch(l){console.warn("Could not pause recording:",l)}else try{i.current.resumeRecording()}catch(l){console.warn("Could not resume recording:",l)}o(!r),e?.(!r)}catch(a){console.error("Error toggling microphone:",a)}},[r,e,i]);return n==="ghost"?v.jsx(Ue,{type:"button",className:Te("transition-all duration-200 rounded-full p-3",r?"hover:bg-brand-50":"bg-brand-100 hover:bg-brand-200",t),"aria-label":r?"Mute microphone":"Unmute microphone",variant:"ghost",onClick:s,children:v.jsx(ze,{type:r?"mic":"micOff",className:r?"text-brand-700 size-5":"text-secondary-700 size-5"})}):v.jsx(Ue,{className:t,onClick:s,variant:r?"outline":"destructive",LeftIcon:r?"mic":"micOff","aria-label":r?"Disable microphone":"Enable microphone"})},W_=({callStatus:e,startCall:t,endCall:n,onToggleMicrophone:i,hasSessionEnded:r=!1,onStartNewConversation:o})=>r&&o?v.jsx("div",{className:"p-4 pb-6 space-y-3 mx-auto",children:v.jsx(Ue,{variant:"outline",className:"mx-auto text-sm text-gray-700 font-semibold",RightIcon:"refreshCw",rightIconClassName:"-ml-1 size-5",onClick:o,children:"Start new conversation"})}):e.status===de.IDLE||e.status===de.ERROR?v.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:v.jsx("div",{className:"flex justify-center space-x-4",children:v.jsx(Ue,{type:"button",className:"bg-success-500 hover:bg-success-600 text-white transition-colors rounded-full p-3 size-11","aria-label":"Start call",onClick:t,children:v.jsx(ze,{type:"phone",className:"text-white size-5"})})})}):e.status===de.IN_PROGRESS||e.status===de.INITIATING?v.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:v.jsxs("div",{className:"flex justify-center",children:[v.jsx(H_,{variant:"ghost",className:"my-auto mr-5",onToggle:i}),v.jsx(Ue,{type:"button",className:"bg-destructive-500 hover:bg-destructive-600 text-white transition-colors rounded-full p-3 size-11","aria-label":"Hang up call",onClick:n,children:v.jsx(ze,{type:"phoneOff",className:"text-white size-5"})}),v.jsx("div",{className:"p-3 invisible size-5 ml-10"})]})}):null,l0=({error:e,onDismiss:t})=>v.jsxs("div",{className:"text-center bg-red-100 rounded-md py-4 px-6 space-y-3",children:[v.jsx("div",{className:"relative flex items-center justify-center flex-none",children:v.jsx(ze,{type:"error",className:"size-6 text-red-600"})}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("p",{className:"text-lg font-medium text-red-900",children:e.message}),e.description&&v.jsx("p",{className:"text-sm text-red-700",children:e.description})]}),t&&v.jsx("div",{className:"pt-2",children:v.jsx(Ue,{variant:"outline",size:"sm",onClick:t,className:"text-red-700 border-red-300 hover:bg-red-50",children:"Dismiss"})})]}),Z_=({callStatus:e,onDismissError:t,agentName:n="Sophiie"})=>e.status===de.INITIATING?v.jsxs("div",{className:"flex flex-col items-center space-y-4 animate-fadeIn",children:[v.jsxs("div",{className:"text-lg font-medium text-gray-900",children:["Connecting to ",n,"..."]}),v.jsx("div",{className:"flex items-center space-x-1",children:v.jsxs("div",{className:"flex space-x-1 ml-2",children:[v.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),v.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),v.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}):e.status===de.ERROR?v.jsx(l0,{error:{message:e.error?.message||"Call failed to connect",description:e.error?.description||"Please try again or check your connection"},onDismiss:t}):null;function G_(e,t,n,i){var r=this,o=U.useRef(null),s=U.useRef(0),a=U.useRef(0),c=U.useRef(null),l=U.useRef([]),u=U.useRef(),d=U.useRef(),f=U.useRef(e),h=U.useRef(!0);f.current=e;var m=typeof window<"u",p=!t&&t!==0&&m;if(typeof e!="function")throw new TypeError("Expected a function");t=+t||0;var y=!!(n=n||{}).leading,g=!("trailing"in n)||!!n.trailing,S="maxWait"in n,C="debounceOnServer"in n&&!!n.debounceOnServer,w=S?Math.max(+n.maxWait||0,t):null;U.useEffect(function(){return h.current=!0,function(){h.current=!1}},[]);var k=U.useMemo(function(){var b=function(z){var D=l.current,F=u.current;return l.current=u.current=null,s.current=z,a.current=a.current||z,d.current=f.current.apply(F,D)},x=function(z,D){p&&cancelAnimationFrame(c.current),c.current=p?requestAnimationFrame(z):setTimeout(z,D)},T=function(z){if(!h.current)return!1;var D=z-o.current;return!o.current||D>=t||D<0||S&&z-s.current>=w},P=function(z){return c.current=null,g&&l.current?b(z):(l.current=u.current=null,d.current)},A=function z(){var D=Date.now();if(y&&a.current===s.current&&M(),T(D))return P(D);if(h.current){var F=t-(D-o.current),$=S?Math.min(F,w-(D-s.current)):F;x(z,$)}},M=function(){},R=function(){if(m||C){var z=Date.now(),D=T(z);if(l.current=[].slice.call(arguments),u.current=r,o.current=z,D){if(!c.current&&h.current)return s.current=o.current,x(A,t),y?b(o.current):d.current;if(S)return x(A,t),b(o.current)}return c.current||x(A,t),d.current}};return R.cancel=function(){var z=c.current;z&&(p?cancelAnimationFrame(c.current):clearTimeout(c.current)),s.current=0,l.current=o.current=u.current=c.current=null},R.isPending=function(){return!!c.current},R.flush=function(){return c.current?P(Date.now()):d.current},R},[y,S,t,w,g,p,m,C,i]);return k}function lt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ys={exports:{}},K_=ys.exports,u0;function Y_(){return u0||(u0=1,(function(e,t){(function(n,i){e.exports=i()})(K_,(function(){var n=1e3,i=6e4,r=36e5,o="millisecond",s="second",a="minute",c="hour",l="day",u="week",d="month",f="quarter",h="year",m="date",p="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(D){var F=["th","st","nd","rd"],$=D%100;return"["+D+(F[($-20)%10]||F[$]||F[0])+"]"}},C=function(D,F,$){var V=String(D);return!V||V.length>=F?D:""+Array(F+1-V.length).join($)+D},w={s:C,z:function(D){var F=-D.utcOffset(),$=Math.abs(F),V=Math.floor($/60),L=$%60;return(F<=0?"+":"-")+C(V,2,"0")+":"+C(L,2,"0")},m:function D(F,$){if(F.date()<$.date())return-D($,F);var V=12*($.year()-F.year())+($.month()-F.month()),L=F.clone().add(V,d),J=$-L<0,_=F.clone().add(V+(J?-1:1),d);return+(-(V+($-L)/(J?L-_:_-L))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:d,y:h,w:u,d:l,D:m,h:c,m:a,s,ms:o,Q:f}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},k="en",b={};b[k]=S;var x="$isDayjsObject",T=function(D){return D instanceof R||!(!D||!D[x])},P=function D(F,$,V){var L;if(!F)return k;if(typeof F=="string"){var J=F.toLowerCase();b[J]&&(L=J),$&&(b[J]=$,L=J);var _=F.split("-");if(!L&&_.length>1)return D(_[0])}else{var ee=F.name;b[ee]=F,L=ee}return!V&&L&&(k=L),L||!V&&k},A=function(D,F){if(T(D))return D.clone();var $=typeof F=="object"?F:{};return $.date=D,$.args=arguments,new R($)},M=w;M.l=P,M.i=T,M.w=function(D,F){return A(D,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var R=(function(){function D($){this.$L=P($.locale,null,!0),this.parse($),this.$x=this.$x||$.x||{},this[x]=!0}var F=D.prototype;return F.parse=function($){this.$d=(function(V){var L=V.date,J=V.utc;if(L===null)return new Date(NaN);if(M.u(L))return new Date;if(L instanceof Date)return new Date(L);if(typeof L=="string"&&!/Z$/i.test(L)){var _=L.match(y);if(_){var ee=_[2]-1||0,oe=(_[7]||"0").substring(0,3);return J?new Date(Date.UTC(_[1],ee,_[3]||1,_[4]||0,_[5]||0,_[6]||0,oe)):new Date(_[1],ee,_[3]||1,_[4]||0,_[5]||0,_[6]||0,oe)}}return new Date(L)})($),this.init()},F.init=function(){var $=this.$d;this.$y=$.getFullYear(),this.$M=$.getMonth(),this.$D=$.getDate(),this.$W=$.getDay(),this.$H=$.getHours(),this.$m=$.getMinutes(),this.$s=$.getSeconds(),this.$ms=$.getMilliseconds()},F.$utils=function(){return M},F.isValid=function(){return this.$d.toString()!==p},F.isSame=function($,V){var L=A($);return this.startOf(V)<=L&&L<=this.endOf(V)},F.isAfter=function($,V){return A($)<this.startOf(V)},F.isBefore=function($,V){return this.endOf(V)<A($)},F.$g=function($,V,L){return M.u($)?this[V]:this.set(L,$)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function($,V){var L=this,J=!!M.u(V)||V,_=M.p($),ee=function(_e,Ce){var Re=M.w(L.$u?Date.UTC(L.$y,Ce,_e):new Date(L.$y,Ce,_e),L);return J?Re:Re.endOf(l)},oe=function(_e,Ce){return M.w(L.toDate()[_e].apply(L.toDate("s"),(J?[0,0,0,0]:[23,59,59,999]).slice(Ce)),L)},E=this.$W,ae=this.$M,ke=this.$D,pe="set"+(this.$u?"UTC":"");switch(_){case h:return J?ee(1,0):ee(31,11);case d:return J?ee(1,ae):ee(0,ae+1);case u:var ie=this.$locale().weekStart||0,xe=(E<ie?E+7:E)-ie;return ee(J?ke-xe:ke+(6-xe),ae);case l:case m:return oe(pe+"Hours",0);case c:return oe(pe+"Minutes",1);case a:return oe(pe+"Seconds",2);case s:return oe(pe+"Milliseconds",3);default:return this.clone()}},F.endOf=function($){return this.startOf($,!1)},F.$set=function($,V){var L,J=M.p($),_="set"+(this.$u?"UTC":""),ee=(L={},L[l]=_+"Date",L[m]=_+"Date",L[d]=_+"Month",L[h]=_+"FullYear",L[c]=_+"Hours",L[a]=_+"Minutes",L[s]=_+"Seconds",L[o]=_+"Milliseconds",L)[J],oe=J===l?this.$D+(V-this.$W):V;if(J===d||J===h){var E=this.clone().set(m,1);E.$d[ee](oe),E.init(),this.$d=E.set(m,Math.min(this.$D,E.daysInMonth())).$d}else ee&&this.$d[ee](oe);return this.init(),this},F.set=function($,V){return this.clone().$set($,V)},F.get=function($){return this[M.p($)]()},F.add=function($,V){var L,J=this;$=Number($);var _=M.p(V),ee=function(ae){var ke=A(J);return M.w(ke.date(ke.date()+Math.round(ae*$)),J)};if(_===d)return this.set(d,this.$M+$);if(_===h)return this.set(h,this.$y+$);if(_===l)return ee(1);if(_===u)return ee(7);var oe=(L={},L[a]=i,L[c]=r,L[s]=n,L)[_]||1,E=this.$d.getTime()+$*oe;return M.w(E,this)},F.subtract=function($,V){return this.add(-1*$,V)},F.format=function($){var V=this,L=this.$locale();if(!this.isValid())return L.invalidDate||p;var J=$||"YYYY-MM-DDTHH:mm:ssZ",_=M.z(this),ee=this.$H,oe=this.$m,E=this.$M,ae=L.weekdays,ke=L.months,pe=L.meridiem,ie=function(Ce,Re,Le,ut){return Ce&&(Ce[Re]||Ce(V,J))||Le[Re].slice(0,ut)},xe=function(Ce){return M.s(ee%12||12,Ce,"0")},_e=pe||function(Ce,Re,Le){var ut=Ce<12?"AM":"PM";return Le?ut.toLowerCase():ut};return J.replace(g,(function(Ce,Re){return Re||(function(Le){switch(Le){case"YY":return String(V.$y).slice(-2);case"YYYY":return M.s(V.$y,4,"0");case"M":return E+1;case"MM":return M.s(E+1,2,"0");case"MMM":return ie(L.monthsShort,E,ke,3);case"MMMM":return ie(ke,E);case"D":return V.$D;case"DD":return M.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return ie(L.weekdaysMin,V.$W,ae,2);case"ddd":return ie(L.weekdaysShort,V.$W,ae,3);case"dddd":return ae[V.$W];case"H":return String(ee);case"HH":return M.s(ee,2,"0");case"h":return xe(1);case"hh":return xe(2);case"a":return _e(ee,oe,!0);case"A":return _e(ee,oe,!1);case"m":return String(oe);case"mm":return M.s(oe,2,"0");case"s":return String(V.$s);case"ss":return M.s(V.$s,2,"0");case"SSS":return M.s(V.$ms,3,"0");case"Z":return _}return null})(Ce)||_.replace(":","")}))},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function($,V,L){var J,_=this,ee=M.p(V),oe=A($),E=(oe.utcOffset()-this.utcOffset())*i,ae=this-oe,ke=function(){return M.m(_,oe)};switch(ee){case h:J=ke()/12;break;case d:J=ke();break;case f:J=ke()/3;break;case u:J=(ae-E)/6048e5;break;case l:J=(ae-E)/864e5;break;case c:J=ae/r;break;case a:J=ae/i;break;case s:J=ae/n;break;default:J=ae}return L?J:M.a(J)},F.daysInMonth=function(){return this.endOf(d).$D},F.$locale=function(){return b[this.$L]},F.locale=function($,V){if(!$)return this.$L;var L=this.clone(),J=P($,V,!0);return J&&(L.$L=J),L},F.clone=function(){return M.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},D})(),z=R.prototype;return A.prototype=z,[["$ms",o],["$s",s],["$m",a],["$H",c],["$W",l],["$M",d],["$y",h],["$D",m]].forEach((function(D){z[D[1]]=function(F){return this.$g(F,D[0],D[1])}})),A.extend=function(D,F){return D.$i||(D(F,R,A),D.$i=!0),A},A.locale=P,A.isDayjs=T,A.unix=function(D){return A(1e3*D)},A.en=b[k],A.Ls=b,A.p={},A}))})(ys)),ys.exports}var Q_=Y_();const dt=lt(Q_);var bs={exports:{}},J_=bs.exports,d0;function X_(){return d0||(d0=1,(function(e,t){(function(n,i){e.exports=i()})(J_,(function(){return function(n,i,r){var o="h:mm A",s={lastDay:"[Yesterday at] "+o,sameDay:"[Today at] "+o,nextDay:"[Tomorrow at] "+o,nextWeek:"dddd [at] "+o,lastWeek:"[Last] dddd [at] "+o,sameElse:"MM/DD/YYYY"};i.prototype.calendar=function(a,c){var l=c||this.$locale().calendar||s,u=r(a||void 0).startOf("d"),d=this.diff(u,"d",!0),f="sameElse",h=d<-6?f:d<-1?"lastWeek":d<0?"lastDay":d<1?"sameDay":d<2?"nextDay":d<7?"nextWeek":f,m=l[h]||s[h];return typeof m=="function"?m.call(this,r()):this.format(m)}}}))})(bs)),bs.exports}var eE=X_();const tE=lt(eE);var ks={exports:{}},nE=ks.exports,h0;function iE(){return h0||(h0=1,(function(e,t){(function(n,i){e.exports=i()})(nE,(function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,o=/\d\d/,s=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,c={},l=function(y){return(y=+y)+(y>68?1900:2e3)},u=function(y){return function(g){this[y]=+g}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=(function(g){if(!g||g==="Z")return 0;var S=g.match(/([+-]|\d\d)/g),C=60*S[1]+(+S[2]||0);return C===0?0:S[0]==="+"?-C:C})(y)}],f=function(y){var g=c[y];return g&&(g.indexOf?g:g.s.concat(g.f))},h=function(y,g){var S,C=c.meridiem;if(C){for(var w=1;w<=24;w+=1)if(y.indexOf(C(w,0,g))>-1){S=w>12;break}}else S=y===(g?"pm":"PM");return S},m={A:[a,function(y){this.afternoon=h(y,!1)}],a:[a,function(y){this.afternoon=h(y,!0)}],Q:[r,function(y){this.month=3*(y-1)+1}],S:[r,function(y){this.milliseconds=100*+y}],SS:[o,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[s,u("seconds")],ss:[s,u("seconds")],m:[s,u("minutes")],mm:[s,u("minutes")],H:[s,u("hours")],h:[s,u("hours")],HH:[s,u("hours")],hh:[s,u("hours")],D:[s,u("day")],DD:[o,u("day")],Do:[a,function(y){var g=c.ordinal,S=y.match(/\d+/);if(this.day=S[0],g)for(var C=1;C<=31;C+=1)g(C).replace(/\[|\]/g,"")===y&&(this.day=C)}],w:[s,u("week")],ww:[o,u("week")],M:[s,u("month")],MM:[o,u("month")],MMM:[a,function(y){var g=f("months"),S=(f("monthsShort")||g.map((function(C){return C.slice(0,3)}))).indexOf(y)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[a,function(y){var g=f("months").indexOf(y)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,u("year")],YY:[o,function(y){this.year=l(y)}],YYYY:[/\d{4}/,u("year")],Z:d,ZZ:d};function p(y){var g,S;g=y,S=c&&c.formats;for(var C=(y=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(A,M,R){var z=R&&R.toUpperCase();return M||S[R]||n[R]||S[z].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(D,F,$){return F||$.slice(1)}))}))).match(i),w=C.length,k=0;k<w;k+=1){var b=C[k],x=m[b],T=x&&x[0],P=x&&x[1];C[k]=P?{regex:T,parser:P}:b.replace(/^\[|\]$/g,"")}return function(A){for(var M={},R=0,z=0;R<w;R+=1){var D=C[R];if(typeof D=="string")z+=D.length;else{var F=D.regex,$=D.parser,V=A.slice(z),L=F.exec(V)[0];$.call(M,L),A=A.replace(L,"")}}return(function(J){var _=J.afternoon;if(_!==void 0){var ee=J.hours;_?ee<12&&(J.hours+=12):ee===12&&(J.hours=0),delete J.afternoon}})(M),M}}return function(y,g,S){S.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(l=y.parseTwoDigitYear);var C=g.prototype,w=C.parse;C.parse=function(k){var b=k.date,x=k.utc,T=k.args;this.$u=x;var P=T[1];if(typeof P=="string"){var A=T[2]===!0,M=T[3]===!0,R=A||M,z=T[2];M&&(z=T[2]),c=this.$locale(),!A&&z&&(c=S.Ls[z]),this.$d=(function(V,L,J,_){try{if(["x","X"].indexOf(L)>-1)return new Date((L==="X"?1e3:1)*V);var ee=p(L)(V),oe=ee.year,E=ee.month,ae=ee.day,ke=ee.hours,pe=ee.minutes,ie=ee.seconds,xe=ee.milliseconds,_e=ee.zone,Ce=ee.week,Re=new Date,Le=ae||(oe||E?1:Re.getDate()),ut=oe||Re.getFullYear(),xn=0;oe&&!E||(xn=E>0?E-1:Re.getMonth());var _n,Xn=ke||0,En=pe||0,Pn=ie||0,ei=xe||0;return _e?new Date(Date.UTC(ut,xn,Le,Xn,En,Pn,ei+60*_e.offset*1e3)):J?new Date(Date.UTC(ut,xn,Le,Xn,En,Pn,ei)):(_n=new Date(ut,xn,Le,Xn,En,Pn,ei),Ce&&(_n=_(_n).week(Ce).toDate()),_n)}catch{return new Date("")}})(b,P,x,S),this.init(),z&&z!==!0&&(this.$L=this.locale(z).$L),R&&b!=this.format(P)&&(this.$d=new Date("")),c={}}else if(P instanceof Array)for(var D=P.length,F=1;F<=D;F+=1){T[1]=P[F-1];var $=S.apply(this,T);if($.isValid()){this.$d=$.$d,this.$L=$.$L,this.init();break}F===D&&(this.$d=new Date(""))}else w.call(this,k)}}}))})(ks)),ks.exports}var rE=iE();const oE=lt(rE);var Cs={exports:{}},sE=Cs.exports,f0;function aE(){return f0||(f0=1,(function(e,t){(function(n,i){e.exports=i()})(sE,(function(){var n,i,r=1e3,o=6e4,s=36e5,a=864e5,c=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=31536e6,u=2628e6,d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,f={years:l,months:u,days:a,hours:s,minutes:o,seconds:r,milliseconds:1,weeks:6048e5},h=function(b){return b instanceof w},m=function(b,x,T){return new w(b,T,x.$l)},p=function(b){return i.p(b)+"s"},y=function(b){return b<0},g=function(b){return y(b)?Math.ceil(b):Math.floor(b)},S=function(b){return Math.abs(b)},C=function(b,x){return b?y(b)?{negative:!0,format:""+S(b)+x}:{negative:!1,format:""+b+x}:{negative:!1,format:""}},w=(function(){function b(T,P,A){var M=this;if(this.$d={},this.$l=A,T===void 0&&(this.$ms=0,this.parseFromMilliseconds()),P)return m(T*f[p(P)],this);if(typeof T=="number")return this.$ms=T,this.parseFromMilliseconds(),this;if(typeof T=="object")return Object.keys(T).forEach((function(D){M.$d[p(D)]=T[D]})),this.calMilliseconds(),this;if(typeof T=="string"){var R=T.match(d);if(R){var z=R.slice(2).map((function(D){return D!=null?Number(D):0}));return this.$d.years=z[0],this.$d.months=z[1],this.$d.weeks=z[2],this.$d.days=z[3],this.$d.hours=z[4],this.$d.minutes=z[5],this.$d.seconds=z[6],this.calMilliseconds(),this}}return this}var x=b.prototype;return x.calMilliseconds=function(){var T=this;this.$ms=Object.keys(this.$d).reduce((function(P,A){return P+(T.$d[A]||0)*f[A]}),0)},x.parseFromMilliseconds=function(){var T=this.$ms;this.$d.years=g(T/l),T%=l,this.$d.months=g(T/u),T%=u,this.$d.days=g(T/a),T%=a,this.$d.hours=g(T/s),T%=s,this.$d.minutes=g(T/o),T%=o,this.$d.seconds=g(T/r),T%=r,this.$d.milliseconds=T},x.toISOString=function(){var T=C(this.$d.years,"Y"),P=C(this.$d.months,"M"),A=+this.$d.days||0;this.$d.weeks&&(A+=7*this.$d.weeks);var M=C(A,"D"),R=C(this.$d.hours,"H"),z=C(this.$d.minutes,"M"),D=this.$d.seconds||0;this.$d.milliseconds&&(D+=this.$d.milliseconds/1e3,D=Math.round(1e3*D)/1e3);var F=C(D,"S"),$=T.negative||P.negative||M.negative||R.negative||z.negative||F.negative,V=R.format||z.format||F.format?"T":"",L=($?"-":"")+"P"+T.format+P.format+M.format+V+R.format+z.format+F.format;return L==="P"||L==="-P"?"P0D":L},x.toJSON=function(){return this.toISOString()},x.format=function(T){var P=T||"YYYY-MM-DDTHH:mm:ss",A={Y:this.$d.years,YY:i.s(this.$d.years,2,"0"),YYYY:i.s(this.$d.years,4,"0"),M:this.$d.months,MM:i.s(this.$d.months,2,"0"),D:this.$d.days,DD:i.s(this.$d.days,2,"0"),H:this.$d.hours,HH:i.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:i.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:i.s(this.$d.seconds,2,"0"),SSS:i.s(this.$d.milliseconds,3,"0")};return P.replace(c,(function(M,R){return R||String(A[M])}))},x.as=function(T){return this.$ms/f[p(T)]},x.get=function(T){var P=this.$ms,A=p(T);return A==="milliseconds"?P%=1e3:P=A==="weeks"?g(P/f[A]):this.$d[A],P||0},x.add=function(T,P,A){var M;return M=P?T*f[p(P)]:h(T)?T.$ms:m(T,this).$ms,m(this.$ms+M*(A?-1:1),this)},x.subtract=function(T,P){return this.add(T,P,!0)},x.locale=function(T){var P=this.clone();return P.$l=T,P},x.clone=function(){return m(this.$ms,this)},x.humanize=function(T){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!T)},x.valueOf=function(){return this.asMilliseconds()},x.milliseconds=function(){return this.get("milliseconds")},x.asMilliseconds=function(){return this.as("milliseconds")},x.seconds=function(){return this.get("seconds")},x.asSeconds=function(){return this.as("seconds")},x.minutes=function(){return this.get("minutes")},x.asMinutes=function(){return this.as("minutes")},x.hours=function(){return this.get("hours")},x.asHours=function(){return this.as("hours")},x.days=function(){return this.get("days")},x.asDays=function(){return this.as("days")},x.weeks=function(){return this.get("weeks")},x.asWeeks=function(){return this.as("weeks")},x.months=function(){return this.get("months")},x.asMonths=function(){return this.as("months")},x.years=function(){return this.get("years")},x.asYears=function(){return this.as("years")},b})(),k=function(b,x,T){return b.add(x.years()*T,"y").add(x.months()*T,"M").add(x.days()*T,"d").add(x.hours()*T,"h").add(x.minutes()*T,"m").add(x.seconds()*T,"s").add(x.milliseconds()*T,"ms")};return function(b,x,T){n=T,i=T().$utils(),T.duration=function(M,R){var z=T.locale();return m(M,{$l:z},R)},T.isDuration=h;var P=x.prototype.add,A=x.prototype.subtract;x.prototype.add=function(M,R){return h(M)?k(this,M,1):P.bind(this)(M,R)},x.prototype.subtract=function(M,R){return h(M)?k(this,M,-1):A.bind(this)(M,R)}}}))})(Cs)),Cs.exports}var cE=aE();const lE=lt(cE);var ws={exports:{}},uE=ws.exports,p0;function dE(){return p0||(p0=1,(function(e,t){(function(n,i){e.exports=i()})(uE,(function(){return function(n,i,r){i.prototype.isBetween=function(o,s,a,c){var l=r(o),u=r(s),d=(c=c||"()")[0]==="(",f=c[1]===")";return(d?this.isAfter(l,a):!this.isBefore(l,a))&&(f?this.isBefore(u,a):!this.isAfter(u,a))||(d?this.isBefore(l,a):!this.isAfter(l,a))&&(f?this.isAfter(u,a):!this.isBefore(u,a))}}}))})(ws)),ws.exports}var hE=dE();const fE=lt(hE);var Ss={exports:{}},pE=Ss.exports,m0;function mE(){return m0||(m0=1,(function(e,t){(function(n,i){e.exports=i()})(pE,(function(){return function(n,i){i.prototype.isSameOrAfter=function(r,o){return this.isSame(r,o)||this.isAfter(r,o)}}}))})(Ss)),Ss.exports}var gE=mE();const vE=lt(gE);var Ts={exports:{}},yE=Ts.exports,g0;function bE(){return g0||(g0=1,(function(e,t){(function(n,i){e.exports=i()})(yE,(function(){return function(n,i){i.prototype.isSameOrBefore=function(r,o){return this.isSame(r,o)||this.isBefore(r,o)}}}))})(Ts)),Ts.exports}var kE=bE();const CE=lt(kE);var xs={exports:{}},wE=xs.exports,v0;function SE(){return v0||(v0=1,(function(e,t){(function(n,i){e.exports=i()})(wE,(function(){return function(n,i,r){i.prototype.isToday=function(){var o="YYYY-MM-DD",s=r();return this.format(o)===s.format(o)}}}))})(xs)),xs.exports}var TE=SE();const xE=lt(TE);var _s={exports:{}},_E=_s.exports,y0;function EE(){return y0||(y0=1,(function(e,t){(function(n,i){e.exports=i()})(_E,(function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(i,r,o){var s=r.prototype,a=s.format;o.en.formats=n,s.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var l=this.$locale().formats,u=(function(d,f){return d.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(h,m,p){var y=p&&p.toUpperCase();return m||f[p]||n[p]||f[y].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(g,S,C){return S||C.slice(1)}))}))})(c,l===void 0?{}:l);return a.call(this,u)}}}))})(_s)),_s.exports}var PE=EE();const ME=lt(PE);var Es={exports:{}},IE=Es.exports,b0;function OE(){return b0||(b0=1,(function(e,t){(function(n,i){e.exports=i()})(IE,(function(){return function(n,i,r){var o=function(s,a){if(!a||!a.length||a.length===1&&!a[0]||a.length===1&&Array.isArray(a[0])&&!a[0].length)return null;var c;a.length===1&&a[0].length>0&&(a=a[0]),c=(a=a.filter((function(u){return u})))[0];for(var l=1;l<a.length;l+=1)a[l].isValid()&&!a[l][s](c)||(c=a[l]);return c};r.max=function(){var s=[].slice.call(arguments,0);return o("isAfter",s)},r.min=function(){var s=[].slice.call(arguments,0);return o("isBefore",s)}}}))})(Es)),Es.exports}var NE=OE();const AE=lt(NE);var Ps={exports:{}},RE=Ps.exports,k0;function DE(){return k0||(k0=1,(function(e,t){(function(n,i){e.exports=i()})(RE,(function(){return function(n,i,r){n=n||{};var o=i.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(l,u,d,f){return o.fromToBase(l,u,d,f)}r.en.relativeTime=s,o.fromToBase=function(l,u,d,f,h){for(var m,p,y,g=d.$locale().relativeTime||s,S=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],C=S.length,w=0;w<C;w+=1){var k=S[w];k.d&&(m=f?r(l).diff(d,k.d,!0):d.diff(l,k.d,!0));var b=(n.rounding||Math.round)(Math.abs(m));if(y=m>0,b<=k.r||!k.r){b<=1&&w>0&&(k=S[w-1]);var x=g[k.l];h&&(b=h(""+b)),p=typeof x=="string"?x.replace("%d",b):x(b,u,k.l,y);break}}if(u)return p;var T=y?g.future:g.past;return typeof T=="function"?T(p):T.replace("%s",p)},o.to=function(l,u){return a(l,u,this,!0)},o.from=function(l,u){return a(l,u,this)};var c=function(l){return l.$u?r.utc():r()};o.toNow=function(l){return this.to(c(this),l)},o.fromNow=function(l){return this.from(c(this),l)}}}))})(Ps)),Ps.exports}var LE=DE();const FE=lt(LE);var Ms={exports:{}},zE=Ms.exports,C0;function UE(){return C0||(C0=1,(function(e,t){(function(n,i){e.exports=i()})(zE,(function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},i={};return function(r,o,s){var a,c=function(f,h,m){m===void 0&&(m={});var p=new Date(f),y=(function(g,S){S===void 0&&(S={});var C=S.timeZoneName||"short",w=g+"|"+C,k=i[w];return k||(k=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:C}),i[w]=k),k})(h,m);return y.formatToParts(p)},l=function(f,h){for(var m=c(f,h),p=[],y=0;y<m.length;y+=1){var g=m[y],S=g.type,C=g.value,w=n[S];w>=0&&(p[w]=parseInt(C,10))}var k=p[3],b=k===24?0:k,x=p[0]+"-"+p[1]+"-"+p[2]+" "+b+":"+p[4]+":"+p[5]+":000",T=+f;return(s.utc(x).valueOf()-(T-=T%1e3))/6e4},u=o.prototype;u.tz=function(f,h){f===void 0&&(f=a);var m,p=this.utcOffset(),y=this.toDate(),g=y.toLocaleString("en-US",{timeZone:f}),S=Math.round((y-new Date(g))/1e3/60),C=15*-Math.round(y.getTimezoneOffset()/15)-S;if(!Number(C))m=this.utcOffset(0,h);else if(m=s(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(C,!0),h){var w=m.utcOffset();m=m.add(p-w,"minute")}return m.$x.$timezone=f,m},u.offsetName=function(f){var h=this.$x.$timezone||s.tz.guess(),m=c(this.valueOf(),h,{timeZoneName:f}).find((function(p){return p.type.toLowerCase()==="timezonename"}));return m&&m.value};var d=u.startOf;u.startOf=function(f,h){if(!this.$x||!this.$x.$timezone)return d.call(this,f,h);var m=s(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return d.call(m,f,h).tz(this.$x.$timezone,!0)},s.tz=function(f,h,m){var p=m&&h,y=m||h||a,g=l(+s(),y);if(typeof f!="string")return s(f).tz(y);var S=(function(b,x,T){var P=b-60*x*1e3,A=l(P,T);if(x===A)return[P,x];var M=l(P-=60*(A-x)*1e3,T);return A===M?[P,A]:[b-60*Math.min(A,M)*1e3,Math.max(A,M)]})(s.utc(f,p).valueOf(),g,y),C=S[0],w=S[1],k=s(C).utcOffset(w);return k.$x.$timezone=y,k},s.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},s.tz.setDefault=function(f){a=f}}}))})(Ms)),Ms.exports}var $E=UE();const jE=lt($E);var Is={exports:{}},BE=Is.exports,w0;function VE(){return w0||(w0=1,(function(e,t){(function(n,i){e.exports=i()})(BE,(function(){return function(n,i){i.prototype.toArray=function(){return[this.$y,this.$M,this.$D,this.$H,this.$m,this.$s,this.$ms]}}}))})(Is)),Is.exports}var qE=VE();const HE=lt(qE);var Os={exports:{}},WE=Os.exports,S0;function ZE(){return S0||(S0=1,(function(e,t){(function(n,i){e.exports=i()})(WE,(function(){var n="minute",i=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(o,s,a){var c=s.prototype;a.utc=function(p){var y={date:p,utc:!0,args:arguments};return new s(y)},c.utc=function(p){var y=a(this.toDate(),{locale:this.$L,utc:!0});return p?y.add(this.utcOffset(),n):y},c.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=c.parse;c.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),l.call(this,p)};var u=c.init;c.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds()}else u.call(this)};var d=c.utcOffset;c.utcOffset=function(p,y){var g=this.$utils().u;if(g(p))return this.$u?0:g(this.$offset)?d.call(this):this.$offset;if(typeof p=="string"&&(p=(function(k){k===void 0&&(k="");var b=k.match(i);if(!b)return null;var x=(""+b[0]).match(r)||["-",0,0],T=x[0],P=60*+x[1]+ +x[2];return P===0?0:T==="+"?P:-P})(p),p===null))return this;var S=Math.abs(p)<=16?60*p:p;if(S===0)return this.utc(y);var C=this.clone();if(y)return C.$offset=S,C.$u=!1,C;var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(C=this.local().add(S+w,n)).$offset=S,C.$x.$localOffset=w,C};var f=c.format;c.format=function(p){var y=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,y)},c.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*p},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var h=c.toDate;c.toDate=function(p){return p==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var m=c.diff;c.diff=function(p,y,g){if(p&&this.$u===p.$u)return m.call(this,p,y,g);var S=this.local(),C=a(p).local();return m.call(S,C,y,g)}}}))})(Os)),Os.exports}var GE=ZE();const KE=lt(GE);var Ns={exports:{}},YE=Ns.exports,T0;function QE(){return T0||(T0=1,(function(e,t){(function(n,i){e.exports=i()})(YE,(function(){return function(n,i){i.prototype.weekday=function(r){var o=this.$locale().weekStart||0,s=this.$W,a=(s<o?s+7:s)-o;return this.$utils().u(r)?a:this.subtract(a,"day").add(r,"day")}}}))})(Ns)),Ns.exports}var JE=QE();const XE=lt(JE),eP=(e={},t,n)=>{const i=[1,2,3,4,5];n.getWorkingWeekdays=()=>e.workingWeekdays||i,n.setWorkingWeekdays=r=>{e.workingWeekdays=r},n.getHolidays=()=>e.holidays||[],n.setHolidays=r=>{e.holidays=r},n.getHolidayFormat=()=>e.holidayFormat,n.setHolidayFormat=r=>{e.holidayFormat=r},n.getAdditionalWorkingDays=()=>e.additionalWorkingDays||[],n.setAdditionalWorkingDays=r=>{e.additionalWorkingDays=r},n.getAdditionalWorkingDayFormat=()=>e.additionalWorkingDayFormat,n.setAdditionalWorkingDayFormat=r=>{e.additionalWorkingDayFormat=r},t.prototype.isHoliday=function(){return e.holidays?!!e.holidays.includes(this.format(e.holidayFormat)):!1},t.prototype.isBusinessDay=function(){const r=e.workingWeekdays||i;return this.isHoliday()?!1:!!(this.isAdditionalWorkingDay()||r.includes(this.day()))},t.prototype.isAdditionalWorkingDay=function(){return e.additionalWorkingDays?!!e.additionalWorkingDays.includes(this.format(e.additionalWorkingDayFormat)):!1},t.prototype.businessDaysAdd=function(r){const o=r<0?-1:1;let s=this.clone(),a=Math.abs(r);for(;a>0;)s=s.add(o,"d"),s.isBusinessDay()&&(a-=1);return s},t.prototype.businessDaysSubtract=function(r){let o=this.clone();return o=o.businessDaysAdd(r*-1),o},t.prototype.businessDiff=function(r){const o=this.clone(),s=r.clone(),a=o>=s;let c=a?s:o;const l=a?o:s;let u=0;if(c.isSame(l))return u;for(;c<l;)c.isBusinessDay()&&(u+=1),c=c.add(1,"d");return a?u:-u},t.prototype.nextBusinessDay=function(){let o=this.clone(),s=1;for(;s<7&&(o=o.add(1,"day"),!o.isBusinessDay());)s+=1;return o},t.prototype.prevBusinessDay=function(){let o=this.clone(),s=1;for(;s<7&&(o=o.subtract(1,"day"),!o.isBusinessDay());)s+=1;return o},t.prototype.businessDaysInMonth=function(){if(!this.isValid())return[];let r=this.clone().startOf("month");const o=this.clone().endOf("month"),s=[];let a=!1;for(;!a;)r.isBusinessDay()&&s.push(r.clone()),r=r.add(1,"day"),r.isAfter(o)&&(a=!0);return s},t.prototype.lastBusinessDayOfMonth=function(){const r=this.businessDaysInMonth();return r[r.length-1]},t.prototype.businessWeeksInMonth=function(){if(!this.isValid())return[];let r=this.clone().startOf("month");const o=this.clone().endOf("month"),s=[];let a=[],c=!1;for(;!c;)r.isBusinessDay()&&a.push(r.clone()),(r.day()===5||r.isSame(o,"day"))&&(s.push(a),a=[]),r=r.add(1,"day"),r.isAfter(o)&&(c=!0);return s}};dt.extend(tE),dt.extend(oE),dt.extend(eP),dt.extend(fE),dt.extend(xE),dt.extend(ME),dt.extend(FE),dt.extend(jE),dt.extend(HE),dt.extend(KE),dt.extend(AE),dt.extend(lE),dt.extend(XE),dt.extend(vE),dt.extend(CE);function pF(){}function mF(){}function tP(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const nP=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,iP=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,rP={};function x0(e,t){return(rP.jsx?iP:nP).test(e)}const oP=/[ \t\n\f\r]/g;function sP(e){return typeof e=="object"?e.type==="text"?_0(e.value):!1:_0(e)}function _0(e){return e.replace(oP,"")===""}class Fr{constructor(t,n,i){this.normal=n,this.property=t,i&&(this.space=i)}}Fr.prototype.normal={},Fr.prototype.property={},Fr.prototype.space=void 0;function E0(e,t){const n={},i={};for(const r of e)Object.assign(n,r.property),Object.assign(i,r.normal);return new Fr(n,i,t)}function Sl(e){return e.toLowerCase()}class kt{constructor(t,n){this.attribute=n,this.property=t}}kt.prototype.attribute="",kt.prototype.booleanish=!1,kt.prototype.boolean=!1,kt.prototype.commaOrSpaceSeparated=!1,kt.prototype.commaSeparated=!1,kt.prototype.defined=!1,kt.prototype.mustUseProperty=!1,kt.prototype.number=!1,kt.prototype.overloadedBoolean=!1,kt.prototype.property="",kt.prototype.spaceSeparated=!1,kt.prototype.space=void 0;let aP=0;const fe=wi(),Ye=wi(),P0=wi(),Y=wi(),Ne=wi(),Xi=wi(),Mt=wi();function wi(){return 2**++aP}const Tl=Object.freeze(Object.defineProperty({__proto__:null,boolean:fe,booleanish:Ye,commaOrSpaceSeparated:Mt,commaSeparated:Xi,number:Y,overloadedBoolean:P0,spaceSeparated:Ne},Symbol.toStringTag,{value:"Module"})),xl=Object.keys(Tl);class _l extends kt{constructor(t,n,i,r){let o=-1;if(super(t,n),M0(this,"space",r),typeof i=="number")for(;++o<xl.length;){const s=xl[o];M0(this,xl[o],(i&Tl[s])===Tl[s])}}}_l.prototype.defined=!0;function M0(e,t,n){n&&(e[t]=n)}function er(e){const t={},n={};for(const[i,r]of Object.entries(e.properties)){const o=new _l(i,e.transform(e.attributes||{},i),r,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),t[i]=o,n[Sl(i)]=i,n[Sl(o.attribute)]=i}return new Fr(t,n,e.space)}const I0=er({properties:{ariaActiveDescendant:null,ariaAtomic:Ye,ariaAutoComplete:null,ariaBusy:Ye,ariaChecked:Ye,ariaColCount:Y,ariaColIndex:Y,ariaColSpan:Y,ariaControls:Ne,ariaCurrent:null,ariaDescribedBy:Ne,ariaDetails:null,ariaDisabled:Ye,ariaDropEffect:Ne,ariaErrorMessage:null,ariaExpanded:Ye,ariaFlowTo:Ne,ariaGrabbed:Ye,ariaHasPopup:null,ariaHidden:Ye,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ne,ariaLevel:Y,ariaLive:null,ariaModal:Ye,ariaMultiLine:Ye,ariaMultiSelectable:Ye,ariaOrientation:null,ariaOwns:Ne,ariaPlaceholder:null,ariaPosInSet:Y,ariaPressed:Ye,ariaReadOnly:Ye,ariaRelevant:null,ariaRequired:Ye,ariaRoleDescription:Ne,ariaRowCount:Y,ariaRowIndex:Y,ariaRowSpan:Y,ariaSelected:Ye,ariaSetSize:Y,ariaSort:null,ariaValueMax:Y,ariaValueMin:Y,ariaValueNow:Y,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function O0(e,t){return t in e?e[t]:t}function N0(e,t){return O0(e,t.toLowerCase())}const cP=er({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Xi,acceptCharset:Ne,accessKey:Ne,action:null,allow:null,allowFullScreen:fe,allowPaymentRequest:fe,allowUserMedia:fe,alt:null,as:null,async:fe,autoCapitalize:null,autoComplete:Ne,autoFocus:fe,autoPlay:fe,blocking:Ne,capture:null,charSet:null,checked:fe,cite:null,className:Ne,cols:Y,colSpan:null,content:null,contentEditable:Ye,controls:fe,controlsList:Ne,coords:Y|Xi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:fe,defer:fe,dir:null,dirName:null,disabled:fe,download:P0,draggable:Ye,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:fe,formTarget:null,headers:Ne,height:Y,hidden:fe,high:Y,href:null,hrefLang:null,htmlFor:Ne,httpEquiv:Ne,id:null,imageSizes:null,imageSrcSet:null,inert:fe,inputMode:null,integrity:null,is:null,isMap:fe,itemId:null,itemProp:Ne,itemRef:Ne,itemScope:fe,itemType:Ne,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:fe,low:Y,manifest:null,max:null,maxLength:Y,media:null,method:null,min:null,minLength:Y,multiple:fe,muted:fe,name:null,nonce:null,noModule:fe,noValidate:fe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:fe,optimum:Y,pattern:null,ping:Ne,placeholder:null,playsInline:fe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:fe,referrerPolicy:null,rel:Ne,required:fe,reversed:fe,rows:Y,rowSpan:Y,sandbox:Ne,scope:null,scoped:fe,seamless:fe,selected:fe,shadowRootClonable:fe,shadowRootDelegatesFocus:fe,shadowRootMode:null,shape:null,size:Y,sizes:null,slot:null,span:Y,spellCheck:Ye,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Y,step:null,style:null,tabIndex:Y,target:null,title:null,translate:null,type:null,typeMustMatch:fe,useMap:null,value:Ye,width:Y,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ne,axis:null,background:null,bgColor:null,border:Y,borderColor:null,bottomMargin:Y,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:fe,declare:fe,event:null,face:null,frame:null,frameBorder:null,hSpace:Y,leftMargin:Y,link:null,longDesc:null,lowSrc:null,marginHeight:Y,marginWidth:Y,noResize:fe,noHref:fe,noShade:fe,noWrap:fe,object:null,profile:null,prompt:null,rev:null,rightMargin:Y,rules:null,scheme:null,scrolling:Ye,standby:null,summary:null,text:null,topMargin:Y,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Y,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:fe,disableRemotePlayback:fe,prefix:null,property:null,results:Y,security:null,unselectable:null},space:"html",transform:N0}),lP=er({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Mt,accentHeight:Y,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Y,amplitude:Y,arabicForm:null,ascent:Y,attributeName:null,attributeType:null,azimuth:Y,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Y,by:null,calcMode:null,capHeight:Y,className:Ne,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Y,diffuseConstant:Y,direction:null,display:null,dur:null,divisor:Y,dominantBaseline:null,download:fe,dx:null,dy:null,edgeMode:null,editable:null,elevation:Y,enableBackground:null,end:null,event:null,exponent:Y,externalResourcesRequired:null,fill:null,fillOpacity:Y,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Xi,g2:Xi,glyphName:Xi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Y,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Y,horizOriginX:Y,horizOriginY:Y,id:null,ideographic:Y,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Y,k:Y,k1:Y,k2:Y,k3:Y,k4:Y,kernelMatrix:Mt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Y,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Y,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Y,overlineThickness:Y,paintOrder:null,panose1:null,path:null,pathLength:Y,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ne,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Y,pointsAtY:Y,pointsAtZ:Y,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Mt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Mt,rev:Mt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Mt,requiredFeatures:Mt,requiredFonts:Mt,requiredFormats:Mt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Y,specularExponent:Y,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Y,strikethroughThickness:Y,string:null,stroke:null,strokeDashArray:Mt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Y,strokeOpacity:Y,strokeWidth:null,style:null,surfaceScale:Y,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Mt,tabIndex:Y,tableValues:null,target:null,targetX:Y,targetY:Y,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Mt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Y,underlineThickness:Y,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Y,values:null,vAlphabetic:Y,vMathematical:Y,vectorEffect:null,vHanging:Y,vIdeographic:Y,version:null,vertAdvY:Y,vertOriginX:Y,vertOriginY:Y,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Y,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:O0}),A0=er({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),R0=er({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:N0}),D0=er({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),uP={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},dP=/[A-Z]/g,L0=/-[a-z]/g,hP=/^data[-\w.:]+$/i;function fP(e,t){const n=Sl(t);let i=t,r=kt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&hP.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(L0,mP);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!L0.test(o)){let s=o.replace(dP,pP);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}r=_l}return new r(i,t)}function pP(e){return"-"+e.toLowerCase()}function mP(e){return e.charAt(1).toUpperCase()}const gP=E0([I0,cP,A0,R0,D0],"html"),El=E0([I0,lP,A0,R0,D0],"svg");function vP(e){return e.join(" ").trim()}var tr={},Pl,F0;function yP(){if(F0)return Pl;F0=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,l="/",u="*",d="",f="comment",h="declaration";Pl=function(p,y){if(typeof p!="string")throw new TypeError("First argument must be a string");if(!p)return[];y=y||{};var g=1,S=1;function C(z){var D=z.match(t);D&&(g+=D.length);var F=z.lastIndexOf(c);S=~F?z.length-F:S+z.length}function w(){var z={line:g,column:S};return function(D){return D.position=new k(z),T(),D}}function k(z){this.start=z,this.end={line:g,column:S},this.source=y.source}k.prototype.content=p;function b(z){var D=new Error(y.source+":"+g+":"+S+": "+z);if(D.reason=z,D.filename=y.source,D.line=g,D.column=S,D.source=p,!y.silent)throw D}function x(z){var D=z.exec(p);if(D){var F=D[0];return C(F),p=p.slice(F.length),D}}function T(){x(n)}function P(z){var D;for(z=z||[];D=A();)D!==!1&&z.push(D);return z}function A(){var z=w();if(!(l!=p.charAt(0)||u!=p.charAt(1))){for(var D=2;d!=p.charAt(D)&&(u!=p.charAt(D)||l!=p.charAt(D+1));)++D;if(D+=2,d===p.charAt(D-1))return b("End of comment missing");var F=p.slice(2,D-2);return S+=2,C(F),p=p.slice(D),S+=2,z({type:f,comment:F})}}function M(){var z=w(),D=x(i);if(D){if(A(),!x(r))return b("property missing ':'");var F=x(o),$=z({type:h,property:m(D[0].replace(e,d)),value:F?m(F[0].replace(e,d)):d});return x(s),$}}function R(){var z=[];P(z);for(var D;D=M();)D!==!1&&(z.push(D),P(z));return z}return T(),R()};function m(p){return p?p.replace(a,d):d}return Pl}var z0;function bP(){if(z0)return tr;z0=1;var e=tr&&tr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(tr,"__esModule",{value:!0}),tr.default=n;var t=e(yP());function n(i,r){var o=null;if(!i||typeof i!="string")return o;var s=(0,t.default)(i),a=typeof r=="function";return s.forEach(function(c){if(c.type==="declaration"){var l=c.property,u=c.value;a?r(l,u,c):u&&(o=o||{},o[l]=u)}}),o}return tr}var zr={},U0;function kP(){if(U0)return zr;U0=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,o=function(l){return!l||n.test(l)||e.test(l)},s=function(l,u){return u.toUpperCase()},a=function(l,u){return"".concat(u,"-")},c=function(l,u){return u===void 0&&(u={}),o(l)?l:(l=l.toLowerCase(),u.reactCompat?l=l.replace(r,a):l=l.replace(i,a),l.replace(t,s))};return zr.camelCase=c,zr}var Ur,$0;function CP(){if($0)return Ur;$0=1;var e=Ur&&Ur.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},t=e(bP()),n=kP();function i(r,o){var s={};return!r||typeof r!="string"||(0,t.default)(r,function(a,c){a&&c&&(s[(0,n.camelCase)(a,o)]=c)}),s}return i.default=i,Ur=i,Ur}var wP=CP();const SP=lt(wP),j0=B0("end"),Ml=B0("start");function B0(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function TP(e){const t=Ml(e),n=j0(e);if(t&&n)return{start:t,end:n}}function $r(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?V0(e.position):"start"in e||"end"in e?V0(e):"line"in e||"column"in e?Il(e):""}function Il(e){return q0(e&&e.line)+":"+q0(e&&e.column)}function V0(e){return Il(e&&e.start)+"-"+Il(e&&e.end)}function q0(e){return e&&typeof e=="number"?e:1}class ht extends Error{constructor(t,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",o={},s=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?r=t:!o.cause&&t&&(s=!0,r=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?o.ruleId=i:(o.source=i.slice(0,c),o.ruleId=i.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=a?a.line:void 0,this.name=$r(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}ht.prototype.file="",ht.prototype.name="",ht.prototype.reason="",ht.prototype.message="",ht.prototype.stack="",ht.prototype.column=void 0,ht.prototype.line=void 0,ht.prototype.ancestors=void 0,ht.prototype.cause=void 0,ht.prototype.fatal=void 0,ht.prototype.place=void 0,ht.prototype.ruleId=void 0,ht.prototype.source=void 0;const Ol={}.hasOwnProperty,xP=new Map,_P=/[A-Z]/g,EP=new Set(["table","tbody","thead","tfoot","tr"]),PP=new Set(["td","th"]),H0="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function MP(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=FP(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=LP(n,t.jsx,t.jsxs)}const r={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?El:gP,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=W0(r,e,void 0);return o&&typeof o!="string"?o:r.create(e,r.Fragment,{children:o||void 0},void 0)}function W0(e,t,n){if(t.type==="element")return IP(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return OP(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return AP(e,t,n);if(t.type==="mdxjsEsm")return NP(e,t);if(t.type==="root")return RP(e,t,n);if(t.type==="text")return DP(e,t)}function IP(e,t,n){const i=e.schema;let r=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=El,e.schema=r),e.ancestors.push(t);const o=G0(e,t.tagName,!1),s=zP(e,t);let a=Al(e,t);return EP.has(t.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!sP(c):!0})),Z0(e,s,o,t),Nl(s,a),e.ancestors.pop(),e.schema=i,e.create(t,o,s,n)}function OP(e,t){if(t.data&&t.data.estree&&e.evaluater){const i=t.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}jr(e,t.position)}function NP(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);jr(e,t.position)}function AP(e,t,n){const i=e.schema;let r=i;t.name==="svg"&&i.space==="html"&&(r=El,e.schema=r),e.ancestors.push(t);const o=t.name===null?e.Fragment:G0(e,t.name,!0),s=UP(e,t),a=Al(e,t);return Z0(e,s,o,t),Nl(s,a),e.ancestors.pop(),e.schema=i,e.create(t,o,s,n)}function RP(e,t,n){const i={};return Nl(i,Al(e,t)),e.create(t,e.Fragment,i,n)}function DP(e,t){return t.value}function Z0(e,t,n,i){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=i)}function Nl(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function LP(e,t,n){return i;function i(r,o,s,a){const l=Array.isArray(s.children)?n:t;return a?l(o,s,a):l(o,s)}}function FP(e,t){return n;function n(i,r,o,s){const a=Array.isArray(o.children),c=Ml(i);return t(r,o,s,a,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function zP(e,t){const n={};let i,r;for(r in t.properties)if(r!=="children"&&Ol.call(t.properties,r)){const o=$P(e,r,t.properties[r]);if(o){const[s,a]=o;e.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&PP.has(t.tagName)?i=a:n[s]=a}}if(i){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function UP(e,t){const n={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const o=i.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else jr(e,t.position);else{const r=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const a=i.value.data.estree.body[0];a.type,o=e.evaluater.evaluateExpression(a.expression)}else jr(e,t.position);else o=i.value===null?!0:i.value;n[r]=o}return n}function Al(e,t){const n=[];let i=-1;const r=e.passKeys?new Map:xP;for(;++i<t.children.length;){const o=t.children[i];let s;if(e.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const l=r.get(c)||0;s=c+"-"+l,r.set(c,l+1)}}const a=W0(e,o,s);a!==void 0&&n.push(a)}return n}function $P(e,t,n){const i=fP(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?tP(n):vP(n)),i.property==="style"){let r=typeof n=="object"?n:jP(e,String(n));return e.stylePropertyNameCase==="css"&&(r=BP(r)),["style",r]}return[e.elementAttributeNameCase==="react"&&i.space?uP[i.property]||i.property:i.attribute,n]}}function jP(e,t){try{return SP(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const i=n,r=new ht("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=H0+"#cannot-parse-style-attribute",r}}function G0(e,t,n){let i;if(!n)i={type:"Literal",value:t};else if(t.includes(".")){const r=t.split(".");let o=-1,s;for(;++o<r.length;){const a=x0(r[o])?{type:"Identifier",name:r[o]}:{type:"Literal",value:r[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}i=s}else i=x0(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const r=i.value;return Ol.call(e.components,r)?e.components[r]:r}if(e.evaluater)return e.evaluater.evaluateExpression(i);jr(e)}function jr(e,t){const n=new ht("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=H0+"#cannot-handle-mdx-estrees-without-createevaluater",n}function BP(e){const t={};let n;for(n in e)Ol.call(e,n)&&(t[VP(n)]=e[n]);return t}function VP(e){let t=e.replace(_P,qP);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function qP(e){return"-"+e.toLowerCase()}const Rl={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},HP={};function WP(e,t){const n=HP,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return K0(e,i,r)}function K0(e,t,n){if(ZP(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Y0(e.children,t,n)}return Array.isArray(e)?Y0(e,t,n):""}function Y0(e,t,n){const i=[];let r=-1;for(;++r<e.length;)i[r]=K0(e[r],t,n);return i.join("")}function ZP(e){return!!(e&&typeof e=="object")}const Q0=document.createElement("i");function Dl(e){const t="&"+e+";";Q0.innerHTML=t;const n=Q0.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function an(e,t,n,i){const r=e.length;let o=0,s;if(t<0?t=-t>r?0:r+t:t=t>r?r:t,n=n>0?n:0,i.length<1e4)s=Array.from(i),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);o<i.length;)s=i.slice(o,o+1e4),s.unshift(t,0),e.splice(...s),o+=1e4,t+=1e4}function Dt(e,t){return e.length>0?(an(e,e.length,0,t),e):t}const J0={}.hasOwnProperty;function GP(e){const t={};let n=-1;for(;++n<e.length;)KP(t,e[n]);return t}function KP(e,t){let n;for(n in t){const r=(J0.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let s;if(o)for(s in o){J0.call(r,s)||(r[s]=[]);const a=o[s];YP(r[s],Array.isArray(a)?a:a?[a]:[])}}}function YP(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);an(e,0,0,i)}function X0(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function nr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const cn=Qn(/[A-Za-z]/),It=Qn(/[\dA-Za-z]/),QP=Qn(/[#-'*+\--9=?A-Z^-~]/);function Ll(e){return e!==null&&(e<32||e===127)}const Fl=Qn(/\d/),JP=Qn(/[\dA-Fa-f]/),XP=Qn(/[!-/:-@[-`{-~]/);function ce(e){return e!==null&&e<-2}function Ct(e){return e!==null&&(e<0||e===32)}function Ee(e){return e===-2||e===-1||e===32}const eM=Qn(new RegExp("\\p{P}|\\p{S}","u")),tM=Qn(/\s/);function Qn(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function ir(e){const t=[];let n=-1,i=0,r=0;for(;++n<e.length;){const o=e.charCodeAt(n);let s="";if(o===37&&It(e.charCodeAt(n+1))&&It(e.charCodeAt(n+2)))r=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=e.charCodeAt(n+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),r=1):s="�"}else s=String.fromCharCode(o);s&&(t.push(e.slice(i,n),encodeURIComponent(s)),i=n+r+1,s=""),r&&(n+=r,r=0)}return t.join("")+e.slice(i)}function Ae(e,t,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(c){return Ee(c)?(e.enter(n),a(c)):t(c)}function a(c){return Ee(c)&&o++<r?(e.consume(c),a):(e.exit(n),t(c))}}const nM={tokenize:iM};function iM(e){const t=e.attempt(this.parser.constructs.contentInitial,i,r);let n;return t;function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ae(e,t,"linePrefix")}function r(a){return e.enter("paragraph"),o(a)}function o(a){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,s(a)}function s(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return ce(a)?(e.consume(a),e.exit("chunkText"),o):(e.consume(a),s)}}const rM={tokenize:oM},eg={tokenize:sM};function oM(e){const t=this,n=[];let i=0,r,o,s;return a;function a(C){if(i<n.length){const w=n[i];return t.containerState=w[1],e.attempt(w[0].continuation,c,l)(C)}return l(C)}function c(C){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&S();const w=t.events.length;let k=w,b;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){b=t.events[k][1].end;break}g(i);let x=w;for(;x<t.events.length;)t.events[x][1].end={...b},x++;return an(t.events,k+1,0,t.events.slice(w)),t.events.length=x,l(C)}return a(C)}function l(C){if(i===n.length){if(!r)return f(C);if(r.currentConstruct&&r.currentConstruct.concrete)return m(C);t.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(eg,u,d)(C)}function u(C){return r&&S(),g(i),f(C)}function d(C){return t.parser.lazy[t.now().line]=i!==n.length,s=t.now().offset,m(C)}function f(C){return t.containerState={},e.attempt(eg,h,m)(C)}function h(C){return i++,n.push([t.currentConstruct,t.containerState]),f(C)}function m(C){if(C===null){r&&S(),g(0),e.consume(C);return}return r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:o}),p(C)}function p(C){if(C===null){y(e.exit("chunkFlow"),!0),g(0),e.consume(C);return}return ce(C)?(e.consume(C),y(e.exit("chunkFlow")),i=0,t.interrupt=void 0,a):(e.consume(C),p)}function y(C,w){const k=t.sliceStream(C);if(w&&k.push(null),C.previous=o,o&&(o.next=C),o=C,r.defineSkip(C.start),r.write(k),t.parser.lazy[C.start.line]){let b=r.events.length;for(;b--;)if(r.events[b][1].start.offset<s&&(!r.events[b][1].end||r.events[b][1].end.offset>s))return;const x=t.events.length;let T=x,P,A;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(P){A=t.events[T][1].end;break}P=!0}for(g(i),b=x;b<t.events.length;)t.events[b][1].end={...A},b++;an(t.events,T+1,0,t.events.slice(x)),t.events.length=b}}function g(C){let w=n.length;for(;w-- >C;){const k=n[w];t.containerState=k[1],k[0].exit.call(t,e)}n.length=C}function S(){r.write([null]),o=void 0,r=void 0,t.containerState._closeFlow=void 0}}function sM(e,t,n){return Ae(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function tg(e){if(e===null||Ct(e)||tM(e))return 1;if(eM(e))return 2}function zl(e,t,n){const i=[];let r=-1;for(;++r<e.length;){const o=e[r].resolveAll;o&&!i.includes(o)&&(t=o(t,n),i.push(o))}return t}const Ul={name:"attention",resolveAll:aM,tokenize:cM};function aM(e,t){let n=-1,i,r,o,s,a,c,l,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[i][1].end},f={...e[n][1].start};ng(d,-c),ng(f,c),s={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...e[i][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:f},o={type:c>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[n][1].start}},r={type:c>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},e[i][1].end={...s.start},e[n][1].start={...a.end},l=[],e[i][1].end.offset-e[i][1].start.offset&&(l=Dt(l,[["enter",e[i][1],t],["exit",e[i][1],t]])),l=Dt(l,[["enter",r,t],["enter",s,t],["exit",s,t],["enter",o,t]]),l=Dt(l,zl(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),l=Dt(l,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,l=Dt(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,an(e,i-1,n-i+3,l),n=i+l.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function cM(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=tg(i);let o;return s;function s(c){return o=c,e.enter("attentionSequence"),a(c)}function a(c){if(c===o)return e.consume(c),a;const l=e.exit("attentionSequence"),u=tg(c),d=!u||u===2&&r||n.includes(c),f=!r||r===2&&u||n.includes(i);return l._open=!!(o===42?d:d&&(r||!f)),l._close=!!(o===42?f:f&&(u||!d)),t(c)}}function ng(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const lM={name:"autolink",tokenize:uM};function uM(e,t,n){let i=0;return r;function r(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(h){return cn(h)?(e.consume(h),s):h===64?n(h):l(h)}function s(h){return h===43||h===45||h===46||It(h)?(i=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),i=0,c):(h===43||h===45||h===46||It(h))&&i++<32?(e.consume(h),a):(i=0,l(h))}function c(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||Ll(h)?n(h):(e.consume(h),c)}function l(h){return h===64?(e.consume(h),u):QP(h)?(e.consume(h),l):n(h)}function u(h){return It(h)?d(h):n(h)}function d(h){return h===46?(e.consume(h),i=0,u):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):f(h)}function f(h){if((h===45||It(h))&&i++<63){const m=h===45?f:d;return e.consume(h),m}return n(h)}}const As={partial:!0,tokenize:dM};function dM(e,t,n){return i;function i(o){return Ee(o)?Ae(e,r,"linePrefix")(o):r(o)}function r(o){return o===null||ce(o)?t(o):n(o)}}const ig={continuation:{tokenize:fM},exit:pM,name:"blockQuote",tokenize:hM};function hM(e,t,n){const i=this;return r;function r(s){if(s===62){const a=i.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),o}return n(s)}function o(s){return Ee(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function fM(e,t,n){const i=this;return r;function r(s){return Ee(s)?Ae(e,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return e.attempt(ig,t,n)(s)}}function pM(e){e.exit("blockQuote")}const rg={name:"characterEscape",tokenize:mM};function mM(e,t,n){return i;function i(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),r}function r(o){return XP(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const og={name:"characterReference",tokenize:gM};function gM(e,t,n){const i=this;let r=0,o,s;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),c}function c(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),o=31,s=It,u(d))}function l(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,s=JP,u):(e.enter("characterReferenceValue"),o=7,s=Fl,u(d))}function u(d){if(d===59&&r){const f=e.exit("characterReferenceValue");return s===It&&!Dl(i.sliceSerialize(f))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(d)&&r++<o?(e.consume(d),u):n(d)}}const sg={partial:!0,tokenize:yM},ag={concrete:!0,name:"codeFenced",tokenize:vM};function vM(e,t,n){const i=this,r={partial:!0,tokenize:k};let o=0,s=0,a;return c;function c(b){return l(b)}function l(b){const x=i.events[i.events.length-1];return o=x&&x[1].type==="linePrefix"?x[2].sliceSerialize(x[1],!0).length:0,a=b,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(b)}function u(b){return b===a?(s++,e.consume(b),u):s<3?n(b):(e.exit("codeFencedFenceSequence"),Ee(b)?Ae(e,d,"whitespace")(b):d(b))}function d(b){return b===null||ce(b)?(e.exit("codeFencedFence"),i.interrupt?t(b):e.check(sg,p,w)(b)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(b))}function f(b){return b===null||ce(b)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(b)):Ee(b)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ae(e,h,"whitespace")(b)):b===96&&b===a?n(b):(e.consume(b),f)}function h(b){return b===null||ce(b)?d(b):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(b))}function m(b){return b===null||ce(b)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(b)):b===96&&b===a?n(b):(e.consume(b),m)}function p(b){return e.attempt(r,w,y)(b)}function y(b){return e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),g}function g(b){return o>0&&Ee(b)?Ae(e,S,"linePrefix",o+1)(b):S(b)}function S(b){return b===null||ce(b)?e.check(sg,p,w)(b):(e.enter("codeFlowValue"),C(b))}function C(b){return b===null||ce(b)?(e.exit("codeFlowValue"),S(b)):(e.consume(b),C)}function w(b){return e.exit("codeFenced"),t(b)}function k(b,x,T){let P=0;return A;function A(F){return b.enter("lineEnding"),b.consume(F),b.exit("lineEnding"),M}function M(F){return b.enter("codeFencedFence"),Ee(F)?Ae(b,R,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):R(F)}function R(F){return F===a?(b.enter("codeFencedFenceSequence"),z(F)):T(F)}function z(F){return F===a?(P++,b.consume(F),z):P>=s?(b.exit("codeFencedFenceSequence"),Ee(F)?Ae(b,D,"whitespace")(F):D(F)):T(F)}function D(F){return F===null||ce(F)?(b.exit("codeFencedFence"),x(F)):T(F)}}}function yM(e,t,n){const i=this;return r;function r(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o)}function o(s){return i.parser.lazy[i.now().line]?n(s):t(s)}}const $l={name:"codeIndented",tokenize:kM},bM={partial:!0,tokenize:CM};function kM(e,t,n){const i=this;return r;function r(l){return e.enter("codeIndented"),Ae(e,o,"linePrefix",5)(l)}function o(l){const u=i.events[i.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?s(l):n(l)}function s(l){return l===null?c(l):ce(l)?e.attempt(bM,s,c)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||ce(l)?(e.exit("codeFlowValue"),s(l)):(e.consume(l),a)}function c(l){return e.exit("codeIndented"),t(l)}}function CM(e,t,n){const i=this;return r;function r(s){return i.parser.lazy[i.now().line]?n(s):ce(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),r):Ae(e,o,"linePrefix",5)(s)}function o(s){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):ce(s)?r(s):n(s)}}const wM={name:"codeText",previous:TM,resolve:SM,tokenize:xM};function SM(e){let t=e.length-4,n=3,i,r;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)r===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(r=i):(i===t||e[i][1].type==="lineEnding")&&(e[r][1].type="codeTextData",i!==r+2&&(e[r][1].end=e[i-1][1].end,e.splice(r+2,i-r-2),t-=i-r-2,i=r+2),r=void 0);return e}function TM(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function xM(e,t,n){let i=0,r,o;return s;function s(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),i++,a):(e.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),c):d===96?(o=e.enter("codeTextSequence"),r=0,u(d)):ce(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("codeTextData"),l(d))}function l(d){return d===null||d===32||d===96||ce(d)?(e.exit("codeTextData"),c(d)):(e.consume(d),l)}function u(d){return d===96?(e.consume(d),r++,u):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(o.type="codeTextData",l(d))}}class _M{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,n,i){const r=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&Br(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Br(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Br(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Br(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Br(this.left,n.reverse())}}}function Br(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function cg(e){const t={};let n=-1,i,r,o,s,a,c,l;const u=new _M(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(i=u.get(n),n&&i[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,EM(u,n)),n=t[n],l=!0);else if(i[1]._container){for(o=n,r=void 0;o--;)if(s=u.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(r&&(u.get(r)[1].type="lineEndingBlank"),s[1].type="lineEnding",r=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;r&&(i[1].end={...u.get(r)[1].start},a=u.slice(r,n),a.unshift(i),u.splice(r,n-r+1,a))}}return an(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function EM(e,t){const n=e.get(t)[1],i=e.get(t)[2];let r=t-1;const o=[];let s=n._tokenizer;s||(s=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,c=[],l={};let u,d,f=-1,h=n,m=0,p=0;const y=[p];for(;h;){for(;e.get(++r)[1]!==h;);o.push(r),h._tokenizer||(u=i.sliceStream(h),h.next||u.push(null),d&&s.defineSkip(h.start),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(p=f+1,y.push(p),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(s.events=[],h?(h._tokenizer=void 0,h.previous=void 0):y.pop(),f=y.length;f--;){const g=a.slice(y[f],y[f+1]),S=o.pop();c.push([S,S+g.length-1]),e.splice(S,2,g)}for(c.reverse(),f=-1;++f<c.length;)l[m+c[f][0]]=m+c[f][1],m+=c[f][1]-c[f][0]-1;return l}const PM={resolve:IM,tokenize:OM},MM={partial:!0,tokenize:NM};function IM(e){return cg(e),e}function OM(e,t){let n;return i;function i(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?o(a):ce(a)?e.check(MM,s,o)(a):(e.consume(a),r)}function o(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function s(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function NM(e,t,n){const i=this;return r;function r(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Ae(e,o,"linePrefix")}function o(s){if(s===null||ce(s))return n(s);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):e.interrupt(i.parser.constructs.flow,n,t)(s)}}function lg(e,t,n,i,r,o,s,a,c){const l=c||Number.POSITIVE_INFINITY;let u=0;return d;function d(g){return g===60?(e.enter(i),e.enter(r),e.enter(o),e.consume(g),e.exit(o),f):g===null||g===32||g===41||Ll(g)?n(g):(e.enter(i),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),p(g))}function f(g){return g===62?(e.enter(o),e.consume(g),e.exit(o),e.exit(r),e.exit(i),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(g))}function h(g){return g===62?(e.exit("chunkString"),e.exit(a),f(g)):g===null||g===60||ce(g)?n(g):(e.consume(g),g===92?m:h)}function m(g){return g===60||g===62||g===92?(e.consume(g),h):h(g)}function p(g){return!u&&(g===null||g===41||Ct(g))?(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(i),t(g)):u<l&&g===40?(e.consume(g),u++,p):g===41?(e.consume(g),u--,p):g===null||g===32||g===40||Ll(g)?n(g):(e.consume(g),g===92?y:p)}function y(g){return g===40||g===41||g===92?(e.consume(g),p):p(g)}}function ug(e,t,n,i,r,o){const s=this;let a=0,c;return l;function l(h){return e.enter(i),e.enter(r),e.consume(h),e.exit(r),e.enter(o),u}function u(h){return a>999||h===null||h===91||h===93&&!c||h===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?n(h):h===93?(e.exit(o),e.enter(r),e.consume(h),e.exit(r),e.exit(i),t):ce(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||ce(h)||a++>999?(e.exit("chunkString"),u(h)):(e.consume(h),c||(c=!Ee(h)),h===92?f:d)}function f(h){return h===91||h===92||h===93?(e.consume(h),a++,d):d(h)}}function dg(e,t,n,i,r,o){let s;return a;function a(f){return f===34||f===39||f===40?(e.enter(i),e.enter(r),e.consume(f),e.exit(r),s=f===40?41:f,c):n(f)}function c(f){return f===s?(e.enter(r),e.consume(f),e.exit(r),e.exit(i),t):(e.enter(o),l(f))}function l(f){return f===s?(e.exit(o),c(s)):f===null?n(f):ce(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),Ae(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===s||f===null||ce(f)?(e.exit("chunkString"),l(f)):(e.consume(f),f===92?d:u)}function d(f){return f===s||f===92?(e.consume(f),u):u(f)}}function Vr(e,t){let n;return i;function i(r){return ce(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),n=!0,i):Ee(r)?Ae(e,i,n?"linePrefix":"lineSuffix")(r):t(r)}}const AM={name:"definition",tokenize:DM},RM={partial:!0,tokenize:LM};function DM(e,t,n){const i=this;let r;return o;function o(h){return e.enter("definition"),s(h)}function s(h){return ug.call(i,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return r=nr(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),c):n(h)}function c(h){return Ct(h)?Vr(e,l)(h):l(h)}function l(h){return lg(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function u(h){return e.attempt(RM,d,d)(h)}function d(h){return Ee(h)?Ae(e,f,"whitespace")(h):f(h)}function f(h){return h===null||ce(h)?(e.exit("definition"),i.parser.defined.push(r),t(h)):n(h)}}function LM(e,t,n){return i;function i(a){return Ct(a)?Vr(e,r)(a):n(a)}function r(a){return dg(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return Ee(a)?Ae(e,s,"whitespace")(a):s(a)}function s(a){return a===null||ce(a)?t(a):n(a)}}const FM={name:"hardBreakEscape",tokenize:zM};function zM(e,t,n){return i;function i(o){return e.enter("hardBreakEscape"),e.consume(o),r}function r(o){return ce(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const UM={name:"headingAtx",resolve:$M,tokenize:jM};function $M(e,t){let n=e.length-2,i=3,r,o;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},o={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},an(e,i,n-i+1,[["enter",r,t],["enter",o,t],["exit",o,t],["exit",r,t]])),e}function jM(e,t,n){let i=0;return r;function r(u){return e.enter("atxHeading"),o(u)}function o(u){return e.enter("atxHeadingSequence"),s(u)}function s(u){return u===35&&i++<6?(e.consume(u),s):u===null||Ct(u)?(e.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||ce(u)?(e.exit("atxHeading"),t(u)):Ee(u)?Ae(e,a,"whitespace")(u):(e.enter("atxHeadingText"),l(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),a(u))}function l(u){return u===null||u===35||Ct(u)?(e.exit("atxHeadingText"),a(u)):(e.consume(u),l)}}const BM=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],hg=["pre","script","style","textarea"],VM={concrete:!0,name:"htmlFlow",resolveTo:WM,tokenize:ZM},qM={partial:!0,tokenize:KM},HM={partial:!0,tokenize:GM};function WM(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function ZM(e,t,n){const i=this;let r,o,s,a,c;return l;function l(E){return u(E)}function u(E){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(E),d}function d(E){return E===33?(e.consume(E),f):E===47?(e.consume(E),o=!0,p):E===63?(e.consume(E),r=3,i.interrupt?t:_):cn(E)?(e.consume(E),s=String.fromCharCode(E),y):n(E)}function f(E){return E===45?(e.consume(E),r=2,h):E===91?(e.consume(E),r=5,a=0,m):cn(E)?(e.consume(E),r=4,i.interrupt?t:_):n(E)}function h(E){return E===45?(e.consume(E),i.interrupt?t:_):n(E)}function m(E){const ae="CDATA[";return E===ae.charCodeAt(a++)?(e.consume(E),a===ae.length?i.interrupt?t:R:m):n(E)}function p(E){return cn(E)?(e.consume(E),s=String.fromCharCode(E),y):n(E)}function y(E){if(E===null||E===47||E===62||Ct(E)){const ae=E===47,ke=s.toLowerCase();return!ae&&!o&&hg.includes(ke)?(r=1,i.interrupt?t(E):R(E)):BM.includes(s.toLowerCase())?(r=6,ae?(e.consume(E),g):i.interrupt?t(E):R(E)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(E):o?S(E):C(E))}return E===45||It(E)?(e.consume(E),s+=String.fromCharCode(E),y):n(E)}function g(E){return E===62?(e.consume(E),i.interrupt?t:R):n(E)}function S(E){return Ee(E)?(e.consume(E),S):A(E)}function C(E){return E===47?(e.consume(E),A):E===58||E===95||cn(E)?(e.consume(E),w):Ee(E)?(e.consume(E),C):A(E)}function w(E){return E===45||E===46||E===58||E===95||It(E)?(e.consume(E),w):k(E)}function k(E){return E===61?(e.consume(E),b):Ee(E)?(e.consume(E),k):C(E)}function b(E){return E===null||E===60||E===61||E===62||E===96?n(E):E===34||E===39?(e.consume(E),c=E,x):Ee(E)?(e.consume(E),b):T(E)}function x(E){return E===c?(e.consume(E),c=null,P):E===null||ce(E)?n(E):(e.consume(E),x)}function T(E){return E===null||E===34||E===39||E===47||E===60||E===61||E===62||E===96||Ct(E)?k(E):(e.consume(E),T)}function P(E){return E===47||E===62||Ee(E)?C(E):n(E)}function A(E){return E===62?(e.consume(E),M):n(E)}function M(E){return E===null||ce(E)?R(E):Ee(E)?(e.consume(E),M):n(E)}function R(E){return E===45&&r===2?(e.consume(E),$):E===60&&r===1?(e.consume(E),V):E===62&&r===4?(e.consume(E),ee):E===63&&r===3?(e.consume(E),_):E===93&&r===5?(e.consume(E),J):ce(E)&&(r===6||r===7)?(e.exit("htmlFlowData"),e.check(qM,oe,z)(E)):E===null||ce(E)?(e.exit("htmlFlowData"),z(E)):(e.consume(E),R)}function z(E){return e.check(HM,D,oe)(E)}function D(E){return e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),F}function F(E){return E===null||ce(E)?z(E):(e.enter("htmlFlowData"),R(E))}function $(E){return E===45?(e.consume(E),_):R(E)}function V(E){return E===47?(e.consume(E),s="",L):R(E)}function L(E){if(E===62){const ae=s.toLowerCase();return hg.includes(ae)?(e.consume(E),ee):R(E)}return cn(E)&&s.length<8?(e.consume(E),s+=String.fromCharCode(E),L):R(E)}function J(E){return E===93?(e.consume(E),_):R(E)}function _(E){return E===62?(e.consume(E),ee):E===45&&r===2?(e.consume(E),_):R(E)}function ee(E){return E===null||ce(E)?(e.exit("htmlFlowData"),oe(E)):(e.consume(E),ee)}function oe(E){return e.exit("htmlFlow"),t(E)}}function GM(e,t,n){const i=this;return r;function r(s){return ce(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o):n(s)}function o(s){return i.parser.lazy[i.now().line]?n(s):t(s)}}function KM(e,t,n){return i;function i(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(As,t,n)}}const YM={name:"htmlText",tokenize:QM};function QM(e,t,n){const i=this;let r,o,s;return a;function a(_){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(_),c}function c(_){return _===33?(e.consume(_),l):_===47?(e.consume(_),k):_===63?(e.consume(_),C):cn(_)?(e.consume(_),T):n(_)}function l(_){return _===45?(e.consume(_),u):_===91?(e.consume(_),o=0,m):cn(_)?(e.consume(_),S):n(_)}function u(_){return _===45?(e.consume(_),h):n(_)}function d(_){return _===null?n(_):_===45?(e.consume(_),f):ce(_)?(s=d,V(_)):(e.consume(_),d)}function f(_){return _===45?(e.consume(_),h):d(_)}function h(_){return _===62?$(_):_===45?f(_):d(_)}function m(_){const ee="CDATA[";return _===ee.charCodeAt(o++)?(e.consume(_),o===ee.length?p:m):n(_)}function p(_){return _===null?n(_):_===93?(e.consume(_),y):ce(_)?(s=p,V(_)):(e.consume(_),p)}function y(_){return _===93?(e.consume(_),g):p(_)}function g(_){return _===62?$(_):_===93?(e.consume(_),g):p(_)}function S(_){return _===null||_===62?$(_):ce(_)?(s=S,V(_)):(e.consume(_),S)}function C(_){return _===null?n(_):_===63?(e.consume(_),w):ce(_)?(s=C,V(_)):(e.consume(_),C)}function w(_){return _===62?$(_):C(_)}function k(_){return cn(_)?(e.consume(_),b):n(_)}function b(_){return _===45||It(_)?(e.consume(_),b):x(_)}function x(_){return ce(_)?(s=x,V(_)):Ee(_)?(e.consume(_),x):$(_)}function T(_){return _===45||It(_)?(e.consume(_),T):_===47||_===62||Ct(_)?P(_):n(_)}function P(_){return _===47?(e.consume(_),$):_===58||_===95||cn(_)?(e.consume(_),A):ce(_)?(s=P,V(_)):Ee(_)?(e.consume(_),P):$(_)}function A(_){return _===45||_===46||_===58||_===95||It(_)?(e.consume(_),A):M(_)}function M(_){return _===61?(e.consume(_),R):ce(_)?(s=M,V(_)):Ee(_)?(e.consume(_),M):P(_)}function R(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(e.consume(_),r=_,z):ce(_)?(s=R,V(_)):Ee(_)?(e.consume(_),R):(e.consume(_),D)}function z(_){return _===r?(e.consume(_),r=void 0,F):_===null?n(_):ce(_)?(s=z,V(_)):(e.consume(_),z)}function D(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||Ct(_)?P(_):(e.consume(_),D)}function F(_){return _===47||_===62||Ct(_)?P(_):n(_)}function $(_){return _===62?(e.consume(_),e.exit("htmlTextData"),e.exit("htmlText"),t):n(_)}function V(_){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),L}function L(_){return Ee(_)?Ae(e,J,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):J(_)}function J(_){return e.enter("htmlTextData"),s(_)}}const jl={name:"labelEnd",resolveAll:tI,resolveTo:nI,tokenize:iI},JM={tokenize:rI},XM={tokenize:oI},eI={tokenize:sI};function tI(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",t+=r}}return e.length!==n.length&&an(e,0,e.length,n),e}function nI(e,t){let n=e.length,i=0,r,o,s,a;for(;n--;)if(r=e[n][1],o){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;e[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(o=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(s=n);const c={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},l={type:"label",start:{...e[o][1].start},end:{...e[s][1].end}},u={type:"labelText",start:{...e[o+i+2][1].end},end:{...e[s-2][1].start}};return a=[["enter",c,t],["enter",l,t]],a=Dt(a,e.slice(o+1,o+i+3)),a=Dt(a,[["enter",u,t]]),a=Dt(a,zl(t.parser.constructs.insideSpan.null,e.slice(o+i+4,s-3),t)),a=Dt(a,[["exit",u,t],e[s-2],e[s-1],["exit",l,t]]),a=Dt(a,e.slice(s+1)),a=Dt(a,[["exit",c,t]]),an(e,o,e.length,a),e}function iI(e,t,n){const i=this;let r=i.events.length,o,s;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){o=i.events[r][1];break}return a;function a(f){return o?o._inactive?d(f):(s=i.parser.defined.includes(nr(i.sliceSerialize({start:o.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),c):n(f)}function c(f){return f===40?e.attempt(JM,u,s?u:d)(f):f===91?e.attempt(XM,u,s?l:d)(f):s?u(f):d(f)}function l(f){return e.attempt(eI,u,d)(f)}function u(f){return t(f)}function d(f){return o._balanced=!0,n(f)}}function rI(e,t,n){return i;function i(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),r}function r(d){return Ct(d)?Vr(e,o)(d):o(d)}function o(d){return d===41?u(d):lg(e,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function s(d){return Ct(d)?Vr(e,c)(d):u(d)}function a(d){return n(d)}function c(d){return d===34||d===39||d===40?dg(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function l(d){return Ct(d)?Vr(e,u)(d):u(d)}function u(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function oI(e,t,n){const i=this;return r;function r(a){return ug.call(i,e,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return i.parser.defined.includes(nr(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function s(a){return n(a)}}function sI(e,t,n){return i;function i(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),r}function r(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const aI={name:"labelStartImage",resolveAll:jl.resolveAll,tokenize:cI};function cI(e,t,n){const i=this;return r;function r(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),o}function o(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),s):n(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(a):t(a)}}const lI={name:"labelStartLink",resolveAll:jl.resolveAll,tokenize:uI};function uI(e,t,n){const i=this;return r;function r(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(s):t(s)}}const Bl={name:"lineEnding",tokenize:dI};function dI(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),Ae(e,t,"linePrefix")}}const Rs={name:"thematicBreak",tokenize:hI};function hI(e,t,n){let i=0,r;return o;function o(l){return e.enter("thematicBreak"),s(l)}function s(l){return r=l,a(l)}function a(l){return l===r?(e.enter("thematicBreakSequence"),c(l)):i>=3&&(l===null||ce(l))?(e.exit("thematicBreak"),t(l)):n(l)}function c(l){return l===r?(e.consume(l),i++,c):(e.exit("thematicBreakSequence"),Ee(l)?Ae(e,a,"whitespace")(l):a(l))}}const wt={continuation:{tokenize:gI},exit:yI,name:"list",tokenize:mI},fI={partial:!0,tokenize:bI},pI={partial:!0,tokenize:vI};function mI(e,t,n){const i=this,r=i.events[i.events.length-1];let o=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,s=0;return a;function a(h){const m=i.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!i.containerState.marker||h===i.containerState.marker:Fl(h)){if(i.containerState.type||(i.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(Rs,n,l)(h):l(h);if(!i.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(h)}return n(h)}function c(h){return Fl(h)&&++s<10?(e.consume(h),c):(!i.interrupt||s<2)&&(i.containerState.marker?h===i.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||h,e.check(As,i.interrupt?n:u,e.attempt(fI,f,d))}function u(h){return i.containerState.initialBlankLine=!0,o++,f(h)}function d(h){return Ee(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),f):n(h)}function f(h){return i.containerState.size=o+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function gI(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(As,r,o);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Ae(e,t,"listItemIndent",i.containerState.size+1)(a)}function o(a){return i.containerState.furtherBlankLines||!Ee(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(pI,t,s)(a))}function s(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,Ae(e,e.attempt(wt,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function vI(e,t,n){const i=this;return Ae(e,r,"listItemIndent",i.containerState.size+1);function r(o){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?t(o):n(o)}}function yI(e){e.exit(this.containerState.type)}function bI(e,t,n){const i=this;return Ae(e,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(o){const s=i.events[i.events.length-1];return!Ee(o)&&s&&s[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const fg={name:"setextUnderline",resolveTo:kI,tokenize:CI};function kI(e,t){let n=e.length,i,r,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(r=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const s={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[r][1].type="setextHeadingText",o?(e.splice(r,0,["enter",s,t]),e.splice(o+1,0,["exit",e[i][1],t]),e[i][1].end={...e[o][1].end}):e[i][1]=s,e.push(["exit",s,t]),e}function CI(e,t,n){const i=this;let r;return o;function o(l){let u=i.events.length,d;for(;u--;)if(i.events[u][1].type!=="lineEnding"&&i.events[u][1].type!=="linePrefix"&&i.events[u][1].type!=="content"){d=i.events[u][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||d)?(e.enter("setextHeadingLine"),r=l,s(l)):n(l)}function s(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===r?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Ee(l)?Ae(e,c,"lineSuffix")(l):c(l))}function c(l){return l===null||ce(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const wI={tokenize:SI};function SI(e){const t=this,n=e.attempt(As,i,e.attempt(this.parser.constructs.flowInitial,r,Ae(e,e.attempt(this.parser.constructs.flow,r,e.attempt(PM,r)),"linePrefix")));return n;function i(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const TI={resolveAll:mg()},xI=pg("string"),_I=pg("text");function pg(e){return{resolveAll:mg(e==="text"?EI:void 0),tokenize:t};function t(n){const i=this,r=this.parser.constructs[e],o=n.attempt(r,s,a);return s;function s(u){return l(u)?o(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return l(u)?(n.exit("data"),o(u)):(n.consume(u),c)}function l(u){if(u===null)return!0;const d=r[u];let f=-1;if(d)for(;++f<d.length;){const h=d[f];if(!h.previous||h.previous.call(i,i.previous))return!0}return!1}}}function mg(e){return t;function t(n,i){let r=-1,o;for(;++r<=n.length;)o===void 0?n[r]&&n[r][1].type==="data"&&(o=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==o+2&&(n[o][1].end=n[r-1][1].end,n.splice(o+2,r-o-2),r=o+2),o=void 0);return e?e(n,i):n}}function EI(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],r=t.sliceStream(i);let o=r.length,s=-1,a=0,c;for(;o--;){const l=r[o];if(typeof l=="string"){for(s=l.length;l.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(l===-2)c=!0,a++;else if(l!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const l={type:n===e.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:i.start._bufferIndex+s,_index:i.start._index+o,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...l.start},i.start.offset===i.end.offset?Object.assign(i,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}const PI=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:{91:AM},disable:{null:[]},document:{42:wt,43:wt,45:wt,48:wt,49:wt,50:wt,51:wt,52:wt,53:wt,54:wt,55:wt,56:wt,57:wt,62:ig},flow:{35:UM,42:Rs,45:[fg,Rs],60:VM,61:fg,95:Rs,96:ag,126:ag},flowInitial:{[-2]:$l,[-1]:$l,32:$l},insideSpan:{null:[Ul,TI]},string:{38:og,92:rg},text:{[-5]:Bl,[-4]:Bl,[-3]:Bl,33:aI,38:og,42:Ul,60:[lM,YM],91:lI,92:[FM,rg],93:jl,95:Ul,96:wM}},Symbol.toStringTag,{value:"Module"}));function MI(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},o=[];let s=[],a=[];const c={attempt:x(k),check:x(b),consume:S,enter:C,exit:w,interrupt:x(b,{interrupt:!0})},l={code:null,containerState:{},defineSkip:p,events:[],now:m,parser:e,previous:null,sliceSerialize:f,sliceStream:h,write:d};let u=t.tokenize.call(l,c);return t.resolveAll&&o.push(t),l;function d(M){return s=Dt(s,M),y(),s[s.length-1]!==null?[]:(T(t,0),l.events=zl(o,l.events,l),l.events)}function f(M,R){return OI(h(M),R)}function h(M){return II(s,M)}function m(){const{_bufferIndex:M,_index:R,line:z,column:D,offset:F}=i;return{_bufferIndex:M,_index:R,line:z,column:D,offset:F}}function p(M){r[M.line]=M.column,A()}function y(){let M;for(;i._index<s.length;){const R=s[i._index];if(typeof R=="string")for(M=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===M&&i._bufferIndex<R.length;)g(R.charCodeAt(i._bufferIndex));else g(R)}}function g(M){u=u(M)}function S(M){ce(M)?(i.line++,i.column=1,i.offset+=M===-3?2:1,A()):M!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),l.previous=M}function C(M,R){const z=R||{};return z.type=M,z.start=m(),l.events.push(["enter",z,l]),a.push(z),z}function w(M){const R=a.pop();return R.end=m(),l.events.push(["exit",R,l]),R}function k(M,R){T(M,R.from)}function b(M,R){R.restore()}function x(M,R){return z;function z(D,F,$){let V,L,J,_;return Array.isArray(D)?oe(D):"tokenize"in D?oe([D]):ee(D);function ee(pe){return ie;function ie(xe){const _e=xe!==null&&pe[xe],Ce=xe!==null&&pe.null,Re=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(Ce)?Ce:Ce?[Ce]:[]];return oe(Re)(xe)}}function oe(pe){return V=pe,L=0,pe.length===0?$:E(pe[L])}function E(pe){return ie;function ie(xe){return _=P(),J=pe,pe.partial||(l.currentConstruct=pe),pe.name&&l.parser.constructs.disable.null.includes(pe.name)?ke():pe.tokenize.call(R?Object.assign(Object.create(l),R):l,c,ae,ke)(xe)}}function ae(pe){return M(J,_),F}function ke(pe){return _.restore(),++L<V.length?E(V[L]):$}}}function T(M,R){M.resolveAll&&!o.includes(M)&&o.push(M),M.resolve&&an(l.events,R,l.events.length-R,M.resolve(l.events.slice(R),l)),M.resolveTo&&(l.events=M.resolveTo(l.events,l))}function P(){const M=m(),R=l.previous,z=l.currentConstruct,D=l.events.length,F=Array.from(a);return{from:D,restore:$};function $(){i=M,l.previous=R,l.currentConstruct=z,l.events.length=D,a=F,A()}}function A(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function II(e,t){const n=t.start._index,i=t.start._bufferIndex,r=t.end._index,o=t.end._bufferIndex;let s;if(n===r)s=[e[n].slice(i,o)];else{if(s=e.slice(n,r),i>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(i):s.shift()}o>0&&s.push(e[r].slice(0,o))}return s}function OI(e,t){let n=-1;const i=[];let r;for(;++n<e.length;){const o=e[n];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&r)continue;s=" ";break}default:s=String.fromCharCode(o)}r=o===-2,i.push(s)}return i.join("")}function NI(e){const i={constructs:GP([PI,...(e||{}).extensions||[]]),content:r(nM),defined:[],document:r(rM),flow:r(wI),lazy:{},string:r(xI),text:r(_I)};return i;function r(o){return s;function s(a){return MI(i,o,a)}}}function AI(e){for(;!cg(e););return e}const gg=/[\0\t\n\r]/g;function RI(){let e=1,t="",n=!0,i;return r;function r(o,s,a){const c=[];let l,u,d,f,h;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),d=0,t="",n&&(o.charCodeAt(0)===65279&&d++,n=void 0);d<o.length;){if(gg.lastIndex=d,l=gg.exec(o),f=l&&l.index!==void 0?l.index:o.length,h=o.charCodeAt(f),!l){t=o.slice(d);break}if(h===10&&d===f&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),d<f&&(c.push(o.slice(d,f)),e+=f-d),h){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:i=!0,e=1}d=f+1}return a&&(i&&c.push(-5),t&&c.push(t),c.push(null)),c}}const DI=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function LI(e){return e.replace(DI,FI)}function FI(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),o=r===120||r===88;return X0(n.slice(o?2:1),o?16:10)}return Dl(n)||e}const vg={}.hasOwnProperty;function zI(e,t,n){return typeof t!="string"&&(n=t,t=void 0),UI(n)(AI(NI(n).document().write(RI()(e,t,!0))))}function UI(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(ei),autolinkProtocol:P,autolinkEmail:P,atxHeading:o(_n),blockQuote:o(Ce),characterEscape:P,characterReference:P,codeFenced:o(Re),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(Re,s),codeText:o(Le,s),codeTextData:P,data:P,codeFlowValue:P,definition:o(ut),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(xn),hardBreakEscape:o(Xn),hardBreakTrailing:o(Xn),htmlFlow:o(En,s),htmlFlowData:P,htmlText:o(En,s),htmlTextData:P,image:o(Pn),label:s,link:o(ei),listItem:o(un),listItemValue:f,listOrdered:o(or,d),listUnordered:o(or),paragraph:o(se),reference:E,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(_n),strong:o(we),thematicBreak:o(je)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:_e,autolinkProtocol:xe,blockQuote:c(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:ke,characterReferenceMarkerNumeric:ke,characterReferenceValue:pe,characterReference:ie,codeFenced:c(y),codeFencedFence:p,codeFencedFenceInfo:h,codeFencedFenceMeta:m,codeFlowValue:A,codeIndented:c(g),codeText:c(F),codeTextData:A,data:A,definition:c(),definitionDestinationString:w,definitionLabelString:S,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(R),hardBreakTrailing:c(R),htmlFlow:c(z),htmlFlowData:A,htmlText:c(D),htmlTextData:A,image:c(V),label:J,labelText:L,lineEnding:M,link:c($),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:ae,resourceDestinationString:_,resourceTitleString:ee,resource:oe,setextHeading:c(T),setextHeadingLineSequence:x,setextHeadingText:b,strong:c(),thematicBreak:c()}};yg(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(H){let Q={type:"root",children:[]};const ue={stack:[Q],tokenStack:[],config:t,enter:a,exit:l,buffer:s,resume:u,data:n},ve=[];let Pe=-1;for(;++Pe<H.length;)if(H[Pe][1].type==="listOrdered"||H[Pe][1].type==="listUnordered")if(H[Pe][0]==="enter")ve.push(Pe);else{const le=ve.pop();Pe=r(H,le,Pe)}for(Pe=-1;++Pe<H.length;){const le=t[H[Pe][0]];vg.call(le,H[Pe][1].type)&&le[H[Pe][1].type].call(Object.assign({sliceSerialize:H[Pe][2].sliceSerialize},ue),H[Pe][1])}if(ue.tokenStack.length>0){const le=ue.tokenStack[ue.tokenStack.length-1];(le[1]||bg).call(ue,void 0,le[0])}for(Q.position={start:Jn(H.length>0?H[0][1].start:{line:1,column:1,offset:0}),end:Jn(H.length>0?H[H.length-2][1].end:{line:1,column:1,offset:0})},Pe=-1;++Pe<t.transforms.length;)Q=t.transforms[Pe](Q)||Q;return Q}function r(H,Q,ue){let ve=Q-1,Pe=-1,le=!1,St,Mn,Zr,Gr;for(;++ve<=ue;){const Ot=H[ve];switch(Ot[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ot[0]==="enter"?Pe++:Pe--,Gr=void 0;break}case"lineEndingBlank":{Ot[0]==="enter"&&(St&&!Gr&&!Pe&&!Zr&&(Zr=ve),Gr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Gr=void 0}if(!Pe&&Ot[0]==="enter"&&Ot[1].type==="listItemPrefix"||Pe===-1&&Ot[0]==="exit"&&(Ot[1].type==="listUnordered"||Ot[1].type==="listOrdered")){if(St){let sr=ve;for(Mn=void 0;sr--;){const In=H[sr];if(In[1].type==="lineEnding"||In[1].type==="lineEndingBlank"){if(In[0]==="exit")continue;Mn&&(H[Mn][1].type="lineEndingBlank",le=!0),In[1].type="lineEnding",Mn=sr}else if(!(In[1].type==="linePrefix"||In[1].type==="blockQuotePrefix"||In[1].type==="blockQuotePrefixWhitespace"||In[1].type==="blockQuoteMarker"||In[1].type==="listItemIndent"))break}Zr&&(!Mn||Zr<Mn)&&(St._spread=!0),St.end=Object.assign({},Mn?H[Mn][1].start:Ot[1].end),H.splice(Mn||ve,0,["exit",St,Ot[2]]),ve++,ue++}if(Ot[1].type==="listItemPrefix"){const sr={type:"listItem",_spread:!1,start:Object.assign({},Ot[1].start),end:void 0};St=sr,H.splice(ve,0,["enter",sr,Ot[2]]),ve++,ue++,Zr=void 0,Gr=!0}}}return H[Q][1]._spread=le,ue}function o(H,Q){return ue;function ue(ve){a.call(this,H(ve),ve),Q&&Q.call(this,ve)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(H,Q,ue){this.stack[this.stack.length-1].children.push(H),this.stack.push(H),this.tokenStack.push([Q,ue||void 0]),H.position={start:Jn(Q.start),end:void 0}}function c(H){return Q;function Q(ue){H&&H.call(this,ue),l.call(this,ue)}}function l(H,Q){const ue=this.stack.pop(),ve=this.tokenStack.pop();if(ve)ve[0].type!==H.type&&(Q?Q.call(this,H,ve[0]):(ve[1]||bg).call(this,H,ve[0]));else throw new Error("Cannot close `"+H.type+"` ("+$r({start:H.start,end:H.end})+"): it’s not open");ue.position.end=Jn(H.end)}function u(){return WP(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(H){if(this.data.expectingFirstListItemValue){const Q=this.stack[this.stack.length-2];Q.start=Number.parseInt(this.sliceSerialize(H),10),this.data.expectingFirstListItemValue=void 0}}function h(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.lang=H}function m(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.meta=H}function p(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.value=H.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.value=H.replace(/(\r?\n|\r)$/g,"")}function S(H){const Q=this.resume(),ue=this.stack[this.stack.length-1];ue.label=Q,ue.identifier=nr(this.sliceSerialize(H)).toLowerCase()}function C(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.title=H}function w(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.url=H}function k(H){const Q=this.stack[this.stack.length-1];if(!Q.depth){const ue=this.sliceSerialize(H).length;Q.depth=ue}}function b(){this.data.setextHeadingSlurpLineEnding=!0}function x(H){const Q=this.stack[this.stack.length-1];Q.depth=this.sliceSerialize(H).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function P(H){const ue=this.stack[this.stack.length-1].children;let ve=ue[ue.length-1];(!ve||ve.type!=="text")&&(ve=ot(),ve.position={start:Jn(H.start),end:void 0},ue.push(ve)),this.stack.push(ve)}function A(H){const Q=this.stack.pop();Q.value+=this.sliceSerialize(H),Q.position.end=Jn(H.end)}function M(H){const Q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ue=Q.children[Q.children.length-1];ue.position.end=Jn(H.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Q.type)&&(P.call(this,H),A.call(this,H))}function R(){this.data.atHardBreak=!0}function z(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.value=H}function D(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.value=H}function F(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.value=H}function $(){const H=this.stack[this.stack.length-1];if(this.data.inReference){const Q=this.data.referenceType||"shortcut";H.type+="Reference",H.referenceType=Q,delete H.url,delete H.title}else delete H.identifier,delete H.label;this.data.referenceType=void 0}function V(){const H=this.stack[this.stack.length-1];if(this.data.inReference){const Q=this.data.referenceType||"shortcut";H.type+="Reference",H.referenceType=Q,delete H.url,delete H.title}else delete H.identifier,delete H.label;this.data.referenceType=void 0}function L(H){const Q=this.sliceSerialize(H),ue=this.stack[this.stack.length-2];ue.label=LI(Q),ue.identifier=nr(Q).toLowerCase()}function J(){const H=this.stack[this.stack.length-1],Q=this.resume(),ue=this.stack[this.stack.length-1];if(this.data.inReference=!0,ue.type==="link"){const ve=H.children;ue.children=ve}else ue.alt=Q}function _(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.url=H}function ee(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.title=H}function oe(){this.data.inReference=void 0}function E(){this.data.referenceType="collapsed"}function ae(H){const Q=this.resume(),ue=this.stack[this.stack.length-1];ue.label=Q,ue.identifier=nr(this.sliceSerialize(H)).toLowerCase(),this.data.referenceType="full"}function ke(H){this.data.characterReferenceType=H.type}function pe(H){const Q=this.sliceSerialize(H),ue=this.data.characterReferenceType;let ve;ue?(ve=X0(Q,ue==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ve=Dl(Q);const Pe=this.stack[this.stack.length-1];Pe.value+=ve}function ie(H){const Q=this.stack.pop();Q.position.end=Jn(H.end)}function xe(H){A.call(this,H);const Q=this.stack[this.stack.length-1];Q.url=this.sliceSerialize(H)}function _e(H){A.call(this,H);const Q=this.stack[this.stack.length-1];Q.url="mailto:"+this.sliceSerialize(H)}function Ce(){return{type:"blockquote",children:[]}}function Re(){return{type:"code",lang:null,meta:null,value:""}}function Le(){return{type:"inlineCode",value:""}}function ut(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function xn(){return{type:"emphasis",children:[]}}function _n(){return{type:"heading",depth:0,children:[]}}function Xn(){return{type:"break"}}function En(){return{type:"html",value:""}}function Pn(){return{type:"image",title:null,url:"",alt:null}}function ei(){return{type:"link",title:null,url:"",children:[]}}function or(H){return{type:"list",ordered:H.type==="listOrdered",start:null,spread:H._spread,children:[]}}function un(H){return{type:"listItem",spread:H._spread,checked:null,children:[]}}function se(){return{type:"paragraph",children:[]}}function we(){return{type:"strong",children:[]}}function ot(){return{type:"text",value:""}}function je(){return{type:"thematicBreak"}}}function Jn(e){return{line:e.line,column:e.column,offset:e.offset}}function yg(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?yg(e,i):$I(e,i)}}function $I(e,t){let n;for(n in t)if(vg.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function bg(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+$r({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+$r({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+$r({start:t.start,end:t.end})+") is still open")}function jI(e){const t=this;t.parser=n;function n(i){return zI(i,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function BI(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function VI(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function qI(e,t){const n=t.value?t.value+`
`:"",i={};t.lang&&(i.className=["language-"+t.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(r.data={meta:t.meta}),e.patch(t,r),r=e.applyData(t,r),r={type:"element",tagName:"pre",properties:{},children:[r]},e.patch(t,r),r}function HI(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function WI(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ZI(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),r=ir(i.toLowerCase()),o=e.footnoteOrder.indexOf(i);let s,a=e.footnoteCounts.get(i);a===void 0?(a=0,e.footnoteOrder.push(i),s=e.footnoteOrder.length):s=o+1,a+=1,e.footnoteCounts.set(i,a);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,c);const l={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,l),e.applyData(t,l)}function GI(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function KI(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function kg(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const r=e.all(t),o=r[0];o&&o.type==="text"?o.value="["+o.value:r.unshift({type:"text",value:"["});const s=r[r.length-1];return s&&s.type==="text"?s.value+=i:r.push({type:"text",value:i}),r}function YI(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return kg(e,t);const r={src:ir(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,o),e.applyData(t,o)}function QI(e,t){const n={src:ir(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function JI(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)}function XI(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return kg(e,t);const r={href:ir(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function eO(e,t){const n={href:ir(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function tO(e,t,n){const i=e.all(t),r=n?nO(n):Cg(t),o={},s=[];if(typeof t.checked=="boolean"){const u=i[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},i.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const u=i[a];(r||a!==0||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!r?s.push(...u.children):s.push(u)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:o,children:s};return e.patch(t,l),e.applyData(t,l)}function nO(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=Cg(n[i])}return t}function Cg(e){const t=e.spread;return t??e.children.length>1}function iO(e,t){const n={},i=e.all(t);let r=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++r<i.length;){const s=i[r];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function rO(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function oO(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function sO(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function aO(e,t){const n=e.all(t),i=n.shift(),r=[];if(i){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],s),r.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Ml(t.children[1]),c=j0(t.children[t.children.length-1]);a&&c&&(s.position={start:a,end:c}),r.push(s)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function cO(e,t,n){const i=n?n.children:void 0,o=(i?i.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,a=s?s.length:t.children.length;let c=-1;const l=[];for(;++c<a;){const d=t.children[c],f={},h=s?s[c]:void 0;h&&(f.align=h);let m={type:"element",tagName:o,properties:f,children:[]};d&&(m.children=e.all(d),e.patch(d,m),m=e.applyData(d,m)),l.push(m)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,u),e.applyData(t,u)}function lO(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const wg=9,Sg=32;function uO(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),r=0;const o=[];for(;i;)o.push(Tg(t.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(t);return o.push(Tg(t.slice(r),r>0,!1)),o.join("")}function Tg(e,t,n){let i=0,r=e.length;if(t){let o=e.codePointAt(i);for(;o===wg||o===Sg;)i++,o=e.codePointAt(i)}if(n){let o=e.codePointAt(r-1);for(;o===wg||o===Sg;)r--,o=e.codePointAt(r-1)}return r>i?e.slice(i,r):""}function dO(e,t){const n={type:"text",value:uO(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function hO(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const fO={blockquote:BI,break:VI,code:qI,delete:HI,emphasis:WI,footnoteReference:ZI,heading:GI,html:KI,imageReference:YI,image:QI,inlineCode:JI,linkReference:XI,link:eO,listItem:tO,list:iO,paragraph:rO,root:oO,strong:sO,table:aO,tableCell:lO,tableRow:cO,text:dO,thematicBreak:hO,toml:Ds,yaml:Ds,definition:Ds,footnoteDefinition:Ds};function Ds(){}const xg=-1,Ls=0,qr=1,Fs=2,Vl=3,ql=4,Hl=5,Wl=6,_g=7,Eg=8,Pg=typeof self=="object"?self:globalThis,pO=(e,t)=>{const n=(r,o)=>(e.set(o,r),r),i=r=>{if(e.has(r))return e.get(r);const[o,s]=t[r];switch(o){case Ls:case xg:return n(s,r);case qr:{const a=n([],r);for(const c of s)a.push(i(c));return a}case Fs:{const a=n({},r);for(const[c,l]of s)a[i(c)]=i(l);return a}case Vl:return n(new Date(s),r);case ql:{const{source:a,flags:c}=s;return n(new RegExp(a,c),r)}case Hl:{const a=n(new Map,r);for(const[c,l]of s)a.set(i(c),i(l));return a}case Wl:{const a=n(new Set,r);for(const c of s)a.add(i(c));return a}case _g:{const{name:a,message:c}=s;return n(new Pg[a](c),r)}case Eg:return n(BigInt(s),r);case"BigInt":return n(Object(BigInt(s)),r);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return n(new DataView(a),s)}}return n(new Pg[o](s),r)};return i},Mg=e=>pO(new Map,e)(0),rr="",{toString:mO}={},{keys:gO}=Object,Hr=e=>{const t=typeof e;if(t!=="object"||!e)return[Ls,t];const n=mO.call(e).slice(8,-1);switch(n){case"Array":return[qr,rr];case"Object":return[Fs,rr];case"Date":return[Vl,rr];case"RegExp":return[ql,rr];case"Map":return[Hl,rr];case"Set":return[Wl,rr];case"DataView":return[qr,n]}return n.includes("Array")?[qr,n]:n.includes("Error")?[_g,n]:[Fs,n]},zs=([e,t])=>e===Ls&&(t==="function"||t==="symbol"),vO=(e,t,n,i)=>{const r=(s,a)=>{const c=i.push(s)-1;return n.set(a,c),c},o=s=>{if(n.has(s))return n.get(s);let[a,c]=Hr(s);switch(a){case Ls:{let u=s;switch(c){case"bigint":a=Eg,u=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return r([xg],s)}return r([a,u],s)}case qr:{if(c){let f=s;return c==="DataView"?f=new Uint8Array(s.buffer):c==="ArrayBuffer"&&(f=new Uint8Array(s)),r([c,[...f]],s)}const u=[],d=r([a,u],s);for(const f of s)u.push(o(f));return d}case Fs:{if(c)switch(c){case"BigInt":return r([c,s.toString()],s);case"Boolean":case"Number":case"String":return r([c,s.valueOf()],s)}if(t&&"toJSON"in s)return o(s.toJSON());const u=[],d=r([a,u],s);for(const f of gO(s))(e||!zs(Hr(s[f])))&&u.push([o(f),o(s[f])]);return d}case Vl:return r([a,s.toISOString()],s);case ql:{const{source:u,flags:d}=s;return r([a,{source:u,flags:d}],s)}case Hl:{const u=[],d=r([a,u],s);for(const[f,h]of s)(e||!(zs(Hr(f))||zs(Hr(h))))&&u.push([o(f),o(h)]);return d}case Wl:{const u=[],d=r([a,u],s);for(const f of s)(e||!zs(Hr(f)))&&u.push(o(f));return d}}const{message:l}=s;return r([a,{name:c,message:l}],s)};return o},Ig=(e,{json:t,lossy:n}={})=>{const i=[];return vO(!(t||n),!!t,new Map,i)(e),i},Us=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Mg(Ig(e,t)):structuredClone(e):(e,t)=>Mg(Ig(e,t));function yO(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function bO(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function kO(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||yO,i=e.options.footnoteBackLabel||bO,r=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[c]);if(!l)continue;const u=e.all(l),d=String(l.identifier).toUpperCase(),f=ir(d.toLowerCase());let h=0;const m=[],p=e.footnoteCounts.get(d);for(;p!==void 0&&++h<=p;){m.length>0&&m.push({type:"text",value:" "});let S=typeof n=="string"?n:n(c,h);typeof S=="string"&&(S={type:"text",value:S}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,h),className:["data-footnote-backref"]},children:Array.isArray(S)?S:[S]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const S=y.children[y.children.length-1];S&&S.type==="text"?S.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...m)}else u.push(...m);const g={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(u,!0)};e.patch(l,g),a.push(g)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Us(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const Og=(function(e){if(e==null)return TO;if(typeof e=="function")return $s(e);if(typeof e=="object")return Array.isArray(e)?CO(e):wO(e);if(typeof e=="string")return SO(e);throw new Error("Expected function, string, or object as test")});function CO(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Og(e[n]);return $s(i);function i(...r){let o=-1;for(;++o<t.length;)if(t[o].apply(this,r))return!0;return!1}}function wO(e){const t=e;return $s(n);function n(i){const r=i;let o;for(o in e)if(r[o]!==t[o])return!1;return!0}}function SO(e){return $s(t);function t(n){return n&&n.type===e}}function $s(e){return t;function t(n,i,r){return!!(xO(n)&&e.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function TO(){return!0}function xO(e){return e!==null&&typeof e=="object"&&"type"in e}function xF(e){return e}const Ng=[],_O=!0,Ag=!1,EO="skip";function PO(e,t,n,i){let r;typeof t=="function"&&typeof n!="function"?(i=n,n=t):r=t;const o=Og(r),s=i?-1:1;a(e,void 0,[])();function a(c,l,u){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(h?"<"+h+">":""))+")"})}return f;function f(){let h=Ng,m,p,y;if((!t||o(c,l,u[u.length-1]||void 0))&&(h=MO(n(c,u)),h[0]===Ag))return h;if("children"in c&&c.children){const g=c;if(g.children&&h[0]!==EO)for(p=(i?g.children.length:-1)+s,y=u.concat(g);p>-1&&p<g.children.length;){const S=g.children[p];if(m=a(S,p,y)(),m[0]===Ag)return m;p=typeof m[1]=="number"?m[1]:p+s}}return h}}}function MO(e){return Array.isArray(e)?e:typeof e=="number"?[_O,e]:e==null?Ng:[e]}function Rg(e,t,n,i){let r,o,s;typeof t=="function"&&typeof n!="function"?(o=void 0,s=t,r=n):(o=t,s=n,r=i),PO(e,o,a,r);function a(c,l){const u=l[l.length-1],d=u?u.children.indexOf(c):void 0;return s(c,d,u)}}const Zl={}.hasOwnProperty,IO={};function OO(e,t){const n=t||IO,i=new Map,r=new Map,o=new Map,s={...fO,...n.handlers},a={all:l,applyData:AO,definitionById:i,footnoteById:r,footnoteCounts:o,footnoteOrder:[],handlers:s,one:c,options:n,patch:NO,wrap:DO};return Rg(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?i:r,f=String(u.identifier).toUpperCase();d.has(f)||d.set(f,u)}}),a;function c(u,d){const f=u.type,h=a.handlers[f];if(Zl.call(a.handlers,f)&&h)return h(a,u,d);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in u){const{children:p,...y}=u,g=Us(y);return g.children=a.all(u),g}return Us(u)}return(a.options.unknownHandler||RO)(a,u,d)}function l(u){const d=[];if("children"in u){const f=u.children;let h=-1;for(;++h<f.length;){const m=a.one(f[h],u);if(m){if(h&&f[h-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=Dg(m.value)),!Array.isArray(m)&&m.type==="element")){const p=m.children[0];p&&p.type==="text"&&(p.value=Dg(p.value))}Array.isArray(m)?d.push(...m):d.push(m)}}}return d}}function NO(e,t){e.position&&(t.position=TP(e))}function AO(e,t){let n=t;if(e&&e.data){const i=e.data.hName,r=e.data.hChildren,o=e.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const s="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:s}}n.type==="element"&&o&&Object.assign(n.properties,Us(o)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function RO(e,t){const n=t.data||{},i="value"in t&&!(Zl.call(n,"hProperties")||Zl.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function DO(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:`
`});++i<e.length;)i&&n.push({type:"text",value:`
`}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Dg(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Lg(e,t){const n=OO(e,t),i=n.one(e,void 0),r=kO(n),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&o.children.push({type:"text",value:`
`},r),o}function LO(e,t){return e&&"run"in e?async function(n,i){const r=Lg(n,{file:i,...t});await e.run(r,i)}:function(n,i){return Lg(n,{file:i,...e||t})}}function Fg(e){if(e)throw e}var Gl,zg;function FO(){if(zg)return Gl;zg=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},o=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var u=e.call(l,"constructor"),d=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!u&&!d)return!1;var f;for(f in l);return typeof f>"u"||e.call(l,f)},s=function(l,u){n&&u.name==="__proto__"?n(l,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):l[u.name]=u.newValue},a=function(l,u){if(u==="__proto__")if(e.call(l,u)){if(i)return i(l,u).value}else return;return l[u]};return Gl=function c(){var l,u,d,f,h,m,p=arguments[0],y=1,g=arguments.length,S=!1;for(typeof p=="boolean"&&(S=p,p=arguments[1]||{},y=2),(p==null||typeof p!="object"&&typeof p!="function")&&(p={});y<g;++y)if(l=arguments[y],l!=null)for(u in l)d=a(p,u),f=a(l,u),p!==f&&(S&&f&&(o(f)||(h=r(f)))?(h?(h=!1,m=d&&r(d)?d:[]):m=d&&o(d)?d:{},s(p,{name:u,newValue:c(S,m,f)})):typeof f<"u"&&s(p,{name:u,newValue:f}));return p},Gl}var zO=FO();const Kl=lt(zO);function Yl(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function UO(){const e=[],t={run:n,use:i};return t;function n(...r){let o=-1;const s=r.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...r);function a(c,...l){const u=e[++o];let d=-1;if(c){s(c);return}for(;++d<r.length;)(l[d]===null||l[d]===void 0)&&(l[d]=r[d]);r=l,u?$O(u,a)(...l):s(null,...l)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return e.push(r),t}}function $O(e,t){let n;return i;function i(...s){const a=e.length>s.length;let c;a&&s.push(r);try{c=e.apply(this,s)}catch(l){const u=l;if(a&&n)throw u;return r(u)}a||(c&&c.then&&typeof c.then=="function"?c.then(o,r):c instanceof Error?r(c):o(c))}function r(s,...a){n||(n=!0,t(s,...a))}function o(s){r(null,s)}}const ln={basename:jO,dirname:BO,extname:VO,join:qO,sep:"/"};function jO(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Wr(e);let n=0,i=-1,r=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;r--;)if(e.codePointAt(r)===47){if(o){n=r+1;break}}else i<0&&(o=!0,i=r+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let s=-1,a=t.length-1;for(;r--;)if(e.codePointAt(r)===47){if(o){n=r+1;break}}else s<0&&(o=!0,s=r+1),a>-1&&(e.codePointAt(r)===t.codePointAt(a--)?a<0&&(i=r):(a=-1,i=s));return n===i?i=s:i<0&&(i=e.length),e.slice(n,i)}function BO(e){if(Wr(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.codePointAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function VO(e){Wr(e);let t=e.length,n=-1,i=0,r=-1,o=0,s;for(;t--;){const a=e.codePointAt(t);if(a===47){if(s){i=t+1;break}continue}n<0&&(s=!0,n=t+1),a===46?r<0?r=t:o!==1&&(o=1):r>-1&&(o=-1)}return r<0||n<0||o===0||o===1&&r===n-1&&r===i+1?"":e.slice(r,n)}function qO(...e){let t=-1,n;for(;++t<e.length;)Wr(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":HO(n)}function HO(e){Wr(e);const t=e.codePointAt(0)===47;let n=WO(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function WO(e,t){let n="",i=0,r=-1,o=0,s=-1,a,c;for(;++s<=e.length;){if(s<e.length)a=e.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(r===s-1||o===1))if(r!==s-1&&o===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",i=0):(n=n.slice(0,c),i=n.length-1-n.lastIndexOf("/")),r=s,o=0;continue}}else if(n.length>0){n="",i=0,r=s,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(r+1,s):n=e.slice(r+1,s),i=s-r-1;r=s,o=0}else a===46&&o>-1?o++:o=-1}return n}function Wr(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const ZO={cwd:GO};function GO(){return"/"}function Ql(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function KO(e){if(typeof e=="string")e=new URL(e);else if(!Ql(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return YO(e)}function YO(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const i=t.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(t)}const Jl=["history","path","basename","stem","extname","dirname"];class Ug{constructor(t){let n;t?Ql(t)?n={path:t}:typeof t=="string"||QO(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":ZO.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<Jl.length;){const o=Jl[i];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let r;for(r in n)Jl.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?ln.basename(this.path):void 0}set basename(t){eu(t,"basename"),Xl(t,"basename"),this.path=ln.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?ln.dirname(this.path):void 0}set dirname(t){$g(this.basename,"dirname"),this.path=ln.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?ln.extname(this.path):void 0}set extname(t){if(Xl(t,"extname"),$g(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ln.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Ql(t)&&(t=KO(t)),eu(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?ln.basename(this.path,this.extname):void 0}set stem(t){eu(t,"stem"),Xl(t,"stem"),this.path=ln.join(this.dirname||"",t+(this.extname||""))}fail(t,n,i){const r=this.message(t,n,i);throw r.fatal=!0,r}info(t,n,i){const r=this.message(t,n,i);return r.fatal=void 0,r}message(t,n,i){const r=new ht(t,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Xl(e,t){if(e&&e.includes(ln.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ln.sep+"`")}function eu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function $g(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function QO(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const JO=(function(e){const i=this.constructor.prototype,r=i[e],o=function(){return r.apply(o,arguments)};return Object.setPrototypeOf(o,i),o}),XO={}.hasOwnProperty;class tu extends JO{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=UO()}copy(){const t=new tu;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];t.use(...i)}return t.data(Kl(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(ru("data",this.frozen),this.namespace[t]=n,this):XO.call(this.namespace,t)&&this.namespace[t]||void 0:t?(ru("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(t,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=js(t),i=this.parser||this.Parser;return nu("parse",i),i(String(n),n)}process(t,n){const i=this;return this.freeze(),nu("process",this.parser||this.Parser),iu("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(o,s){const a=js(t),c=i.parse(a);i.run(c,a,function(u,d,f){if(u||!d||!f)return l(u);const h=d,m=i.stringify(h,f);nN(m)?f.value=m:f.result=m,l(u,f)});function l(u,d){u||!d?s(u):o?o(d):n(void 0,d)}}}processSync(t){let n=!1,i;return this.freeze(),nu("processSync",this.parser||this.Parser),iu("processSync",this.compiler||this.Compiler),this.process(t,r),Bg("processSync","process",n),i;function r(o,s){n=!0,Fg(o),i=s}}run(t,n,i){jg(t),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?o(void 0,i):new Promise(o);function o(s,a){const c=js(n);r.run(t,c,l);function l(u,d,f){const h=d||t;u?a(u):s?s(h):i(void 0,h,f)}}}runSync(t,n){let i=!1,r;return this.run(t,n,o),Bg("runSync","run",i),r;function o(s,a){Fg(s),r=a,i=!0}}stringify(t,n){this.freeze();const i=js(n),r=this.compiler||this.Compiler;return iu("stringify",r),jg(t),r(t,i)}use(t,...n){const i=this.attachers,r=this.namespace;if(ru("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(l){if(typeof l=="function")c(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[u,...d]=l;c(u,d)}else s(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function s(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(r.settings=Kl(!0,r.settings,l.settings))}function a(l){let u=-1;if(l!=null)if(Array.isArray(l))for(;++u<l.length;){const d=l[u];o(d)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function c(l,u){let d=-1,f=-1;for(;++d<i.length;)if(i[d][0]===l){f=d;break}if(f===-1)i.push([l,...u]);else if(u.length>0){let[h,...m]=u;const p=i[f][1];Yl(p)&&Yl(h)&&(h=Kl(!0,p,h)),i[f]=[l,h,...m]}}}}const eN=new tu().freeze();function nu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function iu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function ru(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function jg(e){if(!Yl(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Bg(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function js(e){return tN(e)?e:new Ug(e)}function tN(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function nN(e){return typeof e=="string"||iN(e)}function iN(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const rN="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Vg=[],qg={allowDangerousHtml:!0},oN=/^(https?|ircs?|mailto|xmpp)$/i,sN=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function aN(e){const t=cN(e),n=lN(e);return uN(t.runSync(t.parse(n),n),e)}function cN(e){const t=e.rehypePlugins||Vg,n=e.remarkPlugins||Vg,i=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...qg}:qg;return eN().use(jI).use(n).use(LO,i).use(t)}function lN(e){const t=e.children||"",n=new Ug;return typeof t=="string"&&(n.value=t),n}function uN(e,t){const n=t.allowedElements,i=t.allowElement,r=t.components,o=t.disallowedElements,s=t.skipHtml,a=t.unwrapDisallowed,c=t.urlTransform||dN;for(const u of sN)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+rN+u.id,void 0);return Rg(e,l),MP(e,{Fragment:v.Fragment,components:r,ignoreInvalidStyle:!0,jsx:v.jsx,jsxs:v.jsxs,passKeys:!0,passNode:!0});function l(u,d,f){if(u.type==="raw"&&f&&typeof d=="number")return s?f.children.splice(d,1):f.children[d]={type:"text",value:u.value},d;if(u.type==="element"){let h;for(h in Rl)if(Object.hasOwn(Rl,h)&&Object.hasOwn(u.properties,h)){const m=u.properties[h],p=Rl[h];(p===null||p.includes(u.tagName))&&(u.properties[h]=c(String(m||""),h,u))}}if(u.type==="element"){let h=n?!n.includes(u.tagName):o?o.includes(u.tagName):!1;if(!h&&i&&typeof d=="number"&&(h=!i(u,d,f)),h&&f&&typeof d=="number")return a&&u.children?f.children.splice(d,1,...u.children):f.children.splice(d,1),d}}}function dN(e){const t=e.indexOf(":"),n=e.indexOf("?"),i=e.indexOf("#"),r=e.indexOf("/");return t===-1||r!==-1&&t>r||n!==-1&&t>n||i!==-1&&t>i||oN.test(e.slice(0,t))?e:""}function hN(e){return v.jsx("div",{className:Te("prose prose-sm dark:prose-invert flex flex-col gap-2","prose-p:mb-0","prose-ul:!my-0 prose-ul:flex prose-ul:flex-col prose-ul:space-y-0","prose-ol:!my-0 prose-ol:flex prose-ol:flex-col prose-ol:space-y-0","prose-li:mb-0"),children:v.jsx(aN,{components:{ol:({children:t})=>v.jsx("ol",{className:"list-none space-y-1 mb-0 ml-0 counter-reset-item leading-none",children:t})},...e})})}const fN=U.memo(hN,(e,t)=>e.children===t.children),pN=e=>({eyesColor:e==="light"||e==="dark"?"#36A5E1":"currentColor",headsetColor:e==="light"?"#131F3D":e==="dark"?"white":"currentColor",letterColor:e==="light"?"#141F3E":"currentColor"}),Hg=e=>{const{eyesColor:t,headsetColor:n}=pN(e.theme);return v.jsxs("svg",{viewBox:"0 0 783 521",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[v.jsx("path",{d:"M299.103 316.983C266.483 300.769 233.853 300.769 201.223 316.983C168.603 333.198 152.293 361.573 152.293 402.128C152.293 442.673 168.603 471.304 201.223 488.021C233.853 504.756 266.483 504.756 299.103 488.021C331.733 471.304 348.043 442.673 348.043 402.128C348.043 361.582 331.733 333.198 299.103 316.983Z",fill:t}),v.jsx("path",{d:"M483.952 488.021C516.58 504.756 549.208 504.756 581.827 488.021C614.455 471.304 630.764 442.673 630.764 402.128C630.764 361.582 614.455 333.198 581.827 316.983C549.208 300.769 516.58 300.769 483.952 316.983C451.333 333.198 435.014 361.573 435.014 402.128C435.014 442.673 451.333 471.304 483.952 488.021Z",fill:t}),v.jsx("path",{d:"M105.972 474.732C98.718 475.743 91.4636 477.424 84.1693 477.667C-4.76832 480.601 -1.31595 470.272 0.689712 400.526C1.35827 377.187 1.00929 353.809 0.719921 330.45C0.420568 305.381 5.68915 283.636 34.3771 275.891C48.9656 271.956 50.961 260.549 55.611 248.792C111.68 107.017 220.824 30.0803 373.783 22.5694C519.718 15.4082 634.37 75.8164 708.04 202.813C725.652 233.158 726.54 275.163 770.485 288.601C776.442 290.427 781.022 305.517 781.262 314.593C782.409 358.823 784.605 403.296 781.092 447.292C778.149 484.109 744.991 475.335 719.865 478.289C692.404 481.515 682.515 467.552 683.723 444.912C685.888 404.462 690.838 363.973 686.437 323.6C672.896 199.237 572.184 99.5251 441.087 79.227C293.886 56.4318 155.485 135.739 107.509 273.336C84.6285 338.972 96.1834 406.541 105.972 474.732Z",fill:n})]})},mN=({containerClassName:e,iconClassName:t,isHeader:n})=>v.jsx("div",{className:Te("rounded-full size-8 bg-secondary-500 flex items-center justify-center pb-0.75",e),children:v.jsx(Hg,{theme:n?"dark":void 0,className:Te("size-5",t)})}),gN=()=>{const{config:e,agentName:t}=tn();return v.jsxs("div",{className:"flex flex-col justify-center items-center py-12",children:[e.hidePoweredBy&&e.orgLogo?v.jsx("img",{src:e.orgLogo,alt:"Organization Logo",className:"max-w-full h-[72px] mb-4 rounded-sm object-contain"}):v.jsx(mN,{isHeader:!0,containerClassName:"mb-4 size-[72px] bg-secondary-500",iconClassName:"size-[46px]"}),v.jsx("p",{className:"text-[20px] mb-[3px] font-bold text-black",children:e.isTestSophiie?`Test ${t}`:`${t}`}),v.jsx("p",{className:"text-base text-gray-700",children:e.isTestSophiie?`Check how ${t} handles your customers`:"Our virtual agent is here to help you"})]})},vN=({message:e,isEditing:t,isRegenerating:n,onEditClick:i,onCancelEdit:r,onSaveEdit:o,onRegenerate:s,messageIndex:a,prevMessageRole:c,hideActions:l=!1,disableActions:u=!1})=>l&&!t?null:t?v.jsxs("div",{className:"flex space-x-2 gap-4 ml-auto mt-2",children:[v.jsx(Ue,{type:"button",className:"text-gray-500 hover:text-gray-700 hover:bg-transparent transition-colors m-0 p-0 w-fit h-fit","aria-label":"Cancel edit",variant:"ghost",onClick:r,disabled:u,children:v.jsx(ze,{type:"close",className:"text-gray-600 size-4"})}),v.jsx(Ue,{type:"button",className:"text-gray-500 hover:text-gray-700 hover:bg-transparent transition-colors m-0 p-0 w-fit h-fit","aria-label":"Save edit",variant:"ghost",onClick:()=>o(e.id),disabled:u,children:v.jsx(ze,{type:"sendAlt",className:"text-gray-600 size-4"})})]}):e.role==="assistant"&&!n&&a>0&&c==="user"?v.jsx("div",{className:"flex space-x-2 gap-4",children:v.jsx(Ue,{type:"button",className:"text-gray-500 hover:text-gray-700 hover:bg-transparent transition-colors m-0 p-0 w-fit h-fit","aria-label":"Regenerate message",variant:"ghost",onClick:()=>s(e.id),disabled:u,children:v.jsx(ze,{type:"refreshCw",className:"text-gray-600 size-4"})})}):e.role==="user"?v.jsx("div",{className:"flex space-x-2 gap-4",children:v.jsx(Ue,{type:"button",className:"text-gray-500 hover:text-gray-700 hover:bg-transparent transition-colors m-0 p-0 w-fit h-fit","aria-label":"Edit message",variant:"ghost",onClick:()=>i(e),disabled:u,children:v.jsx(ze,{type:"edit",className:"text-gray-600 size-4"})})}):null,Wg=O.forwardRef(({className:e,autoResize:t=!1,...n},i)=>{const r=O.useRef(null),o=i?s=>{typeof i=="function"?i(s):i&&(i.current=s),r.current=s}:r;return O.useEffect(()=>{if(t&&r.current){const s=r.current,a=()=>{s.style.height="auto",s.style.height=`${s.scrollHeight+10}px`};return a(),s.addEventListener("input",a),()=>s.removeEventListener("input",a)}},[t]),v.jsx("textarea",{className:Te("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...n})});Wg.displayName="Textarea";const yN=({message:e,editContent:t,setEditContent:n,onSave:i})=>{const r=U.useRef(null),o=()=>{r.current&&(r.current.style.height="auto",r.current.style.height=`${r.current.scrollHeight}px`)},s=a=>{n(a.target.value),setTimeout(o,0)};return U.useEffect(()=>{o()},[]),v.jsx("div",{className:"flex flex-col w-full",children:v.jsx(Wg,{ref:r,value:t,onChange:s,className:"p-2 rounded-md resize-none bg-white",style:{width:"100%",minHeight:"24px"},onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),i(e.id))}})})};function ou(e){return"agentMessage"in e.regenerationInfo}const bN=({chatHook:e,isCallView:t=!1,isTestSophiie:n=!1})=>{const i=U.useRef(null),r=U.useRef({}),o=U.useMemo(()=>{const u=[],d=[],f=[];return e.messages.forEach((h,m)=>{h.role==="system"&&(h.content==="call_started"?u.push(m):h.content==="call_ended"?d.push(m):h.content==="session_ended"&&f.push(m))}),{callStartIndices:u,callEndIndices:d,sessionEndIndices:f}},[e.messages]),s=u=>{const{callStartIndices:d,callEndIndices:f}=o,h=d.filter(p=>p<u).sort((p,y)=>y-p)[0];if(h===void 0)return!1;const m=f.filter(p=>p>h).sort((p,y)=>p-y)[0];return m===void 0||u<m},a=u=>{const{sessionEndIndices:d}=o;return d.filter(h=>h>u).sort((h,m)=>h-m)[0]!==void 0},c=u=>d=>{r.current[u]=d},l=G_(()=>{if(ou(e)&&e.regenerationInfo.agentMessage?.id){const u=r.current[e.regenerationInfo.agentMessage.id];if(u){u.scrollIntoView({behavior:"smooth"});return}}i.current?.scrollIntoView({behavior:"smooth"})},100);return U.useEffect(()=>{l()},[e.messages,e.regenerationInfo,l]),v.jsxs("div",{className:"flex-1 overflow-y-auto px-4 flex flex-col py-4 h-full",children:[v.jsx(gN,{}),v.jsx("div",{className:"flex-1"}),e.messages.map((u,d)=>{const f=e.editingMessageId===u.id,h=u.role==="user",m=u.role==="system";if(m){const y=u.content.includes("session");return v.jsx("div",{className:Te("capitalize text-center text-xs my-4 w-fit mx-auto",y?"text-gray-700 font-medium bg-gray-50 rounded-2xl py-0.5 px-2 mb-8":"text-gray-500 font-normal"),children:u.content.replace(/_/g," ")},u.id)}const p=ou(e)&&e.regenerationInfo.agentMessage?.id===u.id&&e.regenerationInfo.isLoading;return v.jsx("div",{ref:c(u.id),className:Te("flex flex-col mb-4 w-full",h?"items-end ml-auto":"",m?"items-center":"",p?"opacity-60":""),children:v.jsxs("div",{className:Te("rounded-2xl p-3 h-full flex flex-col",u.role==="user"?"bg-brand-50":"bg-gray-50",f?"w-full":"w-fit",m?"max-w-[80%] italic text-gray-600":"min-w-[210px]"),children:[f?v.jsx(yN,{message:u,editContent:e.editContent,setEditContent:e.setEditContent,onSave:()=>e.handleSaveEdit()}):v.jsx("div",{className:Te("whitespace-pre-wrap max-w-full",p&&"animate-pulse"),style:{overflowWrap:"anywhere"},children:p?v.jsx(v.Fragment,{children:v.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[v.jsx("div",{className:"animate-spin",children:v.jsx(ze,{type:"loader",strokeWidth:2})}),v.jsx("span",{children:"Regenerating response..."})]})}):v.jsx(fN,{children:u.content})}),v.jsxs("div",{className:"flex items-center mt-1 justify-between",children:[!f&&u.createdAt&&v.jsx("span",{className:"text-xs text-gray-500",children:dt(u.createdAt).format("ddd, DD/MM/YYYY h:mm A")}),v.jsx(vN,{message:u,messageIndex:d,prevMessageRole:d>0?e.messages[d-1]?.role:void 0,isEditing:f,onEditClick:y=>e.handleEditClick({...y,createdAt:typeof y.createdAt=="number"?new Date(y.createdAt):y.createdAt}),onCancelEdit:()=>e.setEditingMessageId(null),onSaveEdit:e.handleSaveEdit,onRegenerate:e.handleRegenerate,isRegenerating:ou(e)&&e.regenerationInfo.agentMessage?.id===u.id&&e.regenerationInfo.isLoading,hideActions:s(d)||t||a(d)||!n,disableActions:!1})]})]})},u.id)}),v.jsx("div",{ref:i})]})},kN=({hasSessionEnded:e=!1,isSessionActive:t=!1,isCallView:n=!1,isLoading:i=!1,startCall:r,startChat:o})=>{const{featureFlags:s,config:a,agentName:c}=tn(),{handleMinimizeWidget:l,handleCloseWidget:u}=Lr(),d=()=>{t?u():l()};return v.jsxs("div",{className:"absolute w-full h-[69px] p-4 border-b border-gray-200 flex items-center gap-3 bg-white/70 backdrop-blur-[7px] top-0 z-10",children:[v.jsx("div",{className:"bg-secondary-500 rounded-full size-8 flex items-center justify-center pb-0.75",children:v.jsx(Hg,{theme:"dark",className:"size-5"})}),v.jsx("div",{className:"flex-1",children:v.jsx("h3",{className:"font-medium text-gray-600",children:n?`Call with ${c}`:`${c}`})}),s.enableChatbotCall&&v.jsx(v.Fragment,{children:n?v.jsx(Ue,{type:"button",className:"bg-success-500 rounded-full p-2 hover:bg-success-600 transition-colors",onClick:o,"aria-label":"Start chat",disabled:i||e,children:v.jsx(ze,{type:"messageCircleMore",className:"size-5 text-white"})}):v.jsx(Ue,{type:"button",className:"bg-success-500 rounded-full p-2 hover:bg-success-600 transition-colors",onClick:r,"aria-label":"Start call",disabled:i||e,children:v.jsx(ze,{type:"phone",className:"size-5 text-white"})})}),a.render.mode===Dr.OVERLAY&&v.jsxs(v.Fragment,{children:[v.jsx(Ue,{type:"button",size:"icon",onClick:l,"aria-label":"Minimize",variant:"ghost",children:v.jsx(ze,{type:"minus",className:"size-5 text-brand-700"})}),v.jsx(Ue,{type:"button",size:"icon",onClick:d,"aria-label":"Close",variant:"ghost",children:v.jsx(ze,{type:"close",className:"size-5 text-brand-700"})})]})]})},Zg=O.forwardRef(({className:e,type:t,disableInputNumberStepper:n,rightIconType:i,rightIconClassName:r,relativeWrapperClassName:o,...s},a)=>{const c=v.jsx("input",{type:t,className:Te("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-xs transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50","placeholder:text-muted-foreground",{"[&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none":n&&t==="number","pr-8":!!i},e),ref:a,...s});return i?v.jsxs("div",{className:Te("relative",o),children:[c,v.jsx(ze,{type:i,className:Te("absolute right-3 top-2.5 size-4 text-gray-500",r)})]}):c});Zg.displayName="Input";const CN=({chatHook:e})=>{const t=U.useRef(null),n=U.useMemo(()=>e.messages.some(i=>i.role==="system"&&i.content==="session_ended"),[e.messages]);return U.useEffect(()=>{!e.isLoading&&t.current&&setTimeout(()=>{t.current?.focus()},100)},[e.isLoading]),n&&!e.isLoading?v.jsx("div",{className:"p-4 pb-6 space-y-3 mx-auto",children:v.jsx(Ue,{variant:"outline",className:"mx-auto text-sm text-gray-700 font-semibold",RightIcon:"refreshCw",rightIconClassName:"-ml-1 size-5",onClick:()=>{e.immediateReset&&e.immediateReset()},children:"Start new chat"})}):v.jsx("div",{className:"p-4 space-y-3",children:v.jsxs("form",{onSubmit:i=>{i.preventDefault(),!e.isLoading&&e.input.trim()&&e.handleSubmit(i)},className:"flex items-center bg-gray-50 rounded-lg px-4 py-2 h-14 sm:h-16 border border-gray-200",children:[v.jsx(Zg,{ref:t,type:"text",placeholder:e.isLoading?"Connecting...":"Write your message here...",value:e.input,disabled:e.isLoading,onChange:e.handleInputChange,className:Te("h-auto py-0 px-0 bg-transparent flex-1","outline-none border-none shadow-none focus-visible:ring-0","placeholder:text-gray-500 text-gray-700")}),v.jsx(Ue,{type:"submit",disabled:e.isLoading||!e.input.trim(),className:Te("text-gray-500 hover:bg-transparent transition-colors m-0 p-0 w-fit h-fit",e.isLoading?"opacity-50 cursor-not-allowed":"hover:text-gray-700"),"aria-label":"Send message",variant:"ghost",children:v.jsx(ze,{type:e.isLoading?"spinner":"sendAlt",className:Te("size-5",e.isLoading?"text-gray-400":"text-gray-600")})})]})})},wN=({isVisible:e,onSwitchHere:t,isSwitching:n,zIndex:i})=>e?v.jsx("div",{className:"absolute inset-0 bg-white/95 backdrop-blur-sm flex flex-col items-center justify-center p-6",style:{zIndex:i},children:v.jsxs("div",{className:"text-center space-y-4",children:[v.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto",children:v.jsx(ze,{type:"arrowRight",className:"w-8 h-8 text-blue-600"})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Session Moved"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Your chat session has been moved to another tab. Click below to continue your conversation here."})]}),v.jsx(Ue,{onClick:t,disabled:n,className:"bg-blue-500 hover:bg-blue-600 text-white",children:n?v.jsxs(v.Fragment,{children:[v.jsx(ze,{type:"spinner",className:"w-4 h-4 mr-2 animate-spin"}),"Restoring..."]}):"Continue Here"})]})}):null,SN=({isVisible:e,onSwitchHere:t,isSwitching:n,zIndex:i})=>e?v.jsx("div",{className:"absolute inset-0 bg-white/95 backdrop-blur-sm flex flex-col items-center justify-center p-6",style:{zIndex:i},children:v.jsxs("div",{className:"text-center space-y-4",children:[v.jsx("div",{className:"w-16 h-16 bg-warning-100 rounded-full flex items-center justify-center mx-auto",children:v.jsx(ze,{type:"laptop",className:"w-8 h-8 text-warning-600"})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Session Active in Another Tab"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Your chat session is currently active in another browser tab. Would you like to continue here instead?"})]}),v.jsx(Ue,{onClick:t,disabled:n,className:"bg-warning-500 hover:bg-warning-600 text-white",children:n?v.jsxs(v.Fragment,{children:[v.jsx(ze,{type:"spinner",className:"w-4 h-4 mr-2 animate-spin"}),"Switching..."]}):"Switch to This Tab"})]})}):null,TN=()=>{const{config:e}=tn();if(e.isTestSophiie||e.hidePoweredBy)return null;const t=new URLSearchParams({utm_source:"sophiie-chatbot",utm_medium:"referral",utm_campaign:"powered_by_sophiie"});return v.jsx("div",{className:"flex justify-center pb-4 text-sm text-gray-500",children:v.jsxs("p",{children:[v.jsx("span",{className:"text-xs",children:"⚡️"})," Powered by"," ",v.jsx("a",{target:"_blank",href:`https://sophiie.ai?${t.toString()}`,rel:"noreferrer",className:"text-brand-700 font-semibold",children:"Sophiie"})]})})},xN=({isOpen:e,config:t,setRoomKey:n,livekitRoom:i})=>{const o=_r()?.testSophiieToken,{isSessionEnded:s,setIsSessionEnded:a,currentMode:c,setCurrentMode:l}=Lr(),{setDisconnectChat:u,modeType:d,agentName:f}=tn(),h=d||tt.CHAT,m=vC({room:i,initialMode:h}),p=U.useMemo(()=>{let $=Qp(t.orgId)?.messages?.map(V=>({id:V.id,role:V.role,content:V.content,createdAt:typeof V.createdAt=="string"?new Date(V.createdAt).getTime():V.createdAt instanceof Date?V.createdAt.getTime():V.createdAt}))||[];return t.autoOpen&&$.length===0&&t.welcomeMessage&&($=[{id:`welcome-${Date.now()}`,role:"assistant",content:t.welcomeMessage,createdAt:Date.now()}]),$},[t.orgId,t.autoOpen,t.welcomeMessage]),y=t.orgId||"default",{sessionStatus:g,showSessionSwitch:S,showSessionMoved:C,hasActiveSession:w,requestSessionSwitch:k,markAsInactive:b}=I8({storageId:y,isOpen:e,room:i,onDisconnectRequest:()=>{}}),x=()=>{a&&a(!1)},T=s!==void 0?!s&&!w:e&&!w,P=m1({config:t,livekitRoom:i,connectRoom:T&&t.isTestSophiie,setRoomKey:n,initialMessages:p,resetSession:x,modeType:c,modeSwitch:m,agentName:f,onSessionCleanup:()=>{t.isTestSophiie||D()}}),A=U.useMemo(()=>P.messages.some(F=>F.role==="system"&&F.content==="session_ended"),[P.messages]);U.useEffect(()=>{P.disconnectChat&&u(P.disconnectChat)},[u]);const M=m.currentMode===tt.CALL,R=a4({initCall:d===tt.CALL&&!A,messages:P.messages,modeSwitch:m,livekitRoom:i,onCallStarted:P.addCallStartedMessage,onCallEnded:P.addCallEndedMessage,orgId:t.orgId,environment:t.environment,connectRoom:T&&t.isTestSophiie,isTestSophiie:t.isTestSophiie,testSophiieToken:o,onSessionCleanup:()=>{t.isTestSophiie||D()}}),z=i.state===he.Connected,{manualCleanup:D}=B_({environment:t.environment,orgId:t.orgId,enabled:!t.isTestSophiie,isSessionActive:z});return U.useEffect(()=>{c!==m.currentMode&&l(m.currentMode)},[m.currentMode,c,l]),U.useEffect(()=>()=>{b()},[b]),v.jsxs(v.Fragment,{children:[v.jsx(SN,{isVisible:S,onSwitchHere:k,isSwitching:g==="switching",zIndex:t.zIndex}),v.jsx(wN,{isVisible:C,onSwitchHere:k,isSwitching:g==="switching",zIndex:t.zIndex}),v.jsx(kN,{isCallView:M,hasSessionEnded:A,isSessionActive:z,isLoading:P.isLoading||R.callStatus.status==="INITIATING",startCall:R.startCall,startChat:P.startChat}),R.callStatus.status==="INITIATING"||R.callStatus.status==="ERROR"||!M&&P.connectionStatus.status==="ERROR"?v.jsx("div",{className:"flex-1 flex flex-col items-center justify-center overflow-hidden px-3",children:v.jsx("div",{className:"w-full text-center mb-4",children:!M&&P.connectionStatus.status==="ERROR"?v.jsx(l0,{error:{message:P.connectionStatus.error?.message||"Chat failed to connect",description:P.connectionStatus.error?.description||"Please try again or check your connection"},onDismiss:P.dismissConnectionError}):v.jsx(Z_,{callStatus:R.callStatus,onDismissError:R.dismissError,agentName:f})})}):v.jsx("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:v.jsx("div",{className:"pt-[69px] flex-1 flex flex-col relative overflow-hidden",children:v.jsx(bN,{chatHook:P,isCallView:M,isTestSophiie:t.isTestSophiie})})}),M?v.jsx(W_,{callStatus:R.callStatus,startCall:R.startCall,endCall:R.endCall,onToggleMicrophone:R.toggleMicrophone,hasSessionEnded:A,onStartNewConversation:async()=>{P.immediateReset&&P.modeSwitch&&(M&&P.modeSwitch.setCurrentMode(tt.CALL),await P.immediateReset())}}):v.jsx(CN,{chatHook:P}),v.jsx(TN,{}),v.jsx(P.ResetConfirmationDialog,{}),t.render.mode===Dr.OVERLAY&&v.jsx(q_,{})]})},Gg=({setIsOpen:e,isOpen:t,isLoading:n=!1})=>{const{handleOpenWidget:i,handleMinimizeWidget:r}=Lr(),{config:o}=tn(),s=()=>{n||(t?r?r():e(!1):i?i():e(!0))};return v.jsx(Ue,{onClick:s,disabled:n,className:Te("fixed bottom-6 right-2 md:right-6 size-14 rounded-full shadow-lg","bg-color-primary hover:bg-color-primary hover:opacity-90","transition-all duration-300 transform pointer-events-auto",t&&!n?"rotate-45":"rotate-0",n&&"opacity-75 cursor-not-allowed"),style:{zIndex:o.zIndex},size:"icon",children:v.jsx(ze,{type:n?"loader2":t?"close":"messageCircle",className:Te("size-6 text-white",n&&"animate-spin")})})},Kg=({isEmbedded:e=!1,isOpen:t,setIsOpen:n})=>{const[i,r]=U.useState(""),[o]=U.useState(()=>new Di),[s,a]=U.useState(0),c=tn(),{config:l}=c,u=c.disableTriggerButton||l.disableTriggerButton,[d,f]=U.useState(e),h=t??d,m=n??f;if(U.useEffect(()=>{h?requestAnimationFrame(()=>{requestAnimationFrame(()=>{r("open")})}):r("")},[h]),!e&&!h)return v.jsx(v.Fragment,{children:!u&&v.jsx(Gg,{setIsOpen:m,isOpen:h,isLoading:c.featureFlags.isLoading})});const p=e?"w-full h-full":Te("fixed bottom-[100px] right-2 md:right-6 mx-auto w-[96dvw] sm:w-auto max-h-[80dvh] sm:max-h-full sm:m-auto sm:mr-0 rounded-lg overflow-hidden shadow-lg","transition-all duration-300 transform",i==="open"?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 translate-y-8 pointer-events-none"),y=e?{}:{bottom:l.render.position?.bottom??"",right:l.render.position?.right??"",zIndex:l.zIndex},g=e?"bg-white rounded-lg flex flex-col h-full w-full overflow-hidden relative":"bg-white rounded-lg flex flex-col h-[80dvh] md:h-[700px] md:max-h-[80dvh] w-full sm:w-[450px] overflow-hidden relative";return v.jsxs(v.Fragment,{children:[!e&&v.jsx(n4,{setIsOpen:m,animationClass:i}),v.jsxs(gc.Provider,{value:o,children:[v.jsx(E3,{}),v.jsx("div",{className:p,style:y,children:v.jsx("div",{className:g,children:v.jsx(xN,{isOpen:h,config:l,setRoomKey:a,livekitRoom:o})})})]},s),!e&&!u&&v.jsx(Gg,{setIsOpen:m,isOpen:h,isLoading:c.featureFlags.isLoading})]})},Yg=Cl({orgId:Ji(),environment:vs(["production","development","local"]).default("production"),render:j_,title:Ji().optional(),defaultMode:vs(tt).optional().default(tt.CHAT),disableTriggerButton:gs().optional().default(!1),isTestSophiie:gs().optional().default(!1),autoOpen:gs().optional().default(!1),welcomeMessage:Ji().optional(),orgLogo:Ji().nullish(),hidePoweredBy:gs().optional().default(!1),zIndex:d_().optional().default(1e4)}),_N=({orgId:e,environment:t})=>{const[n,i]=U.useState(!1),[r,o]=U.useState("Sophiie"),[s,a]=U.useState(!0);return U.useEffect(()=>{(async()=>{try{const l=t==="local"||t==="development"?"dev":"production",u=`${qp(t)}/chatbot/init`,d=await fetch(`${u}?orgId=${e}&environment=${l}`);if(d.ok){const{featureFlags:f,agentName:h}=await d.json();i(f.enableChatbotCall),o(h||"Sophiie")}else console.warn("Failed to fetch chatbot config from API, using defaults"),i(!1),o("Sophiie")}catch(l){console.warn("Failed to fetch chatbot config, using defaults:",l),i(!1),o("Sophiie")}finally{a(!1)}})()},[e,t]),{enableChatbotCall:n,agentName:r,isLoading:s}},Qg=()=>{const{isOpen:e,setIsOpen:t}=Lr(),{config:n}=tn();return v.jsx("div",{className:"fixed inset-0 antialiased pointer-events-none",style:{zIndex:n.zIndex},children:v.jsx(Kg,{isOpen:e,setIsOpen:t})})},Jg=()=>new $C({defaultOptions:{queries:{retry:(e,t)=>t instanceof Error&&t.message.includes("40")?!1:e<2,retryDelay:e=>Math.min(1e3*2**e,5e3),refetchOnWindowFocus:!1,refetchOnReconnect:!1},mutations:{retry:(e,t)=>t instanceof Error&&t.message.includes("40")?!1:e<1,retryDelay:e=>Math.min(1e3*2**e,5e3)}}});let su;const EN=()=>typeof window>"u"?Jg():(su||(su=Jg()),su);function PN({children:e}){const[t]=U.useState(()=>EN());return v.jsx(jC,{client:t,children:e})}const MN=e=>{const t=Yg.parse(e),n=()=>{const o=_r()?U.Fragment:Zp;return v.jsx(o,{children:v.jsx(PN,{children:v.jsx("div",{className:"sophiie-chatbot",children:v.jsx("div",{id:"sophiie-chat","data-sophiie-chat":!0,children:v.jsx(Hp,{config:t,children:v.jsx(i,{children:v.jsx(Qg,{})})})})})})})},i=({children:r})=>{const o=U.useContext(xr),s=U.useMemo(()=>{const a={...o};return a.disableTriggerButton=t.disableTriggerButton,a},[o]);return v.jsx(xr.Provider,{value:s,children:v.jsx(V_,{children:v.jsx("div",{style:t.title?{"--chatbot-title":`"${t.title}"`}:void 0,children:r})})})};return v.jsx(n,{})};st.ChatContainer=Kg,st.ChatPlugin=MN,st.ChatWidget=Qg,st.ChatWidgetProvider=Zp,st.RenderMode=Dr,st.RuntimeProvider=Hp,st.RuntimeStateContext=xr,st.clearChatData=Vc,st.getStoredChatData=Qp,st.saveChatData=Jp,st.sessionStateEnum=qo,st.sophiieChatConfig=Yg,st.useChatWidget=_r,st.useChatbotInit=_N,st.useMessages=m1,st.useRuntimeState=tn,Object.defineProperty(st,Symbol.toStringTag,{value:"Module"})})((void 0)["sophiie-react-chat"]=(void 0)["sophiie-react-chat"]||{},jsxRuntime,React,ReactDOM);
